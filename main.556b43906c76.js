!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=97)}([function(e,t,n){"use strict";e.exports=n(171)},function(e,t,n){var i=n(7),r=n(4),o=n(19),a=n(25),s=n(36),u=function(e,t,n){var l,c,h,f,d=e&u.F,p=e&u.G,m=e&u.S,v=e&u.P,g=e&u.B,y=p?i:m?i[t]||(i[t]={}):(i[t]||{}).prototype,b=p?r:r[t]||(r[t]={}),_=b.prototype||(b.prototype={});p&&(n=t);for(l in n)c=!d&&y&&void 0!==y[l],h=(c?y:n)[l],f=g&&c?s(h,i):v&&"function"==typeof h?s(Function.call,h):h,y&&a(y,l,h,e&u.U),b[l]!=h&&o(b,l,f),v&&_[l]!=h&&(_[l]=h)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var i=n(45)("wks"),r=n(26),o=n(7).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";function i(){}function r(e,t){this.x=e||0,this.y=t||0}function o(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length}function a(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function s(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function u(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length}function l(e,t,n,i,o,a,s,c,h,f){Object.defineProperty(this,"id",{value:Fu++}),this.uuid=Nu.generateUUID(),this.name="",this.image=void 0!==e?e:l.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:l.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ps,this.wrapT=void 0!==i?i:ps,this.magFilter=void 0!==o?o:bs,this.minFilter=void 0!==a?a:ws,this.anisotropy=void 0!==h?h:1,this.format=void 0!==s?s:Ds,this.type=void 0!==c?c:xs,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new u,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:Mu,this.version=0,this.onUpdate=null}function c(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function h(e,t,n){this.width=e,this.height=t,this.scissor=new c(0,0,e,t),this.scissorTest=!1,this.viewport=new c(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=bs),this.texture=new l(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function f(e,t,n){h.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function d(e,t,n,i,r,o,a,s,u,c,h,f){l.call(this,null,o,a,s,u,c,i,r,h,f),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:vs,this.minFilter=void 0!==c?c:vs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function p(e,t){this.min=void 0!==e?e:new s(1/0,1/0,1/0),this.max=void 0!==t?t:new s(-1/0,-1/0,-1/0)}function m(e,t){this.center=void 0!==e?e:new s,this.radius=void 0!==t?t:0}function v(e,t){this.normal=void 0!==e?e:new s(1,0,0),this.constant=void 0!==t?t:0}function g(e,t,n,i,r,o){this.planes=[void 0!==e?e:new v,void 0!==t?t:new v,void 0!==n?n:new v,void 0!==i?i:new v,void 0!==r?r:new v,void 0!==o?o:new v]}function y(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function b(){function e(r,o){!1!==n&&(i(r,o),t.requestAnimationFrame(e))}var t=null,n=!1,i=null;return{start:function(){!0!==n&&null!==i&&(t.requestAnimationFrame(e),n=!0)},stop:function(){n=!1},setAnimationLoop:function(e){i=e},setContext:function(e){t=e}}}function _(e){function t(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();var a=e.FLOAT;return i instanceof Float32Array?a=e.FLOAT:i instanceof Float64Array||(i instanceof Uint16Array?a=e.UNSIGNED_SHORT:i instanceof Int16Array?a=e.SHORT:i instanceof Uint32Array?a=e.UNSIGNED_INT:i instanceof Int32Array?a=e.INT:i instanceof Int8Array?a=e.BYTE:i instanceof Uint8Array&&(a=e.UNSIGNED_BYTE)),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function n(t,n,i){var r=n.array,o=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,e.STATIC_DRAW):-1===o.count?e.bufferSubData(i,0,r):0===o.count||(e.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}function i(e){return e.isInterleavedBufferAttribute&&(e=e.data),a.get(e)}function r(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=a.get(t);n&&(e.deleteBuffer(n.buffer),a.delete(t))}function o(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var r=a.get(e);void 0===r?a.set(e,t(e,i)):r.version<e.version&&(n(r.buffer,e,i),r.version=e.version)}var a=new WeakMap;return{get:i,remove:r,update:o}}function w(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||w.DefaultOrder}function x(){this.mask=1}function M(){function e(){r.setFromEuler(i,!1)}function t(){i.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Vu++}),this.uuid=Nu.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=M.DefaultUp.clone();var n=new s,i=new w,r=new a,l=new s(1,1,1);i.onChange(e),r.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:i},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:l},modelViewMatrix:{value:new o},normalMatrix:{value:new u}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=M.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new x,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function S(){M.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o,this.projectionMatrixInverse=new o}function E(e,t,n,i,r,o){S.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function T(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new s,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new y,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function A(){Object.defineProperty(this,"id",{value:Wu+=2}),this.uuid=Nu.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function C(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function P(e,t,n){C.call(this,new Int8Array(e),t,n)}function O(e,t,n){C.call(this,new Uint8Array(e),t,n)}function L(e,t,n){C.call(this,new Uint8ClampedArray(e),t,n)}function k(e,t,n){C.call(this,new Int16Array(e),t,n)}function I(e,t,n){C.call(this,new Uint16Array(e),t,n)}function R(e,t,n){C.call(this,new Int32Array(e),t,n)}function N(e,t,n){C.call(this,new Uint32Array(e),t,n)}function D(e,t,n){C.call(this,new Float32Array(e),t,n)}function F(e,t,n){C.call(this,new Float64Array(e),t,n)}function U(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function j(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}function B(){Object.defineProperty(this,"id",{value:Hu+=2}),this.uuid=Nu.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function z(e,t,n,i,r,o){A.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new G(e,t,n,i,r,o)),this.mergeVertices()}function G(e,t,n,i,r,o){function a(e,t,n,i,r,o,a,m,v,g,y){var b,_,w=o/v,x=a/g,M=o/2,S=a/2,E=m/2,T=v+1,A=g+1,C=0,P=0,O=new s;for(_=0;_<A;_++){var L=_*x-S;for(b=0;b<T;b++){var k=b*w-M;O[e]=k*i,O[t]=L*r,O[n]=E,c.push(O.x,O.y,O.z),O[e]=0,O[t]=0,O[n]=m>0?1:-1,h.push(O.x,O.y,O.z),f.push(b/v),f.push(1-_/g),C+=1}}for(_=0;_<g;_++)for(b=0;b<v;b++){var I=d+b+T*_,R=d+b+T*(_+1),N=d+(b+1)+T*(_+1),D=d+(b+1)+T*_;l.push(I,R,D),l.push(R,N,D),P+=6}u.addGroup(p,P,y),p+=P,d+=C}B.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var u=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var l=[],c=[],h=[],f=[],d=0,p=0;a("z","y","x",-1,-1,n,t,e,o,r,0),a("z","y","x",1,-1,n,t,-e,o,r,1),a("x","z","y",1,1,e,n,t,i,o,2),a("x","z","y",1,-1,e,n,-t,i,o,3),a("x","y","z",1,-1,e,t,n,i,r,4),a("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(l),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(f,2))}function V(e,t,n,i){A.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new W(e,t,n,i)),this.mergeVertices()}function W(e,t,n,i){B.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},e=e||1,t=t||1;var r,o,a=e/2,s=t/2,u=Math.floor(n)||1,l=Math.floor(i)||1,c=u+1,h=l+1,f=e/u,d=t/l,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(r=0;r<c;r++){var b=r*f-a;m.push(b,-y,0),v.push(0,0,1),g.push(r/u),g.push(1-o/l)}}for(o=0;o<l;o++)for(r=0;r<u;r++){var _=r+c*o,w=r+c*(o+1),x=r+1+c*(o+1),M=r+1+c*o;p.push(_,w,M),p.push(w,x,M)}this.setIndex(p),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(v,3)),this.addAttribute("uv",new D(g,2))}function H(){Object.defineProperty(this,"id",{value:qu++}),this.uuid=Nu.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=xa,this.side=da,this.flatShading=!1,this.vertexColors=ya,this.opacity=1,this.transparent=!1,this.blendSrc=Da,this.blendDst=Fa,this.blendEquation=Aa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=qa,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function q(e){H.call(this),this.type="MeshBasicMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ja,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function X(e){H.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(e.attributes,this.setValues(e))}function Y(e,t){this.origin=void 0!==e?e:new s,this.direction=void 0!==t?t:new s}function K(e,t,n){this.a=void 0!==e?e:new s,this.b=void 0!==t?t:new s,this.c=void 0!==n?n:new s}function Z(e,t){M.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new B,this.material=void 0!==t?t:new q({color:16777215*Math.random()}),this.drawMode=_u,this.updateMorphTargets()}function J(e,t,n,i){function r(t,i,r,h){var f=i.background;null===f?o(l,c):f&&f.isColor&&(o(f,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&f.isCubeTexture?(void 0===u&&(u=new Z(new G(1,1,1),new X({uniforms:Gu.cube.uniforms,vertexShader:Gu.cube.vertexShader,fragmentShader:Gu.cube.fragmentShader,side:pa,depthTest:!0,depthWrite:!1,fog:!1})),u.geometry.removeAttribute("normal"),u.geometry.removeAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(u)),u.material.uniforms.tCube.value=f,t.push(u,u.geometry,u.material,0,null)):f&&f.isTexture&&(void 0===a&&(a=new E(-1,1,1,-1,0,1),s=new Z(new W(2,2),new q({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s)),s.material.map=f,e.renderBufferDirect(a,null,s.geometry,s.material,s,null))}function o(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}var a,s,u,l=new y(0),c=0;return{getClearColor:function(){return l},setClearColor:function(e,t){l.set(e),c=void 0!==t?t:1,o(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,o(l,c)},render:r}}function Q(e,t,n,i){function r(e){s=e}function o(t,i){e.drawArrays(s,t,i),n.update(i,s)}function a(r,o,a){var u;if(i.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return;u[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](s,o,a,r.maxInstancedCount),n.update(a,s,r.maxInstancedCount)}var s;this.setMode=r,this.render=o,this.renderInstances=a}function $(e,t,n){function i(){if(void 0!==o)return o;var n=t.get("EXT_texture_filter_anisotropic");return o=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",u=r(s);u!==s&&(s=u);var l=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:i,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b}}function ee(){function e(){c.value!==i&&(c.value=i,c.needsUpdate=r>0),n.numPlanes=r,n.numIntersection=0}function t(e,t,i,r){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=c.value,!0!==r||null===a){var u=i+4*o,h=t.matrixWorldInverse;l.getNormalMatrix(h),(null===a||a.length<u)&&(a=new Float32Array(u));for(var f=0,d=i;f!==o;++f,d+=4)s.copy(e[f]).applyMatrix4(h,l),s.normal.toArray(a,d),a[d+3]=s.constant}c.value=a,c.needsUpdate=!0}return n.numPlanes=o,a}var n=this,i=null,r=0,o=!1,a=!1,s=new v,l=new u,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==r||o;return o=n,i=t(e,a,0),r=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,u,l,h,f){if(!o||null===n||0===n.length||a&&!u)a?t(null):e();else{var d=a?0:r,p=4*d,m=h.clippingState||null;c.value=m,m=t(n,l,p,f);for(var v=0;v!==p;++v)m[v]=i[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function te(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}}}function ne(e,t,n){function i(e){var r=e.target,o=s[r.id];null!==o.index&&t.remove(o.index);for(var a in o.attributes)t.remove(o.attributes[a]);r.removeEventListener("dispose",i),delete s[r.id];var l=u[o.id];l&&(t.remove(l),delete u[o.id]),n.memory.geometries--}function r(e,t){var r=s[t.id];return r||(t.addEventListener("dispose",i),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new B).setFromObject(e)),r=t._bufferGeometry),s[t.id]=r,n.memory.geometries++,r)}function o(n){var i=n.index,r=n.attributes;null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER);for(var o in r)t.update(r[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)}function a(n){var i=u[n.id];if(i)return i;var r=[],o=n.index,a=n.attributes;if(null!==o)for(var s=o.array,l=0,c=s.length;l<c;l+=3){var h=s[l+0],f=s[l+1],d=s[l+2];r.push(h,f,f,d,d,h)}else for(var s=a.position.array,l=0,c=s.length/3-1;l<c;l+=3){var h=l+0,f=l+1,d=l+2;r.push(h,f,f,d,d,h)}return i=new(j(r)>65535?N:I)(r,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),u[n.id]=i,i}var s={},u={};return{get:r,update:o,getWireframeAttribute:a}}function ie(e,t,n,i){function r(e){u=e}function o(e){l=e.type,c=e.bytesPerElement}function a(t,i){e.drawElements(u,i,l,t*c),n.update(i,u)}function s(r,o,a){var s;if(i.isWebGL2)s=e;else{var s=t.get("ANGLE_instanced_arrays");if(null===s)return}s[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](u,a,l,o*c,r.maxInstancedCount),n.update(a,u,r.maxInstancedCount)}var u,l,c;this.setMode=r,this.setIndex=o,this.render=a,this.renderInstances=s}function re(e){function t(t,n,i){switch(i=i||1,r.calls++,n){case e.TRIANGLES:r.triangles+=i*(t/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:r.triangles+=i*(t-2);break;case e.LINES:r.lines+=i*(t/2);break;case e.LINE_STRIP:r.lines+=i*(t-1);break;case e.LINE_LOOP:r.lines+=i*t;break;case e.POINTS:r.points+=i*t}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}var i={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:i,render:r,programs:null,autoReset:!0,reset:n,update:t}}function oe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ae(e){function t(t,r,o,a){var s=t.morphTargetInfluences,u=s.length,l=n[r.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];n[r.id]=l}for(var h=o.morphTargets&&r.morphAttributes.position,f=o.morphNormals&&r.morphAttributes.normal,c=0;c<u;c++){var d=l[c];0!==d[1]&&(h&&r.removeAttribute("morphTarget"+c),f&&r.removeAttribute("morphNormal"+c))}for(var c=0;c<u;c++){var d=l[c];d[0]=c,d[1]=s[c]}l.sort(oe);for(var c=0;c<8;c++){var d=l[c];if(d){var p=d[0],m=d[1];if(m){h&&r.addAttribute("morphTarget"+c,h[p]),f&&r.addAttribute("morphNormal"+c,f[p]),i[c]=m;continue}}i[c]=0}a.getUniforms().setValue(e,"morphTargetInfluences",i)}var n={},i=new Float32Array(8);return{update:t}}function se(e,t){function n(n){var i=t.render.frame,o=n.geometry,a=e.get(n,o);return r[a.id]!==i&&(o.isGeometry&&a.updateFromObject(n),e.update(a),r[a.id]=i),a}function i(){r={}}var r={};return{update:n,dispose:i}}function ue(e,t,n,i,r,o,a,s,u,c){e=void 0!==e?e:[],t=void 0!==t?t:as,l.call(this,e,t,n,i,r,o,a,s,u,c),this.flipY=!1}function le(){this.seq=[],this.map={}}function ce(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,o=Ku[r];if(void 0===o&&(o=new Float32Array(r),Ku[r]=o),0!==t){i.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function he(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function fe(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function de(e,t){var n=Zu[t];void 0===n&&(n=new Int32Array(t),Zu[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function pe(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function me(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ve(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(he(n,t))return;e.uniform2fv(this.addr,t),fe(n,t)}}function ge(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(he(n,t))return;e.uniform3fv(this.addr,t),fe(n,t)}}function ye(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(he(n,t))return;e.uniform4fv(this.addr,t),fe(n,t)}}function be(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(he(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),fe(n,t)}else{if(he(n,i))return;$u.set(i),e.uniformMatrix2fv(this.addr,!1,$u),fe(n,i)}}function _e(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(he(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),fe(n,t)}else{if(he(n,i))return;Qu.set(i),e.uniformMatrix3fv(this.addr,!1,Qu),fe(n,i)}}function we(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(he(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),fe(n,t)}else{if(he(n,i))return;Ju.set(i),e.uniformMatrix4fv(this.addr,!1,Ju),fe(n,i)}}function xe(e,t,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||Xu,r)}function Me(e,t,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Yu,r)}function Se(e,t){var n=this.cache;he(n,t)||(e.uniform2iv(this.addr,t),fe(n,t))}function Ee(e,t){var n=this.cache;he(n,t)||(e.uniform3iv(this.addr,t),fe(n,t))}function Te(e,t){var n=this.cache;he(n,t)||(e.uniform4iv(this.addr,t),fe(n,t))}function Ae(e){switch(e){case 5126:return pe;case 35664:return ve;case 35665:return ge;case 35666:return ye;case 35674:return be;case 35675:return _e;case 35676:return we;case 35678:case 36198:return xe;case 35680:return Me;case 5124:case 35670:return me;case 35667:case 35671:return Se;case 35668:case 35672:return Ee;case 35669:case 35673:return Te}}function Ce(e,t){var n=this.cache;he(n,t)||(e.uniform1fv(this.addr,t),fe(n,t))}function Pe(e,t){var n=this.cache;he(n,t)||(e.uniform1iv(this.addr,t),fe(n,t))}function Oe(e,t){var n=this.cache,i=ce(t,this.size,2);he(n,i)||(e.uniform2fv(this.addr,i),this.updateCache(i))}function Le(e,t){var n=this.cache,i=ce(t,this.size,3);he(n,i)||(e.uniform3fv(this.addr,i),this.updateCache(i))}function ke(e,t){var n=this.cache,i=ce(t,this.size,4);he(n,i)||(e.uniform4fv(this.addr,i),this.updateCache(i))}function Ie(e,t){var n=this.cache,i=ce(t,this.size,4);he(n,i)||(e.uniformMatrix2fv(this.addr,!1,i),this.updateCache(i))}function Re(e,t){var n=this.cache,i=ce(t,this.size,9);he(n,i)||(e.uniformMatrix3fv(this.addr,!1,i),this.updateCache(i))}function Ne(e,t){var n=this.cache,i=ce(t,this.size,16);he(n,i)||(e.uniformMatrix4fv(this.addr,!1,i),this.updateCache(i))}function De(e,t,n){var i=this.cache,r=t.length,o=de(n,r);!1===he(i,o)&&(e.uniform1iv(this.addr,o),fe(i,o));for(var a=0;a!==r;++a)n.setTexture2D(t[a]||Xu,o[a])}function Fe(e,t,n){var i=this.cache,r=t.length,o=de(n,r);!1===he(i,o)&&(e.uniform1iv(this.addr,o),fe(i,o));for(var a=0;a!==r;++a)n.setTextureCube(t[a]||Yu,o[a])}function Ue(e){switch(e){case 5126:return Ce;case 35664:return Oe;case 35665:return Le;case 35666:return ke;case 35674:return Ie;case 35675:return Re;case 35676:return Ne;case 35678:return De;case 35680:return Fe;case 5124:case 35670:return Pe;case 35667:case 35671:return Se;case 35668:case 35672:return Ee;case 35669:case 35673:return Te}}function je(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Ae(t.type)}function Be(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Ue(t.type)}function ze(e){this.id=e,le.call(this)}function Ge(e,t){e.seq.push(t),e.map[t.id]=t}function Ve(e,t,n){var i=e.name,r=i.length;for(el.lastIndex=0;;){var o=el.exec(i),a=el.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===r){Ge(n,void 0===l?new je(s,e,t):new Be(s,e,t));break}var c=n.map,h=c[s];void 0===h&&(h=new ze(s),Ge(n,h)),n=h}}function We(e,t,n){le.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var o=e.getActiveUniform(t,r);Ve(o,e.getUniformLocation(t,o.name),this)}}function He(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS),e.getShaderInfoLog(i),i}function qe(e){switch(e){case Mu:return["Linear","( value )"];case Su:return["sRGB","( value )"];case Tu:return["RGBE","( value )"];case Cu:return["RGBM","( value, 7.0 )"];case Pu:return["RGBM","( value, 16.0 )"];case Ou:return["RGBD","( value, 256.0 )"];case Eu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Xe(e,t){var n=qe(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ye(e,t){var n=qe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ke(e,t){var n;switch(t){case ts:n="Linear";break;case ns:n="Reinhard";break;case is:n="Uncharted2";break;case rs:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ze(e,t,n){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter($e).join("\n")}function Je(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function Qe(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var o=e.getActiveAttrib(t,r),a=o.name;n[a]=e.getAttribLocation(t,a)}return n}function $e(e){return""!==e}function et(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function tt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function nt(e){function t(e,t){var n=Uu[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return nt(n)}var n=/^[ \t]*#include +<([\w\d.\/]+)>/gm;return e.replace(n,t)}function it(e){function t(e,t,n,i){for(var r="",o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function rt(e,t,n,i,r,o,a){var s=e.context,u=i.defines,l=r.vertexShader,c=r.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===ha?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===fa&&(h="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case as:case ss:f="ENVMAP_TYPE_CUBE";break;case hs:case fs:f="ENVMAP_TYPE_CUBE_UV";break;case us:case ls:f="ENVMAP_TYPE_EQUIREC";break;case cs:f="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ss:case ls:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case Ja:p="ENVMAP_BLENDING_MULTIPLY";break;case Qa:p="ENVMAP_BLENDING_MIX";break;case $a:p="ENVMAP_BLENDING_ADD"}}var m,v,g=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":Ze(i.extensions,o,t),b=Je(u),_=s.createProgram();if(i.isRawShaderMaterial?(m=[b].filter($e).join("\n"),m.length>0&&(m+="\n"),v=[y,b].filter($e).join("\n"),v.length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($e).join("\n"),v=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==es?"#define TONE_MAPPING":"",o.toneMapping!==es?Uu.tonemapping_pars_fragment:"",o.toneMapping!==es?Ke("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Uu.encodings_pars_fragment:"",o.mapEncoding?Xe("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Xe("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Xe("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Ye("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter($e).join("\n")),l=nt(l),l=et(l,o),l=tt(l,o),c=nt(c),c=et(c,o),c=tt(c,o),l=it(l),c=it(c),a.isWebGL2&&!i.isRawShaderMaterial){var w=!1,x=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==l.match(x)&&null!==c.match(x)&&(w=!0,l=l.replace(x,""),c=c.replace(x,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var M=m+l,S=v+c,E=He(s,s.VERTEX_SHADER,M),T=He(s,s.FRAGMENT_SHADER,S);s.attachShader(_,E),s.attachShader(_,T),void 0!==i.index0AttributeName?s.bindAttribLocation(_,0,i.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_);var A=s.getProgramInfoLog(_).trim(),C=s.getShaderInfoLog(E).trim(),P=s.getShaderInfoLog(T).trim(),O=!0,L=!0;!1===s.getProgramParameter(_,s.LINK_STATUS)?O=!1:""!==A||""!==C&&""!==P||(L=!1),L&&(this.diagnostics={runnable:O,material:i,programLog:A,vertexShader:{log:C,prefix:m},fragmentShader:{log:P,prefix:v}}),s.deleteShader(E),s.deleteShader(T);var k;this.getUniforms=function(){return void 0===k&&(k=new We(s,_,e)),k};var I;return this.getAttributes=function(){return void 0===I&&(I=Qe(s,_)),I},this.destroy=function(){s.deleteProgram(_),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}}),this.name=r.name,this.id=tl++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=E,this.fragmentShader=T,this}function ot(e,t,n){function i(e){var t=e.skeleton,i=t.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,o=Math.floor((r-20)/4),a=Math.min(o,i.length);return a<i.length?0:a}function r(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(n=e.texture.encoding):n=Mu,n===Mu&&t&&(n=Eu),n}var o=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,o,s,u,l,c,h){var f=a[t.type],d=h.isSkinnedMesh?i(h):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision),t.precision);var m=e.getRenderTarget();return{shaderID:f,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:r(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:r(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:r(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===hs||t.envMap.mapping===fs),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:r(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Ru,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!u,useFog:t.fog,fogExp:u&&u.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===ma,flipSided:t.side===pa,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var o=0;o<s.length;o++)i.push(n[s[o]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(i,r,a,s){for(var u,l=0,c=o.length;l<c;l++){var h=o[l];if(h.code===s){u=h,++u.usedTimes;break}}return void 0===u&&(u=new rt(e,t,s,i,r,a,n),o.push(u)),u},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},this.programs=o}function at(){function e(e){var t=r.get(e);return void 0===t&&(t={},r.set(e,t)),t}function t(e){r.delete(e)}function n(e,t,n){r.get(e)[t]=n}function i(){r=new WeakMap}var r=new WeakMap;return{get:e,remove:t,update:n,dispose:i}}function st(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ut(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function lt(){function e(){r=0,o.length=0,a.length=0}function t(e,t,n,s,u){var l=i[r];void 0===l?(l={id:e.id,object:e,geometry:t,material:n,program:n.program,renderOrder:e.renderOrder,z:s,group:u},i[r]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=n,l.program=n.program,l.renderOrder=e.renderOrder,l.z=s,l.group=u),(!0===n.transparent?a:o).push(l),r++}function n(){o.length>1&&o.sort(st),a.length>1&&a.sort(ut)}var i=[],r=0,o=[],a=[];return{opaque:o,transparent:a,init:e,push:t,sort:n}}function ct(){function e(e,t){var i=e.id+","+t.id,r=n[i];return void 0===r&&(r=new lt,n[i]=r),r}function t(){n={}}var n={};return{get:e,dispose:t}}function ht(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new s,color:new y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":n={position:new s,direction:new s,color:new y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":n={position:new s,color:new y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new s,skyColor:new y,groundColor:new y};break;case"RectAreaLight":n={color:new y,position:new s,halfWidth:new s,halfHeight:new s}}return e[t.id]=n,n}}}function ft(){function e(e,o,s){for(var u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,v=s.matrixWorldInverse,g=0,y=e.length;g<y;g++){var b=e[g],_=b.color,w=b.intensity,x=b.distance,M=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=_.r*w,l+=_.g*w,c+=_.b*w;else if(b.isDirectionalLight){var S=t.get(b);if(S.color.copy(b.color).multiplyScalar(b.intensity),S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(v),S.shadow=b.castShadow,b.castShadow){var E=b.shadow;S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize}n.directionalShadowMap[h]=M,n.directionalShadowMatrix[h]=b.shadow.matrix,n.directional[h]=S,h++}else if(b.isSpotLight){var S=t.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.color.copy(_).multiplyScalar(w),S.distance=x,S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(v),S.coneCos=Math.cos(b.angle),S.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),S.decay=0===b.distance?0:b.decay,S.shadow=b.castShadow,b.castShadow){var E=b.shadow;S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize}n.spotShadowMap[d]=M,n.spotShadowMatrix[d]=b.shadow.matrix,n.spot[d]=S,d++}else if(b.isRectAreaLight){var S=t.get(b);S.color.copy(_).multiplyScalar(w),S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),a.identity(),r.copy(b.matrixWorld),r.premultiply(v),a.extractRotation(r),S.halfWidth.set(.5*b.width,0,0),S.halfHeight.set(0,.5*b.height,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),n.rectArea[p]=S,p++}else if(b.isPointLight){var S=t.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.color.copy(b.color).multiplyScalar(b.intensity),S.distance=b.distance,S.decay=0===b.distance?0:b.decay,S.shadow=b.castShadow,b.castShadow){var E=b.shadow;S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize,S.shadowCameraNear=E.camera.near,S.shadowCameraFar=E.camera.far}n.pointShadowMap[f]=M,n.pointShadowMatrix[f]=b.shadow.matrix,n.point[f]=S,f++}else if(b.isHemisphereLight){var S=t.get(b);S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),S.direction.normalize(),S.skyColor.copy(b.color).multiplyScalar(w),S.groundColor.copy(b.groundColor).multiplyScalar(w),n.hemi[m]=S,m++}}n.ambient[0]=u,n.ambient[1]=l,n.ambient[2]=c,n.directional.length=h,n.spot.length=d,n.rectArea.length=p,n.point.length=f,n.hemi.length=m,n.hash.stateID=n.id,n.hash.directionalLength=h,n.hash.pointLength=f,n.hash.spotLength=d,n.hash.rectAreaLength=p,n.hash.hemiLength=m,n.hash.shadowsLength=o.length}var t=new ht,n={id:nl++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new s,r=new o,a=new o;return{setup:e,state:n}}function dt(){function e(){o.length=0,a.length=0}function t(e){o.push(e)}function n(e){a.push(e)}function i(e){r.setup(o,a,e)}var r=new ft,o=[],a=[];return{init:e,state:{lightsArray:o,shadowsArray:a,lights:r},setupLights:i,pushLight:t,pushShadow:n}}function pt(){function e(e,t){var i;return void 0===n[e.id]?(i=new dt,n[e.id]={},n[e.id][t.id]=i):void 0===n[e.id][t.id]?(i=new dt,n[e.id][t.id]=i):i=n[e.id][t.id],i}function t(){n={}}var n={};return{get:e,dispose:t}}function mt(e){H.call(this),this.type="MeshDepthMaterial",this.depthPacking=Lu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function vt(e){H.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new s,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function gt(e,t,n){function i(t,n,i,r,o,a){var s=t.geometry,u=null,l=_,c=t.customDepthMaterial;if(i&&(l=w,c=t.customDistanceMaterial),c)u=c;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&n.skinning;var f=t.isSkinnedMesh&&n.skinning,d=0;h&&(d|=v),f&&(d|=y),u=l[d]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var p=u.uuid,m=n.uuid,g=x[p];void 0===g&&(g={},x[p]=g);var b=g[m];void 0===b&&(b=u.clone(),g[m]=b),u=b}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:M[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,i&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(r),u.nearDistance=o,u.farDistance=a),u}function a(n,r,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||u.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=t.update(n),c=n.material;if(Array.isArray(c))for(var h=l.groups,f=0,d=h.length;f<d;f++){var p=h[f],v=c[p.materialIndex];if(v&&v.visible){var g=i(n,v,s,m,o.near,o.far);e.renderBufferDirect(o,null,l,g,n,p)}}else if(c.visible){var g=i(n,c,s,m,o.near,o.far);e.renderBufferDirect(o,null,l,g,n,null)}}for(var y=n.children,b=0,_=y.length;b<_;b++)a(y[b],r,o,s)}}for(var u=new g,l=new o,f=new r,d=new r(n,n),p=new s,m=new s,v=1,y=2,b=1+(v|y),_=new Array(b),w=new Array(b),x={},M={0:pa,1:da,2:ma},S=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],E=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],T=[new c,new c,new c,new c,new c,new c],A=0;A!==b;++A){var C=0!==(A&v),P=0!==(A&y),O=new mt({depthPacking:ku,morphTargets:C,skinning:P});_[A]=O;var L=new vt({morphTargets:C,skinning:P});w[A]=L}var k=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ha,this.render=function(t,n,i){if(!1!==k.enabled&&(!1!==k.autoUpdate||!1!==k.needsUpdate)&&0!==t.length){var r=e.context,o=e.state;o.disable(r.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,c=0,v=t.length;c<v;c++){var g=t[c],y=g.shadow,b=g&&g.isPointLight;if(void 0!==y){var _=y.camera;if(f.copy(y.mapSize),f.min(d),b){var w=f.x,x=f.y;T[0].set(2*w,x,w,x),T[1].set(0,x,w,x),T[2].set(3*w,x,w,x),T[3].set(w,x,w,x),T[4].set(3*w,0,w,x),T[5].set(w,0,w,x),f.x*=4,f.y*=2}if(null===y.map){var M={minFilter:vs,magFilter:vs,format:Ds};y.map=new h(f.x,f.y,M),y.map.texture.name=g.name+".shadowMap",_.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(g);var A=y.map,C=y.matrix;m.setFromMatrixPosition(g.matrixWorld),_.position.copy(m),b?(s=6,C.makeTranslation(-m.x,-m.y,-m.z)):(s=1,p.setFromMatrixPosition(g.target.matrixWorld),_.lookAt(p),_.updateMatrixWorld(),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(_.projectionMatrix),C.multiply(_.matrixWorldInverse)),e.setRenderTarget(A),e.clear();for(var P=0;P<s;P++){if(b){p.copy(_.position),p.add(S[P]),_.up.copy(E[P]),_.lookAt(p),_.updateMatrixWorld();var O=T[P];o.viewport(O)}l.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),u.setFromMatrix(l),a(n,i,_,b)}}}k.needsUpdate=!1}}}function yt(e,t,n,i){function r(){var t=!1,n=new c,i=null,r=new c(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}}function o(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?d(e.DEPTH_TEST):p(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case Va:e.depthFunc(e.NEVER);break;case Wa:e.depthFunc(e.ALWAYS);break;case Ha:e.depthFunc(e.LESS);break;case qa:e.depthFunc(e.LEQUAL);break;case Xa:e.depthFunc(e.EQUAL);break;case Ya:e.depthFunc(e.GEQUAL);break;case Ka:e.depthFunc(e.GREATER);break;case Za:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function a(){var t=!1,n=null,i=null,r=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?d(e.STENCIL_TEST):p(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&o===a||(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){a===t&&s===n&&u===i||(e.stencilOp(t,n,i),a=t,s=n,u=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,u=null,l=null}}}function s(t,n,i){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<i;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}function u(){for(var e=0,t=N.length;e<t;e++)N[e]=0}function l(e){h(e,0)}function h(n,r){if(N[n]=1,0===D[n]&&(e.enableVertexAttribArray(n),D[n]=1),F[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),F[n]=r}}function f(){for(var t=0,n=D.length;t!==n;++t)D[t]!==N[t]&&(e.disableVertexAttribArray(t),D[t]=0)}function d(t){!0!==U[t]&&(e.enable(t),U[t]=!0)}function p(t){!1!==U[t]&&(e.disable(t),U[t]=!1)}function m(){if(null===j&&(j=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)j.push(n[i]);return j}function v(t){return B!==t&&(e.useProgram(t),B=t,!0)}function g(t,i,r,o,a,s,u,l){if(t===wa)return void(z&&(p(e.BLEND),z=!1));if(z||(d(e.BLEND),z=!0),t===Ta)a=a||i,s=s||r,u=u||o,i===V&&a===q||(e.blendEquationSeparate(n.convert(i),n.convert(a)),V=i,q=a),r===W&&o===H&&s===X&&u===Y||(e.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(s),n.convert(u)),W=r,H=o,X=s,Y=u),G=t,K=null;else if(t!==G||l!==K){if(V===Aa&&q===Aa||(e.blendEquation(e.FUNC_ADD),V=Aa,q=Aa),l)switch(t){case xa:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Ma:e.blendFunc(e.ONE,e.ONE);break;case Sa:e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case Ea:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else switch(t){case xa:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Ma:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case Sa:e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR);break;case Ea:e.blendFunc(e.ZERO,e.SRC_COLOR)}W=null,H=null,X=null,Y=null,G=t,K=l}}function y(t,n){t.side===ma?p(e.CULL_FACE):d(e.CULL_FACE);var i=t.side===pa;n&&(i=!i),b(i),t.blending===xa&&!1===t.transparent?g(wa):g(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),k.setFunc(t.depthFunc),k.setTest(t.depthTest),k.setMask(t.depthWrite),L.setMask(t.colorWrite),x(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function b(t){Z!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),Z=t)}function _(t){t!==ra?(d(e.CULL_FACE),t!==J&&(t===oa?e.cullFace(e.BACK):t===aa?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):p(e.CULL_FACE),J=t}function w(t){t!==Q&&(ne&&e.lineWidth(t),Q=t)}function x(t,n,i){t?(d(e.POLYGON_OFFSET_FILL),$===n&&ee===i||(e.polygonOffset(n,i),$=n,ee=i)):p(e.POLYGON_OFFSET_FILL)}function M(t){t?d(e.SCISSOR_TEST):p(e.SCISSOR_TEST)}function S(t){void 0===t&&(t=e.TEXTURE0+te-1),oe!==t&&(e.activeTexture(t),oe=t)}function E(t,n){null===oe&&S();var i=ae[oe];void 0===i&&(i={type:void 0,texture:void 0},ae[oe]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||le[t]),i.type=t,i.texture=n)}function T(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){}}function A(){try{e.texImage2D.apply(e,arguments)}catch(e){}}function C(t){!1===se.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),se.copy(t))}function P(t){!1===ue.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ue.copy(t))}function O(){for(var t=0;t<D.length;t++)1===D[t]&&(e.disableVertexAttribArray(t),D[t]=0);U={},j=null,oe=null,ae={},B=null,G=null,Z=null,J=null,L.reset(),k.reset(),I.reset()}var L=new r,k=new o,I=new a,R=e.getParameter(e.MAX_VERTEX_ATTRIBS),N=new Uint8Array(R),D=new Uint8Array(R),F=new Uint8Array(R),U={},j=null,B=null,z=null,G=null,V=null,W=null,H=null,q=null,X=null,Y=null,K=!1,Z=null,J=null,Q=null,$=null,ee=null,te=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ne=!1,ie=0,re=e.getParameter(e.VERSION);-1!==re.indexOf("WebGL")?(ie=parseFloat(/^WebGL\ ([0-9])/.exec(re)[1]),ne=ie>=1):-1!==re.indexOf("OpenGL ES")&&(ie=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(re)[1]),ne=ie>=2);var oe=null,ae={},se=new c,ue=new c,le={};return le[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),le[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),L.setClear(0,0,0,1),k.setClear(1),I.setClear(0),d(e.DEPTH_TEST),k.setFunc(qa),b(!1),_(oa),d(e.CULL_FACE),g(wa),{buffers:{color:L,depth:k,stencil:I},initAttributes:u,enableAttribute:l,enableAttributeAndDivisor:h,disableUnusedAttributes:f,enable:d,disable:p,getCompressedTextureFormats:m,useProgram:v,setBlending:g,setMaterial:y,setFlipSided:b,setCullFace:_,setLineWidth:w,setPolygonOffset:x,setScissorTest:M,activeTexture:S,bindTexture:E,compressedTexImage2D:T,texImage2D:A,scissor:C,viewport:P,reset:O}}function bt(e,t,n,i,r,o,a){function s(e,t){if(e.width>t||e.height>t){if("data"in e)return;var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n);return i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),i}return e}function u(e){return Nu.isPowerOfTwo(e.width)&&Nu.isPowerOfTwo(e.height)}function l(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){void 0===L&&(L=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),L.width=Nu.floorPowerOfTwo(e.width),L.height=Nu.floorPowerOfTwo(e.height);return L.getContext("2d").drawImage(e,0,0,L.width,L.height),L}return e}function c(e){return!r.isWebGL2&&(e.wrapS!==ps||e.wrapT!==ps||e.minFilter!==vs&&e.minFilter!==bs)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==vs&&e.minFilter!==bs}function f(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function d(t,n){if(!r.isWebGL2)return t;if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function p(t){return t===vs||t===gs||t===ys?e.NEAREST:e.LINEAR}function m(e){var t=e.target;t.removeEventListener("dispose",m),g(t),t.isVideoTexture&&delete k[t.id],a.memory.textures--}function v(e){var t=e.target;t.removeEventListener("dispose",v),y(t),a.memory.textures--}function g(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.remove(t)}function y(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}}function b(t,r){var o=i.get(t);if(t.isVideoTexture&&O(t),t.version>0&&o.__version!==t.version){var a=t.image;if(void 0===a);else if(!1!==a.complete)return void M(o,t,r)}n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function _(t,l){var c=i.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",m),c.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var p=t&&t.isCompressedTexture,v=t.image[0]&&t.image[0].isDataTexture,g=[],y=0;y<6;y++)g[y]=p||v?v?t.image[y].image:t.image[y]:s(t.image[y],r.maxCubemapSize);var b=g[0],_=u(b),w=o.convert(t.format),M=o.convert(t.type),S=d(w,M);x(e.TEXTURE_CUBE_MAP,t,_);for(var y=0;y<6;y++)if(p)for(var E,T=g[y].mipmaps,A=0,C=T.length;A<C;A++)E=T[A],t.format!==Ds&&t.format!==Ns?n.getCompressedTextureFormats().indexOf(w)>-1&&n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,A,S,E.width,E.height,0,E.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,A,S,E.width,E.height,0,w,M,E.data);else v?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,S,g[y].width,g[y].height,0,w,M,g[y].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,S,w,M,g[y]);c.__maxMipLevel=p?T.length-1:0,h(t,_)&&f(e.TEXTURE_CUBE_MAP,t,b.width,b.height),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function w(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)}function x(n,a,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS!==ps||a.wrapT,e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(a.minFilter)),a.minFilter!==vs&&a.minFilter),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===Cs&&null===t.get("OES_texture_float_linear"))return;if(a.type===Ps&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function M(t,i,p){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var v=s(i.image,r.maxTextureSize);c(i)&&!1===u(v)&&(v=l(v));var g=u(v),y=o.convert(i.format),b=o.convert(i.type),_=d(y,b);x(e.TEXTURE_2D,i,g);var w,M=i.mipmaps;if(i.isDepthTexture){if(_=e.DEPTH_COMPONENT,i.type===Cs){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else r.isWebGL2&&(_=e.DEPTH_COMPONENT16);i.format===Bs&&_===e.DEPTH_COMPONENT&&i.type!==Es&&i.type!==As&&(i.type=Es,b=o.convert(i.type)),i.format===zs&&(_=e.DEPTH_STENCIL,i.type!==Is&&(i.type=Is,b=o.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,_,v.width,v.height,0,y,b,null)}else if(i.isDataTexture)if(M.length>0&&g){for(var S=0,E=M.length;S<E;S++)w=M[S],n.texImage2D(e.TEXTURE_2D,S,_,w.width,w.height,0,y,b,w.data);i.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else n.texImage2D(e.TEXTURE_2D,0,_,v.width,v.height,0,y,b,v.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(var S=0,E=M.length;S<E;S++)w=M[S],i.format!==Ds&&i.format!==Ns?n.getCompressedTextureFormats().indexOf(y)>-1&&n.compressedTexImage2D(e.TEXTURE_2D,S,_,w.width,w.height,0,w.data):n.texImage2D(e.TEXTURE_2D,S,_,w.width,w.height,0,y,b,w.data);t.__maxMipLevel=M.length-1}else if(M.length>0&&g){for(var S=0,E=M.length;S<E;S++)w=M[S],n.texImage2D(e.TEXTURE_2D,S,_,y,b,w);i.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else n.texImage2D(e.TEXTURE_2D,0,_,y,b,v),t.__maxMipLevel=0;h(i,g)&&f(e.TEXTURE_2D,i,v.width,v.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function S(t,r,a,s){var u=o.convert(r.texture.format),l=o.convert(r.texture.type),c=d(u,l);n.texImage2D(s,0,c,r.width,r.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function E(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),b(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Bs)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==zs)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}function A(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");T(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),E(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),E(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function C(t){var r=i.get(t),o=i.get(t.texture);t.addEventListener("dispose",v),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,l=u(t);if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),x(e.TEXTURE_CUBE_MAP,t.texture,l);for(var c=0;c<6;c++)S(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);h(t.texture,l)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),x(e.TEXTURE_2D,t.texture,l),S(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,l)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&A(t)}function P(t){var r=t.texture;if(h(r,u(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(r).__webglTexture;n.bindTexture(o,a),f(o,r,t.width,t.height),n.bindTexture(o,null)}}function O(e){var t=e.id,n=a.render.frame;k[t]!==n&&(k[t]=n,e.update())}var L,k={};this.setTexture2D=b,this.setTextureCube=_,this.setTextureCubeDynamic=w,this.setupRenderTarget=C,this.updateRenderTargetMipmap=P}function _t(e,t,n){function i(i){var r;if(i===ds)return e.REPEAT;if(i===ps)return e.CLAMP_TO_EDGE;if(i===ms)return e.MIRRORED_REPEAT;if(i===vs)return e.NEAREST;if(i===gs)return e.NEAREST_MIPMAP_NEAREST;if(i===ys)return e.NEAREST_MIPMAP_LINEAR;if(i===bs)return e.LINEAR;if(i===_s)return e.LINEAR_MIPMAP_NEAREST;if(i===ws)return e.LINEAR_MIPMAP_LINEAR;if(i===xs)return e.UNSIGNED_BYTE;if(i===Os)return e.UNSIGNED_SHORT_4_4_4_4;if(i===Ls)return e.UNSIGNED_SHORT_5_5_5_1;if(i===ks)return e.UNSIGNED_SHORT_5_6_5;if(i===Ms)return e.BYTE;if(i===Ss)return e.SHORT;if(i===Es)return e.UNSIGNED_SHORT;if(i===Ts)return e.INT;if(i===As)return e.UNSIGNED_INT;if(i===Cs)return e.FLOAT;if(i===Ps){if(n.isWebGL2)return e.HALF_FLOAT;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(i===Rs)return e.ALPHA;if(i===Ns)return e.RGB;if(i===Ds)return e.RGBA;if(i===Fs)return e.LUMINANCE;if(i===Us)return e.LUMINANCE_ALPHA;if(i===Bs)return e.DEPTH_COMPONENT;if(i===zs)return e.DEPTH_STENCIL;if(i===Aa)return e.FUNC_ADD;if(i===Ca)return e.FUNC_SUBTRACT;if(i===Pa)return e.FUNC_REVERSE_SUBTRACT;if(i===ka)return e.ZERO;if(i===Ia)return e.ONE;if(i===Ra)return e.SRC_COLOR;if(i===Na)return e.ONE_MINUS_SRC_COLOR;if(i===Da)return e.SRC_ALPHA;if(i===Fa)return e.ONE_MINUS_SRC_ALPHA;if(i===Ua)return e.DST_ALPHA;if(i===ja)return e.ONE_MINUS_DST_ALPHA;if(i===Ba)return e.DST_COLOR;if(i===za)return e.ONE_MINUS_DST_COLOR;if(i===Ga)return e.SRC_ALPHA_SATURATE;if((i===Gs||i===Vs||i===Ws||i===Hs)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(i===Gs)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Vs)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ws)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Hs)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((i===qs||i===Xs||i===Ys||i===Ks)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(i===qs)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Xs)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ys)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Ks)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Zs&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((i===Js||i===Qs||i===$s||i===eu||i===tu||i===nu||i===iu||i===ru||i===ou||i===au||i===su||i===uu||i===lu||i===cu)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return i;if(i===Oa||i===La){if(n.isWebGL2){if(i===Oa)return e.MIN;if(i===La)return e.MAX}if(null!==(r=t.get("EXT_blend_minmax"))){if(i===Oa)return r.MIN_EXT;if(i===La)return r.MAX_EXT}}if(i===Is){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:i}}function wt(){M.call(this),this.type="Group"}function xt(e,t,n,i){S.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Mt(e){xt.call(this),this.cameras=e||[]}function St(e){function t(){return null!==l&&!0===l.isPresenting}function n(){if(t()){var n=l.getEyeParameters("left"),i=n.renderWidth,r=n.renderHeight;E=e.getPixelRatio(),S=e.getSize(),e.setDrawingBufferSize(2*i,r,1),A.start()}else u.enabled&&e.setDrawingBufferSize(S.width,S.height,E),A.stop()}function i(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=t.length;n<r;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(i===e)return o;i++}}}function r(){for(var e=0;e<d.length;e++){var t=d[e],n=i(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(p),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var o="Daydream Controller"===n.id?0:1;T[e]!==n.buttons[o].pressed&&(T[e]=n.buttons[o].pressed,!0===T[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}var u=this,l=null,h=null,f=null,d=[],p=new o,m=new o,v="stage";"undefined"!==typeof window&&"VRFrameData"in window&&(h=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",n,!1));var g=new o,y=new a,_=new s,w=new xt;w.bounds=new c(0,0,.5,1),w.layers.enable(1);var x=new xt;x.bounds=new c(.5,0,.5,1),x.layers.enable(2);var M=new Mt([w,x]);M.layers.enable(1),M.layers.enable(2);var S,E,T=[];this.enabled=!1,this.getController=function(e){var t=d[e];return void 0===t&&(t=new wt,t.matrixAutoUpdate=!1,t.visible=!1,d[e]=t),t},this.getDevice=function(){return l},this.setDevice=function(e){void 0!==e&&(l=e),A.setContext(e)},this.setFrameOfReferenceType=function(e){v=e},this.setPoseTarget=function(e){void 0!==e&&(f=e)},this.getCamera=function(e){var t="stage"===v?1.6:0;if(null===l)return e.position.set(0,t,0),e;if(l.depthNear=e.near,l.depthFar=e.far,l.getFrameData(h),"stage"===v){var n=l.stageParameters;n?p.fromArray(n.sittingToStandingTransform):p.makeTranslation(0,t,0)}var i=h.pose,o=null!==f?f:e;if(o.matrix.copy(p),o.matrix.decompose(o.position,o.quaternion,o.scale),null!==i.orientation&&(y.fromArray(i.orientation),o.quaternion.multiply(y)),null!==i.position&&(y.setFromRotationMatrix(p),_.fromArray(i.position),_.applyQuaternion(y),o.position.add(_)),o.updateMatrixWorld(),!1===l.isPresenting)return e;w.near=e.near,x.near=e.near,w.far=e.far,x.far=e.far,M.matrixWorld.copy(e.matrixWorld),M.matrixWorldInverse.copy(e.matrixWorldInverse),w.matrixWorldInverse.fromArray(h.leftViewMatrix),x.matrixWorldInverse.fromArray(h.rightViewMatrix),m.getInverse(p),"stage"===v&&(w.matrixWorldInverse.multiply(m),x.matrixWorldInverse.multiply(m));var a=o.parent;null!==a&&(g.getInverse(a.matrixWorld),w.matrixWorldInverse.multiply(g),x.matrixWorldInverse.multiply(g)),w.matrixWorld.getInverse(w.matrixWorldInverse),x.matrixWorld.getInverse(x.matrixWorldInverse),w.projectionMatrix.fromArray(h.leftProjectionMatrix),x.projectionMatrix.fromArray(h.rightProjectionMatrix),M.projectionMatrix.copy(w.projectionMatrix);var s=l.getLayers();if(s.length){var u=s[0];null!==u.leftBounds&&4===u.leftBounds.length&&w.bounds.fromArray(u.leftBounds),null!==u.rightBounds&&4===u.rightBounds.length&&x.bounds.fromArray(u.rightBounds)}return r(),M},this.getStandingMatrix=function(){return p},this.isPresenting=t;var A=new b;this.setAnimationLoop=function(e){A.setAnimationLoop(e)},this.submitFrame=function(){t()&&l.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",n)}}function Et(e){function t(){return null!==u&&null!==l}function n(e){var t=d[p.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function i(){e.setFramebuffer(null),_.stop()}function r(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}function o(e,t){if(null!==(f=t.getDevicePose(l)))for(var n=u.baseLayer,i=t.views,r=0;r<i.length;r++){var o=i[r],a=n.getViewport(o),s=f.getViewMatrix(o),c=g.cameras[r];c.matrix.fromArray(s).getInverse(c.matrix),c.projectionMatrix.fromArray(o.projectionMatrix),c.viewport.set(a.x,a.y,a.width,a.height),0===r&&(g.matrix.copy(c.matrix),g.projectionMatrix.copy(c.projectionMatrix))}for(var r=0;r<d.length;r++){var h=d[r],m=p[r];if(m){var v=t.getInputPose(m,l);if(null!==v){"targetRay"in v?h.matrix.elements=v.targetRay.transformMatrix:"pointerMatrix"in v&&(h.matrix.elements=v.pointerMatrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.visible=!0;continue}}h.visible=!1}y&&y(e)}var a=e.context,s=null,u=null,l=null,h="stage",f=null,d=[],p=[],m=new xt;m.layers.enable(1),m.viewport=new c;var v=new xt;v.layers.enable(2),v.viewport=new c;var g=new Mt([m,v]);g.layers.enable(1),g.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=d[e];return void 0===t&&(t=new wt,t.matrixAutoUpdate=!1,t.visible=!1,d[e]=t),t},this.getDevice=function(){return s},this.setDevice=function(e){void 0!==e&&(s=e),e instanceof XRDevice&&a.setCompatibleXRDevice(e)},this.setFrameOfReferenceType=function(e){h=e},this.setSession=function(t){null!==(u=t)&&(u.addEventListener("select",n),u.addEventListener("selectstart",n),u.addEventListener("selectend",n),u.addEventListener("end",i),u.baseLayer=new XRWebGLLayer(u,a),u.requestFrameOfReference(h).then(function(t){l=t,e.setFramebuffer(u.baseLayer.framebuffer),_.setContext(u),_.start()}),p=u.getInputSources(),u.addEventListener("inputsourceschange",function(){p=u.getInputSources()}))},this.getCamera=function(e){if(t()){var n=e.parent,i=g.cameras;r(g,n);for(var o=0;o<i.length;o++)r(i[o],n);e.matrixWorld.copy(g.matrixWorld);for(var a=e.children,o=0,s=a.length;o<s;o++)a[o].updateMatrixWorld(!0);return g}return e},this.isPresenting=t;var y=null,_=new b;_.setAnimationLoop(o),this.setAnimationLoop=function(e){y=e},this.dispose=function(){},this.getStandingMatrix=function(){return new THREE.Matrix4},this.submitFrame=function(){}}function Tt(e){function t(){return null===ce?xe:1}function n(){Ie=new te(Z),Re=new $(Z,Ie,e),Re.isWebGL2||(Ie.get("WEBGL_depth_texture"),Ie.get("OES_texture_float"),Ie.get("OES_texture_half_float"),Ie.get("OES_texture_half_float_linear"),Ie.get("OES_standard_derivatives"),Ie.get("OES_element_index_uint"),Ie.get("ANGLE_instanced_arrays")),Ie.get("OES_texture_float_linear"),Ze=new _t(Z,Ie,Re),Ne=new yt(Z,Ie,Ze,Re),Ne.scissor(ge.copy(Se).multiplyScalar(xe)),Ne.viewport(ve.copy(Me).multiplyScalar(xe)),De=new re(Z),Fe=new at,Ue=new bt(Z,Ie,Ne,Fe,Re,Ze,De),je=new _(Z),Be=new ne(Z,je,De),ze=new se(Be,De),Xe=new ae(Z),Ge=new ot(oe,Ie,Re),Ve=new ct,He=new pt,qe=new J(oe,Ne,ze,H),Ye=new Q(Z,Ie,De,Re),Ke=new ie(Z,Ie,De,Re),De.programs=Ge.programs,oe.context=Z,oe.capabilities=Re,oe.extensions=Ie,oe.properties=Fe,oe.renderLists=Ve,oe.state=Ne,oe.info=De}function i(e){e.preventDefault(),ue=!0}function r(){ue=!1,n()}function a(e){var t=e.target;t.removeEventListener("dispose",a),u(t)}function u(e){l(e),Fe.remove(e)}function l(e){var t=Fe.get(e).program;e.program=void 0,void 0!==t&&Ge.releaseProgram(t)}function h(e,t){e.render(function(e){oe.renderBufferImmediate(e,t)})}function f(e,t,n){if(!(n&&n.isInstancedBufferGeometry&!Re.isWebGL2&&null===Ie.get("ANGLE_instanced_arrays"))){Ne.initAttributes();var i=n.attributes,r=t.getAttributes(),o=e.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var u=i[a];if(void 0!==u){var l=u.normalized,c=u.itemSize,h=je.get(u);if(void 0===h)continue;var f=h.buffer,d=h.type,p=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var m=u.data,v=m.stride,g=u.offset;m&&m.isInstancedInterleavedBuffer?(Ne.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):Ne.enableAttribute(s),Z.bindBuffer(Z.ARRAY_BUFFER,f),Z.vertexAttribPointer(s,c,d,l,v*p,g*p)}else u.isInstancedBufferAttribute?(Ne.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):Ne.enableAttribute(s),Z.bindBuffer(Z.ARRAY_BUFFER,f),Z.vertexAttribPointer(s,c,d,l,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:Z.vertexAttrib2fv(s,y);break;case 3:Z.vertexAttrib3fv(s,y);break;case 4:Z.vertexAttrib4fv(s,y);break;default:Z.vertexAttrib1fv(s,y)}}}}Ne.disableUnusedAttributes()}}function p(e){Je.isPresenting()||$e&&$e(e)}function m(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)K.pushLight(e),e.castShadow&&K.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Te.intersectsSprite(e)){n&&Le.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Oe);var i=ze.update(e),r=e.material;Y.push(e,i,r,Le.z,null)}}else if(e.isImmediateRenderObject)n&&Le.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Oe),Y.push(e,null,e.material,Le.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Te.intersectsObject(e))){n&&Le.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Oe);var i=ze.update(e),r=e.material;if(Array.isArray(r))for(var o=i.groups,a=0,s=o.length;a<s;a++){var u=o[a],l=r[u.materialIndex];l&&l.visible&&Y.push(e,i,l,Le.z,u)}else r.visible&&Y.push(e,i,r,Le.z,null)}for(var c=e.children,a=0,s=c.length;a<s;a++)m(c[a],t,n)}}function v(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r],s=a.object,u=a.geometry,l=void 0===i?a.material:i,c=a.group;if(n.isArrayCamera){me=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f];if(s.layers.test(p.layers)){if("viewport"in p)Ne.viewport(ve.copy(p.viewport));else{var m=p.bounds,v=m.x*_e,g=m.y*we,b=m.z*_e,_=m.w*we;Ne.viewport(ve.set(v,g,b,_).multiplyScalar(xe))}K.setupLights(p),y(s,t,p,u,l,c)}}}else me=null,y(s,t,n,u,l,c)}}function y(e,t,n,i,r,o){if(e.onBeforeRender(oe,t,n,i,r,o),K=He.get(t,me||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){Ne.setMaterial(r);var a=x(n,t.fog,r,e);de.geometry=null,de.program=null,de.wireframe=!1,h(e,a)}else oe.renderBufferDirect(n,t.fog,i,r,e,o);e.onAfterRender(oe,t,n,i,r,o),K=He.get(t,me||n)}function w(e,t,n){var i=Fe.get(e),r=K.state.lights,o=K.state.shadowsArray,s=i.lightsHash,u=r.state.hash,c=Ge.getParameters(e,r.state,o,t,Ae.numPlanes,Ae.numIntersection,n),h=Ge.getProgramCode(e,c),f=i.program,d=!0;if(void 0===f)e.addEventListener("dispose",a);else if(f.code!==h)l(e);else if(s.stateID!==u.stateID||s.directionalLength!==u.directionalLength||s.pointLength!==u.pointLength||s.spotLength!==u.spotLength||s.rectAreaLength!==u.rectAreaLength||s.hemiLength!==u.hemiLength||s.shadowsLength!==u.shadowsLength)s.stateID=u.stateID,s.directionalLength=u.directionalLength,s.pointLength=u.pointLength,s.spotLength=u.spotLength,s.rectAreaLength=u.rectAreaLength,s.hemiLength=u.hemiLength,s.shadowsLength=u.shadowsLength,d=!1;else{if(void 0!==c.shaderID)return;d=!1}if(d){if(c.shaderID){var p=Gu[c.shaderID];i.shader={name:e.type,uniforms:ju.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,oe),h=Ge.getProgramCode(e,c),f=Ge.acquireProgram(e,i.shader,c,h),i.program=f,e.program=f}var m=f.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var v=0;v<oe.maxMorphTargets;v++)m["morphTarget"+v]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var v=0;v<oe.maxMorphNormals;v++)m["morphNormal"+v]>=0&&e.numSupportedMorphNormals++}var g=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=Ae.numPlanes,i.numIntersection=Ae.numIntersection,g.clippingPlanes=Ae.uniform),i.fog=t,void 0===s&&(i.lightsHash=s={}),s.stateID=u.stateID,s.directionalLength=u.directionalLength,s.pointLength=u.pointLength,s.spotLength=u.spotLength,s.rectAreaLength=u.rectAreaLength,s.hemiLength=u.hemiLength,s.shadowsLength=u.shadowsLength,e.lights&&(g.ambientLightColor.value=r.state.ambient,g.directionalLights.value=r.state.directional,g.spotLights.value=r.state.spot,g.rectAreaLights.value=r.state.rectArea,g.pointLights.value=r.state.point,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotShadowMatrix.value=r.state.spotShadowMatrix,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var y=i.program.getUniforms(),b=We.seqWithValue(y.seq,g);i.uniformsList=b}function x(e,t,n,i){be=0;var r=Fe.get(n),o=K.state.lights,a=r.lightsHash,s=o.state.hash;if(Ce&&(Pe||e!==pe)){var u=e===pe&&n.id===fe;Ae.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,u)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:!n.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength?void 0===r.numClippingPlanes||r.numClippingPlanes===Ae.numPlanes&&r.numIntersection===Ae.numIntersection||(n.needsUpdate=!0):n.needsUpdate=!0),n.needsUpdate&&(w(n,t,i),n.needsUpdate=!1);var l=!1,c=!1,h=!1,f=r.program,p=f.getUniforms(),m=r.shader.uniforms;if(Ne.useProgram(f.program)&&(l=!0,c=!0,h=!0),n.id!==fe&&(fe=n.id,c=!0),l||pe!==e){if(p.setValue(Z,"projectionMatrix",e.projectionMatrix),Re.logarithmicDepthBuffer&&p.setValue(Z,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),pe!==e&&(pe=e,c=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var v=p.map.cameraPosition;void 0!==v&&v.setValue(Z,Le.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&p.setValue(Z,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){p.setOptional(Z,i,"bindMatrix"),p.setOptional(Z,i,"bindMatrixInverse");var g=i.skeleton;if(g){var y=g.bones;if(Re.floatVertexTextures){if(void 0===g.boneTexture){var b=Math.sqrt(4*y.length);b=Nu.ceilPowerOfTwo(b),b=Math.max(b,4);var _=new Float32Array(b*b*4);_.set(g.boneMatrices);var x=new d(_,b,b,Ds,Cs);x.needsUpdate=!0,g.boneMatrices=_,g.boneTexture=x,g.boneTextureSize=b}p.setValue(Z,"boneTexture",g.boneTexture),p.setValue(Z,"boneTextureSize",g.boneTextureSize)}else p.setOptional(Z,g,"boneMatrices")}}return c&&(p.setValue(Z,"toneMappingExposure",oe.toneMappingExposure),p.setValue(Z,"toneMappingWhitePoint",oe.toneMappingWhitePoint),n.lights&&F(m,h),t&&n.fog&&C(m,t),n.isMeshBasicMaterial?M(m,n):n.isMeshLambertMaterial?(M(m,n),P(m,n)):n.isMeshPhongMaterial?(M(m,n),n.isMeshToonMaterial?L(m,n):O(m,n)):n.isMeshStandardMaterial?(M(m,n),n.isMeshPhysicalMaterial?I(m,n):k(m,n)):n.isMeshDepthMaterial?(M(m,n),R(m,n)):n.isMeshDistanceMaterial?(M(m,n),N(m,n)):n.isMeshNormalMaterial?(M(m,n),D(m,n)):n.isLineBasicMaterial?(S(m,n),n.isLineDashedMaterial&&E(m,n)):n.isPointsMaterial?T(m,n):n.isSpriteMaterial?A(m,n):n.isShadowMaterial&&(m.color.value=n.color,m.opacity.value=n.opacity),void 0!==m.ltc_1&&(m.ltc_1.value=zu.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=zu.LTC_2),We.upload(Z,r.uniformsList,m,oe)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(We.upload(Z,r.uniformsList,m,oe),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&p.setValue(Z,"center",i.center),p.setValue(Z,"modelViewMatrix",i.modelViewMatrix),p.setValue(Z,"normalMatrix",i.normalMatrix),p.setValue(Z,"modelMatrix",i.matrixWorld),f}function M(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=Fe.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function S(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function E(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function T(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*xe,e.scale.value=.5*we,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}function A(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}function C(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function P(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function O(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===pa&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===pa&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function L(e,t){O(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function k(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===pa&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===pa&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function I(e,t){k(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}function R(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function N(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function D(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===pa&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===pa&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function F(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function U(){var e=be;return Re.maxTextures,be+=1,e}e=e||{};var j=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),B=void 0!==e.context?e.context:null,z=void 0!==e.alpha&&e.alpha,G=void 0===e.depth||e.depth,V=void 0===e.stencil||e.stencil,W=void 0!==e.antialias&&e.antialias,H=void 0===e.premultipliedAlpha||e.premultipliedAlpha,q=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,X=void 0!==e.powerPreference?e.powerPreference:"default",Y=null,K=null;this.domElement=j,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ts,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Z,oe=this,ue=!1,le=null,ce=null,he=null,fe=-1,de={geometry:null,program:null,wireframe:!1},pe=null,me=null,ve=new c,ge=new c,ye=null,be=0,_e=j.width,we=j.height,xe=1,Me=new c(0,0,_e,we),Se=new c(0,0,_e,we),Ee=!1,Te=new g,Ae=new ee,Ce=!1,Pe=!1,Oe=new o,Le=new s;try{var ke={alpha:z,depth:G,stencil:V,antialias:W,premultipliedAlpha:H,preserveDrawingBuffer:q,powerPreference:X};if(j.addEventListener("webglcontextlost",i,!1),j.addEventListener("webglcontextrestored",r,!1),null===(Z=B||j.getContext("webgl",ke)||j.getContext("experimental-webgl",ke)))throw null!==j.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===Z.getShaderPrecisionFormat&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){}var Ie,Re,Ne,De,Fe,Ue,je,Be,ze,Ge,Ve,He,qe,Xe,Ye,Ke,Ze;n();var Je="xr"in navigator?new Et(oe):new St(oe);this.vr=Je;var Qe=new gt(oe,ze,Re.maxTextureSize);this.shadowMap=Qe,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){var e=Ie.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Ie.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return xe},this.setPixelRatio=function(e){void 0!==e&&(xe=e,this.setSize(_e,we,!1))},this.getSize=function(){return{width:_e,height:we}},this.setSize=function(e,t,n){Je.isPresenting()||(_e=e,we=t,j.width=e*xe,j.height=t*xe,!1!==n&&(j.style.width=e+"px",j.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:_e*xe,height:we*xe}},this.setDrawingBufferSize=function(e,t,n){_e=e,we=t,xe=n,j.width=e*n,j.height=t*n,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return ve},this.setViewport=function(e,t,n,i){Me.set(e,we-t-i,n,i),Ne.viewport(ve.copy(Me).multiplyScalar(xe))},this.setScissor=function(e,t,n,i){Se.set(e,we-t-i,n,i),Ne.scissor(ge.copy(Se).multiplyScalar(xe))},this.setScissorTest=function(e){Ne.setScissorTest(Ee=e)},this.getClearColor=function(){return qe.getClearColor()},this.setClearColor=function(){qe.setClearColor.apply(qe,arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){qe.setClearAlpha.apply(qe,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=Z.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=Z.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=Z.STENCIL_BUFFER_BIT),Z.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.dispose=function(){j.removeEventListener("webglcontextlost",i,!1),j.removeEventListener("webglcontextrestored",r,!1),Ve.dispose(),He.dispose(),Fe.dispose(),ze.dispose(),Je.dispose(),et.stop()},this.renderBufferImmediate=function(e,t){Ne.initAttributes();var n=Fe.get(e);e.hasPositions&&!n.position&&(n.position=Z.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=Z.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=Z.createBuffer()),e.hasColors&&!n.color&&(n.color=Z.createBuffer());var i=t.getAttributes();e.hasPositions&&(Z.bindBuffer(Z.ARRAY_BUFFER,n.position),Z.bufferData(Z.ARRAY_BUFFER,e.positionArray,Z.DYNAMIC_DRAW),Ne.enableAttribute(i.position),Z.vertexAttribPointer(i.position,3,Z.FLOAT,!1,0,0)),e.hasNormals&&(Z.bindBuffer(Z.ARRAY_BUFFER,n.normal),Z.bufferData(Z.ARRAY_BUFFER,e.normalArray,Z.DYNAMIC_DRAW),Ne.enableAttribute(i.normal),Z.vertexAttribPointer(i.normal,3,Z.FLOAT,!1,0,0)),e.hasUvs&&(Z.bindBuffer(Z.ARRAY_BUFFER,n.uv),Z.bufferData(Z.ARRAY_BUFFER,e.uvArray,Z.DYNAMIC_DRAW),Ne.enableAttribute(i.uv),Z.vertexAttribPointer(i.uv,2,Z.FLOAT,!1,0,0)),e.hasColors&&(Z.bindBuffer(Z.ARRAY_BUFFER,n.color),Z.bufferData(Z.ARRAY_BUFFER,e.colorArray,Z.DYNAMIC_DRAW),Ne.enableAttribute(i.color),Z.vertexAttribPointer(i.color,3,Z.FLOAT,!1,0,0)),Ne.disableUnusedAttributes(),Z.drawArrays(Z.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,i,r,o,a){var s=o.isMesh&&o.normalMatrix.determinant()<0;Ne.setMaterial(r,s);var u=x(e,n,r,o),l=!1;de.geometry===i.id&&de.program===u.id&&de.wireframe===(!0===r.wireframe)||(de.geometry=i.id,de.program=u.id,de.wireframe=!0===r.wireframe,l=!0),o.morphTargetInfluences&&(Xe.update(o,i,r,u),l=!0);var c=i.index,h=i.attributes.position,d=1;!0===r.wireframe&&(c=Be.getWireframeAttribute(i),d=2);var p,m=Ye;null!==c&&(p=je.get(c),m=Ke,m.setIndex(p)),l&&(f(r,u,i),null!==c&&Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,p.buffer));var v=1/0;null!==c?v=c.count:void 0!==h&&(v=h.count);var g=i.drawRange.start*d,y=i.drawRange.count*d,b=null!==a?a.start*d:0,_=null!==a?a.count*d:1/0,w=Math.max(g,b),M=Math.min(v,g+y,b+_)-1,S=Math.max(0,M-w+1);if(0!==S){if(o.isMesh)if(!0===r.wireframe)Ne.setLineWidth(r.wireframeLinewidth*t()),m.setMode(Z.LINES);else switch(o.drawMode){case _u:m.setMode(Z.TRIANGLES);break;case wu:m.setMode(Z.TRIANGLE_STRIP);break;case xu:m.setMode(Z.TRIANGLE_FAN)}else if(o.isLine){var E=r.linewidth;void 0===E&&(E=1),Ne.setLineWidth(E*t()),o.isLineSegments?m.setMode(Z.LINES):o.isLineLoop?m.setMode(Z.LINE_LOOP):m.setMode(Z.LINE_STRIP)}else o.isPoints?m.setMode(Z.POINTS):o.isSprite&&m.setMode(Z.TRIANGLES);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&m.renderInstances(i,w,S):m.render(w,S)}},this.compile=function(e,t){K=He.get(e,t),K.init(),e.traverse(function(e){e.isLight&&(K.pushLight(e),e.castShadow&&K.pushShadow(e))}),K.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)w(t.material[n],e.fog,t);else w(t.material,e.fog,t)})};var $e=null,et=new b;et.setAnimationLoop(p),"undefined"!==typeof window&&et.setContext(window),this.setAnimationLoop=function(e){$e=e,Je.setAnimationLoop(e),et.start()},this.render=function(e,t,n,i){if(t&&t.isCamera&&!ue){de.geometry=null,de.program=null,de.wireframe=!1,fe=-1,pe=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Je.enabled&&(t=Je.getCamera(t)),K=He.get(e,t),K.init(),e.onBeforeRender(oe,e,t,n),Oe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Te.setFromMatrix(Oe),Pe=this.localClippingEnabled,Ce=Ae.init(this.clippingPlanes,Pe,t),Y=Ve.get(e,t),Y.init(),m(e,t,oe.sortObjects),!0===oe.sortObjects&&Y.sort(),Ce&&Ae.beginShadows();var r=K.state.shadowsArray;Qe.render(r,e,t),K.setupLights(t),Ce&&Ae.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),qe.render(Y,e,t,i);var o=Y.opaque,a=Y.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&v(o,e,t,s),a.length&&v(a,e,t,s)}else o.length&&v(o,e,t),a.length&&v(a,e,t);n&&Ue.updateRenderTargetMipmap(n),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1),e.onAfterRender(oe,e,t),Je.enabled&&Je.submitFrame(),Y=null,K=null}},this.allocTextureUnit=U,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(e=!0),t=t.texture),Ue.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(e=!0),Ue.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Ue.setTextureCube(t,n):Ue.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){le=e},this.getRenderTarget=function(){return ce},this.setRenderTarget=function(e){ce=e,e&&void 0===Fe.get(e).__webglFramebuffer&&Ue.setupRenderTarget(e);var t=le,n=!1;if(e){var i=Fe.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,ve.copy(e.viewport),ge.copy(e.scissor),ye=e.scissorTest}else ve.copy(Me).multiplyScalar(xe),ge.copy(Se).multiplyScalar(xe),ye=Ee;if(he!==t&&(Z.bindFramebuffer(Z.FRAMEBUFFER,t),he=t),Ne.viewport(ve),Ne.scissor(ge),Ne.setScissorTest(ye),n){var r=Fe.get(e.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,o){if(e&&e.isWebGLRenderTarget){var a=Fe.get(e).__webglFramebuffer;if(a){var s=!1;a!==he&&(Z.bindFramebuffer(Z.FRAMEBUFFER,a),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==Ds&&Ze.convert(l)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_FORMAT))return;if(c!==xs&&Ze.convert(c)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_TYPE)&&(c!==Cs||!(Re.isWebGL2||Ie.get("OES_texture_float")||Ie.get("WEBGL_color_buffer_float")))&&(c!==Ps||(Re.isWebGL2?!Ie.get("EXT_color_buffer_float"):!Ie.get("EXT_color_buffer_half_float"))))return;Z.checkFramebufferStatus(Z.FRAMEBUFFER)===Z.FRAMEBUFFER_COMPLETE&&t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Z.readPixels(t,n,i,r,Ze.convert(l),Ze.convert(c),o)}finally{s&&Z.bindFramebuffer(Z.FRAMEBUFFER,he)}}}},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,o=Ze.convert(t.format);this.setTexture2D(t,0),Z.copyTexImage2D(Z.TEXTURE_2D,n||0,o,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,o=t.image.height,a=Ze.convert(n.format),s=Ze.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,i||0,e.x,e.y,r,o,a,s,t.image.data):Z.texSubImage2D(Z.TEXTURE_2D,i||0,e.x,e.y,a,s,t.image)}}function At(e,t){this.name="",this.color=new y(e),this.density=void 0!==t?t:25e-5}function Ct(e,t,n){this.name="",this.color=new y(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Pt(){M.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ot(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Lt(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function kt(e){H.call(this),this.type="SpriteMaterial",this.color=new y(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function It(e){if(M.call(this),this.type="Sprite",void 0===il){il=new B;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ot(t,5);il.setIndex([0,1,2,0,2,3]),il.addAttribute("position",new Lt(n,3,0,!1)),il.addAttribute("uv",new Lt(n,2,3,!1))}this.geometry=il,this.material=void 0!==e?e:new kt,this.center=new r(.5,.5)}function Rt(){M.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Nt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new o)}}function Dt(){M.call(this),this.type="Bone"}function Ft(e,t){Z.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var n=this.initBones(),i=new Nt(n);this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function Ut(e){H.call(this),this.type="LineBasicMaterial",this.color=new y(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function jt(e,t,n){M.call(this),this.type="Line",this.geometry=void 0!==e?e:new B,this.material=void 0!==t?t:new Ut({color:16777215*Math.random()})}function Bt(e,t){jt.call(this,e,t),this.type="LineSegments"}function zt(e,t){jt.call(this,e,t),this.type="LineLoop"}function Gt(e){H.call(this),this.type="PointsMaterial",this.color=new y(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Vt(e,t){M.call(this),this.type="Points",this.geometry=void 0!==e?e:new B,this.material=void 0!==t?t:new Gt({color:16777215*Math.random()})}function Wt(e,t,n,i,r,o,a,s,u){l.call(this,e,t,n,i,r,o,a,s,u),this.generateMipmaps=!1}function Ht(e,t,n,i,r,o,a,s,u,c,h,f){l.call(this,null,o,a,s,u,c,i,r,h,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function qt(e,t,n,i,r,o,a,s,u){l.call(this,e,t,n,i,r,o,a,s,u),this.needsUpdate=!0}function Xt(e,t,n,i,r,o,a,s,u,c){if((c=void 0!==c?c:Bs)!==Bs&&c!==zs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Bs&&(n=Es),void 0===n&&c===zs&&(n=Is),l.call(this,null,i,r,o,a,s,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:vs,this.minFilter=void 0!==s?s:vs,this.flipY=!1,this.generateMipmaps=!1}function Yt(e){B.call(this),this.type="WireframeGeometry";var t,n,i,r,o,a,u,l,c,h,f=[],d=[0,0],p={},m=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,i=v.length;t<i;t++){var g=v[t];for(n=0;n<3;n++)u=g[m[n]],l=g[m[(n+1)%3]],d[0]=Math.min(u,l),d[1]=Math.max(u,l),c=d[0]+","+d[1],void 0===p[c]&&(p[c]={index1:d[0],index2:d[1]})}for(c in p)a=p[c],h=e.vertices[a.index1],f.push(h.x,h.y,h.z),h=e.vertices[a.index2],f.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,b,_,w,x,M,S,E;if(h=new s,null!==e.index){for(y=e.attributes.position,b=e.index,_=e.groups,0===_.length&&(_=[{start:0,count:b.count,materialIndex:0}]),r=0,o=_.length;r<o;++r)for(w=_[r],x=w.start,M=w.count,t=x,i=x+M;t<i;t+=3)for(n=0;n<3;n++)u=b.getX(t+n),l=b.getX(t+(n+1)%3),d[0]=Math.min(u,l),d[1]=Math.max(u,l),c=d[0]+","+d[1],void 0===p[c]&&(p[c]={index1:d[0],index2:d[1]});for(c in p)a=p[c],h.fromBufferAttribute(y,a.index1),f.push(h.x,h.y,h.z),h.fromBufferAttribute(y,a.index2),f.push(h.x,h.y,h.z)}else for(y=e.attributes.position,t=0,i=y.count/3;t<i;t++)for(n=0;n<3;n++)S=3*t+n,h.fromBufferAttribute(y,S),f.push(h.x,h.y,h.z),E=3*t+(n+1)%3,h.fromBufferAttribute(y,E),f.push(h.x,h.y,h.z)}this.addAttribute("position",new D(f,3))}function Kt(e,t,n){A.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Zt(e,t,n)),this.mergeVertices()}function Zt(e,t,n){B.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,o=[],a=[],u=[],l=[],c=new s,h=new s,f=new s,d=new s,p=new s;e.length;var m=t+1;for(i=0;i<=n;i++){var v=i/n;for(r=0;r<=t;r++){var g=r/t;e(g,v,h),a.push(h.x,h.y,h.z),g-1e-5>=0?(e(g-1e-5,v,f),d.subVectors(h,f)):(e(g+1e-5,v,f),d.subVectors(f,h)),v-1e-5>=0?(e(g,v-1e-5,f),p.subVectors(h,f)):(e(g,v+1e-5,f),p.subVectors(f,h)),c.crossVectors(d,p).normalize(),u.push(c.x,c.y,c.z),l.push(g,v)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var y=i*m+r,b=i*m+r+1,_=(i+1)*m+r+1,w=(i+1)*m+r;o.push(y,b,w),o.push(b,_,w)}this.setIndex(o),this.addAttribute("position",new D(a,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(l,2))}function Jt(e,t,n,i){A.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Qt(e,t,n,i)),this.mergeVertices()}function Qt(e,t,n,i){function o(e,t,n,i){var r,o,a=Math.pow(2,i),s=[];for(r=0;r<=a;r++){s[r]=[];var l=e.clone().lerp(n,r/a),c=t.clone().lerp(n,r/a),h=a-r;for(o=0;o<=h;o++)s[r][o]=0===o&&r===a?l:l.clone().lerp(c,o/h)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var f=Math.floor(o/2);o%2===0?(u(s[r][f+1]),u(s[r+1][f]),u(s[r][f])):(u(s[r][f+1]),u(s[r+1][f+1]),u(s[r+1][f]))}}function a(){for(var e=0;e<m.length;e+=6){var t=m[e+0],n=m[e+2],i=m[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(m[e+0]+=1),n<.2&&(m[e+2]+=1),i<.2&&(m[e+4]+=1))}}function u(e){p.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(){for(var e=new s,t=new s,n=new s,i=new s,o=new r,a=new r,u=new r,l=0,c=0;l<p.length;l+=9,c+=6){e.set(p[l+0],p[l+1],p[l+2]),t.set(p[l+3],p[l+4],p[l+5]),n.set(p[l+6],p[l+7],p[l+8]),o.set(m[c+0],m[c+1]),a.set(m[c+2],m[c+3]),u.set(m[c+4],m[c+5]),i.copy(e).add(t).add(n).divideScalar(3);var d=f(i);h(o,c+0,e,d),h(a,c+2,t,d),h(u,c+4,n,d)}}function h(e,t,n,i){i<0&&1===e.x&&(m[t]=e.x-1),0===n.x&&0===n.z&&(m[t]=i/2/Math.PI+.5)}function f(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}B.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1,i=i||0;var p=[],m=[];!function(e){for(var n=new s,i=new s,r=new s,a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],i),l(t[a+2],r),o(n,i,r,e)}(i),function(e){for(var t=new s,n=0;n<p.length;n+=3)t.x=p[n+0],t.y=p[n+1],t.z=p[n+2],t.normalize().multiplyScalar(e),p[n+0]=t.x,p[n+1]=t.y,p[n+2]=t.z}(n),function(){for(var e=new s,t=0;t<p.length;t+=3){e.x=p[t+0],e.y=p[t+1],e.z=p[t+2];var n=f(e)/2/Math.PI+.5,i=d(e)/Math.PI+.5;m.push(n,1-i)}c(),a()}(),this.addAttribute("position",new D(p,3)),this.addAttribute("normal",new D(p.slice(),3)),this.addAttribute("uv",new D(m,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function $t(e,t){A.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new en(e,t)),this.mergeVertices()}function en(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Qt.call(this,n,i,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function tn(e,t){A.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new nn(e,t)),this.mergeVertices()}function nn(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Qt.call(this,n,i,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function rn(e,t){A.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new on(e,t)),this.mergeVertices()}function on(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Qt.call(this,i,r,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function an(e,t){A.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new sn(e,t)),this.mergeVertices()}function sn(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Qt.call(this,r,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function un(e,t,n,i,r,o){A.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};var a=new ln(e,t,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function ln(e,t,n,i,o){function a(r){v=e.getPointAt(r/t,v);var o=c.normals[r],a=c.binormals[r];for(f=0;f<=i;f++){var s=f/i*Math.PI*2,u=Math.sin(s),l=-Math.cos(s);p.x=l*o.x+u*a.x,p.y=l*o.y+u*a.y,p.z=l*o.z+u*a.z,p.normalize(),y.push(p.x,p.y,p.z),d.x=v.x+n*p.x,d.y=v.y+n*p.y,d.z=v.z+n*p.z,g.push(d.x,d.y,d.z)}}function u(){for(f=1;f<=t;f++)for(h=1;h<=i;h++){var e=(i+1)*(f-1)+(h-1),n=(i+1)*f+(h-1),r=(i+1)*f+h,o=(i+1)*(f-1)+h;_.push(e,n,o),_.push(n,r,o)}}function l(){for(h=0;h<=t;h++)for(f=0;f<=i;f++)m.x=h/t,m.y=f/i,b.push(m.x,m.y)}B.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:o},t=t||64,n=n||1,i=i||8,o=o||!1;var c=e.computeFrenetFrames(t,o);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;var h,f,d=new s,p=new s,m=new r,v=new s,g=[],y=[],b=[],_=[];!function(){for(h=0;h<t;h++)a(h);a(!1===o?t:0),l(),u()}(),this.setIndex(_),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(y,3)),this.addAttribute("uv",new D(b,2))}function cn(e,t,n,i,r,o,a){A.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},this.fromBufferGeometry(new hn(e,t,n,i,r,o)),this.mergeVertices()}function hn(e,t,n,i,r,o){function a(e,t,n,i,r){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);r.x=i*(2+u)*.5*o,r.y=i*(2+u)*a*.5,r.z=i*Math.sin(s)*.5}B.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var u,l,c=[],h=[],f=[],d=[],p=new s,m=new s,v=new s,g=new s,y=new s,b=new s,_=new s;for(u=0;u<=n;++u){var w=u/n*r*Math.PI*2;for(a(w,r,o,e,v),a(w+.01,r,o,e,g),b.subVectors(g,v),_.addVectors(g,v),y.crossVectors(b,_),_.crossVectors(y,b),y.normalize(),_.normalize(),l=0;l<=i;++l){var x=l/i*Math.PI*2,M=-t*Math.cos(x),S=t*Math.sin(x);p.x=v.x+(M*_.x+S*y.x),p.y=v.y+(M*_.y+S*y.y),p.z=v.z+(M*_.z+S*y.z),h.push(p.x,p.y,p.z),m.subVectors(p,v).normalize(),f.push(m.x,m.y,m.z),d.push(u/n),d.push(l/i)}}for(l=1;l<=n;l++)for(u=1;u<=i;u++){var E=(i+1)*(l-1)+(u-1),T=(i+1)*l+(u-1),A=(i+1)*l+u,C=(i+1)*(l-1)+u;c.push(E,T,C),c.push(T,A,C)}this.setIndex(c),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(d,2))}function fn(e,t,n,i,r){A.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new dn(e,t,n,i,r)),this.mergeVertices()}function dn(e,t,n,i,r){B.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,a,u=[],l=[],c=[],h=[],f=new s,d=new s,p=new s;for(o=0;o<=n;o++)for(a=0;a<=i;a++){var m=a/i*r,v=o/n*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(m),d.y=(e+t*Math.cos(v))*Math.sin(m),d.z=t*Math.sin(v),l.push(d.x,d.y,d.z),f.x=e*Math.cos(m),f.y=e*Math.sin(m),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(a/i),h.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=i;a++){var g=(i+1)*o+a-1,y=(i+1)*(o-1)+a-1,b=(i+1)*(o-1)+a,_=(i+1)*o+a;u.push(g,y,_),u.push(y,b,_)}this.setIndex(u),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(h,2))}function pn(e,t,n,i,r){var o,a;if(r===zn(e,t,n,i)>0)for(o=t;o<n;o+=i)a=Un(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=Un(o,e[o],e[o+1],a);return a&&kn(a,a.next)&&(jn(a),a=a.next),a}function mn(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!kn(i,i.next)&&0!==Ln(i.prev,i,i.next))i=i.next;else{if(jn(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function vn(e,t,n,i,r,o,a){if(e){!a&&o&&En(e,i,r,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?yn(e,i,r,o):gn(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),jn(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?(e=bn(e,t,n),vn(e,t,n,i,r,o,2)):2===a&&_n(e,t,n,i,r,o):vn(mn(e),t,n,i,r,o,1);break}}}function gn(e){var t=e.prev,n=e,i=e.next;if(Ln(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Pn(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ln(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function yn(e,t,n,i){var r=e.prev,o=e,a=e.next;if(Ln(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,u=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=An(s,u,t,n,i),f=An(l,c,t,n,i),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&Pn(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ln(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&Pn(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ln(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function bn(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!kn(r,o)&&In(r,i,i.next,o)&&Nn(r,o)&&Nn(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),jn(i),jn(i.next),i=e=o),i=i.next}while(i!==e);return i}function _n(e,t,n,i,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&On(a,s)){var u=Fn(a,s);return a=mn(a,a.next),u=mn(u,u.next),vn(a,t,n,i,r,o),void vn(u,t,n,i,r,o)}s=s.next}a=a.next}while(a!==e)}function wn(e,t,n,i){var r,o,a,s,u,l=[];for(r=0,o=t.length;r<o;r++)a=t[r]*i,s=r<o-1?t[r+1]*i:e.length,u=pn(e,a,s,i,!1),u===u.next&&(u.steiner=!0),l.push(Cn(u));for(l.sort(xn),r=0;r<l.length;r++)Mn(l[r],n),n=mn(n,n.next);return n}function xn(e,t){return e.x-t.x}function Mn(e,t){if(t=Sn(e,t)){var n=Fn(t,e);mn(n,n.next)}}function Sn(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=c&&r!==i.x&&Pn(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(r-i.x))<f||u===f&&i.x>n.x)&&Nn(i,e)&&(n=i,f=u),i=i.next;return n}function En(e,t,n,i){var r=e;do{null===r.z&&(r.z=An(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,Tn(r)}function Tn(e){var t,n,i,r,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ);t++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1);return e}function An(e,t,n,i,r){return e=32767*(e-n)*r,t=32767*(t-i)*r,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function Cn(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Pn(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function On(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Rn(e,t)&&Nn(e,t)&&Nn(t,e)&&Dn(e,t)}function Ln(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function kn(e,t){return e.x===t.x&&e.y===t.y}function In(e,t,n,i){return!!(kn(e,t)&&kn(n,i)||kn(e,i)&&kn(n,t))||Ln(e,t,n)>0!==Ln(e,t,i)>0&&Ln(n,i,e)>0!==Ln(n,i,t)>0}function Rn(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&In(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Nn(e,t){return Ln(e.prev,e,e.next)<0?Ln(e,t,e.next)>=0&&Ln(e,e.prev,t)>=0:Ln(e,t,e.prev)<0||Ln(e,e.next,t)<0}function Dn(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}function Fn(e,t){var n=new Bn(e.i,e.x,e.y),i=new Bn(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Un(e,t,n,i){var r=new Bn(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function jn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Bn(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zn(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}function Gn(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Vn(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Wn(e,t){A.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Hn(e,t)),this.mergeVertices()}function Hn(e,t){B.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],o=[],a=0,u=e.length;a<u;a++){var l=e[a];!function(e){function a(e,t,n){return t.clone().multiplyScalar(n).add(e)}function u(e,t,n){var i,o,a,s=e.x-t.x,u=e.y-t.y,l=n.x-e.x,c=n.y-e.y,h=s*s+u*u,f=s*c-u*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(l*l+c*c),m=t.x-u/d,v=t.y+s/d,g=n.x-c/p,y=n.y+l/p,b=((g-m)*c-(y-v)*l)/(s*c-u*l);i=m+s*b-e.x,o=v+u*b-e.y;var _=i*i+o*o;if(_<=2)return new r(i,o);a=Math.sqrt(_/2)}else{var w=!1;s>Number.EPSILON?l>Number.EPSILON&&(w=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(w=!0):Math.sign(u)===Math.sign(c)&&(w=!0),w?(i=-u,o=s,a=Math.sqrt(h)):(i=s,o=u,a=Math.sqrt(h/2))}return new r(i/a,o/a)}function l(e,t){var n,i;for(Y=e.length;--Y>=0;){n=Y,(i=Y-1)<0&&(i=e.length-1);var r=0,o=g+2*x;for(r=0;r<o;r++){var a=H*r,s=H*(r+1);f(t+n+a,t+i+a,t+i+s,t+n+s)}}}function c(e,t,n){m.push(e),m.push(t),m.push(n)}function h(e,t,r){d(e),d(t),d(r);var o=i.length/3,a=S.generateTopUV(n,i,o-3,o-2,o-1);p(a[0]),p(a[1]),p(a[2])}function f(e,t,r,o){d(e),d(t),d(o),d(t),d(r),d(o);var a=i.length/3,s=S.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);p(s[0]),p(s[1]),p(s[3]),p(s[1]),p(s[2]),p(s[3])}function d(e){i.push(m[3*e+0]),i.push(m[3*e+1]),i.push(m[3*e+2])}function p(e){o.push(e.x),o.push(e.y)}var m=[],v=void 0!==t.curveSegments?t.curveSegments:12,g=void 0!==t.steps?t.steps:1,y=void 0!==t.depth?t.depth:100,b=void 0===t.bevelEnabled||t.bevelEnabled,_=void 0!==t.bevelThickness?t.bevelThickness:6,w=void 0!==t.bevelSize?t.bevelSize:_-2,x=void 0!==t.bevelSegments?t.bevelSegments:3,M=t.extrudePath,S=void 0!==t.UVGenerator?t.UVGenerator:al;void 0!==t.amount&&(y=t.amount);var E,T,A,C,P,O=!1;M&&(E=M.getSpacedPoints(g),O=!0,b=!1,T=M.computeFrenetFrames(g,!1),A=new s,C=new s,P=new s),b||(x=0,_=0,w=0);var L,k,I,R=e.extractPoints(v),N=R.shape,D=R.holes;if(!ol.isClockWise(N))for(N=N.reverse(),k=0,I=D.length;k<I;k++)L=D[k],ol.isClockWise(L)&&(D[k]=L.reverse());var F=ol.triangulateShape(N,D),U=N;for(k=0,I=D.length;k<I;k++)L=D[k],N=N.concat(L);for(var j,B,z,G,V,W,H=N.length,q=F.length,X=[],Y=0,K=U.length,Z=K-1,J=Y+1;Y<K;Y++,Z++,J++)Z===K&&(Z=0),J===K&&(J=0),X[Y]=u(U[Y],U[Z],U[J]);var Q,$=[],ee=X.concat();for(k=0,I=D.length;k<I;k++){for(L=D[k],Q=[],Y=0,K=L.length,Z=K-1,J=Y+1;Y<K;Y++,Z++,J++)Z===K&&(Z=0),J===K&&(J=0),Q[Y]=u(L[Y],L[Z],L[J]);$.push(Q),ee=ee.concat(Q)}for(j=0;j<x;j++){for(z=j/x,G=_*Math.cos(z*Math.PI/2),B=w*Math.sin(z*Math.PI/2),Y=0,K=U.length;Y<K;Y++)V=a(U[Y],X[Y],B),c(V.x,V.y,-G);for(k=0,I=D.length;k<I;k++)for(L=D[k],Q=$[k],Y=0,K=L.length;Y<K;Y++)V=a(L[Y],Q[Y],B),c(V.x,V.y,-G)}for(B=w,Y=0;Y<H;Y++)V=b?a(N[Y],ee[Y],B):N[Y],O?(C.copy(T.normals[0]).multiplyScalar(V.x),A.copy(T.binormals[0]).multiplyScalar(V.y),P.copy(E[0]).add(C).add(A),c(P.x,P.y,P.z)):c(V.x,V.y,0);var te;for(te=1;te<=g;te++)for(Y=0;Y<H;Y++)V=b?a(N[Y],ee[Y],B):N[Y],O?(C.copy(T.normals[te]).multiplyScalar(V.x),A.copy(T.binormals[te]).multiplyScalar(V.y),P.copy(E[te]).add(C).add(A),c(P.x,P.y,P.z)):c(V.x,V.y,y/g*te);for(j=x-1;j>=0;j--){for(z=j/x,G=_*Math.cos(z*Math.PI/2),B=w*Math.sin(z*Math.PI/2),Y=0,K=U.length;Y<K;Y++)V=a(U[Y],X[Y],B),c(V.x,V.y,y+G);for(k=0,I=D.length;k<I;k++)for(L=D[k],Q=$[k],Y=0,K=L.length;Y<K;Y++)V=a(L[Y],Q[Y],B),O?c(V.x,V.y+E[g-1].y,E[g-1].x+G):c(V.x,V.y,y+G)}!function(){var e=i.length/3;if(b){var t=0,r=H*t;for(Y=0;Y<q;Y++)W=F[Y],h(W[2]+r,W[1]+r,W[0]+r);for(t=g+2*x,r=H*t,Y=0;Y<q;Y++)W=F[Y],h(W[0]+r,W[1]+r,W[2]+r)}else{for(Y=0;Y<q;Y++)W=F[Y],h(W[2],W[1],W[0]);for(Y=0;Y<q;Y++)W=F[Y],h(W[0]+H*g,W[1]+H*g,W[2]+H*g)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(l(U,t),t+=U.length,k=0,I=D.length;k<I;k++)L=D[k],l(L,t),t+=L.length;n.addGroup(e,i.length/3-e,1)}()}(l)}this.addAttribute("position",new D(i,3)),this.addAttribute("uv",new D(o,2)),this.computeVertexNormals()}function qn(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var o=e[i];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Xn(e,t){A.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Yn(e,t)),this.mergeVertices()}function Yn(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return new A;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Hn.call(this,i,t),this.type="TextBufferGeometry"}function Kn(e,t,n,i,r,o,a){A.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Zn(e,t,n,i,r,o,a)),this.mergeVertices()}function Zn(e,t,n,i,r,o,a){B.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var u,l,c=o+a,h=0,f=[],d=new s,p=new s,m=[],v=[],g=[],y=[];for(l=0;l<=n;l++){var b=[],_=l/n;for(u=0;u<=t;u++){var w=u/t;d.x=-e*Math.cos(i+w*r)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(i+w*r)*Math.sin(o+_*a),v.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),g.push(p.x,p.y,p.z),y.push(w,1-_),b.push(h++)}f.push(b)}for(l=0;l<n;l++)for(u=0;u<t;u++){var x=f[l][u+1],M=f[l][u],S=f[l+1][u],E=f[l+1][u+1];(0!==l||o>0)&&m.push(x,M,E),(l!==n-1||c<Math.PI)&&m.push(M,S,E)}this.setIndex(m),this.addAttribute("position",new D(v,3)),this.addAttribute("normal",new D(g,3)),this.addAttribute("uv",new D(y,2))}function Jn(e,t,n,i,r,o){A.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Qn(e,t,n,i,r,o)),this.mergeVertices()}function Qn(e,t,n,i,o,a){B.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:a},e=e||.5,t=t||1,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var u,l,c,h=[],f=[],d=[],p=[],m=e,v=(t-e)/i,g=new s,y=new r;for(l=0;l<=i;l++){for(c=0;c<=n;c++)u=o+c/n*a,g.x=m*Math.cos(u),g.y=m*Math.sin(u),f.push(g.x,g.y,g.z),d.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,p.push(y.x,y.y);m+=v}for(l=0;l<i;l++){var b=l*(n+1);for(c=0;c<n;c++){u=c+b;var _=u,w=u+n+1,x=u+n+2,M=u+1;h.push(_,w,M),h.push(w,x,M)}}this.setIndex(h),this.addAttribute("position",new D(f,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(p,2))}function $n(e,t,n,i){A.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new ei(e,t,n,i)),this.mergeVertices()}function ei(e,t,n,i){B.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Nu.clamp(i,0,2*Math.PI);var o,a,u,l=[],c=[],h=[],f=1/t,d=new s,p=new r;for(a=0;a<=t;a++){var m=n+a*f*i,v=Math.sin(m),g=Math.cos(m);for(u=0;u<=e.length-1;u++)d.x=e[u].x*v,d.y=e[u].y,d.z=e[u].x*g,c.push(d.x,d.y,d.z),p.x=a/t,p.y=u/(e.length-1),h.push(p.x,p.y)}for(a=0;a<t;a++)for(u=0;u<e.length-1;u++){o=u+a*e.length;var y=o,b=o+e.length,_=o+e.length+1,w=o+1;l.push(y,b,w),l.push(b,_,w)}if(this.setIndex(l),this.addAttribute("position",new D(c,3)),this.addAttribute("uv",new D(h,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,M=new s,S=new s,E=new s;for(o=t*e.length*3,a=0,u=0;a<e.length;a++,u+=3)M.x=x[u+0],M.y=x[u+1],M.z=x[u+2],S.x=x[o+u+0],S.y=x[o+u+1],S.z=x[o+u+2],E.addVectors(M,S).normalize(),x[u+0]=x[o+u+0]=E.x,x[u+1]=x[o+u+1]=E.y,x[u+2]=x[o+u+2]=E.z}}function ti(e,t){A.call(this),this.type="ShapeGeometry","object"===typeof t&&(t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ni(e,t)),this.mergeVertices()}function ni(e,t){function n(e){var n,s,l,c=r.length/3,h=e.extractPoints(t),f=h.shape,d=h.holes;if(!1===ol.isClockWise(f))for(f=f.reverse(),n=0,s=d.length;n<s;n++)l=d[n],!0===ol.isClockWise(l)&&(d[n]=l.reverse());var p=ol.triangulateShape(f,d);for(n=0,s=d.length;n<s;n++)l=d[n],f=f.concat(l);for(n=0,s=f.length;n<s;n++){var m=f[n];r.push(m.x,m.y,0),o.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=p.length;n<s;n++){var v=p[n],g=v[0]+c,y=v[1]+c,b=v[2]+c;i.push(g,y,b),u+=3}}B.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var i=[],r=[],o=[],a=[],s=0,u=0;if(!1===Array.isArray(e))n(e);else for(var l=0;l<e.length;l++)n(e[l]),this.addGroup(s,u,l),s+=u,u=0;this.setIndex(i),this.addAttribute("position",new D(r,3)),this.addAttribute("normal",new D(o,3)),this.addAttribute("uv",new D(a,2))}function ii(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function ri(e,t){B.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,o,a=[],s=Math.cos(Nu.DEG2RAD*t),u=[0,0],l={},c=["a","b","c"];e.isBufferGeometry?(o=new A,o.fromBufferGeometry(e)):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],v=0;v<3;v++)n=m[c[v]],i=m[c[(v+1)%3]],u[0]=Math.min(n,i),u[1]=Math.max(n,i),r=u[0]+","+u[1],void 0===l[r]?l[r]={index1:u[0],index2:u[1],face1:d,face2:void 0}:l[r].face2=d;for(r in l){var g=l[r];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new D(a,3))}function oi(e,t,n,i,r,o,a,s){A.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new ai(e,t,n,i,r,o,a,s)),this.mergeVertices()}function ai(e,t,n,i,o,a,u,l){function c(n){var o,a,c,g=new r,_=new s,w=0,x=!0===n?e:t,M=!0===n?1:-1;for(a=v,o=1;o<=i;o++)d.push(0,y*M,0),p.push(0,M,0),m.push(.5,.5),v++;for(c=v,o=0;o<=i;o++){var S=o/i,E=S*l+u,T=Math.cos(E),A=Math.sin(E);_.x=x*A,_.y=y*M,_.z=x*T,d.push(_.x,_.y,_.z),p.push(0,M,0),g.x=.5*T+.5,g.y=.5*A*M+.5,m.push(g.x,g.y),v++}for(o=0;o<i;o++){var C=a+o,P=c+o;!0===n?f.push(P,P+1,C):f.push(P+1,P,C),w+=3}h.addGroup(b,w,!0===n?1:2),b+=w}B.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:u,thetaLength:l};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,o=Math.floor(o)||1,a=void 0!==a&&a,u=void 0!==u?u:0,l=void 0!==l?l:2*Math.PI;var f=[],d=[],p=[],m=[],v=0,g=[],y=n/2,b=0;!function(){var r,a,c=new s,_=new s,w=0,x=(t-e)/n;for(a=0;a<=o;a++){var M=[],S=a/o,E=S*(t-e)+e;for(r=0;r<=i;r++){var T=r/i,A=T*l+u,C=Math.sin(A),P=Math.cos(A);_.x=E*C,_.y=-S*n+y,_.z=E*P,d.push(_.x,_.y,_.z),c.set(C,x,P).normalize(),p.push(c.x,c.y,c.z),m.push(T,1-S),M.push(v++)}g.push(M)}for(r=0;r<i;r++)for(a=0;a<o;a++){var O=g[a][r],L=g[a+1][r],k=g[a+1][r+1],I=g[a][r+1];f.push(O,L,I),f.push(L,k,I),w+=6}h.addGroup(b,w,0),b+=w}(),!1===a&&(e>0&&c(!0),t>0&&c(!1)),this.setIndex(f),this.addAttribute("position",new D(d,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(m,2))}function si(e,t,n,i,r,o,a){oi.call(this,0,e,t,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function ui(e,t,n,i,r,o,a){ai.call(this,0,e,t,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function li(e,t,n,i){A.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new ci(e,t,n,i)),this.mergeVertices()}function ci(e,t,n,i){B.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var o,a,u=[],l=[],c=[],h=[],f=new s,d=new r;for(l.push(0,0,0),c.push(0,0,1),h.push(.5,.5),a=0,o=3;a<=t;a++,o+=3){var p=n+a/t*i;f.x=e*Math.cos(p),f.y=e*Math.sin(p),l.push(f.x,f.y,f.z),c.push(0,0,1),d.x=(l[o]/e+1)/2,d.y=(l[o+1]/e+1)/2,h.push(d.x,d.y)}for(o=1;o<=t;o++)u.push(o,o+1,0);this.setIndex(u),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(h,2))}function hi(e){H.call(this),this.type="ShadowMaterial",this.color=new y(0),this.transparent=!0,this.setValues(e)}function fi(e){X.call(this,e),this.type="RawShaderMaterial"}function di(e){H.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new y(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function pi(e){di.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function mi(e){H.call(this),this.type="MeshPhongMaterial",this.color=new y(16777215),this.specular=new y(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ja,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function vi(e){mi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function gi(e){H.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iu,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yi(e){H.call(this),this.type="MeshLambertMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ja,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function bi(e){Ut.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function _i(e,t,n){var i=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}function wi(e){this.manager=void 0!==e?e:cl}function xi(e){this.manager=void 0!==e?e:cl,this._parser=null}function Mi(e){this.manager=void 0!==e?e:cl,this._parser=null}function Si(e){this.manager=void 0!==e?e:cl}function Ei(e){this.manager=void 0!==e?e:cl}function Ti(e){this.manager=void 0!==e?e:cl}function Ai(){this.type="Curve",this.arcLengthDivisions=200}function Ci(e,t,n,i,r,o,a,s){Ai.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Pi(e,t,n,i,r,o){Ci.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function Oi(){function e(e,o,a,s){t=e,n=a,i=-3*e+3*o-2*a-s,r=2*e-2*o+a+s}var t=0,n=0,i=0,r=0;return{initCatmullRom:function(t,n,i,r,o){e(n,i,o*(i-t),o*(r-n))},initNonuniformCatmullRom:function(t,n,i,r,o,a,s){var u=(n-t)/o-(i-t)/(o+a)+(i-n)/a,l=(i-n)/a-(r-n)/(a+s)+(r-i)/s;u*=a,l*=a,e(n,i,u,l)},calc:function(e){var o=e*e;return t+n*e+i*o+r*(o*e)}}}function Li(e,t,n,i){Ai.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function ki(e,t,n,i,r){var o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}function Ii(e,t){var n=1-e;return n*n*t}function Ri(e,t){return 2*(1-e)*e*t}function Ni(e,t){return e*e*t}function Di(e,t,n,i){return Ii(e,t)+Ri(e,n)+Ni(e,i)}function Fi(e,t){var n=1-e;return n*n*n*t}function Ui(e,t){var n=1-e;return 3*n*n*e*t}function ji(e,t){return 3*(1-e)*e*e*t}function Bi(e,t){return e*e*e*t}function zi(e,t,n,i,r){return Fi(e,t)+Ui(e,n)+ji(e,i)+Bi(e,r)}function Gi(e,t,n,i){Ai.call(this),this.type="CubicBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r,this.v3=i||new r}function Vi(e,t,n,i){Ai.call(this),this.type="CubicBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s,this.v3=i||new s}function Wi(e,t){Ai.call(this),this.type="LineCurve",this.v1=e||new r,this.v2=t||new r}function Hi(e,t){Ai.call(this),this.type="LineCurve3",this.v1=e||new s,this.v2=t||new s}function qi(e,t,n){Ai.call(this),this.type="QuadraticBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r}function Xi(e,t,n){Ai.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s}function Yi(e){Ai.call(this),this.type="SplineCurve",this.points=e||[]}function Ki(){Ai.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Zi(e){Ki.call(this),this.type="Path",this.currentPoint=new r,e&&this.setFromPoints(e)}function Ji(e){Zi.call(this,e),this.uuid=Nu.generateUUID(),this.type="Shape",this.holes=[]}function Qi(e,t){M.call(this),this.type="Light",this.color=new y(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function $i(e,t,n){Qi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(M.DefaultUp),this.updateMatrix(),this.groundColor=new y(t)}function er(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new o}function tr(){er.call(this,new xt(50,1,.5,500))}function nr(e,t,n,i,r,o){Qi.call(this,e,t),this.type="SpotLight",this.position.copy(M.DefaultUp),this.updateMatrix(),this.target=new M,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new tr}function ir(e,t,n,i){Qi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new er(new xt(90,1,.5,500))}function rr(){er.call(this,new E(-5,5,5,-5,.5,500))}function or(e,t){Qi.call(this,e,t),this.type="DirectionalLight",this.position.copy(M.DefaultUp),this.updateMatrix(),this.target=new M,this.shadow=new rr}function ar(e,t){Qi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function sr(e,t,n,i){Qi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function ur(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function lr(e,t,n,i){ur.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function cr(e,t,n,i){ur.call(this,e,t,n,i)}function hr(e,t,n,i){ur.call(this,e,t,n,i)}function fr(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gl.convertArray(t,this.TimeBufferType),this.values=gl.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function dr(e,t,n){fr.call(this,e,t,n)}function pr(e,t,n,i){fr.call(this,e,t,n,i)}function mr(e,t,n,i){fr.call(this,e,t,n,i)}function vr(e,t,n,i){ur.call(this,e,t,n,i)}function gr(e,t,n,i){fr.call(this,e,t,n,i)}function yr(e,t,n,i){fr.call(this,e,t,n,i)}function br(e,t,n,i){fr.call(this,e,t,n,i)}function _r(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Nu.generateUUID(),this.duration<0&&this.resetDuration()}function wr(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mr;case"vector":case"vector2":case"vector3":case"vector4":return br;case"color":return pr;case"quaternion":return gr;case"bool":case"boolean":return dr;case"string":return yr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function xr(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=wr(e.type);if(void 0===e.times){var n=[],i=[];gl.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function Mr(e){this.manager=void 0!==e?e:cl,this.textures={}}function Sr(e){this.manager=void 0!==e?e:cl}function Er(){}function Tr(e){"boolean"===typeof e&&(e=void 0),this.manager=void 0!==e?e:cl,this.withCredentials=!1}function Ar(e){this.manager=void 0!==e?e:cl,this.texturePath=""}function Cr(e){this.manager=void 0!==e?e:cl,this.options=void 0}function Pr(){this.type="ShapePath",this.color=new y,this.subPaths=[],this.currentPath=null}function Or(e){this.type="Font",this.data=e}function Lr(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[],s=0,u=0,l=0;l<i.length;l++){var c=i[l];if("\n"===c)s=0,u-=o;else{var h=kr(c,r,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}function kr(e,t,n,i,r){var o=r.glyphs[e]||r.glyphs["?"];if(o){var a,s,u,l,c,h,f,d,p=new Pr;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){var y=m[v++];switch(y){case"m":a=m[v++]*t+n,s=m[v++]*t+i,p.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+i,p.lineTo(a,s);break;case"q":u=m[v++]*t+n,l=m[v++]*t+i,c=m[v++]*t+n,h=m[v++]*t+i,p.quadraticCurveTo(c,h,u,l);break;case"b":u=m[v++]*t+n,l=m[v++]*t+i,c=m[v++]*t+n,h=m[v++]*t+i,f=m[v++]*t+n,d=m[v++]*t+i,p.bezierCurveTo(c,h,f,d,u,l)}}return{offsetX:o.ha*t,path:p}}}function Ir(e){this.manager=void 0!==e?e:cl}function Rr(e){this.manager=void 0!==e?e:cl}function Nr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Dr(e,t,n){M.call(this),this.type="CubeCamera";var i=new xt(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new s(1,0,0)),this.add(i);var r=new xt(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new s(-1,0,0)),this.add(r);var o=new xt(90,1,e,t);o.up.set(0,0,1),o.lookAt(new s(0,1,0)),this.add(o);var a=new xt(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new s(0,-1,0)),this.add(a);var u=new xt(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new s(0,0,1)),this.add(u);var l=new xt(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new s(0,0,-1)),this.add(l);var c={format:Ns,magFilter:bs,minFilter:bs};this.renderTarget=new f(n,n,c),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,r,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,u,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}function Fr(){M.call(this),this.type="AudioListener",this.context=Sl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ur(e){M.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function jr(e){Ur.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Br(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function zr(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Gr(e,t,n){var i=n||Vr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Vr(e,t,n){this.path=t,this.parsedPath=n||Vr.parseTrackName(t),this.node=Vr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Wr(){this.uuid=Nu.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Hr(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,o=new Array(r),a={endingStart:gu,endingEnd:gu},s=0;s!==r;++s){var u=i[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fu,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function qr(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Xr(e){"string"===typeof e&&(e=arguments[1]),this.value=e}function Yr(){B.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Kr(e,t,n){Ot.call(this,e,t),this.meshPerAttribute=n||1}function Zr(e,t,n,i){"number"===typeof n&&(i=n,n=!1),C.call(this,e,t,n),this.meshPerAttribute=i||1}function Jr(e,t,n,i){this.ray=new Y(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Qr(e,t){return e.distance-t.distance}function $r(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,o=0,a=r.length;o<a;o++)$r(r[o],t,n,!0)}function eo(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function to(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function no(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function io(e,t){this.min=void 0!==e?e:new r(1/0,1/0),this.max=void 0!==t?t:new r(-1/0,-1/0)}function ro(e,t){this.start=void 0!==e?e:new s,this.end=void 0!==t?t:new s}function oo(e){M.call(this),this.material=e,this.render=function(){}}function ao(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new B,l=new D(2*a*3,3);u.addAttribute("position",l),Bt.call(this,u,new Ut({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function so(e,t){M.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new B,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new D(i,3));var u=new Ut({fog:!1});this.cone=new Bt(n,u),this.add(this.cone),this.update()}function uo(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,uo(e.children[n]));return t}function lo(e){for(var t=uo(e),n=new B,i=[],r=[],o=new y(0,0,1),a=new y(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new D(i,3)),n.addAttribute("color",new D(r,3));var l=new Ut({vertexColors:_a,depthTest:!1,depthWrite:!1,transparent:!0});Bt.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function co(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new Zn(t,4,2),r=new q({wireframe:!0,fog:!1});Z.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ho(e,t){M.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Ut({fog:!1}),i=new B;i.addAttribute("position",new C(new Float32Array(15),3)),this.line=new jt(i,n),this.add(this.line),this.update()}function fo(e,t,n){M.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new nn(t);i.rotateY(.5*Math.PI),this.material=new q({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=_a);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new C(o,3)),this.add(new Z(i,this.material)),this.update()}function po(e,t,n,i){e=e||10,t=t||10,n=new y(void 0!==n?n:4473924),i=new y(void 0!==i?i:8947848);for(var r=t/2,o=e/t,a=e/2,s=[],u=[],l=0,c=0,h=-a;l<=t;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=l===r?n:i;f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3}var d=new B;d.addAttribute("position",new D(s,3)),d.addAttribute("color",new D(u,3));var p=new Ut({vertexColors:_a});Bt.call(this,d,p)}function mo(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new y(void 0!==r?r:4473924),o=new y(void 0!==o?o:8947848);var a,s,u,l,c,h,f,d=[],p=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,d.push(0,0,0),d.push(a,0,s),f=1&l?r:o,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(l=0;l<=n;l++)for(f=1&l?r:o,h=e-e/n*l,c=0;c<i;c++)u=c/i*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(c+1)/i*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var m=new B;m.addAttribute("position",new D(d,3)),m.addAttribute("color",new D(p,3));var v=new Ut({vertexColors:_a});Bt.call(this,m,v)}function vo(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry&&(a=s.faces.length);var u=new B,l=new D(2*a*3,3);u.addAttribute("position",l),Bt.call(this,u,new Ut({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function go(e,t,n){M.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new B;i.addAttribute("position",new D([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new Ut({fog:!1});this.lightPlane=new jt(i,r),this.add(this.lightPlane),i=new B,i.addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new jt(i,r),this.add(this.targetLine),this.update()}function yo(e){function t(e,t,i){n(e,i),n(t,i)}function n(e,t){o.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(o.length/3-1)}var i=new B,r=new Ut({color:16777215,vertexColors:ba}),o=[],a=[],s={},u=new y(16755200),l=new y(16711680),c=new y(43775),h=new y(16777215),f=new y(3355443);t("n1","n2",u),t("n2","n4",u),t("n4","n3",u),t("n3","n1",u),t("f1","f2",u),t("f2","f4",u),t("f4","f3",u),t("f3","f1",u),t("n1","f1",u),t("n2","f2",u),t("n3","f3",u),t("n4","f4",u),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",h),t("p","c",f),t("cn1","cn2",f),t("cn3","cn4",f),t("cf1","cf2",f),t("cf3","cf4",f),i.addAttribute("position",new D(o,3)),i.addAttribute("color",new D(a,3)),Bt.call(this,i,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function bo(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new B;r.setIndex(new C(n,1)),r.addAttribute("position",new C(i,3)),Bt.call(this,r,new Ut({color:t})),this.matrixAutoUpdate=!1,this.update()}function _o(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new B;o.setIndex(new C(i,1)),o.addAttribute("position",new D(r,3)),Bt.call(this,o,new Ut({color:n})),this.geometry.computeBoundingSphere()}function wo(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new B;o.addAttribute("position",new D(r,3)),o.computeBoundingSphere(),jt.call(this,o,new Ut({color:i}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new B;s.addAttribute("position",new D(a,3)),s.computeBoundingSphere(),this.add(new Z(s,new q({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function xo(e,t,n,i,r,o){M.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===Tl&&(Tl=new B,Tl.addAttribute("position",new D([0,0,0,0,1,0],3)),Al=new ai(0,.5,1,5,1),Al.translate(0,-.5,0)),this.position.copy(t),this.line=new jt(Tl,new Ut({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Z(Al,new q({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}function Mo(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new B;i.addAttribute("position",new D(t,3)),i.addAttribute("color",new D(n,3));var r=new Ut({vertexColors:_a});Bt.call(this,i,r)}function So(e,t,n,i,r,o,a){return new T(e,t,n,r,o,a)}function Eo(e){return e}function To(e){return void 0===e&&(e=[]),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Ao(e,t){return new Vt(e,t)}function Co(e){return new It(e)}function Po(e,t){return new Vt(e,t)}function Oo(e){return new Gt(e)}function Lo(e){return new Gt(e)}function ko(e){return new Gt(e)}function Io(e,t,n){return new s(e,t,n)}function Ro(e,t){return new C(e,t).setDynamic(!0)}function No(e,t){return new P(e,t)}function Do(e,t){return new O(e,t)}function Fo(e,t){return new L(e,t)}function Uo(e,t){return new k(e,t)}function jo(e,t){return new I(e,t)}function Bo(e,t){return new R(e,t)}function zo(e,t){return new N(e,t)}function Go(e,t){return new D(e,t)}function Vo(e,t){return new F(e,t)}function Wo(e){Li.call(this,e),this.type="catmullrom",this.closed=!0}function Ho(e){Li.call(this,e),this.type="catmullrom"}function qo(e){Li.call(this,e),this.type="catmullrom"}function Xo(e){return new Mo(e)}function Yo(e,t){return new bo(e,t)}function Ko(e,t){return new Bt(new ri(e.geometry),new Ut({color:void 0!==t?t:16777215}))}function Zo(e,t){return new Bt(new Yt(e.geometry),new Ut({color:void 0!==t?t:16777215}))}function Jo(e){return new wi(e)}function Qo(e){return new Mi(e)}function $o(){this.projectVector=function(e,t){e.project(t)},this.unprojectVector=function(e,t){e.unproject(t)},this.pickingRay=function(){}}function ea(){this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function ta(){}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WebGLRenderTargetCube",function(){return f}),n.d(t,"WebGLRenderTarget",function(){return h}),n.d(t,"WebGLRenderer",function(){return Tt}),n.d(t,"ShaderLib",function(){return Gu}),n.d(t,"UniformsLib",function(){return zu}),n.d(t,"UniformsUtils",function(){return ju}),n.d(t,"ShaderChunk",function(){return Uu}),n.d(t,"FogExp2",function(){return At}),n.d(t,"Fog",function(){return Ct}),n.d(t,"Scene",function(){return Pt}),n.d(t,"Sprite",function(){return It}),n.d(t,"LOD",function(){return Rt}),n.d(t,"SkinnedMesh",function(){return Ft}),n.d(t,"Skeleton",function(){return Nt}),n.d(t,"Bone",function(){return Dt}),n.d(t,"Mesh",function(){return Z}),n.d(t,"LineSegments",function(){return Bt}),n.d(t,"LineLoop",function(){return zt}),n.d(t,"Line",function(){return jt}),n.d(t,"Points",function(){return Vt}),n.d(t,"Group",function(){return wt}),n.d(t,"VideoTexture",function(){return Wt}),n.d(t,"DataTexture",function(){return d}),n.d(t,"CompressedTexture",function(){return Ht}),n.d(t,"CubeTexture",function(){return ue}),n.d(t,"CanvasTexture",function(){return qt}),n.d(t,"DepthTexture",function(){return Xt}),n.d(t,"Texture",function(){return l}),n.d(t,"CompressedTextureLoader",function(){return xi}),n.d(t,"DataTextureLoader",function(){return Mi}),n.d(t,"CubeTextureLoader",function(){return Ei}),n.d(t,"TextureLoader",function(){return Ti}),n.d(t,"ObjectLoader",function(){return Ar}),n.d(t,"MaterialLoader",function(){return Mr}),n.d(t,"BufferGeometryLoader",function(){return Sr}),n.d(t,"DefaultLoadingManager",function(){return cl}),n.d(t,"LoadingManager",function(){return _i}),n.d(t,"JSONLoader",function(){return Tr}),n.d(t,"ImageLoader",function(){return Si}),n.d(t,"ImageBitmapLoader",function(){return Cr}),n.d(t,"FontLoader",function(){return Ir}),n.d(t,"FileLoader",function(){return wi}),n.d(t,"Loader",function(){return Er}),n.d(t,"LoaderUtils",function(){return bl}),n.d(t,"Cache",function(){return ll}),n.d(t,"AudioLoader",function(){return Rr}),n.d(t,"SpotLightShadow",function(){return tr}),n.d(t,"SpotLight",function(){return nr}),n.d(t,"PointLight",function(){return ir}),n.d(t,"RectAreaLight",function(){return sr}),n.d(t,"HemisphereLight",function(){return $i}),n.d(t,"DirectionalLightShadow",function(){return rr}),n.d(t,"DirectionalLight",function(){return or}),n.d(t,"AmbientLight",function(){return ar}),n.d(t,"LightShadow",function(){return er}),n.d(t,"Light",function(){return Qi}),n.d(t,"StereoCamera",function(){return Nr}),n.d(t,"PerspectiveCamera",function(){return xt}),n.d(t,"OrthographicCamera",function(){return E}),n.d(t,"CubeCamera",function(){return Dr}),n.d(t,"ArrayCamera",function(){return Mt}),n.d(t,"Camera",function(){return S}),n.d(t,"AudioListener",function(){return Fr}),n.d(t,"PositionalAudio",function(){return jr}),n.d(t,"AudioContext",function(){return Sl}),n.d(t,"AudioAnalyser",function(){return Br}),n.d(t,"Audio",function(){return Ur}),n.d(t,"VectorKeyframeTrack",function(){return br}),n.d(t,"StringKeyframeTrack",function(){return yr}),n.d(t,"QuaternionKeyframeTrack",function(){return gr}),n.d(t,"NumberKeyframeTrack",function(){return mr}),n.d(t,"ColorKeyframeTrack",function(){return pr}),n.d(t,"BooleanKeyframeTrack",function(){return dr}),n.d(t,"PropertyMixer",function(){return zr}),n.d(t,"PropertyBinding",function(){return Vr}),n.d(t,"KeyframeTrack",function(){return fr}),n.d(t,"AnimationUtils",function(){return gl}),n.d(t,"AnimationObjectGroup",function(){return Wr}),n.d(t,"AnimationMixer",function(){return qr}),n.d(t,"AnimationClip",function(){return _r}),n.d(t,"Uniform",function(){return Xr}),n.d(t,"InstancedBufferGeometry",function(){return Yr}),n.d(t,"BufferGeometry",function(){return B}),n.d(t,"Geometry",function(){return A}),n.d(t,"InterleavedBufferAttribute",function(){return Lt}),n.d(t,"InstancedInterleavedBuffer",function(){return Kr}),n.d(t,"InterleavedBuffer",function(){return Ot}),n.d(t,"InstancedBufferAttribute",function(){return Zr}),n.d(t,"Face3",function(){return T}),n.d(t,"Object3D",function(){return M}),n.d(t,"Raycaster",function(){return Jr}),n.d(t,"Layers",function(){return x}),n.d(t,"EventDispatcher",function(){return i}),n.d(t,"Clock",function(){return eo}),n.d(t,"QuaternionLinearInterpolant",function(){return vr}),n.d(t,"LinearInterpolant",function(){return cr}),n.d(t,"DiscreteInterpolant",function(){return hr}),n.d(t,"CubicInterpolant",function(){return lr}),n.d(t,"Interpolant",function(){return ur}),n.d(t,"Triangle",function(){return K}),n.d(t,"Math",function(){return Nu}),n.d(t,"Spherical",function(){return to}),n.d(t,"Cylindrical",function(){return no}),n.d(t,"Plane",function(){return v}),n.d(t,"Frustum",function(){return g}),n.d(t,"Sphere",function(){return m}),n.d(t,"Ray",function(){return Y}),n.d(t,"Matrix4",function(){return o}),n.d(t,"Matrix3",function(){return u}),n.d(t,"Box3",function(){return p}),n.d(t,"Box2",function(){return io}),n.d(t,"Line3",function(){return ro}),n.d(t,"Euler",function(){return w}),n.d(t,"Vector4",function(){return c}),n.d(t,"Vector3",function(){return s}),n.d(t,"Vector2",function(){return r}),n.d(t,"Quaternion",function(){return a}),n.d(t,"Color",function(){return y}),n.d(t,"ImmediateRenderObject",function(){return oo}),n.d(t,"VertexNormalsHelper",function(){return ao}),n.d(t,"SpotLightHelper",function(){return so}),n.d(t,"SkeletonHelper",function(){return lo}),n.d(t,"PointLightHelper",function(){return co}),n.d(t,"RectAreaLightHelper",function(){return ho}),n.d(t,"HemisphereLightHelper",function(){return fo}),n.d(t,"GridHelper",function(){return po}),n.d(t,"PolarGridHelper",function(){return mo}),n.d(t,"FaceNormalsHelper",function(){return vo}),n.d(t,"DirectionalLightHelper",function(){return go}),n.d(t,"CameraHelper",function(){return yo}),n.d(t,"BoxHelper",function(){return bo}),n.d(t,"Box3Helper",function(){return _o}),n.d(t,"PlaneHelper",function(){return wo}),n.d(t,"ArrowHelper",function(){return xo}),n.d(t,"AxesHelper",function(){return Mo}),n.d(t,"Shape",function(){return Ji}),n.d(t,"Path",function(){return Zi}),n.d(t,"ShapePath",function(){return Pr}),n.d(t,"Font",function(){return Or}),n.d(t,"CurvePath",function(){return Ki}),n.d(t,"Curve",function(){return Ai}),n.d(t,"ImageUtils",function(){return Du}),n.d(t,"ShapeUtils",function(){return ol}),n.d(t,"WebGLUtils",function(){return _t}),n.d(t,"WireframeGeometry",function(){return Yt}),n.d(t,"ParametricGeometry",function(){return Kt}),n.d(t,"ParametricBufferGeometry",function(){return Zt}),n.d(t,"TetrahedronGeometry",function(){return $t}),n.d(t,"TetrahedronBufferGeometry",function(){return en}),n.d(t,"OctahedronGeometry",function(){return tn}),n.d(t,"OctahedronBufferGeometry",function(){return nn}),n.d(t,"IcosahedronGeometry",function(){return rn}),n.d(t,"IcosahedronBufferGeometry",function(){return on}),n.d(t,"DodecahedronGeometry",function(){return an}),n.d(t,"DodecahedronBufferGeometry",function(){return sn}),n.d(t,"PolyhedronGeometry",function(){return Jt}),n.d(t,"PolyhedronBufferGeometry",function(){return Qt}),n.d(t,"TubeGeometry",function(){return un}),n.d(t,"TubeBufferGeometry",function(){return ln}),n.d(t,"TorusKnotGeometry",function(){return cn}),n.d(t,"TorusKnotBufferGeometry",function(){return hn}),n.d(t,"TorusGeometry",function(){return fn}),n.d(t,"TorusBufferGeometry",function(){return dn}),n.d(t,"TextGeometry",function(){return Xn}),n.d(t,"TextBufferGeometry",function(){return Yn}),n.d(t,"SphereGeometry",function(){return Kn}),n.d(t,"SphereBufferGeometry",function(){return Zn}),n.d(t,"RingGeometry",function(){return Jn}),n.d(t,"RingBufferGeometry",function(){return Qn}),n.d(t,"PlaneGeometry",function(){return V}),n.d(t,"PlaneBufferGeometry",function(){return W}),n.d(t,"LatheGeometry",function(){return $n}),n.d(t,"LatheBufferGeometry",function(){return ei}),n.d(t,"ShapeGeometry",function(){return ti}),n.d(t,"ShapeBufferGeometry",function(){return ni}),n.d(t,"ExtrudeGeometry",function(){return Wn}),n.d(t,"ExtrudeBufferGeometry",function(){return Hn}),n.d(t,"EdgesGeometry",function(){return ri}),n.d(t,"ConeGeometry",function(){return si}),n.d(t,"ConeBufferGeometry",function(){return ui}),n.d(t,"CylinderGeometry",function(){return oi}),n.d(t,"CylinderBufferGeometry",function(){return ai}),n.d(t,"CircleGeometry",function(){return li}),n.d(t,"CircleBufferGeometry",function(){return ci}),n.d(t,"BoxGeometry",function(){return z}),n.d(t,"BoxBufferGeometry",function(){return G}),n.d(t,"ShadowMaterial",function(){return hi}),n.d(t,"SpriteMaterial",function(){return kt}),n.d(t,"RawShaderMaterial",function(){return fi}),n.d(t,"ShaderMaterial",function(){return X}),n.d(t,"PointsMaterial",function(){return Gt}),n.d(t,"MeshPhysicalMaterial",function(){return pi}),n.d(t,"MeshStandardMaterial",function(){return di}),n.d(t,"MeshPhongMaterial",function(){return mi}),n.d(t,"MeshToonMaterial",function(){return vi}),n.d(t,"MeshNormalMaterial",function(){return gi}),n.d(t,"MeshLambertMaterial",function(){return yi}),n.d(t,"MeshDepthMaterial",function(){return mt}),n.d(t,"MeshDistanceMaterial",function(){return vt});n.d(t,"MeshBasicMaterial",function(){return q}),n.d(t,"LineDashedMaterial",function(){return bi}),n.d(t,"LineBasicMaterial",function(){return Ut}),n.d(t,"Material",function(){return H}),n.d(t,"Float64BufferAttribute",function(){return F}),n.d(t,"Float32BufferAttribute",function(){return D}),n.d(t,"Uint32BufferAttribute",function(){return N}),n.d(t,"Int32BufferAttribute",function(){return R}),n.d(t,"Uint16BufferAttribute",function(){return I}),n.d(t,"Int16BufferAttribute",function(){return k}),n.d(t,"Uint8ClampedBufferAttribute",function(){return L}),n.d(t,"Uint8BufferAttribute",function(){return O}),n.d(t,"Int8BufferAttribute",function(){return P}),n.d(t,"BufferAttribute",function(){return C}),n.d(t,"ArcCurve",function(){return Pi}),n.d(t,"CatmullRomCurve3",function(){return Li}),n.d(t,"CubicBezierCurve",function(){return Gi}),n.d(t,"CubicBezierCurve3",function(){return Vi}),n.d(t,"EllipseCurve",function(){return Ci}),n.d(t,"LineCurve",function(){return Wi}),n.d(t,"LineCurve3",function(){return Hi}),n.d(t,"QuadraticBezierCurve",function(){return qi}),n.d(t,"QuadraticBezierCurve3",function(){return Xi}),n.d(t,"SplineCurve",function(){return Yi}),n.d(t,"REVISION",function(){return na}),n.d(t,"MOUSE",function(){return ia}),n.d(t,"CullFaceNone",function(){return ra}),n.d(t,"CullFaceBack",function(){return oa}),n.d(t,"CullFaceFront",function(){return aa}),n.d(t,"CullFaceFrontBack",function(){return sa}),n.d(t,"FrontFaceDirectionCW",function(){return ua}),n.d(t,"FrontFaceDirectionCCW",function(){return la}),n.d(t,"BasicShadowMap",function(){return ca}),n.d(t,"PCFShadowMap",function(){return ha}),n.d(t,"PCFSoftShadowMap",function(){return fa}),n.d(t,"FrontSide",function(){return da}),n.d(t,"BackSide",function(){return pa}),n.d(t,"DoubleSide",function(){return ma}),n.d(t,"FlatShading",function(){return va}),n.d(t,"SmoothShading",function(){return ga}),n.d(t,"NoColors",function(){return ya}),n.d(t,"FaceColors",function(){return ba}),n.d(t,"VertexColors",function(){return _a}),n.d(t,"NoBlending",function(){return wa}),n.d(t,"NormalBlending",function(){return xa}),n.d(t,"AdditiveBlending",function(){return Ma}),n.d(t,"SubtractiveBlending",function(){return Sa}),n.d(t,"MultiplyBlending",function(){return Ea}),n.d(t,"CustomBlending",function(){return Ta}),n.d(t,"AddEquation",function(){return Aa}),n.d(t,"SubtractEquation",function(){return Ca}),n.d(t,"ReverseSubtractEquation",function(){return Pa}),n.d(t,"MinEquation",function(){return Oa}),n.d(t,"MaxEquation",function(){return La}),n.d(t,"ZeroFactor",function(){return ka}),n.d(t,"OneFactor",function(){return Ia}),n.d(t,"SrcColorFactor",function(){return Ra}),n.d(t,"OneMinusSrcColorFactor",function(){return Na}),n.d(t,"SrcAlphaFactor",function(){return Da}),n.d(t,"OneMinusSrcAlphaFactor",function(){return Fa}),n.d(t,"DstAlphaFactor",function(){return Ua}),n.d(t,"OneMinusDstAlphaFactor",function(){return ja}),n.d(t,"DstColorFactor",function(){return Ba}),n.d(t,"OneMinusDstColorFactor",function(){return za}),n.d(t,"SrcAlphaSaturateFactor",function(){return Ga}),n.d(t,"NeverDepth",function(){return Va}),n.d(t,"AlwaysDepth",function(){return Wa}),n.d(t,"LessDepth",function(){return Ha}),n.d(t,"LessEqualDepth",function(){return qa}),n.d(t,"EqualDepth",function(){return Xa}),n.d(t,"GreaterEqualDepth",function(){return Ya}),n.d(t,"GreaterDepth",function(){return Ka}),n.d(t,"NotEqualDepth",function(){return Za}),n.d(t,"MultiplyOperation",function(){return Ja}),n.d(t,"MixOperation",function(){return Qa}),n.d(t,"AddOperation",function(){return $a}),n.d(t,"NoToneMapping",function(){return es}),n.d(t,"LinearToneMapping",function(){return ts}),n.d(t,"ReinhardToneMapping",function(){return ns}),n.d(t,"Uncharted2ToneMapping",function(){return is}),n.d(t,"CineonToneMapping",function(){return rs}),n.d(t,"UVMapping",function(){return os}),n.d(t,"CubeReflectionMapping",function(){return as}),n.d(t,"CubeRefractionMapping",function(){return ss}),n.d(t,"EquirectangularReflectionMapping",function(){return us}),n.d(t,"EquirectangularRefractionMapping",function(){return ls}),n.d(t,"SphericalReflectionMapping",function(){return cs}),n.d(t,"CubeUVReflectionMapping",function(){return hs}),n.d(t,"CubeUVRefractionMapping",function(){return fs}),n.d(t,"RepeatWrapping",function(){return ds}),n.d(t,"ClampToEdgeWrapping",function(){return ps}),n.d(t,"MirroredRepeatWrapping",function(){return ms}),n.d(t,"NearestFilter",function(){return vs}),n.d(t,"NearestMipMapNearestFilter",function(){return gs}),n.d(t,"NearestMipMapLinearFilter",function(){return ys}),n.d(t,"LinearFilter",function(){return bs}),n.d(t,"LinearMipMapNearestFilter",function(){return _s}),n.d(t,"LinearMipMapLinearFilter",function(){return ws}),n.d(t,"UnsignedByteType",function(){return xs}),n.d(t,"ByteType",function(){return Ms}),n.d(t,"ShortType",function(){return Ss}),n.d(t,"UnsignedShortType",function(){return Es}),n.d(t,"IntType",function(){return Ts}),n.d(t,"UnsignedIntType",function(){return As}),n.d(t,"FloatType",function(){return Cs}),n.d(t,"HalfFloatType",function(){return Ps}),n.d(t,"UnsignedShort4444Type",function(){return Os}),n.d(t,"UnsignedShort5551Type",function(){return Ls}),n.d(t,"UnsignedShort565Type",function(){return ks}),n.d(t,"UnsignedInt248Type",function(){return Is}),n.d(t,"AlphaFormat",function(){return Rs}),n.d(t,"RGBFormat",function(){return Ns}),n.d(t,"RGBAFormat",function(){return Ds}),n.d(t,"LuminanceFormat",function(){return Fs}),n.d(t,"LuminanceAlphaFormat",function(){return Us}),n.d(t,"RGBEFormat",function(){return js}),n.d(t,"DepthFormat",function(){return Bs}),n.d(t,"DepthStencilFormat",function(){return zs}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Gs}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return Vs}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return Ws}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return Hs}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return qs}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return Xs}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return Ys}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return Ks}),n.d(t,"RGB_ETC1_Format",function(){return Zs}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return Js}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return Qs}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return $s}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return eu}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return tu}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return nu}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return iu}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return ru}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return ou}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return au}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return su}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return uu}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return lu}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return cu}),n.d(t,"LoopOnce",function(){return hu}),n.d(t,"LoopRepeat",function(){return fu}),n.d(t,"LoopPingPong",function(){return du}),n.d(t,"InterpolateDiscrete",function(){return pu}),n.d(t,"InterpolateLinear",function(){return mu}),n.d(t,"InterpolateSmooth",function(){return vu}),n.d(t,"ZeroCurvatureEnding",function(){return gu}),n.d(t,"ZeroSlopeEnding",function(){return yu}),n.d(t,"WrapAroundEnding",function(){return bu}),n.d(t,"TrianglesDrawMode",function(){return _u}),n.d(t,"TriangleStripDrawMode",function(){return wu}),n.d(t,"TriangleFanDrawMode",function(){return xu}),n.d(t,"LinearEncoding",function(){return Mu}),n.d(t,"sRGBEncoding",function(){return Su}),n.d(t,"GammaEncoding",function(){return Eu}),n.d(t,"RGBEEncoding",function(){return Tu}),n.d(t,"LogLuvEncoding",function(){return Au}),n.d(t,"RGBM7Encoding",function(){return Cu}),n.d(t,"RGBM16Encoding",function(){return Pu}),n.d(t,"RGBDEncoding",function(){return Ou}),n.d(t,"BasicDepthPacking",function(){return Lu}),n.d(t,"RGBADepthPacking",function(){return ku}),n.d(t,"TangentSpaceNormalMap",function(){return Iu}),n.d(t,"ObjectSpaceNormalMap",function(){return Ru}),n.d(t,"CubeGeometry",function(){return z}),n.d(t,"Face4",function(){return So}),n.d(t,"LineStrip",function(){return Cl}),n.d(t,"LinePieces",function(){return Pl}),n.d(t,"MeshFaceMaterial",function(){return Eo}),n.d(t,"MultiMaterial",function(){return To}),n.d(t,"PointCloud",function(){return Ao}),n.d(t,"Particle",function(){return Co}),n.d(t,"ParticleSystem",function(){return Po}),n.d(t,"PointCloudMaterial",function(){return Oo}),n.d(t,"ParticleBasicMaterial",function(){return Lo}),n.d(t,"ParticleSystemMaterial",function(){return ko}),n.d(t,"Vertex",function(){return Io}),n.d(t,"DynamicBufferAttribute",function(){return Ro}),n.d(t,"Int8Attribute",function(){return No}),n.d(t,"Uint8Attribute",function(){return Do}),n.d(t,"Uint8ClampedAttribute",function(){return Fo}),n.d(t,"Int16Attribute",function(){return Uo}),n.d(t,"Uint16Attribute",function(){return jo}),n.d(t,"Int32Attribute",function(){return Bo}),n.d(t,"Uint32Attribute",function(){return zo}),n.d(t,"Float32Attribute",function(){return Go}),n.d(t,"Float64Attribute",function(){return Vo}),n.d(t,"ClosedSplineCurve3",function(){return Wo}),n.d(t,"SplineCurve3",function(){return Ho}),n.d(t,"Spline",function(){return qo}),n.d(t,"AxisHelper",function(){return Xo}),n.d(t,"BoundingBoxHelper",function(){return Yo}),n.d(t,"EdgesHelper",function(){return Ko}),n.d(t,"WireframeHelper",function(){return Zo}),n.d(t,"XHRLoader",function(){return Jo}),n.d(t,"BinaryTextureLoader",function(){return Qo}),n.d(t,"GeometryUtils",function(){return Ol}),n.d(t,"Projector",function(){return $o}),n.d(t,"CanvasRenderer",function(){return ea});n.d(t,"SceneUtils",function(){return Ll}),n.d(t,"LensFlare",function(){return ta}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}}(),Object.assign(i.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var i=n.slice(0),r=0,o=i.length;r<o;r++)i[r].call(this,e)}}}});var na="96",ia={LEFT:0,MIDDLE:1,RIGHT:2},ra=0,oa=1,aa=2,sa=3,ua=0,la=1,ca=0,ha=1,fa=2,da=0,pa=1,ma=2,va=1,ga=2,ya=0,ba=1,_a=2,wa=0,xa=1,Ma=2,Sa=3,Ea=4,Ta=5,Aa=100,Ca=101,Pa=102,Oa=103,La=104,ka=200,Ia=201,Ra=202,Na=203,Da=204,Fa=205,Ua=206,ja=207,Ba=208,za=209,Ga=210,Va=0,Wa=1,Ha=2,qa=3,Xa=4,Ya=5,Ka=6,Za=7,Ja=0,Qa=1,$a=2,es=0,ts=1,ns=2,is=3,rs=4,os=300,as=301,ss=302,us=303,ls=304,cs=305,hs=306,fs=307,ds=1e3,ps=1001,ms=1002,vs=1003,gs=1004,ys=1005,bs=1006,_s=1007,ws=1008,xs=1009,Ms=1010,Ss=1011,Es=1012,Ts=1013,As=1014,Cs=1015,Ps=1016,Os=1017,Ls=1018,ks=1019,Is=1020,Rs=1021,Ns=1022,Ds=1023,Fs=1024,Us=1025,js=Ds,Bs=1026,zs=1027,Gs=33776,Vs=33777,Ws=33778,Hs=33779,qs=35840,Xs=35841,Ys=35842,Ks=35843,Zs=36196,Js=37808,Qs=37809,$s=37810,eu=37811,tu=37812,nu=37813,iu=37814,ru=37815,ou=37816,au=37817,su=37818,uu=37819,lu=37820,cu=37821,hu=2200,fu=2201,du=2202,pu=2300,mu=2301,vu=2302,gu=2400,yu=2401,bu=2402,_u=0,wu=1,xu=2,Mu=3e3,Su=3001,Eu=3007,Tu=3002,Au=3003,Cu=3004,Pu=3005,Ou=3006,Lu=3200,ku=3201,Iu=0,Ru=1,Nu={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Nu.DEG2RAD},radToDeg:function(e){return e*Nu.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(r.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new r,t=new r;return function(n,i){return e.set(n,n),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}}),Object.assign(o.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,o,a,s,u,l,c,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new s;return function(t){var n=this.elements,i=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){!e||e.isEuler;var t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),u=Math.sin(i),l=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var h=o*l,f=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*l,v=s*c,g=u*l,y=u*c;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){var m=s*l,v=s*c,g=u*l,y=u*c;t[0]=m-y*a,t[4]=-o*c,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*l,t[9]=y-m*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var h=o*l,f=o*c,d=a*l,p=a*c;t[0]=s*l,t[4]=d*u-f,t[8]=h*u+p,t[1]=s*c,t[5]=p*u+h,t[9]=f*u-d,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,_=o*u,w=a*s,x=a*u;t[0]=s*l,t[4]=x-b*c,t[8]=w*c+_,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=_*c+w,t[10]=b-x*c}else if("XZY"===e.order){var b=o*s,_=o*u,w=a*s,x=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=b*c+x,t[5]=o*l,t[9]=_*c-w,t[2]=w*c-_,t[6]=a*l,t[10]=x*c+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new s(0,0,0),t=new s(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new s,t=new s,n=new s;return function(i,r,o){var a=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?this.multiplyMatrices(e,t):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=i[0],x=i[4],M=i[8],S=i[12],E=i[1],T=i[5],A=i[9],C=i[13],P=i[2],O=i[6],L=i[10],k=i[14],I=i[3],R=i[7],N=i[11],D=i[15];return r[0]=o*w+a*E+s*P+u*I,r[4]=o*x+a*T+s*O+u*R,r[8]=o*M+a*A+s*L+u*N,r[12]=o*S+a*C+s*k+u*D,r[1]=l*w+c*E+h*P+f*I,r[5]=l*x+c*T+h*O+f*R,r[9]=l*M+c*A+h*L+f*N,r[13]=l*S+c*C+h*k+f*D,r[2]=d*w+p*E+m*P+v*I,r[6]=d*x+p*T+m*O+v*R,r[10]=d*M+p*A+m*L+v*N,r[14]=d*S+p*C+m*k+v*D,r[3]=g*w+y*E+b*P+_*I,r[7]=g*x+y*T+b*O+_*R,r[11]=g*M+y*A+b*L+_*N,r[15]=g*S+y*C+b*k+_*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new s;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+r*s*c-i*u*c-r*a*h+n*u*h+i*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+r*o*h-i*o*f+i*u*l-r*s*l)+e[11]*(+t*u*c-t*a*f-r*o*c+n*o*f+r*a*l-n*u*l)+e[15]*(-i*a*l-t*s*c+t*a*h+i*o*c-n*o*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],o=i[1],a=i[2],s=i[3],u=i[4],l=i[5],c=i[6],h=i[7],f=i[8],d=i[9],p=i[10],m=i[11],v=i[12],g=i[13],y=i[14],b=i[15],_=d*y*h-g*p*h+g*c*m-l*y*m-d*c*b+l*p*b,w=v*p*h-f*y*h-v*c*m+u*y*m+f*c*b-u*p*b,x=f*g*h-v*d*h+v*l*m-u*g*m-f*l*b+u*d*b,M=v*d*c-f*g*c-v*l*p+u*g*p+f*l*y-u*d*y,S=r*_+o*w+a*x+s*M;if(0===S){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return this.identity()}var T=1/S;return n[0]=_*T,n[1]=(g*p*s-d*y*s-g*a*m+o*y*m+d*a*b-o*p*b)*T,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*b+o*c*b)*T,n[3]=(d*c*s-l*p*s-d*a*h+o*p*h+l*a*m-o*c*m)*T,n[4]=w*T,n[5]=(f*y*s-v*p*s+v*a*m-r*y*m-f*a*b+r*p*b)*T,n[6]=(v*c*s-u*y*s-v*a*h+r*y*h+u*a*b-r*c*b)*T,n[7]=(u*p*s-f*c*s+f*a*h-r*p*h-u*a*m+r*c*m)*T,n[8]=x*T,n[9]=(v*d*s-f*g*s-v*o*m+r*g*m+f*o*b-r*d*b)*T,n[10]=(u*g*s-v*l*s+v*o*h-r*g*h-u*o*b+r*l*b)*T,n[11]=(f*l*s-u*d*s-f*o*h+r*d*h+u*o*m-r*l*m)*T,n[12]=M*T,n[13]=(f*g*a-v*d*a+v*o*p-r*g*p-f*o*y+r*d*y)*T,n[14]=(v*l*a-u*g*a-v*o*c+r*g*c+u*o*y-r*l*y)*T,n[15]=(u*d*a-f*l*a+f*o*c-r*d*c-u*o*p+r*l*p)*T,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,u=r*o,l=r*a;return this.set(u*o+n,u*a-i*s,u*s+i*a,0,u*a+i*s,l*a+n,l*s-i*o,0,u*s-i*a,l*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,u=r+r,l=o+o,c=a+a,h=r*u,f=r*l,d=r*c,p=o*l,m=o*c,v=a*c,g=s*u,y=s*l,b=s*c,_=n.x,w=n.y,x=n.z;return i[0]=(1-(p+v))*_,i[1]=(f+b)*_,i[2]=(d-y)*_,i[3]=0,i[4]=(f-b)*w,i[5]=(1-(h+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(d+y)*x,i[9]=(m-g)*x,i[10]=(1-(h+p))*x,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(){var e=new s,t=new o;return function(n,i,r){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),u=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var l=1/a,c=1/s,h=1/u;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,i.setFromRotationMatrix(t),r.x=a,r.y=s,r.z=u,this}}(),makePerspective:function(e,t,n,i,r,o){var a=this.elements,s=2*r/(t-e),u=2*r/(n-i),l=(t+e)/(t-e),c=(n+i)/(n-i),h=-(o+r)/(o-r),f=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,i,r,o){var a=this.elements,s=1/(t-e),u=1/(n-i),l=1/(o-r),c=(t+e)*s,h=(n+i)*u,f=(o+r)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(a,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,o,a){var s=n[i+0],u=n[i+1],l=n[i+2],c=n[i+3],h=r[o+0],f=r[o+1],d=r[o+2],p=r[o+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-a,v=s*h+u*f+l*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var w=a*g;if(s=s*m+h*w,u=u*m+f*w,l=l*m+d*w,c=c*m+p*w,m===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),Object.defineProperties(a.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(a.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,o=e.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(i/2),c=a(r/2),h=s(n/2),f=s(i/2),d=s(r/2);return"XYZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"YXZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"ZXY"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"ZYX"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"YZX"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d):"XZY"===o&&(this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=i+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-u)*t,this._y=(o-l)*t,this._z=(a-r)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(c-u)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(o-l)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(a-r)/t,this._x=(o+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new s;return function(n,i){return void 0===t&&(t=new s),e=n.dot(i)+1,e<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(Nu.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?this.multiplyQuaternions(e,t):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+i*u-r*s,this._y=i*l+o*s+r*a-n*u,this._z=r*l+o*u+n*s-i*a,this._w=o*l-n*a-i*s-r*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*i+t*this._y,this._z=u*r+t*this._z,this.normalize()}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=i*h+this._y*f,this._z=r*h+this._z*f,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(s.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?this.multiplyVectors(e,t):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new a;return function(t){return!t||t.isEuler,this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new a;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*i-a*n,l=s*n+a*t-r*i,c=s*i+r*n-o*t,h=-r*t-o*n-a*i;return this.x=u*s+h*-r+l*-a-c*-o,this.y=l*s+h*-o+c*-r-u*-a,this.z=c*s+h*-a+u*-o-l*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new o;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new s,t=new s;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?this.crossVectors(e,t):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new s;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new s;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Nu.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(u.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=i,l[2]=a,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new s;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=i[0],m=i[3],v=i[6],g=i[1],y=i[4],b=i[7],_=i[2],w=i[5],x=i[8];return r[0]=o*p+a*g+s*_,r[3]=o*m+a*y+s*w,r[6]=o*v+a*b+s*x,r[1]=u*p+l*g+c*_,r[4]=u*m+l*y+c*w,r[7]=u*v+l*b+c*x,r[2]=h*p+f*g+d*_,r[5]=h*m+f*y+d*w,r[8]=h*v+f*b+d*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*r*l+n*a*s+i*r*u-i*o*s},getInverse:function(e,t){e&&e.isMatrix4;var n=e.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,v=r*d+o*p+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return this.identity()}var y=1/v;return i[0]=d*y,i[1]=(a*h-f*o)*y,i[2]=(l*o-a*u)*y,i[3]=p*y,i[4]=(f*r-a*c)*y,i[5]=(a*s-l*r)*y,i[6]=m*y,i[7]=(o*c-h*r)*y,i[8]=(u*r-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,o,a){var s=Math.cos(r),u=Math.sin(r);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-i*u,i*s,-i*(-u*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],u=i[4],l=i[7];return i[0]=t*r+n*s,i[3]=t*o+n*u,i[6]=t*a+n*l,i[1]=-n*r+t*s,i[4]=-n*o+t*u,i[7]=-n*a+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Du={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Fu=0;l.DEFAULT_IMAGE=void 0,l.DEFAULT_MAPPING=os,l.prototype=Object.assign(Object.create(i.prototype),{constructor:l,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Nu.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var o=0,a=i.length;o<a;o++)r.push(Du.getDataURL(i[o]))}else r=Du.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==os)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ds:e.x=e.x-Math.floor(e.x);break;case ps:e.x=e.x<0?0:1;break;case ms:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ds:e.y=e.y-Math.floor(e.y);break;case ps:e.y=e.y<0?0:1;break;case ms:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(l.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(c.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,o=e.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+l)/4,b=(u+f)/4,_=(h+d)/4;return m>v&&m>g?m<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(m),i=y/n,r=b/n):v>g?v<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(v),n=y/i,r=_/i):g<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=b/r,i=_/r),this.set(n,i,r,t),this}var w=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(u-f)/w,this.z=(l-s)/w,this.w=Math.acos((a+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new c,t=new c),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),h.prototype=Object.assign(Object.create(i.prototype),{constructor:h,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),f.prototype=Object.create(h.prototype),f.prototype.constructor=f,f.prototype.isWebGLRenderTargetCube=!0,d.prototype=Object.create(l.prototype),d.prototype.constructor=d,d.prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new s;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(e=new s),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(e=new s),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var o=e.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,i=a.length;n<i;n++)r.copy(a[n]),r.applyMatrix4(e.matrixWorld),t.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)r.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),t.expandByPoint(r)}}var t,n,i,r=new s;return function(n){return t=this,n.updateMatrixWorld(!0),n.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(t=new s),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new s;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){function e(e){var r,o;for(r=0,o=e.length-3;r<=o;r+=3){u.fromArray(e,r);var a=c.x*Math.abs(u.x)+c.y*Math.abs(u.y)+c.z*Math.abs(u.z),s=t.dot(u),l=n.dot(u),h=i.dot(u);if(Math.max(-Math.max(s,l,h),Math.min(s,l,h))>a)return!1}return!0}var t=new s,n=new s,i=new s,r=new s,o=new s,a=new s,u=new s,l=new s,c=new s,h=new s;return function(s){if(this.isEmpty())return!1;this.getCenter(l),c.subVectors(this.max,l),t.subVectors(s.a,l),n.subVectors(s.b,l),i.subVectors(s.c,l),r.subVectors(n,t),o.subVectors(i,n),a.subVectors(t,i);var u=[0,-r.z,r.y,0,-o.z,o.y,0,-a.z,a.y,r.z,0,-r.x,o.z,0,-o.x,a.z,0,-a.x,-r.y,r.x,0,-o.y,o.x,0,-a.y,a.x,0];return!!e(u)&&(u=[1,0,0,0,1,0,0,0,1],!!e(u)&&(h.crossVectors(r,o),u=[h.x,h.y,h.z],e(u)))}}(),clampPoint:function(e,t){return void 0===t&&(t=new s),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new s;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new s;return function(t){return void 0===t&&(t=new m),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new s,new s,new s,new s,new s,new s,new s,new s];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(m.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new p;return function(t,n){var i=this.center;void 0!==n?i.copy(n):e.setFromPoints(t).getCenter(i);for(var r=0,o=0,a=t.length;o<a;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(t=new s),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(e=new p),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(v.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new s,t=new s;return function(n,i,r){var o=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(t=new s),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new s;return function(t,n){void 0===n&&(n=new s);var i=t.delta(e),r=this.normal.dot(i);if(0!==r){var o=-(t.start.dot(this.normal)+this.constant)/r;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(e=new s),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new s,t=new u;return function(n,i){var r=i||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(g.prototype,{set:function(e,t,n,i,r,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-i,c-s,p-h,y-m).normalize(),t[1].setComponents(a+i,c+s,p+h,y+m).normalize(),t[2].setComponents(a+r,c+u,p+f,y+v).normalize(),t[3].setComponents(a-r,c-u,p-f,y-v).normalize(),t[4].setComponents(a-o,c-l,p-d,y-g).normalize(),t[5].setComponents(a+o,c+l,p+d,y+g).normalize(),this},intersectsObject:function(){var e=new m;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new m;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(){var e=new s;return function(t){for(var n=this.planes,i=0;i<6;i++){var r=n[i];if(e.x=r.normal.x>0?t.max.x:t.min.x,e.y=r.normal.y>0?t.max.y:t.min.y,e.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Uu={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},ju={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var i in e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}},Bu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=Nu.euclideanModulo(t,1),n=Nu.clamp(n,0,1),i=Nu.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=e(o,r,t+1/3),this.g=e(o,r,t),this.b=e(o,r,t-1/3)}return this}}(),setStyle:function(e){function t(e){void 0!==e&&parseFloat(e)}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=Bu[e];void 0!==l&&this.setHex(l)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case i:t=(r-o)/l+(r<o?6:0);break;case r:t=(o-i)/l+2;break;case o:t=(i-r)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,i){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=i,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,i){this.getHSL(e),n.getHSL(t);var r=Nu.lerp(e.h,t.h,i),o=Nu.lerp(e.s,t.s,i),a=Nu.lerp(e.l,t.l,i);return this.setHSL(r,o,a),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var zu={common:{diffuse:{value:new y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new u},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new u}},sprite:{diffuse:{value:new y(15658734)},opacity:{value:1},center:{value:new r(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new u}}},Gu={basic:{uniforms:ju.merge([zu.common,zu.specularmap,zu.envmap,zu.aomap,zu.lightmap,zu.fog]),vertexShader:Uu.meshbasic_vert,fragmentShader:Uu.meshbasic_frag},lambert:{uniforms:ju.merge([zu.common,zu.specularmap,zu.envmap,zu.aomap,zu.lightmap,zu.emissivemap,zu.fog,zu.lights,{emissive:{value:new y(0)}}]),vertexShader:Uu.meshlambert_vert,fragmentShader:Uu.meshlambert_frag},phong:{uniforms:ju.merge([zu.common,zu.specularmap,zu.envmap,zu.aomap,zu.lightmap,zu.emissivemap,zu.bumpmap,zu.normalmap,zu.displacementmap,zu.gradientmap,zu.fog,zu.lights,{emissive:{value:new y(0)},specular:{value:new y(1118481)},shininess:{value:30}}]),vertexShader:Uu.meshphong_vert,fragmentShader:Uu.meshphong_frag},standard:{uniforms:ju.merge([zu.common,zu.envmap,zu.aomap,zu.lightmap,zu.emissivemap,zu.bumpmap,zu.normalmap,zu.displacementmap,zu.roughnessmap,zu.metalnessmap,zu.fog,zu.lights,{emissive:{value:new y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Uu.meshphysical_vert,fragmentShader:Uu.meshphysical_frag},points:{uniforms:ju.merge([zu.points,zu.fog]),vertexShader:Uu.points_vert,fragmentShader:Uu.points_frag},dashed:{uniforms:ju.merge([zu.common,zu.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Uu.linedashed_vert,fragmentShader:Uu.linedashed_frag},depth:{uniforms:ju.merge([zu.common,zu.displacementmap]),vertexShader:Uu.depth_vert,fragmentShader:Uu.depth_frag},normal:{uniforms:ju.merge([zu.common,zu.bumpmap,zu.normalmap,zu.displacementmap,{opacity:{value:1}}]),vertexShader:Uu.normal_vert,fragmentShader:Uu.normal_frag},sprite:{uniforms:ju.merge([zu.sprite,zu.fog]),vertexShader:Uu.sprite_vert,fragmentShader:Uu.sprite_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Uu.cube_vert,fragmentShader:Uu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Uu.equirect_vert,fragmentShader:Uu.equirect_frag},distanceRGBA:{uniforms:ju.merge([zu.common,zu.displacementmap,{referencePosition:{value:new s},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Uu.distanceRGBA_vert,fragmentShader:Uu.distanceRGBA_frag},shadow:{uniforms:ju.merge([zu.lights,zu.fog,{color:{value:new y(0)},opacity:{value:1}}]),vertexShader:Uu.shadow_vert,fragmentShader:Uu.shadow_frag}};Gu.physical={uniforms:ju.merge([Gu.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Uu.meshphysical_vert,fragmentShader:Uu.meshphysical_frag},w.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],w.DefaultOrder="XYZ",Object.defineProperties(w.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(w.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Nu.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],u=r[1],l=r[5],c=r[9],h=r[2],f=r[6],d=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t&&(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0)),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new o;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new a;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(x.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var Vu=0;M.DefaultUp=new s(0,1,0),M.DefaultMatrixAutoUpdate=!0,M.prototype=Object.assign(Object.create(i.prototype),{constructor:M,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new a;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new a;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new s(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new s(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new s(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new s;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new s(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new s(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new s(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new o;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new a,t=new o,n=new s,i=new s;return function(r,o,a){r.isVector3?n.copy(r):n.set(r,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(i,n,this.up):t.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?this:(e&&e.isObject3D&&(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){return void 0===e&&(e=new s),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new s,t=new s;return function(n){return void 0===n&&(n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new s,t=new a;return function(n){return void 0===n&&(n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(e=new s),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}var i=void 0===e||"string"===typeof e,r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){o.geometry=t(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var u=0,l=s.length;u<l;u++){var c=s[u];t(e.shapes,c)}else t(e.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],u=0,l=this.material.length;u<l;u++)h.push(t(e.materials,this.material[u]));o.material=h}else o.material=t(e.materials,this.material);if(this.children.length>0){o.children=[];for(var u=0;u<this.children.length;u++)o.children.push(this.children[u].toJSON(e).object)}if(i){var f=n(e.geometries),d=n(e.materials),p=n(e.textures),m=n(e.images),s=n(e.shapes);f.length>0&&(r.geometries=f),d.length>0&&(r.materials=d),p.length>0&&(r.textures=p),m.length>0&&(r.images=m),s.length>0&&(r.shapes=s)}return r.object=o,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),S.prototype=Object.assign(Object.create(M.prototype),{constructor:S,isCamera:!0,copy:function(e,t){return M.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(e=new s),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){M.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),E.prototype=Object.assign(Object.create(S.prototype),{constructor:E,isOrthographicCamera:!0,copy:function(e,t){return S.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/u),o=r+c*(this.view.width/u),a-=h*(this.view.offsetY/l),s=a-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=M.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(T.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Wu=0;A.prototype=Object.assign(Object.create(i.prototype),{constructor:A,isGeometry:!0,applyMatrix:function(e){for(var t=(new u).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(var n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new o;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new o;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new o;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new o;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new o;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new M;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,i,r){var o=void 0!==u?[f[e].clone(),f[t].clone(),f[i].clone()]:[],a=void 0!==l?[n.colors[e].clone(),n.colors[t].clone(),n.colors[i].clone()]:[],s=new T(e,t,i,o,a,r);n.faces.push(s),void 0!==c&&n.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[i].clone()]),void 0!==h&&n.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[i].clone()])}var n=this,i=null!==e.index?e.index.array:void 0,o=e.attributes,a=o.position.array,u=void 0!==o.normal?o.normal.array:void 0,l=void 0!==o.color?o.color.array:void 0,c=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],m=0,v=0;m<a.length;m+=3,v+=2)n.vertices.push(new s(a[m],a[m+1],a[m+2])),void 0!==u&&f.push(new s(u[m],u[m+1],u[m+2])),void 0!==l&&n.colors.push(new y(l[m],l[m+1],l[m+2])),void 0!==c&&d.push(new r(c[v],c[v+1])),void 0!==h&&p.push(new r(h[v],h[v+1]));var g=e.groups;if(g.length>0)for(var m=0;m<g.length;m++)for(var b=g[m],_=b.start,w=b.count,v=_,x=_+w;v<x;v+=3)void 0!==i?t(i[v],i[v+1],i[v+2],b.materialIndex):t(v,v+1,v+2,b.materialIndex);else if(void 0!==i)for(var m=0;m<i.length;m+=3)t(i[m],i[m+1],i[m+2]);else for(var m=0;m<a.length/3;m+=3)t(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new o;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new s,t=new s,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],u=this.vertices[r.c];e.subVectors(u,a),t.subVectors(o,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,i,r,o,a;for(a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new s;if(e){var u,l,c,h=new s,f=new s;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],u=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],h.subVectors(c,l),f.subVectors(u,l),h.cross(f),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o=this.faces[i],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i];var d=o.vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new A;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,u,l=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)a=new s,u={a:new s,b:new s,c:new s},l.push(a),c.push(u)}var h=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var a,u;for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],a=h.faceNormals[n],u=h.vertexNormals[n],a.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new m),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],f=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new u).getNormalMatrix(t));for(var p=0,m=a.length;p<m;p++){var v=a[p],g=v.clone();void 0!==t&&g.applyMatrix4(t),o.push(g)}for(var p=0,m=d.length;p<m;p++)f.push(d[p].clone());for(p=0,m=l.length;p<m;p++){var y,b,_,w=l[p],x=w.vertexNormals,M=w.vertexColors;y=new T(w.a+r,w.b+r,w.c+r),y.normal.copy(w.normal),void 0!==i&&y.normal.applyMatrix3(i).normalize();for(var S=0,E=x.length;S<E;S++)b=x[S].clone(),void 0!==i&&b.applyMatrix3(i).normalize(),y.vertexNormals.push(b);y.color.copy(w.color);for(var S=0,E=M.length;S<E;S++)_=M[S],y.vertexColors.push(_.clone());y.materialIndex=w.materialIndex+n,s.push(y)}for(p=0,m=h.length;p<m;p++){var A=h[p],C=[];if(void 0!==A){for(var S=0,E=A.length;S<E;S++)C.push(A[S].clone());c.push(C)}}}},mergeMesh:function(e){e&&e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,n,i,r,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===u[t]?(u[t]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[t]];var f=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new s(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,i=0;i<n;i++)t[i]._id=i;t.sort(e);var r,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(r=[]),s&&s.length===n&&(o=[]);for(var i=0;i<n;i++){var u=t[i]._id;r&&r.push(a[u]),o&&o.push(s[u])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==f[t]?f[t]:(f[t]=h.length/3,h.push(e.x,e.y,e.z),f[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=d.length,d.push(e.getHex()),p[t])}function i(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z)}for(var c=[],h=[],f={},d=[],p={},m=[],v={},u=0;u<this.faces.length;u++){var g=this.faces[u],y=void 0!==this.faceVertexUvs[0][u],b=g.normal.length()>0,_=g.vertexNormals.length>0,w=1!==g.color.r||1!==g.color.g||1!==g.color.b,x=g.vertexColors.length>0,M=0;if(M=e(M,0,0),M=e(M,1,!0),M=e(M,2,!1),M=e(M,3,y),M=e(M,4,b),M=e(M,5,_),M=e(M,6,w),M=e(M,7,x),c.push(M),c.push(g.a,g.b,g.c),c.push(g.materialIndex),y){var S=this.faceVertexUvs[0][u];c.push(i(S[0]),i(S[1]),i(S[2]))}if(b&&c.push(t(g.normal)),_){var E=g.vertexNormals;c.push(t(E[0]),t(E[1]),t(E[2]))}if(w&&c.push(n(g.color)),x){var T=g.vertexColors;c.push(n(T[0]),n(T[1]),n(T[2]))}}return r.data={},r.data.vertices=s,r.data.normals=h,d.length>0&&(r.data.colors=d),m.length>0&&(r.data.uvs=[m]),r.data.faces=c,r},clone:function(){return(new A).copy(this)},copy:function(e){var t,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=c.length;i<r;i++){var h=c[i],f=[];for(o=0,a=h.length;o<a;o++){var d=h[o];f.push(d.clone())}this.faceVertexUvs[t].push(f)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)m.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(m.normals=[],i=0,r=p[t].normals.length;i<r;i++)m.normals.push(p[t].normals[i].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],i=0,r=v[t].vertexNormals.length;i<r;i++){var y=v[t].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],i=0,r=v[t].faceNormals.length;i<r;i++)g.faceNormals.push(v[t].faceNormals[i].clone());this.morphNormals.push(g)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(C.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(C.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(o=new y),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,o=e.length;i<o;i++){var a=e[i];void 0===a&&(a=new r),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(o=new s),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(o=new c),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),P.prototype=Object.create(C.prototype),P.prototype.constructor=P,O.prototype=Object.create(C.prototype),O.prototype.constructor=O,L.prototype=Object.create(C.prototype),L.prototype.constructor=L,k.prototype=Object.create(C.prototype),k.prototype.constructor=k,I.prototype=Object.create(C.prototype),I.prototype.constructor=I,R.prototype=Object.create(C.prototype),R.prototype.constructor=R,N.prototype=Object.create(C.prototype),N.prototype.constructor=N,D.prototype=Object.create(C.prototype),D.prototype.constructor=D,F.prototype=Object.create(C.prototype),F.prototype.constructor=F,Object.assign(U.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,u=e.morphTargets,l=u.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]={name:u[c].name,data:[]};this.morphTargets.position=t}var h,f=e.morphNormals,d=f.length;if(d>0){h=[];for(var c=0;c<d;c++)h[c]={name:f[c].name,data:[]};this.morphTargets.normal=h}var p=e.skinIndices,m=e.skinWeights,v=p.length===i.length,g=m.length===i.length;i.length>0&&n.length;for(var c=0;c<n.length;c++){var y=n[c];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var _=y.normal;this.normals.push(_,_,_)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=y.color;this.colors.push(x,x,x)}if(!0===a){var M=o[0][c];void 0!==M?this.uvs.push(M[0],M[1],M[2]):this.uvs.push(new r,new r,new r)}if(!0===s){var M=o[1][c];void 0!==M?this.uvs2.push(M[0],M[1],M[2]):this.uvs2.push(new r,new r,new r)}for(var S=0;S<l;S++){var E=u[S].vertices;t[S].data.push(E[y.a],E[y.b],E[y.c])}for(var S=0;S<d;S++){var T=f[S].vertexNormals[c];h[S].data.push(T.a,T.b,T.c)}v&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Hu=1;B.prototype=Object.assign(Object.create(i.prototype),{constructor:B,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(j(e)>65535?N:I)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(this.setIndex(t),this):(this.attributes[e]=t,this):this.addAttribute(e,new C(arguments[1],arguments[2]))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){(new u).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new o;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new o;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new o;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new o;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new o;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new M;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new D(3*t.vertices.length,3),i=new D(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new D(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new D(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var i;return!0===t.verticesNeedUpdate&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new U).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new C(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new C(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new C(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new C(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new C(o,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var a in e.morphTargets){for(var s=[],u=e.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],f=new D(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var d=new D(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new D(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){var e=new p,t=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new m);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(var r=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new C(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,o=i.length;r<o;r++)i[r]=0;var a,u,l,c=t.normal.array,h=new s,f=new s,d=new s,p=new s,m=new s;if(e)for(var v=e.array,r=0,o=e.count;r<o;r+=3)a=3*v[r+0],u=3*v[r+1],l=3*v[r+2],h.fromArray(n,a),f.fromArray(n,u),d.fromArray(n,l),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z;else for(var r=0,o=n.length;r<o;r+=9)h.fromArray(n,r),f.fromArray(n,r+3),d.fromArray(n,r+6),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),c[r]=p.x,c[r+1]=p.y,c[r+2]=p.z,c[r+3]=p.x,c[r+4]=p.y,c[r+5]=p.z,c[r+6]=p.x,c[r+7]=p.y,c[r+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0);var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i],o=r.array,a=e.attributes[i],s=a.array,u=a.itemSize,l=0,c=u*t;l<s.length;l++,c++)o[c]=s[l];return this}},normalizeNormals:function(){var e=new s;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return this;var e=new B,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,a=r.itemSize,s=new o.constructor(t.length*a),u=0,l=0,c=0,h=t.length;c<h;c++){u=t[c]*a;for(var f=0;f<a;f++)s[l++]=o[u++]}e.addAttribute(i,new C(s,a))}for(var d=this.groups,c=0,h=d.length;c<h;c++){var p=d[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var a=o[n],r=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new B).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var u=[],l=s[t];for(n=0,i=l.length;n<i;n++)u.push(l[n].clone());this.morphAttributes[t]=u}var c=e.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=e.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),z.prototype=Object.create(A.prototype),z.prototype.constructor=z,G.prototype=Object.create(B.prototype),G.prototype.constructor=G,V.prototype=Object.create(A.prototype),V.prototype.constructor=V,W.prototype=Object.create(B.prototype),W.prototype.constructor=W;var qu=0;H.prototype=Object.assign(Object.create(i.prototype),{constructor:H,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n)}else this.flatShading=n===va}},toJSON:function(e){function t(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}var n=void 0===e||"string"===typeof e;n&&(e={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==xa&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==da&&(i.side=this.side),this.vertexColors!==ya&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=t(e.textures),o=t(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),q.prototype=Object.create(H.prototype),q.prototype.constructor=q,q.prototype.isMeshBasicMaterial=!0,q.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},X.prototype=Object.create(H.prototype),X.prototype.constructor=X,X.prototype.isShaderMaterial=!0,X.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ju.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},X.prototype.toJSON=function(e){var t=H.prototype.toJSON.call(this,e);t.uniforms={};for(var n in this.uniforms){var i=this.uniforms[n],r=i.value;r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}return Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Y.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(t=new s),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new s;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(t=new s),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new s;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new s,t=new s,n=new s;return function(i,r,o,a){e.copy(i).add(r).multiplyScalar(.5),t.copy(r).sub(i).normalize(),n.copy(this.origin).sub(e);var s,u,l,c,h=.5*i.distanceTo(r),f=-this.direction.dot(t),d=n.dot(this.direction),p=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-f*f);if(v>0)if(s=f*p-d,u=f*d-p,c=h*v,s>=0)if(u>=-c)if(u<=c){var g=1/v;s*=g,u*=g,l=s*(s+f*u+2*d)+u*(f*s+u+2*p)+m}else u=h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;else u=-h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;else u<=-c?(s=Math.max(0,-(-f*h+d)),u=s>0?-h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m):u<=c?(s=0,u=Math.min(Math.max(-h,-p),h),l=u*(u+2*p)+m):(s=Math.max(0,-(f*h+d)),u=s>0?h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m);else u=f>0?-h:h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(u).add(e),l}}(),intersectSphere:function(){var e=new s;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,o=t.radius*t.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,u=i+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),l>=0?(r=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(r=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(){var e=new s;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new s,t=new s,n=new s,i=new s;return function(r,o,a,s,u){t.subVectors(o,r),n.subVectors(a,r),i.crossVectors(t,n);var l,c=this.direction.dot(i);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,r);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var f=l*this.direction.dot(t.cross(e));if(f<0)return null;if(h+f>c)return null;var d=-l*e.dot(i);return d<0?null:this.at(d/c,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(K,{getNormal:function(){var e=new s;return function(t,n,i,r){void 0===r&&(r=new s),r.subVectors(i,n),e.subVectors(t,n),r.cross(e);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var e=new s,t=new s,n=new s;return function(i,r,o,a,u){e.subVectors(a,r),t.subVectors(o,r),n.subVectors(i,r);var l=e.dot(e),c=e.dot(t),h=e.dot(n),f=t.dot(t),d=t.dot(n),p=l*f-c*c;if(void 0===u&&(u=new s),0===p)return u.set(-2,-1,-1);var m=1/p,v=(f*h-c*d)*m,g=(l*d-c*h)*m;return u.set(1-v-g,g,v)}}(),containsPoint:function(){var e=new s;return function(t,n,i,r){return K.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new s;return function(t,n,i,r,o,a,s,u){return this.getBarycoord(t,n,i,r,e),u.set(0,0),u.addScaledVector(o,e.x),u.addScaledVector(a,e.y),u.addScaledVector(s,e.z),u}}()}),Object.assign(K.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new s,t=new s;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(e=new s),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return K.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(e=new s),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return K.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return K.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,i,r){return K.getUV(e,this.a,this.b,this.c,t,n,i,r)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new s,t=new s,n=new s,i=new s,r=new s,o=new s;return function(a,u){void 0===u&&(u=new s);var l,c,h=this.a,f=this.b,d=this.c;e.subVectors(f,h),t.subVectors(d,h),i.subVectors(a,h);var p=e.dot(i),m=t.dot(i);if(p<=0&&m<=0)return u.copy(h);r.subVectors(a,f);var v=e.dot(r),g=t.dot(r);if(v>=0&&g<=v)return u.copy(f);var y=p*g-v*m;if(y<=0&&p>=0&&v<=0)return l=p/(p-v),u.copy(h).addScaledVector(e,l);o.subVectors(a,d);var b=e.dot(o),_=t.dot(o);if(_>=0&&b<=_)return u.copy(d);var w=b*m-p*_;if(w<=0&&m>=0&&_<=0)return c=m/(m-_),u.copy(h).addScaledVector(t,c);var x=v*_-b*g;if(x<=0&&g-v>=0&&b-_>=0)return n.subVectors(d,f),c=(g-v)/(g-v+(b-_)),u.copy(f).addScaledVector(n,c);var M=1/(x+w+y);return l=w*M,c=y*M,u.copy(h).addScaledVector(e,l).addScaledVector(t,c)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Z.prototype=Object.assign(Object.create(M.prototype),{constructor:Z,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return M.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){function e(e,t,n,i,r,o,a,s){if(null===(t.side===pa?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,t.side!==ma,s)))return null;b.copy(s),b.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(b);return u<n.near||u>n.far?null:{distance:u,point:b.clone(),object:e}}function t(t,n,i,o,a,s,h,f,d){u.fromBufferAttribute(a,h),l.fromBufferAttribute(a,f),c.fromBufferAttribute(a,d);var m=e(t,n,i,o,u,l,c,y);if(m){s&&(p.fromBufferAttribute(s,h),v.fromBufferAttribute(s,f),g.fromBufferAttribute(s,d),m.uv=K.getUV(y,u,l,c,p,v,g,new r));var b=new T(h,f,d);K.getNormal(u,l,c,b.normal),m.face=b}return m}var n=new o,i=new Y,a=new m,u=new s,l=new s,c=new s,h=new s,f=new s,d=new s,p=new r,v=new r,g=new r,y=new s,b=new s;return function(o,s){var m=this.geometry,b=this.material,_=this.matrixWorld;if(void 0!==b&&(null===m.boundingSphere&&m.computeBoundingSphere(),a.copy(m.boundingSphere),a.applyMatrix4(_),!1!==o.ray.intersectsSphere(a)&&(n.getInverse(_),i.copy(o.ray).applyMatrix4(n),null===m.boundingBox||!1!==i.intersectsBox(m.boundingBox)))){var w;if(m.isBufferGeometry){var x,M,S,E,T,A,C,P,O,L,k,I=m.index,R=m.attributes.position,N=m.attributes.uv,D=m.groups,F=m.drawRange;if(null!==I)if(Array.isArray(b))for(E=0,A=D.length;E<A;E++)for(P=D[E],O=b[P.materialIndex],L=Math.max(P.start,F.start),k=Math.min(P.start+P.count,F.start+F.count),T=L,C=k;T<C;T+=3)x=I.getX(T),M=I.getX(T+1),S=I.getX(T+2),(w=t(this,O,o,i,R,N,x,M,S))&&(w.faceIndex=Math.floor(T/3),s.push(w));else for(L=Math.max(0,F.start),k=Math.min(I.count,F.start+F.count),E=L,A=k;E<A;E+=3)x=I.getX(E),M=I.getX(E+1),S=I.getX(E+2),(w=t(this,b,o,i,R,N,x,M,S))&&(w.faceIndex=Math.floor(E/3),s.push(w));else if(void 0!==R)if(Array.isArray(b))for(E=0,A=D.length;E<A;E++)for(P=D[E],O=b[P.materialIndex],L=Math.max(P.start,F.start),k=Math.min(P.start+P.count,F.start+F.count),T=L,C=k;T<C;T+=3)x=T,M=T+1,S=T+2,(w=t(this,O,o,i,R,N,x,M,S))&&(w.faceIndex=Math.floor(T/3),s.push(w));else for(L=Math.max(0,F.start),k=Math.min(R.count,F.start+F.count),E=L,A=k;E<A;E+=3)x=E,M=E+1,S=E+2,(w=t(this,b,o,i,R,N,x,M,S))&&(w.faceIndex=Math.floor(E/3),s.push(w))}else if(m.isGeometry){var U,j,B,z,G=Array.isArray(b),V=m.vertices,W=m.faces,H=m.faceVertexUvs[0];H.length>0&&(z=H);for(var q=0,X=W.length;q<X;q++){var Y=W[q],Z=G?b[Y.materialIndex]:b;if(void 0!==Z){if(U=V[Y.a],j=V[Y.b],B=V[Y.c],!0===Z.morphTargets){var J=m.morphTargets,Q=this.morphTargetInfluences;u.set(0,0,0),l.set(0,0,0),c.set(0,0,0);for(var $=0,ee=J.length;$<ee;$++){var te=Q[$];if(0!==te){var ne=J[$].vertices;u.addScaledVector(h.subVectors(ne[Y.a],U),te),l.addScaledVector(f.subVectors(ne[Y.b],j),te),c.addScaledVector(d.subVectors(ne[Y.c],B),te)}}u.add(U),l.add(j),c.add(B),U=u,j=l,B=c}if(w=e(this,Z,o,i,U,j,B,y)){if(z&&z[q]){var ie=z[q];p.copy(ie[0]),v.copy(ie[1]),g.copy(ie[2]),w.uv=K.getUV(y,U,j,B,p,v,g,new r)}w.face=Y,w.faceIndex=q,s.push(w)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ue.prototype=Object.create(l.prototype),ue.prototype.constructor=ue,ue.prototype.isCubeTexture=!0,Object.defineProperty(ue.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Xu=new l,Yu=new ue,Ku=[],Zu=[],Ju=new Float32Array(16),Qu=new Float32Array(9),$u=new Float32Array(4);Be.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),fe(t,e)},ze.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,o=i.length;r!==o;++r){var a=i[r];a.setValue(e,t[a.id],n)}};var el=/([\w\d_]+)(\])?(\[|\.)?/g;We.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},We.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},We.upload=function(e,t,n,i){for(var r=0,o=t.length;r!==o;++r){var a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}},We.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var o=e[i];o.id in t&&n.push(o)}return n};var tl=0,nl=0;mt.prototype=Object.create(H.prototype),mt.prototype.constructor=mt,mt.prototype.isMeshDepthMaterial=!0,mt.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},vt.prototype=Object.create(H.prototype),vt.prototype.constructor=vt,vt.prototype.isMeshDistanceMaterial=!0,vt.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},wt.prototype=Object.assign(Object.create(M.prototype),{constructor:wt,isGroup:!0}),xt.prototype=Object.assign(Object.create(S.prototype),{constructor:xt,isPerspectiveCamera:!0,copy:function(e,t){return S.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Nu.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Nu.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Nu.RAD2DEG*Math.atan(Math.tan(.5*Nu.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Nu.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,t-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(r+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=M.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Mt.prototype=Object.assign(Object.create(xt.prototype),{constructor:Mt,isArrayCamera:!0}),At.prototype.isFogExp2=!0,At.prototype.clone=function(){return new At(this.color,this.density)},At.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Ct.prototype.isFog=!0,Ct.prototype.clone=function(){return new Ct(this.color,this.near,this.far)},Ct.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Pt.prototype=Object.assign(Object.create(M.prototype),{constructor:Pt,copy:function(e,t){return M.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=M.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(Ot.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ot.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Lt.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Lt.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),kt.prototype=Object.create(H.prototype),kt.prototype.constructor=kt,kt.prototype.isSpriteMaterial=!0,kt.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var il;It.prototype=Object.assign(Object.create(M.prototype),{constructor:It,isSprite:!0,raycast:function(){function e(e,t,n,i,r,o){a.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(u.x=o*a.x-r*a.y,u.y=r*a.x+o*a.y):u.copy(a),e.copy(t),e.x+=u.x,e.y+=u.y,e.applyMatrix4(l)}var t=new s,n=new s,i=new s,a=new r,u=new r,l=new o,c=new s,h=new s,f=new s,d=new r,p=new r,m=new r;return function(o,a){n.setFromMatrixScale(this.matrixWorld),l.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),i.setFromMatrixPosition(this.modelViewMatrix);var s,u,v=this.material.rotation;0!==v&&(u=Math.cos(v),s=Math.sin(v));var g=this.center;e(c.set(-.5,-.5,0),i,g,n,s,u),e(h.set(.5,-.5,0),i,g,n,s,u),e(f.set(.5,.5,0),i,g,n,s,u),d.set(0,0),p.set(1,0),m.set(1,1);var y=o.ray.intersectTriangle(c,h,f,!1,t);if(null!==y||(e(h.set(-.5,.5,0),i,g,n,s,u),p.set(0,1),null!==(y=o.ray.intersectTriangle(c,f,h,!1,t)))){var b=o.ray.origin.distanceTo(t);b<o.near||b>o.far||a.push({distance:b,point:t.clone(),uv:K.getUV(t,c,h,f,d,p,m,new r),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return M.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Rt.prototype=Object.assign(Object.create(M.prototype),{constructor:Rt,copy:function(e){M.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new s;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,n)}}(),update:function(){var e=new s,t=new s;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(e){var t=M.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Nt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new o;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new o,t=new o;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var u=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(u,i[a]),e.toArray(r,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Nt(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),Dt.prototype=Object.assign(Object.create(M.prototype),{constructor:Dt,isBone:!0}),Ft.prototype=Object.assign(Object.create(Z.prototype),{constructor:Ft,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new Dt,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],-1!==t.parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.manhattanLength(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new c,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),e=1/i.manhattanLength(),e!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){Z.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ut.prototype=Object.create(H.prototype),Ut.prototype.constructor=Ut,Ut.prototype.isLineBasicMaterial=!0,Ut.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},jt.prototype=Object.assign(Object.create(M.prototype),{constructor:jt,isLine:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){var n=this.geometry;if(n.isBufferGeometry){if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,a=i.count;o<a;o++)e.fromBufferAttribute(i,o-1),t.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new D(r,1))}}else if(n.isGeometry){var s=n.vertices,r=n.lineDistances;r[0]=0;for(var o=1,a=s.length;o<a;o++)r[o]=r[o-1],r[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new o,t=new Y,n=new m;return function(i,r){var o=i.linePrecision,a=this.geometry,u=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(u),n.radius+=o,!1!==i.ray.intersectsSphere(n)){e.getInverse(u),t.copy(i.ray).applyMatrix4(e);var l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new s,f=new s,d=new s,p=new s,m=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var v=a.index,g=a.attributes,y=g.position.array;if(null!==v)for(var b=v.array,_=0,w=b.length-1;_<w;_+=m){var x=b[_],M=b[_+1];h.fromArray(y,3*x),f.fromArray(y,3*M);var S=t.distanceSqToSegment(h,f,p,d);if(!(S>c)){p.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(p);E<i.near||E>i.far||r.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,w=y.length/3-1;_<w;_+=m){h.fromArray(y,3*_),f.fromArray(y,3*_+3);var S=t.distanceSqToSegment(h,f,p,d);if(!(S>c)){p.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(p);E<i.near||E>i.far||r.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(a.isGeometry)for(var T=a.vertices,A=T.length,_=0;_<A-1;_+=m){var S=t.distanceSqToSegment(T[_],T[_+1],p,d);if(!(S>c)){p.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(p);E<i.near||E>i.far||r.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Bt.prototype=Object.assign(Object.create(jt.prototype),{constructor:Bt,isLineSegments:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){var n=this.geometry;if(n.isBufferGeometry){if(null===n.index){for(var i=n.attributes.position,r=[],o=0,a=i.count;o<a;o+=2)e.fromBufferAttribute(i,o),t.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);n.addAttribute("lineDistance",new D(r,1))}}else if(n.isGeometry)for(var s=n.vertices,r=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);return this}}()}),zt.prototype=Object.assign(Object.create(jt.prototype),{constructor:zt,isLineLoop:!0}),Gt.prototype=Object.create(H.prototype),Gt.prototype.constructor=Gt,Gt.prototype.isPointsMaterial=!0,Gt.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Vt.prototype=Object.assign(Object.create(M.prototype),{constructor:Vt,isPoints:!0,raycast:function(){var e=new o,t=new Y,n=new m;return function(i,r){function o(e,n){var o=t.distanceSqToPoint(e);if(o<f){t.closestPointToPoint(e,p),p.applyMatrix4(l);var s=i.ray.origin.distanceTo(p);if(s<i.near||s>i.far)return;r.push({distance:s,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:a})}}var a=this,u=this.geometry,l=this.matrixWorld,c=i.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(l),n.radius+=c,!1!==i.ray.intersectsSphere(n)){e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=new s,p=new s;if(u.isBufferGeometry){var m=u.index,v=u.attributes,g=v.position.array;if(null!==m)for(var y=m.array,b=0,_=y.length;b<_;b++){var w=y[b];d.fromArray(g,3*w),o(d,w)}else for(var b=0,x=g.length/3;b<x;b++)d.fromArray(g,3*b),o(d,b)}else for(var M=u.vertices,b=0,x=M.length;b<x;b++)o(M[b],b)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Wt.prototype=Object.assign(Object.create(l.prototype),{constructor:Wt,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ht.prototype=Object.create(l.prototype),Ht.prototype.constructor=Ht,Ht.prototype.isCompressedTexture=!0,qt.prototype=Object.create(l.prototype),qt.prototype.constructor=qt,qt.prototype.isCanvasTexture=!0,Xt.prototype=Object.create(l.prototype),Xt.prototype.constructor=Xt,Xt.prototype.isDepthTexture=!0,Yt.prototype=Object.create(B.prototype),Yt.prototype.constructor=Yt,Kt.prototype=Object.create(A.prototype),Kt.prototype.constructor=Kt,Zt.prototype=Object.create(B.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(A.prototype),Jt.prototype.constructor=Jt,Qt.prototype=Object.create(B.prototype),Qt.prototype.constructor=Qt,$t.prototype=Object.create(A.prototype),$t.prototype.constructor=$t,en.prototype=Object.create(Qt.prototype),en.prototype.constructor=en,tn.prototype=Object.create(A.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(Qt.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(A.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(Qt.prototype),on.prototype.constructor=on,an.prototype=Object.create(A.prototype),an.prototype.constructor=an,sn.prototype=Object.create(Qt.prototype),sn.prototype.constructor=sn,un.prototype=Object.create(A.prototype),un.prototype.constructor=un,ln.prototype=Object.create(B.prototype),ln.prototype.constructor=ln,cn.prototype=Object.create(A.prototype),cn.prototype.constructor=cn,hn.prototype=Object.create(B.prototype),hn.prototype.constructor=hn,fn.prototype=Object.create(A.prototype),fn.prototype.constructor=fn,dn.prototype=Object.create(B.prototype),dn.prototype.constructor=dn;var rl={triangulate:function(e,t,n){n=n||2;var i=t&&t.length,r=i?t[0]*n:e.length,o=pn(e,0,r,n,!0),a=[];if(!o)return a;var s,u,l,c,h,f,d;if(i&&(o=wn(e,t,o,n)),e.length>80*n){s=l=e[0],u=c=e[1];for(var p=n;p<r;p+=n)h=e[p],f=e[p+1],h<s&&(s=h),f<u&&(u=f),h>l&&(l=h),f>c&&(c=f);d=Math.max(l-s,c-u),d=0!==d?1/d:0}return vn(o,a,n,s,u,d),a}},ol={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return ol.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Gn(e),Vn(n,e);var o=e.length;t.forEach(Gn);for(var a=0;a<t.length;a++)i.push(o),o+=t[a].length,Vn(n,t[a]);for(var s=rl.triangulate(n,i),a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};Wn.prototype=Object.create(A.prototype),Wn.prototype.constructor=Wn,Wn.prototype.toJSON=function(){var e=A.prototype.toJSON.call(this);return qn(this.parameters.shapes,this.parameters.options,e)},Hn.prototype=Object.create(B.prototype),Hn.prototype.constructor=Hn,Hn.prototype.toJSON=function(){var e=B.prototype.toJSON.call(this);return qn(this.parameters.shapes,this.parameters.options,e)};var al={generateTopUV:function(e,t,n,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*i],l=t[3*i+1],c=t[3*o],h=t[3*o+1];return[new r(a,s),new r(u,l),new r(c,h)]},generateSideWallUV:function(e,t,n,i,o,a){var s=t[3*n],u=t[3*n+1],l=t[3*n+2],c=t[3*i],h=t[3*i+1],f=t[3*i+2],d=t[3*o],p=t[3*o+1],m=t[3*o+2],v=t[3*a],g=t[3*a+1],y=t[3*a+2];return Math.abs(u-h)<.01?[new r(s,1-l),new r(c,1-f),new r(d,1-m),new r(v,1-y)]:[new r(u,1-l),new r(h,1-f),new r(p,1-m),new r(g,1-y)]}};Xn.prototype=Object.create(A.prototype),Xn.prototype.constructor=Xn,Yn.prototype=Object.create(Hn.prototype),Yn.prototype.constructor=Yn,Kn.prototype=Object.create(A.prototype),Kn.prototype.constructor=Kn,Zn.prototype=Object.create(B.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(A.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(B.prototype),Qn.prototype.constructor=Qn,$n.prototype=Object.create(A.prototype),$n.prototype.constructor=$n,ei.prototype=Object.create(B.prototype),ei.prototype.constructor=ei,ti.prototype=Object.create(A.prototype),ti.prototype.constructor=ti,ti.prototype.toJSON=function(){var e=A.prototype.toJSON.call(this);return ii(this.parameters.shapes,e)},ni.prototype=Object.create(B.prototype),ni.prototype.constructor=ni,ni.prototype.toJSON=function(){var e=B.prototype.toJSON.call(this);return ii(this.parameters.shapes,e)},ri.prototype=Object.create(B.prototype),ri.prototype.constructor=ri,oi.prototype=Object.create(A.prototype),oi.prototype.constructor=oi,ai.prototype=Object.create(B.prototype),ai.prototype.constructor=ai,si.prototype=Object.create(oi.prototype),si.prototype.constructor=si,ui.prototype=Object.create(ai.prototype),ui.prototype.constructor=ui,li.prototype=Object.create(A.prototype),li.prototype.constructor=li,ci.prototype=Object.create(B.prototype),ci.prototype.constructor=ci;var sl=Object.freeze({WireframeGeometry:Yt,ParametricGeometry:Kt,ParametricBufferGeometry:Zt,TetrahedronGeometry:$t,TetrahedronBufferGeometry:en,OctahedronGeometry:tn,OctahedronBufferGeometry:nn,IcosahedronGeometry:rn,IcosahedronBufferGeometry:on,DodecahedronGeometry:an,DodecahedronBufferGeometry:sn,PolyhedronGeometry:Jt,PolyhedronBufferGeometry:Qt,TubeGeometry:un,TubeBufferGeometry:ln,TorusKnotGeometry:cn,TorusKnotBufferGeometry:hn,TorusGeometry:fn,TorusBufferGeometry:dn,TextGeometry:Xn,TextBufferGeometry:Yn,SphereGeometry:Kn,SphereBufferGeometry:Zn,RingGeometry:Jn,RingBufferGeometry:Qn,PlaneGeometry:V,PlaneBufferGeometry:W,LatheGeometry:$n,LatheBufferGeometry:ei,ShapeGeometry:ti,ShapeBufferGeometry:ni,ExtrudeGeometry:Wn,ExtrudeBufferGeometry:Hn,EdgesGeometry:ri,ConeGeometry:si,ConeBufferGeometry:ui,CylinderGeometry:oi,CylinderBufferGeometry:ai,CircleGeometry:li,CircleBufferGeometry:ci,BoxGeometry:z,BoxBufferGeometry:G});hi.prototype=Object.create(H.prototype),hi.prototype.constructor=hi,hi.prototype.isShadowMaterial=!0,hi.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.color.copy(e.color),this},fi.prototype=Object.create(X.prototype),fi.prototype.constructor=fi,fi.prototype.isRawShaderMaterial=!0,di.prototype=Object.create(H.prototype),di.prototype.constructor=di,di.prototype.isMeshStandardMaterial=!0,di.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},pi.prototype=Object.create(di.prototype),pi.prototype.constructor=pi,pi.prototype.isMeshPhysicalMaterial=!0,pi.prototype.copy=function(e){return di.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},mi.prototype=Object.create(H.prototype),mi.prototype.constructor=mi,mi.prototype.isMeshPhongMaterial=!0,mi.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},vi.prototype=Object.create(mi.prototype),vi.prototype.constructor=vi,vi.prototype.isMeshToonMaterial=!0,vi.prototype.copy=function(e){return mi.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},gi.prototype=Object.create(H.prototype),gi.prototype.constructor=gi,gi.prototype.isMeshNormalMaterial=!0,gi.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yi.prototype=Object.create(H.prototype),yi.prototype.constructor=yi,yi.prototype.isMeshLambertMaterial=!0,yi.prototype.copy=function(e){return H.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},bi.prototype=Object.create(Ut.prototype),bi.prototype.constructor=bi,bi.prototype.isLineDashedMaterial=!0,bi.prototype.copy=function(e){return Ut.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var ul=Object.freeze({ShadowMaterial:hi,SpriteMaterial:kt,RawShaderMaterial:fi,ShaderMaterial:X,PointsMaterial:Gt,MeshPhysicalMaterial:pi,MeshStandardMaterial:di,MeshPhongMaterial:mi,MeshToonMaterial:vi,MeshNormalMaterial:gi,MeshLambertMaterial:yi,MeshDepthMaterial:mt,MeshDistanceMaterial:vt,MeshBasicMaterial:q,LineDashedMaterial:bi,LineBasicMaterial:Ut,Material:H}),ll={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},cl=new _i,hl={};Object.assign(wi.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=ll.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(void 0!==hl[e])return void hl[e].push({onLoad:t,onProgress:n,onError:i});var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var u=s[1],l=!!s[2],c=s[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}window.setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{hl[e]=[],hl[e].push({onLoad:t,onProgress:n,onError:i});var v=new XMLHttpRequest;v.open("GET",e,!0),v.addEventListener("load",function(t){var n=this.response;ll.add(e,n);var i=hl[e];if(delete hl[e],200===this.status||0===this.status){this.status;for(var o=0,a=i.length;o<a;o++){var s=i[o];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(var o=0,a=i.length;o<a;o++){var s=i[o];s.onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}},!1),v.addEventListener("progress",function(t){for(var n=hl[e],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(t)}},!1),v.addEventListener("error",function(t){var n=hl[e];delete hl[e];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),v.addEventListener("abort",function(t){var n=hl[e];delete hl[e];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var g in this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return r.manager.itemStart(e),v},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(xi.prototype,{load:function(e,t,n,i){var r=this,o=[],a=new Ht;a.image=o;var s=new wi(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,c=e.length;l<c;++l)!function(l){s.load(e[l],function(e){var n=r._parser(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=bs),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,i)}(l);else s.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=bs),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,i);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Mi.prototype,{load:function(e,t,n,i){var r=this,o=new d,a=new wi(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ps,o.wrapT=void 0!==n.wrapT?n.wrapT:ps,o.magFilter=void 0!==n.magFilter?n.magFilter:bs,o.minFilter=void 0!==n.minFilter?n.minFilter:ws,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=bs),o.needsUpdate=!0,t&&t(o,n))},n,i),o}}),Object.assign(Si.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){function r(){u.removeEventListener("load",r,!1),u.removeEventListener("error",o,!1),ll.add(e,this),t&&t(this),a.manager.itemEnd(e)}function o(t){u.removeEventListener("load",r,!1),u.removeEventListener("error",o,!1),i&&i(t),a.manager.itemEnd(e),a.manager.itemError(e)}void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,s=ll.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",r,!1),u.addEventListener("error",o,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),a.manager.itemStart(e),u.src=e,u},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ei.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new ue,o=new Si(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,s=0;s<e.length;++s)!function(n){o.load(e[n],function(e){r.images[n]=e,6===++a&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}(s);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ti.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new l,o=new Si(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){r.image=n;var i=e.search(/\.jpe?g$/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Ns:Ds,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ai.prototype,{getPoint:function(){return null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,o=i.length;n=t||e*i[o-1];for(var a,s=0,u=o-1;s<=u;)if(r=Math.floor(s+(u-s)/2),(a=i[r]-n)<0)s=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,i[r]===n)return r/(o-1);var l=i[r];return(r+(n-l)/(i[r+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,a=new s,u=[],l=[],c=[],h=new s,f=new o;for(n=0;n<=e;n++)i=n/e,u[n]=this.getTangentAt(i),u[n].normalize();l[0]=new s,c[0]=new s;var d=Number.MAX_VALUE,p=Math.abs(u[0].x),m=Math.abs(u[0].y),v=Math.abs(u[0].z);for(p<=d&&(d=p,a.set(1,0,0)),m<=d&&(d=m,a.set(0,1,0)),v<=d&&a.set(0,0,1),h.crossVectors(u[0],a).normalize(),l[0].crossVectors(u[0],h),c[0].crossVectors(u[0],l[0]),n=1;n<=e;n++)l[n]=l[n-1].clone(),c[n]=c[n-1].clone(),h.crossVectors(u[n-1],u[n]),h.length()>Number.EPSILON&&(h.normalize(),r=Math.acos(Nu.clamp(u[n-1].dot(u[n]),-1,1)),l[n].applyMatrix4(f.makeRotationAxis(h,r))),c[n].crossVectors(u[n],l[n]);if(!0===t)for(r=Math.acos(Nu.clamp(l[0].dot(l[e]),-1,1)),r/=e,u[0].dot(h.crossVectors(l[0],l[e]))>0&&(r=-r),n=1;n<=e;n++)l[n].applyMatrix4(f.makeRotationAxis(u[n],r*n)),c[n].crossVectors(u[n],l[n]);return{tangents:u,normals:l,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ci.prototype=Object.create(Ai.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isEllipseCurve=!0,Ci.prototype.getPoint=function(e,t){for(var n=t||new r,i=2*Math.PI,o=this.aEndAngle-this.aStartAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(o=a?0:i),!0!==this.aClockwise||a||(o===i?o=-i:o-=i);var s=this.aStartAngle+e*o,u=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=u-this.aX,d=l-this.aY;u=f*c-d*h+this.aX,l=f*h+d*c+this.aY}return n.set(u,l)},Ci.prototype.copy=function(e){return Ai.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ci.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ci.prototype.fromJSON=function(e){return Ai.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Pi.prototype=Object.create(Ci.prototype),Pi.prototype.constructor=Pi,Pi.prototype.isArcCurve=!0;var fl=new s,dl=new Oi,pl=new Oi,ml=new Oi;Li.prototype=Object.create(Ai.prototype),Li.prototype.constructor=Li,Li.prototype.isCatmullRomCurve3=!0,Li.prototype.getPoint=function(e,t){var n=t||new s,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e,a=Math.floor(o),u=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:0===u&&a===r-1&&(a=r-2,u=1);var l,c,h,f;if(this.closed||a>0?l=i[(a-1)%r]:(fl.subVectors(i[0],i[1]).add(i[0]),l=fl),c=i[a%r],h=i[(a+1)%r],this.closed||a+2<r?f=i[(a+2)%r]:(fl.subVectors(i[r-1],i[r-2]).add(i[r-1]),f=fl),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(l.distanceToSquared(c),d),m=Math.pow(c.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(f),d);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),dl.initNonuniformCatmullRom(l.x,c.x,h.x,f.x,p,m,v),pl.initNonuniformCatmullRom(l.y,c.y,h.y,f.y,p,m,v),ml.initNonuniformCatmullRom(l.z,c.z,h.z,f.z,p,m,v)}else"catmullrom"===this.curveType&&(dl.initCatmullRom(l.x,c.x,h.x,f.x,this.tension),pl.initCatmullRom(l.y,c.y,h.y,f.y,this.tension),ml.initCatmullRom(l.z,c.z,h.z,f.z,this.tension));return n.set(dl.calc(u),pl.calc(u),ml.calc(u)),n},Li.prototype.copy=function(e){Ai.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Li.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Li.prototype.fromJSON=function(e){Ai.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new s).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Gi.prototype=Object.create(Ai.prototype),Gi.prototype.constructor=Gi,Gi.prototype.isCubicBezierCurve=!0,Gi.prototype.getPoint=function(e,t){var n=t||new r,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(zi(e,i.x,o.x,a.x,s.x),zi(e,i.y,o.y,a.y,s.y)),n},Gi.prototype.copy=function(e){return Ai.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Gi.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Gi.prototype.fromJSON=function(e){return Ai.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Vi.prototype=Object.create(Ai.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isCubicBezierCurve3=!0,Vi.prototype.getPoint=function(e,t){var n=t||new s,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(zi(e,i.x,r.x,o.x,a.x),zi(e,i.y,r.y,o.y,a.y),zi(e,i.z,r.z,o.z,a.z)),n},Vi.prototype.copy=function(e){return Ai.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Vi.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Vi.prototype.fromJSON=function(e){return Ai.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Wi.prototype=Object.create(Ai.prototype),Wi.prototype.constructor=Wi,Wi.prototype.isLineCurve=!0,Wi.prototype.getPoint=function(e,t){var n=t||new r;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Wi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Wi.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Wi.prototype.copy=function(e){return Ai.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wi.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wi.prototype.fromJSON=function(e){return Ai.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hi.prototype=Object.create(Ai.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isLineCurve3=!0,Hi.prototype.getPoint=function(e,t){var n=t||new s;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Hi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Hi.prototype.copy=function(e){return Ai.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hi.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hi.prototype.fromJSON=function(e){return Ai.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},qi.prototype=Object.create(Ai.prototype),qi.prototype.constructor=qi,qi.prototype.isQuadraticBezierCurve=!0,qi.prototype.getPoint=function(e,t){var n=t||new r,i=this.v0,o=this.v1,a=this.v2;return n.set(Di(e,i.x,o.x,a.x),Di(e,i.y,o.y,a.y)),n},qi.prototype.copy=function(e){return Ai.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},qi.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},qi.prototype.fromJSON=function(e){return Ai.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Xi.prototype=Object.create(Ai.prototype),Xi.prototype.constructor=Xi,Xi.prototype.isQuadraticBezierCurve3=!0,Xi.prototype.getPoint=function(e,t){var n=t||new s,i=this.v0,r=this.v1,o=this.v2;return n.set(Di(e,i.x,r.x,o.x),Di(e,i.y,r.y,o.y),Di(e,i.z,r.z,o.z)),n},Xi.prototype.copy=function(e){return Ai.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Xi.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Xi.prototype.fromJSON=function(e){return Ai.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Yi.prototype=Object.create(Ai.prototype),Yi.prototype.constructor=Yi,Yi.prototype.isSplineCurve=!0,Yi.prototype.getPoint=function(e,t){var n=t||new r,i=this.points,o=(i.length-1)*e,a=Math.floor(o),s=o-a,u=i[0===a?a:a-1],l=i[a],c=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return n.set(ki(s,u.x,l.x,c.x,h.x),ki(s,u.y,l.y,c.y,h.y)),n},Yi.prototype.copy=function(e){Ai.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},Yi.prototype.toJSON=function(){var e=Ai.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},Yi.prototype.fromJSON=function(e){Ai.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new r).fromArray(i))}return this};var vl=Object.freeze({ArcCurve:Pi,CatmullRomCurve3:Li,CubicBezierCurve:Gi,CubicBezierCurve3:Vi,EllipseCurve:Ci,LineCurve:Wi,LineCurve3:Hi,QuadraticBezierCurve:qi,QuadraticBezierCurve3:Xi,SplineCurve:Yi});Ki.prototype=Object.assign(Object.create(Ai.prototype),{constructor:Ki,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Wi(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Ai.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Ai.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Ai.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new vl[i.type]).fromJSON(i))}return this}}),Zi.prototype=Object.assign(Object.create(Ki.prototype),{constructor:Zi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Wi(this.currentPoint.clone(),new r(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var o=new qi(this.currentPoint.clone(),new r(e,t),new r(n,i));this.curves.push(o),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,o,a){var s=new Gi(this.currentPoint.clone(),new r(e,t),new r(n,i),new r(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Yi(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,i,r,o)},absarc:function(e,t,n,i,r,o){this.absellipse(e,t,n,n,i,r,o)},ellipse:function(e,t,n,i,r,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+u,t+l,n,i,r,o,a,s)},absellipse:function(e,t,n,i,r,o,a,s){var u=new Ci(e,t,n,i,r,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return Ki.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Ki.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Ki.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ji.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ji,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Zi.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=Zi.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Zi.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new Zi).fromJSON(i))}return this}}),Qi.prototype=Object.assign(Object.create(M.prototype),{constructor:Qi,isLight:!0,copy:function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=M.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),$i.prototype=Object.assign(Object.create(Qi.prototype),{constructor:$i,isHemisphereLight:!0,copy:function(e){return Qi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(er.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),tr.prototype=Object.assign(Object.create(er.prototype),{constructor:tr,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Nu.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),nr.prototype=Object.assign(Object.create(Qi.prototype),{constructor:nr,isSpotLight:!0,copy:function(e){return Qi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ir.prototype=Object.assign(Object.create(Qi.prototype),{constructor:ir,isPointLight:!0,copy:function(e){return Qi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),rr.prototype=Object.assign(Object.create(er.prototype),{constructor:rr}),or.prototype=Object.assign(Object.create(Qi.prototype),{constructor:or,isDirectionalLight:!0,copy:function(e){return Qi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ar.prototype=Object.assign(Object.create(Qi.prototype),{constructor:ar,isAmbientLight:!0}),sr.prototype=Object.assign(Object.create(Qi.prototype),{constructor:sr,isRectAreaLight:!0,copy:function(e){return Qi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Qi.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var gl={arraySlice:function(e,t,n){return gl.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(t),i},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*t,u=0;u!==t;++u)r[a++]=e[s+u];return r},flattenJSON:function(e,t,n,i){for(var r=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)}}};Object.assign(ur.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var o;n:{i:if(!(e<i)){for(var a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}{if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(var a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,o=0;o!==i;++o)t[o]=n[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ur.prototype,{beforeStart_:ur.prototype.copySampleValue_,afterEnd_:ur.prototype.copySampleValue_}),lr.prototype=Object.assign(Object.create(ur.prototype),{constructor:lr,DefaultSettings_:{endingStart:gu,endingEnd:gu},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case yu:r=e,a=2*t-n;break;case bu:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case yu:o=e,s=2*n-t;break;case bu:o=1,s=n+i[1]-i[0];break;default:o=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=r*l,this._offsetNext=o*l},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(i-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,_=0;_!==a;++_)r[_]=v*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return r}}),cr.prototype=Object.assign(Object.create(ur.prototype),{constructor:cr,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(i-t),c=1-l,h=0;h!==a;++h)r[h]=o[u+h]*c+o[s+h]*l;return r}}),hr.prototype=Object.assign(Object.create(ur.prototype),{constructor:hr,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(fr,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:gl.convertArray(e.times,Array),values:gl.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(fr.prototype,{constructor:fr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:mu,InterpolantFactoryMethodDiscrete:function(e){return new hr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new cr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new lr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case pu:t=this.InterpolantFactoryMethodDiscrete;break;case mu:t=this.InterpolantFactoryMethodLinear;break;case vu:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return pu;case this.InterpolantFactoryMethodLinear:return mu;case this.InterpolantFactoryMethodSmooth:return vu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);var a=this.getValueSize();this.times=gl.arraySlice(n,r,o),this.values=gl.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(e=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){e=!1;break}if(null!==o&&o>s){e=!1;break}o=s}if(void 0!==i&&gl.isTypedArray(i))for(var a=0,u=i.length;a!==u;++a){var l=i[a];if(isNaN(l)){e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===vu,r=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(i)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(a!==r){e[r]=e[a];for(var p=a*n,m=r*n,f=0;f!==n;++f)t[m+f]=t[p+f]}++r}}if(o>0){e[r]=e[o];for(var p=o*n,m=r*n,f=0;f!==n;++f)t[m+f]=t[p+f];++r}return r!==e.length&&(this.times=gl.arraySlice(e,0,r),this.values=gl.arraySlice(t,0,r*n)),this}}),dr.prototype=Object.assign(Object.create(fr.prototype),{constructor:dr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:pu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pr.prototype=Object.assign(Object.create(fr.prototype),{constructor:pr,ValueTypeName:"color"}),mr.prototype=Object.assign(Object.create(fr.prototype),{constructor:mr,ValueTypeName:"number"}),vr.prototype=Object.assign(Object.create(ur.prototype),{constructor:vr,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,u=e*s,l=(n-t)/(i-t),c=u+s;u!==c;u+=4)a.slerpFlat(r,0,o,u-s,o,u,l);return r}}),gr.prototype=Object.assign(Object.create(fr.prototype),{constructor:gr,ValueTypeName:"quaternion",DefaultInterpolation:mu,InterpolantFactoryMethodLinear:function(e){return new vr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),yr.prototype=Object.assign(Object.create(fr.prototype),{constructor:yr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:pu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),br.prototype=Object.assign(Object.create(fr.prototype),{constructor:br,ValueTypeName:"vector"}),Object.assign(_r,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,o=n.length;r!==o;++r)t.push(xr(n[r]).scale(i));return new _r(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,o=n.length;r!==o;++r)t.push(fr.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,o=[],a=0;a<r;a++){var s=[],u=[];s.push((a+r-1)%r,a,(a+1)%r),u.push(0,1,0);var l=gl.getKeyframeOrder(s);s=gl.sortedArray(s,1,l),u=gl.sortedArray(u,1,l),i||0!==s[0]||(s.push(r),u.push(u[0])),o.push(new mr(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new _r(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(r);if(u&&u.length>1){var l=u[1],c=i[l];c||(i[l]=c=[]),c.push(s)}}var h=[];for(var l in i)h.push(_r.CreateFromMorphTargetSequence(l,i[l],t,n));return h},parseAnimation:function(e,t){if(!e)return null;for(var n=function(e,t,n,i,r){if(0!==n.length){var o=[],a=[];gl.flattenJSON(n,o,a,i),0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var d in c){for(var p=[],m=[],f=0;f!==l[h].morphTargets.length;++f){var v=l[h];p.push(v.time),m.push(v.morphTarget===d?1:0)}i.push(new mr(".morphTargetInfluence["+d+"]",p,m))}o=c.length*(a||1)}else{var g=".bones["+t[u].name+"]";n(br,g+".position",l,"pos",i),n(gr,g+".quaternion",l,"rot",i),n(br,g+".scale",l,"scl",i)}}return 0===i.length?null:new _r(r,o,i)}}),Object.assign(_r.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,i=e.length;n!==i;++n){var r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Mr.prototype,{load:function(e,t,n,i){var r=this;new wi(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return n[e],n[e]}var n=this.textures,i=new ul[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.uniforms)for(var a in e.uniforms){var u=e.uniforms[a];switch(i.uniforms[a]={},u.type){case"t":i.uniforms[a].value=t(u.value);break;case"c":i.uniforms[a].value=(new y).setHex(u.value);break;case"v2":i.uniforms[a].value=(new r).fromArray(u.value);break;case"v3":i.uniforms[a].value=(new s).fromArray(u.value);break;case"v4":i.uniforms[a].value=(new c).fromArray(u.value);break;case"m4":i.uniforms[a].value=(new o).fromArray(u.value);break;default:i.uniforms[a].value=u.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=t(e.map)),void 0!==e.alphaMap&&(i.alphaMap=t(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=t(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var l=e.normalScale;!1===Array.isArray(l)&&(l=[l,l]),i.normalScale=(new r).fromArray(l)}return void 0!==e.displacementMap&&(i.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=t(e.specularMap)),void 0!==e.envMap&&(i.envMap=t(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=t(e.gradientMap)),i}}),Object.assign(Sr.prototype,{load:function(e,t,n,i){var r=this;new wi(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new B,n=e.data.index;if(void 0!==n){var i=new yl[n.type](n.array);t.setIndex(new C(i,1))}var r=e.data.attributes;for(var o in r){var a=r[o],i=new yl[a.type](a.array);t.addAttribute(o,new C(i,a.itemSize,a.normalized))}var u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(var l=0,c=u.length;l!==c;++l){var h=u[l];t.addGroup(h.start,h.count,h.materialIndex)}var f=e.data.boundingSphere;if(void 0!==f){var d=new s;void 0!==f.center&&d.fromArray(f.center),t.boundingSphere=new m(d,f.radius)}return t}});var yl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Er.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],o=t[n+1];if(r.test(e))return o}return null}},Object.assign(Er.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:function(){var e={NoBlending:wa,NormalBlending:xa,AdditiveBlending:Ma,SubtractiveBlending:Sa,MultiplyBlending:Ea,CustomBlending:Ta},t=new y,n=new Ti,i=new Mr;return function(r,o,a){function s(e,t,i,r,s){var l,c=o+e,h=Er.Handlers.get(c);null!==h?l=h.load(c):(n.setCrossOrigin(a),l=n.load(c)),void 0!==t&&(l.repeat.fromArray(t),1!==t[0]&&(l.wrapS=ds),1!==t[1]&&(l.wrapT=ds)),void 0!==i&&l.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(l.wrapS=ds),"mirror"===r[0]&&(l.wrapS=ms),"repeat"===r[1]&&(l.wrapT=ds),"mirror"===r[1]&&(l.wrapT=ms)),void 0!==s&&(l.anisotropy=s);var f=Nu.generateUUID();return u[f]=l,f}var u={},l={uuid:Nu.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var h=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=e[h];break;case"colorAmbient":case"mapAmbient":break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=pa;break;case"doubleSided":l.side=ma;break;case"transparency":l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=h;break;case"vertexColors":!0===h&&(l.vertexColors=_a),"face"===h&&(l.vertexColors=ba)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(u),i.parse(l)}}()});var bl={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Object.assign(Tr.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:bl.extractUrlBase(e),a=new wi(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(e){var n=JSON.parse(e),i=n.metadata;if(void 0!==i){var a=i.type;if(void 0!==a&&"object"===a.toLowerCase())return}var s=r.parse(n,o);t(s.geometry,s.materials)},n,i)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(){function e(e,t){function n(e,t){return e&1<<t}var i,o,a,u,l,c,h,f,d,p,m,v,g,b,_,w,x,M,S,E,A,C,P,O,L,k,I,R=e.faces,N=e.vertices,D=e.normals,F=e.colors,U=e.scale,j=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&j++;for(i=0;i<j;i++)t.faceVertexUvs[i]=[]}for(u=0,l=N.length;u<l;)M=new s,M.x=N[u++]*U,M.y=N[u++]*U,M.z=N[u++]*U,t.vertices.push(M);for(u=0,l=R.length;u<l;)if(p=R[u++],m=n(p,0),v=n(p,1),g=n(p,3),b=n(p,4),_=n(p,5),w=n(p,6),x=n(p,7),m){if(E=new T,E.a=R[u],E.b=R[u+1],E.c=R[u+3],A=new T,A.a=R[u+1],A.b=R[u+2],A.c=R[u+3],u+=4,v&&(d=R[u++],E.materialIndex=d,A.materialIndex=d),a=t.faces.length,g)for(i=0;i<j;i++)for(O=e.uvs[i],t.faceVertexUvs[i][a]=[],t.faceVertexUvs[i][a+1]=[],o=0;o<4;o++)f=R[u++],k=O[2*f],I=O[2*f+1],L=new r(k,I),2!==o&&t.faceVertexUvs[i][a].push(L),0!==o&&t.faceVertexUvs[i][a+1].push(L);if(b&&(h=3*R[u++],E.normal.set(D[h++],D[h++],D[h]),A.normal.copy(E.normal)),_)for(i=0;i<4;i++)h=3*R[u++],P=new s(D[h++],D[h++],D[h]),2!==i&&E.vertexNormals.push(P),0!==i&&A.vertexNormals.push(P);if(w&&(c=R[u++],C=F[c],E.color.setHex(C),A.color.setHex(C)),x)for(i=0;i<4;i++)c=R[u++],C=F[c],2!==i&&E.vertexColors.push(new y(C)),0!==i&&A.vertexColors.push(new y(C));t.faces.push(E),t.faces.push(A)}else{if(S=new T,S.a=R[u++],S.b=R[u++],S.c=R[u++],v&&(d=R[u++],S.materialIndex=d),a=t.faces.length,g)for(i=0;i<j;i++)for(O=e.uvs[i],t.faceVertexUvs[i][a]=[],o=0;o<3;o++)f=R[u++],k=O[2*f],I=O[2*f+1],L=new r(k,I),t.faceVertexUvs[i][a].push(L);if(b&&(h=3*R[u++],S.normal.set(D[h++],D[h++],D[h])),_)for(i=0;i<3;i++)h=3*R[u++],P=new s(D[h++],D[h++],D[h]),S.vertexNormals.push(P);if(w&&(c=R[u++],S.color.setHex(F[c])),x)for(i=0;i<3;i++)c=R[u++],S.vertexColors.push(new y(F[c]));t.faces.push(S)}}function t(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var o=e.skinWeights[i],a=n>1?e.skinWeights[i+1]:0,s=n>2?e.skinWeights[i+2]:0,u=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new c(o,a,s,u))}if(e.skinIndices)for(var i=0,r=e.skinIndices.length;i<r;i+=n){var l=e.skinIndices[i],h=n>1?e.skinIndices[i+1]:0,f=n>2?e.skinIndices[i+2]:0,d=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new c(l,h,f,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||(t.skinIndices.length,t.vertices.length))}function n(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var o=t.morphTargets[i].vertices,a=e.morphTargets[i].vertices,u=0,l=a.length;u<l;u+=3){var c=new s;c.x=a[u]*n,c.y=a[u+1]*n,c.z=a[u+2]*n,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0)for(var h=t.faces,f=e.morphColors[0].colors,i=0,r=h.length;i<r;i++)h[i].color.fromArray(f,3*i)}function i(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var o=_r.parseAnimation(i[r],t.bones);o&&n.push(o)}if(t.morphTargets){var a=_r.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}return function(r,o){void 0!==r.data&&(r=r.data),void 0!==r.scale?r.scale=1/r.scale:r.scale=1;var a=new A;return e(r,a),t(r,a),n(r,a),i(r,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===r.materials||0===r.materials.length?{geometry:a}:{geometry:a,materials:Er.prototype.initMaterials(r.materials,o,this.crossOrigin)}}}()}),Object.assign(Ar.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new wi(r.manager).load(e,function(e){var n=null;try{n=JSON.parse(e)}catch(e){return void(void 0!==i&&i(e))}var o=n.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()&&r.parse(n,t)},n,i)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new Ji).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Tr,r=new Sr,o=0,a=e.length;o<a;o++){var s,u=e[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new sl[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new sl[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new sl[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new sl[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new sl[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new sl[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new sl[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new sl[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new sl[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new sl[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new sl[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new sl[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,h=u.shapes.length;c<h;c++){var f=t[u.shapes[c]];l.push(f)}s=new sl[u.type](l,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var l=[],c=0,h=u.shapes.length;c<h;c++){var f=t[u.shapes[c]];l.push(f)}var d=u.options.extrudePath;void 0!==d&&(u.options.extrudePath=(new vl[d.type]).fromJSON(d)),s=new sl[u.type](l,u.options);break;case"BufferGeometry":s=r.parse(u);break;case"Geometry":s=i.parse(u,this.texturePath).geometry;break;default:continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new Mr;i.setTextures(t);for(var r=0,o=e.length;r<o;r++){var a=e[r];if("MultiMaterial"===a.type){for(var s=[],u=0;u<a.materials.length;u++)s.push(i.parse(a.materials[u]));n[a.uuid]=s}else n[a.uuid]=i.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=_r.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){function n(e){return i.manager.itemStart(e),a.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemEnd(e),i.manager.itemError(e)})}var i=this,r={};if(void 0!==e&&e.length>0){var o=new _i(t),a=new Si(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){r[l.uuid]=[];for(var h=0,f=c.length;h<f;h++){var d=c[h],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.texturePath+d;r[l.uuid].push(n(p))}}else{var p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.texturePath+l.url;r[l.uuid]=n(p)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:t[e]}var i={};if(void 0!==e)for(var r=0,o=e.length;r<o;r++){var a=e[r];a.image,t[a.image];var s;s=Array.isArray(t[a.image])?new ue(t[a.image]):new l(t[a.image]),s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,_l)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],wl),s.wrapT=n(a.wrap[1],wl)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,xl)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,xl)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),i[a.uuid]=s}return i},parseObject:function(e,t,n){function i(e){return t[e],t[e]}function r(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var o=e[i];n[o],t.push(n[o])}return t}return n[e],n[e]}}var o;switch(e.type){case"Scene":o=new Pt,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new y(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Ct(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new At(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new xt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new E(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ar(e.color,e.intensity);break;case"DirectionalLight":o=new or(e.color,e.intensity);break;case"PointLight":o=new ir(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new sr(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new nr(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new $i(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":case"Mesh":var a=i(e.geometry),s=r(e.material);o=a.bones&&a.bones.length>0?new Ft(a,s):new Z(a,s);break;case"LOD":o=new Rt;break;case"Line":o=new jt(i(e.geometry),r(e.material),e.mode);break;case"LineLoop":o=new zt(i(e.geometry),r(e.material));break;case"LineSegments":o=new Bt(i(e.geometry),r(e.material));break;case"PointCloud":case"Points":o=new Vt(i(e.geometry),r(e.material));break;case"Sprite":o=new It(r(e.material));break;case"Group":o=new wt;break;default:o=new M}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,l=0;l<u.length;l++)o.add(this.parseObject(u[l],t,n));if("LOD"===e.type)for(var c=e.levels,h=0;h<c.length;h++){var f=c[h],d=o.getObjectByProperty("uuid",f.object);void 0!==d&&o.addLevel(d,f.distance)}return o}});var _l={UVMapping:os,CubeReflectionMapping:as,CubeRefractionMapping:ss,EquirectangularReflectionMapping:us,EquirectangularRefractionMapping:ls,SphericalReflectionMapping:cs,CubeUVReflectionMapping:hs,CubeUVRefractionMapping:fs},wl={RepeatWrapping:ds,ClampToEdgeWrapping:ps,MirroredRepeatWrapping:ms},xl={NearestFilter:vs,NearestMipMapNearestFilter:gs,NearestMipMapLinearFilter:ys,LinearFilter:bs,LinearMipMapNearestFilter:_s,LinearMipMapLinearFilter:ws};Cr.prototype={constructor:Cr,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=ll.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(n){ll.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Pr.prototype,{moveTo:function(e,t){this.currentPath=new Zi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,o){this.currentPath.bezierCurveTo(e,t,n,i,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=new Ji;o.curves=r.curves,t.push(o)}return t}var i=ol.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===t)return n(r);var o,a,s,u=[];if(1===r.length)return a=r[0],s=new Ji,s.curves=a.curves,u.push(s),u;var l=!i(r[0].getPoints());l=e?!l:l;var c,h=[],f=[],d=[],p=0;f[p]=void 0,d[p]=[];for(var m=0,v=r.length;m<v;m++)a=r[m],c=a.getPoints(),o=i(c),o=e?!o:o,o?(!l&&f[p]&&p++,f[p]={s:new Ji,p:c},f[p].s.curves=a.curves,l&&p++,d[p]=[]):d[p].push({h:a,p:c[0]});if(!f[0])return n(r);if(f.length>1){for(var g=!1,y=[],b=0,_=f.length;b<_;b++)h[b]=[];for(var b=0,_=f.length;b<_;b++)for(var w=d[b],x=0;x<w.length;x++){for(var M=w[x],S=!0,E=0;E<f.length;E++)(function(e,t){for(var n=t.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=t[r],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[r],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return i})(M.p,f[E].p)&&(b!==E&&y.push({froms:b,tos:E,hole:x}),S?(S=!1,h[E].push(M)):g=!0);S&&h[b].push(M)}y.length>0&&(g||(d=h))}for(var T,m=0,A=f.length;m<A;m++){s=f[m].s,u.push(s),T=d[m];for(var C=0,P=T.length;C<P;C++)s.holes.push(T[C].h)}return u}}),Object.assign(Or.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=Lr(e,t,this.data),r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Object.assign(Ir.prototype,{load:function(e,t,n,i){var r=this,o=new wi(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new Or(e)},setPath:function(e){return this.path=e,this}});var Ml,Sl={getContext:function(){return void 0===Ml&&(Ml=new(window.AudioContext||window.webkitAudioContext)),Ml},setContext:function(e){Ml=e}};Object.assign(Rr.prototype,{load:function(e,t,n,i){var r=new wi(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){var n=e.slice(0);Sl.getContext().decodeAudioData(n,function(e){t(e)})},n,i)}}),Object.assign(Nr.prototype,{update:function(){var e,t,n,i,r,a,s,u,l=new o,c=new o;return function(o){if(e!==this||t!==o.focus||n!==o.fov||i!==o.aspect*this.aspect||r!==o.near||a!==o.far||s!==o.zoom||u!==this.eyeSep){e=this,t=o.focus,n=o.fov,i=o.aspect*this.aspect,r=o.near,a=o.far,s=o.zoom;var h=o.projectionMatrix.clone();u=this.eyeSep/2;var f,d,p=u*r/t,m=r*Math.tan(Nu.DEG2RAD*n*.5)/s;c.elements[12]=-u,l.elements[12]=u,f=-m*i+p,d=m*i+p,h.elements[0]=2*r/(d-f),h.elements[8]=(d+f)/(d-f),this.cameraL.projectionMatrix.copy(h),f=-m*i-p,d=m*i-p,h.elements[0]=2*r/(d-f),h.elements[8]=(d+f)/(d-f),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(l)}}()}),Dr.prototype=Object.create(M.prototype),Dr.prototype.constructor=Dr,Fr.prototype=Object.assign(Object.create(M.prototype),{constructor:Fr,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new s,t=new a,n=new s,i=new s;return function(r){M.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),Ur.prototype=Object.assign(Object.create(M.prototype),{constructor:Ur,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying&&!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1!==this.hasPlaybackControl&&this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),jr.prototype=Object.assign(Object.create(Ur.prototype),{constructor:jr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new s,t=new a,n=new s,i=new s;return function(r){M.prototype.updateMatrixWorld.call(this,r);var o=this.panner;this.matrixWorld.decompose(e,t,n),i.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z)}}()}),Object.assign(Br.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(zr.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*t;this._mixBufferRegion(n,i,a,1-r,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){a.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*i}}});var El="\\[\\]\\.:\\/";Object.assign(Gr.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Vr,{Composite:Gr,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Vr.Composite(e,t,n):new Vr(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+El+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+El+"]",t="[^"+El.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),i=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+i+r+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==s.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var o=i(r.children);if(o)return o}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(Vr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Vr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return;e=e[n]}if(void 0!==o){if(void 0===e[o])return;e=e[o]}}var s=e[i];if(void 0!==s){var u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return;if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return;for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!e.geometry.morphTargets)return;for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===r){r=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else{t.nodeName}}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Vr.prototype,{_getValue_unbound:Vr.prototype.getValue,_setValue_unbound:Vr.prototype.setValue}),Object.assign(Wr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=0,l=arguments.length;u!==l;++u){var c=arguments[u],h=c.uuid,f=i[h];if(void 0===f){f=t++,i[h]=f,e.push(c);for(var d=0,p=s;d!==p;++d)a[d].push(new Vr(c,r[d],o[d]))}else if(f<n){e[f];var m=--n,v=e[m];i[v.uuid]=f,e[f]=v,i[h]=m,e[m]=c;for(var d=0,p=s;d!==p;++d){var g=a[d],y=g[m],b=g[f];g[f]=y,void 0===b&&(b=new Vr(c,r[d],o[d])),g[m]=b}}else e[f]}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=n[u];if(void 0!==l&&l>=t){var c=t++,h=e[c];n[h.uuid]=l,e[l]=h,n[u]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=i[f],m=p[c],v=p[l];p[l]=m,p[c]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=i[l];if(void 0!==c)if(delete i[l],c<n){var h=--n,f=e[h],d=--t,p=e[d];i[f.uuid]=c,e[c]=f,i[p.uuid]=h,e[h]=p,e.pop();for(var m=0,v=o;m!==v;++m){var g=r[m],y=g[h],b=g[d];g[c]=y,g[h]=b,g.pop()}}else{var d=--t,p=e[d];i[p.uuid]=c,e[c]=p,e.pop();for(var m=0,v=o;m!==v;++m){var g=r[m];g[c]=g[d],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);i=r.length,n[e]=i,o.push(e),a.push(t),r.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new Vr(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(Hr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,o=r/i,a=i/r;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=r,s[1]=r+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);var r=this._startTime;if(null!==r){var o=(e-r)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(i,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,i=this.loop,r=this._loopCount,o=i===du;if(0===e)return-1===r?t:o&&1===(1&r)?n-t:t;if(i===hu){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=yu,i.endingEnd=yu):(i.endingStart=e?this.zeroSlopeAtStart?yu:gu:bu,i.endingEnd=t?this.zeroSlopeAtEnd?yu:gu:bu)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}),qr.prototype=Object.assign(Object.create(i.prototype),{constructor:qr,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==r;++c){var h=i[c],f=h.name,d=l[f];if(void 0!==d)o[c]=d;else{if(void 0!==(d=o[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;d=new zr(Vr.create(n,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,f),o[c]=d}a[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],o=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[r];e:{for(var l in a)break e;delete o[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new cr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?_r.findByName(n,e):e,o=null!==r?r.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[i];if(void 0!==u)return u;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var l=new Hr(this,r,t);return this._bindAction(l,s),this._addInactiveAction(l,o,i),l},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?_r.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[i]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(var r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(i,e,r,o)}for(var s=this._bindings,u=this._nActiveBindings,a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,o=r[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var u in s){var l=s[u];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Xr.prototype.clone=function(){return new Xr(void 0===this.value.clone?this.value:this.value.clone())},Yr.prototype=Object.assign(Object.create(B.prototype),{constructor:Yr,isInstancedBufferGeometry:!0,copy:function(e){return B.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Kr.prototype=Object.assign(Object.create(Ot.prototype),{constructor:Kr,isInstancedInterleavedBuffer:!0,copy:function(e){return Ot.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Zr.prototype=Object.assign(Object.create(C.prototype),{constructor:Zr,isInstancedBufferAttribute:!0,copy:function(e){return C.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Jr.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld))},intersectObject:function(e,t,n){var i=n||[];return $r(e,this,i,t),i.sort(Qr),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return i;for(var r=0,o=e.length;r<o;r++)$r(e[r],this,i,t);return i.sort(Qr),i}}),Object.assign(eo.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(to.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Nu.clamp(t/this.radius,-1,1))),this}}),Object.assign(no.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(io.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new r;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(e=new r),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(e=new r),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(t=new r),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(t=new r),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(ro.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(e=new s),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(e=new s),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(t=new s),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new s,t=new s;return function(n,i){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),o=t.dot(e),a=o/r;return i&&(a=Nu.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(n=new s),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),oo.prototype=Object.create(M.prototype),oo.prototype.constructor=oo,oo.prototype.isImmediateRenderObject=!0,ao.prototype=Object.create(Bt.prototype),ao.prototype.constructor=ao,ao.prototype.update=function(){var e=new s,t=new s,n=new u;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var f=u[c],d=0,p=f.vertexNormals.length;d<p;d++){var m=s[f[i[d]]],v=f.vertexNormals[d];e.copy(m).applyMatrix4(r),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1}else if(a&&a.isBufferGeometry)for(var g=a.attributes.position,y=a.attributes.normal,l=0,d=0,p=g.count;d<p;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(r),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1;o.needsUpdate=!0}}(),so.prototype=Object.create(M.prototype),so.prototype.constructor=so,so.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},so.prototype.update=function(){var e=new s,t=new s;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),lo.prototype=Object.create(Bt.prototype),lo.prototype.constructor=lo,lo.prototype.updateMatrixWorld=function(){var e=new s,t=new o,n=new o;return function(i){var r=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<r.length;s++){var l=r[s];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u+1,e.x,e.y,e.z),u+=2)}o.getAttribute("position").needsUpdate=!0,M.prototype.updateMatrixWorld.call(this,i)}}(),co.prototype=Object.create(Z.prototype),co.prototype.constructor=co,co.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},co.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ho.prototype=Object.create(M.prototype),ho.prototype.constructor=ho,ho.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ho.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},fo.prototype=Object.create(M.prototype),fo.prototype.constructor=fo,fo.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},fo.prototype.update=function(){var e=new s,t=new y,n=new y;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?t:n;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),po.prototype=Object.create(Bt.prototype),po.prototype.constructor=po,mo.prototype=Object.create(Bt.prototype),mo.prototype.constructor=mo,vo.prototype=Object.create(Bt.prototype),vo.prototype.constructor=vo,vo.prototype.update=function(){var e=new s,t=new s,n=new u;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(u,e.x,e.y,e.z),u+=1,r.setXYZ(u,t.x,t.y,t.z),u+=1}r.needsUpdate=!0}}(),go.prototype=Object.create(M.prototype),go.prototype.constructor=go,go.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},go.prototype.update=function(){var e=new s,t=new s,n=new s;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),yo.prototype=Object.create(Bt.prototype),yo.prototype.constructor=yo,yo.prototype.update=function(){function e(e,o,a,s){i.set(o,a,s).unproject(r);var u=n[e];if(void 0!==u)for(var l=t.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],i.x,i.y,i.z)}var t,n,i=new s,r=new S;return function(){t=this.geometry,n=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),bo.prototype=Object.create(Bt.prototype),bo.prototype.constructor=bo,bo.prototype.update=function(){var e=new p;return function(t){if(void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),bo.prototype.setFromObject=function(e){return this.object=e,this.update(),this},_o.prototype=Object.create(Bt.prototype),_o.prototype.constructor=_o,_o.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),M.prototype.updateMatrixWorld.call(this,e))},wo.prototype=Object.create(jt.prototype),wo.prototype.constructor=wo,wo.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?pa:da,this.lookAt(this.plane.normal),M.prototype.updateMatrixWorld.call(this,e)};var Tl,Al;xo.prototype=Object.create(M.prototype),xo.prototype.constructor=xo,xo.prototype.setDirection=function(){var e,t=new s;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),xo.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},xo.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Mo.prototype=Object.create(Bt.prototype),Mo.prototype.constructor=Mo;var Cl=0,Pl=1;Ai.create=function(e,t){return e.prototype=Object.create(Ai.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Ki.prototype,{createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new A,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new s(r.x,r.y,r.z||0))}return t}}),Object.assign(Zi.prototype,{fromPoints:function(e){this.setFromPoints(e)}}),Wo.prototype=Object.create(Li.prototype),Ho.prototype=Object.create(Li.prototype),qo.prototype=Object.create(Li.prototype),Object.assign(qo.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),po.prototype.setColors=function(){},lo.prototype.update=function(){},Object.assign(Er.prototype,{extractUrlBase:function(e){return bl.extractUrlBase(e)}}),Object.assign(io.prototype,{center:function(e){return this.getCenter(e)},empty:function(){return this.isEmpty()},isIntersectionBox:function(e){return this.intersectsBox(e)},size:function(e){return this.getSize(e)}}),Object.assign(p.prototype,{center:function(e){return this.getCenter(e)},empty:function(){return this.isEmpty()},isIntersectionBox:function(e){return this.intersectsBox(e)},isIntersectionSphere:function(e){return this.intersectsSphere(e)},size:function(e){return this.getSize(e)}}),ro.prototype.center=function(e){return this.getCenter(e)},Object.assign(Nu,{random16:function(){return Math.random()},nearestPowerOfTwo:function(e){return Nu.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return Nu.ceilPowerOfTwo(e)}}),Object.assign(u.prototype,{flattenToArrayOffset:function(e,t){return this.toArray(e,t)},multiplyVector3:function(e){return e.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBuffer:function(e){return this.applyToBufferAttribute(e)},applyToVector3Array:function(){}}),Object.assign(o.prototype,{extractPosition:function(e){return this.copyPosition(e)},flattenToArrayOffset:function(e,t){return this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new s),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){},multiplyVector3:function(e){return e.applyMatrix4(this)},multiplyVector4:function(e){return e.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(e){e.transformDirection(this)},crossVector:function(e){return e.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBuffer:function(e){return this.applyToBufferAttribute(e)},applyToVector3Array:function(){},makeFrustum:function(e,t,n,i,r,o){return this.makePerspective(e,t,i,n,r,o)}}),v.prototype.isIntersectionLine=function(e){return this.intersectsLine(e)},a.prototype.multiplyVector3=function(e){return e.applyQuaternion(this)},Object.assign(Y.prototype,{isIntersectionBox:function(e){return this.intersectsBox(e)},isIntersectionPlane:function(e){return this.intersectsPlane(e)},isIntersectionSphere:function(e){return this.intersectsSphere(e)}}),Object.assign(K.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(e,t){return this.getBarycoord(e,t)},midpoint:function(e){return this.getMidpoint(e)},normal:function(e){return this.getNormal(e)},plane:function(e){return this.getPlane(e)}}),Object.assign(K,{barycoordFromPoint:function(e,t,n,i,r){return K.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return K.getNormal(e,t,n,i)}}),Object.assign(Ji.prototype,{extractAllPoints:function(e){return this.extractPoints(e)},extrude:function(e){return new Wn(this,e)},makeGeometry:function(e){return new ti(this,e)}}),Object.assign(r.prototype,{fromAttribute:function(e,t,n){return this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return this.manhattanDistanceTo(e)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(s.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(e){return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return this.setFromMatrixColumn(t,e)},applyProjection:function(e){return this.applyMatrix4(e)},fromAttribute:function(e,t,n){return this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return this.manhattanDistanceTo(e)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(c.prototype,{fromAttribute:function(e,t,n){return this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(A.prototype,{computeTangents:function(){},computeLineDistances:function(){}}),Object.assign(M.prototype,{getChildByName:function(e){return this.getObjectByName(e)},renderDepth:function(){},translate:function(e,t){return this.translateOnAxis(t,e)},getWorldRotation:function(){}}),Object.defineProperties(M.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(e){this.rotation.order=e}},useQuaternion:{get:function(){},set:function(){}}}),Object.defineProperties(Rt.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(Nt.prototype,"useVertexTexture",{get:function(){},set:function(){}}),Object.defineProperty(Ai.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(e){this.arcLengthDivisions=e}}),xt.prototype.setLens=function(e,t){void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Qi.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(e){this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(e){this.shadow.bias=e}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(e){this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){this.shadow.mapSize.height=e}}}),Object.defineProperties(C.prototype,{length:{get:function(){return this.array.length}},copyIndicesArray:function(){}}),Object.assign(B.prototype,{addIndex:function(e){this.setIndex(e)},addDrawCall:function(e,t,n){this.addGroup(e,t)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}}),Object.defineProperties(B.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.assign(Hn.prototype,{getArrays:function(){},addShapeList:function(){},addShape:function(){}}),Object.defineProperties(Xr.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(H.prototype,{wrapAround:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new y}},shading:{get:function(){},set:function(e){this.flatShading=e===va}}}),Object.defineProperties(mi.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(X.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(e){this.extensions.derivatives=e}}}),Object.assign(Tt.prototype,{animate:function(e){this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){this.setScissorTest(e)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){}}),Object.defineProperties(Tt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){this.shadowMap.type=e}},shadowMapCullFace:{get:function(){},set:function(){}}}),Object.defineProperties(gt.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(h.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(e){this.texture.wrapS=e}},wrapT:{get:function(){return this.texture.wrapT},set:function(e){this.texture.wrapT=e}},magFilter:{get:function(){return this.texture.magFilter},set:function(e){this.texture.magFilter=e}},minFilter:{get:function(){return this.texture.minFilter},set:function(e){this.texture.minFilter=e}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(e){this.texture.anisotropy=e}},offset:{get:function(){return this.texture.offset},set:function(e){this.texture.offset=e}},repeat:{get:function(){return this.texture.repeat},set:function(e){this.texture.repeat=e}},format:{get:function(){return this.texture.format},set:function(e){this.texture.format=e}},type:{get:function(){return this.texture.type},set:function(e){this.texture.type=e}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(e){this.texture.generateMipmaps=e}}}),Object.defineProperties(St.prototype,{standing:{set:function(){}},userHeight:{set:function(){}}}),Ur.prototype.load=function(e){var t=this;return(new Rr).load(e,function(e){t.setBuffer(e)}),this},Br.prototype.getData=function(){return this.getFrequencyData()},Dr.prototype.updateCubeMap=function(e,t){return this.update(e,t)};var Ol={merge:function(e,t,n){var i;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return e.center()}};Du.crossOrigin=void 0,Du.loadTexture=function(e,t,n,i){var r=new Ti;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},Du.loadTextureCube=function(e,t,n,i){var r=new Ei;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},Du.loadCompressedTexture=function(){},Du.loadCompressedTextureCube=function(){};var Ll={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}}},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(29),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){"use strict";var i=n(10);e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(39);e.exports=function(e){return Object(i(e))}},function(e,t,n){e.exports=n(179)()},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(27),r=n(39);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(23),r=n(60),o=n(44),a=Object.defineProperty;t.f=n(18)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var i=n(2)("unscopables"),r=Array.prototype;void 0==r[i]&&n(19)(r,i,{}),e.exports=function(e){r[i][e]=!0}},function(e,t,n){var i,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i)&&i.length){var a=n.apply(null,i);a&&e.push(a)}else if("object"===r)for(var s in i)o.call(i,s)&&i[s]&&e.push(s)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(i=[],void 0!==(r=function(){return n}.apply(t,i))&&(e.exports=r))}()},function(e,t,n){(function(n){var i,r,o=function(){this._tweens={},this._tweensAddedDuringUpdate={}};o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:a.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(e)&&(r._isPlaying=!1,t||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var a=new o;a.Group=o,a._nextId=0,a.nextId=function(){return a._nextId++},"undefined"===typeof window&&"undefined"!==typeof n?a.now=function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?a.now=window.performance.now.bind(window.performance):void 0!==Date.now?a.now=Date.now:a.now=function(){return(new Date).getTime()},a.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=a.Easing.Linear.None,this._interpolationFunction=a.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||a,this._id=a.nextId()},a.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"===typeof e?a.now()+parseFloat(e):e:a.now(),this._startTime+=this._delayTime;for(var t in this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array===!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,i;if(e<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n);for(t in this._valuesEnd)if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,i):("string"===typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"===typeof o&&(this._object[t]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(t in this._valuesStartRepeat){if("string"===typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},a.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-a.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*a.Easing.Bounce.In(2*e):.5*a.Easing.Bounce.Out(2*e-1)+.5}}},a.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=a.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],i):t>1?o(e[n],e[n-1],n-i):o(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){for(var n=0,i=e.length-1,r=Math.pow,o=a.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=r(1-t,i-s)*r(t,s)*e[s]*o(i,s);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),o=a.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),o(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):o(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=a.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var i=t;i>1;i--)n*=i;return e[t]=n,n}}(),CatmullRom:function(e,t,n,i,r){var o=.5*(n-e),a=.5*(i-t),s=r*r;return(2*t-2*n+o+a)*(r*s)+(-3*t+3*n-2*o-a)*s+o*r+t}}},function(n){i=[],void 0!==(r=function(){return a}.apply(t,i))&&(e.exports=r)}()}).call(t,n(55))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(12),r=n(24);e.exports=n(18)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(36),r=n(27),o=n(8),a=n(5),s=n(53);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,h=6==e,f=5==e||h,d=t||s;return function(t,s,p){for(var m,v,g=o(t),y=r(g),b=i(s,p,3),_=a(y.length),w=0,x=n?d(t,_):u?d(t,0):void 0;_>w;w++)if((f||w in y)&&(m=y[w],v=b(m,w,g),e))if(n)x[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:x.push(m)}else if(c)return!1;return h?-1:l||c?c:x}}},function(e,t,n){"use strict";function i(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){}}i(),e.exports=n(170)},function(e,t,n){var i=n(62),r=n(50);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(7),r=n(19),o=n(17),a=n(26)("src"),s=Function.toString,u=(""+s).split("toString");n(4).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(o(n,"name")||r(n,"name",t)),e[t]!==n&&(l&&(o(n,a)||r(n,a,e[t]?""+e[t]:u.join(String(t)))),e===i?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports={}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(168),u=n(32),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.resize=e.resize.bind(e),e._mobile=null,window.addEventListener("resize",e.resize),e.resize(),e}return o(t,e),a(t,[{key:"resize",value:function(){var e=!window.matchMedia("(min-width: "+s.mqTablet+")").matches;this._mobile!==e&&(this._mobile=e,this.emit("change",this.mobile))}},{key:"mobile",get:function(){return this._mobile}}]),t}(l.default),h=new c;t.default=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){i(this,e),this.node=t,this.node.dataset.id=n}return r(e,[{key:"show",value:function(){this.node.classList.add("is-visible")}},{key:"hide",value:function(){this.node.classList.remove("is-visible")}},{key:"destroy",value:function(){}}]),e}();t.default=o},function(e,t,n){e.exports=n(201)()},function(e,t,n){var i=n(37);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=!1},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(29),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(28);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(32),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=new r.default;t.default=o},function(e,t,n){var i=n(13);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(4),r=n(7),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(38)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(12).f,r=n(17),o=n(2)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(2)},function(e,t,n){var i=n(11),r=n(5),o=n(40);e.exports=function(e){return function(t,n,a){var s,u=i(t),l=r(u.length),c=o(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(45)("keys"),r=n(26);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var i=n(109)(!0);n(67)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(122);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&s())}function s(){if(!m){var e=r(a);m=!0;for(var t=p.length;t;){for(d=p,p=[];++v<t;)d&&d[v].run();v=-1,t=p.length}d=null,m=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,h,f=e.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"===typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,p=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||m||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function i(e,t,n,i,o,a,s,u){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,a,s,u],h=0;l=new Error(t.replace(/%s/g,function(){return c[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(e){};e.exports=i},function(e,t,n){"use strict";function i(e){return function(){return e}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),a=n(15),s=i(a),u=n(9),l=i(u),c=function(e){var t=e.text,n=e.href,i=e.color,r=(e.icon,e.disabled),a=e.onClick,u=a?"button":"a",l=(0,s.default)("button",{"button--white":"white"===i},{"button--black":"black"===i},{"is-disabled":r});return o.default.createElement(u,{className:l,href:n,onClick:a},o.default.createElement("span",{className:"button__bg"}),o.default.createElement("span",{className:"button__text"},t),o.default.createElement("span",{className:"button__arrow"},o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 10"},o.default.createElement("polygon",{points:"25 0 24.44 0.56 28.49 4.61 0 4.61 0 5.39 28.49 5.39 24.44 9.44 25 10 30 5 25 0"}))))};c.propTypes={text:l.default.string.isRequired,color:l.default.string.isRequired,onClick:l.default.func,href:l.default.string,disabled:l.default.bool},c.defaultProps={disabled:!1},t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(200),o=i(r),a=n(206),s=i(a),u=n(85),l=i(u),c=n(82),h=i(c);e.exports={Transition:h.default,TransitionGroup:l.default,ReplaceTransition:s.default,CSSTransition:o.default}},function(e,t,n){e.exports=!n(18)&&!n(10)(function(){return 7!=Object.defineProperty(n(61)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(13),r=n(7).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(17),r=n(11),o=n(48)(!1),a=n(49)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),u=0,l=[];for(n in s)n!=a&&i(s,n)&&l.push(n);for(;t.length>u;)i(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var i=n(23),r=n(104),o=n(50),a=n(49)("IE_PROTO"),s=function(){},u=function(){var e,t=n(61)("iframe"),i=o.length;for(t.style.display="none",n(64).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;i--;)delete u.prototype[o[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(7).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(62),r=n(50).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(28),r=n(2)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),r))?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var i=n(38),r=n(1),o=n(25),a=n(19),s=n(31),u=n(110),l=n(46),c=n(111),h=n(2)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,p,m,v,g){u(n,t,p);var y,b,_,w=function(e){if(!f&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",M="values"==m,S=!1,E=e.prototype,T=E[h]||E["@@iterator"]||m&&E[m],A=T||w(m),C=m?M?w("entries"):A:void 0,P="Array"==t?E.entries||T:T;if(P&&(_=c(P.call(new e)))!==Object.prototype&&_.next&&(l(_,x,!0),i||"function"==typeof _[h]||a(_,h,d)),M&&T&&"values"!==T.name&&(S=!0,A=function(){return T.call(this)}),i&&!g||!f&&!S&&E[h]||a(E,h,A),s[t]=A,s[x]=d,m)if(y={values:M?A:w("values"),keys:v?A:w("keys"),entries:C},g)for(b in y)b in E||o(E,b,y[b]);else r(r.P+r.F*(f||S),t,y);return y}},function(e,t,n){"use strict";var i=n(36),r=n(1),o=n(8),a=n(113),s=n(114),u=n(5),l=n(69),c=n(115);r(r.S+r.F*!n(116)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,h,f=o(e),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=c(f);if(v&&(m=i(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(t=u(f.length),n=new d(t);t>g;g++)l(n,g,v?m(f[g],g):f[g]);else for(h=y.call(f),n=new d;!(r=h.next()).done;g++)l(n,g,v?a(h,m,[r.value,g],!0):r.value);return n.length=g,n}})},function(e,t,n){"use strict";var i=n(12),r=n(24);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(37),r=n(8),o=n(27),a=n(5);e.exports=function(e,t,n,s,u){i(t);var l=r(e),c=o(l),h=a(l.length),f=u?h-1:0,d=u?-1:1;if(n<2)for(;;){if(f in c){s=c[f],f+=d;break}if(f+=d,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=d)f in c&&(s=t(s,c[f],f,l));return s}},function(e,t,n){"use strict";var i=n(14),r=n(139),o=n(31),a=n(11);e.exports=n(67)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";function i(e,t,n,l,c,h,f,d){for(var p,m,v=c,g=0,y=!!f&&s(f,d,3);g<l;){if(g in n){if(p=y?y(n[g],g,t):n[g],m=!1,o(p)&&(m=p[u],m=void 0!==m?!!m:r(p)),m&&h>0)v=i(e,t,p,a(p.length),v,h-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}g++}return v}var r=n(41),o=n(13),a=n(5),s=n(36),u=n(2)("isConcatSpreadable");e.exports=i},function(e,t,n){"use strict";function i(){}function r(e){try{return e.then}catch(e){return g=e,y}}function o(e,t){try{return e(t)}catch(e){return g=e,y}}function a(e,t,n){try{e(t,n)}catch(e){return g=e,y}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==i&&m(e,this)}function u(e,t,n){return new e.constructor(function(r,o){var a=new s(i);a.then(r,o),l(e,new p(t,n,a))})}function l(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){v(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?h(t.promise,e._18):f(t.promise,e._18));var i=o(n,e._18);i===y?f(t.promise,g):h(t.promise,i)})}function h(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=r(t);if(n===y)return f(e,g);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void d(e);if("function"===typeof n)return void m(n.bind(t),e)}e._83=1,e._18=t,d(e)}function f(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),d(e)}function d(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function p(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function m(e,t){var n=!1,i=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,f(t,e))});n||i!==y||(n=!0,f(t,g))}var v=n(151),g=null,y={};e.exports=s,s._47=null,s._71=null,s._44=i,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(i);return l(this,new p(e,t,n)),n}},function(e,t,n){!function(t,n){e.exports=n()}("undefined"!==typeof self&&self,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.frames=t}return r(e,[{key:"getValue",value:function(){return this.frames[0].v}},{key:"setKeyframes",value:function(e){}},{key:"reset",value:function(e){}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(8),h=i(c),f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.frameCount=n.frames.length,n}return a(t,e),s(t,[{key:"lerp",value:function(e,t,n){if(e instanceof Array){for(var i=[],r=0;r<e.length;r++)i[r]=e[r]+n*(t[r]-e[r]);return i}return e+n*(t-e)}},{key:"setEasing",value:function(){this.nextFrame.easeIn?this.easing=new h.default(this.lastFrame.easeOut[0],this.lastFrame.easeOut[1],this.nextFrame.easeIn[0],this.nextFrame.easeIn[1]):this.easing=null}},{key:"getValue",value:function(e){return this.finished&&e>=this.nextFrame.t?this.nextFrame.v:!this.started&&e<=this.lastFrame.t?this.lastFrame.v:(this.started=!0,this.finished=!1,e>this.nextFrame.t?this.pointer+1===this.frameCount?this.finished=!0:(this.pointer++,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange()):e<this.lastFrame.t&&(this.pointer<2?this.started=!1:(this.pointer--,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange())),this.getValueAtTime(e))}},{key:"setKeyframes",value:function(e){if(e<this.frames[0].t)return this.pointer=1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();if(e>this.frames[this.frameCount-1].t)return this.pointer=this.frameCount-1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();for(var t=1;t<this.frameCount;t++)if(e>=this.frames[t-1].t&&e<=this.frames[t].t)return this.pointer=t,this.lastFrame=this.frames[t-1],this.nextFrame=this.frames[t],void this.onKeyframeChange()}},{key:"onKeyframeChange",value:function(){this.setEasing()}},{key:"getElapsed",value:function(e){var t=e-this.lastFrame.t,n=this.nextFrame.t-this.lastFrame.t,i=t/n;return i>1?i=1:i<0?i=0:this.easing&&(i=this.easing(i)),i}},{key:"getValueAtTime",value:function(e){return this.lerp(this.lastFrame.v,this.nextFrame.v,this.getElapsed(e))}},{key:"reset",value:function(e){this.finished=!1,this.started=!1,this.pointer=e?this.frameCount-1:1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],this.onKeyframeChange()}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=i(a),u=n(7),l=i(u),c=n(17),h=i(c),f=n(19),d=i(f),p=function(){function e(t){r(this,e),this.index=t.index,this.in=t.in||0,this.out=t.out,t.parent&&(this.parent=t.parent),this.transform=new h.default(t.transform),t.effects&&t.effects.dropShadow&&(this.dropShadow=new d.default(t.effects.dropShadow)),t.masks&&(this.masks=t.masks.map(function(e){return e.isAnimated?new l.default(e):new s.default(e)}))}return o(e,[{key:"draw",value:function(e,t){e.save(),this.parent&&this.parent.setParentTransform(e,t),this.transform.update(e,t),this.dropShadow&&this.dropShadow.setShadow(e,t),this.masks&&(e.beginPath(),this.masks.forEach(function(n){return n.draw(e,t)}),e.clip())}},{key:"setParentTransform",value:function(e,t){this.parent&&this.parent.setParentTransform(e,t),this.transform.update(e,t)}},{key:"setKeyframes",value:function(e){this.transform.setKeyframes(e),this.masks&&this.masks.forEach(function(t){return t.setKeyframes(e)})}},{key:"reset",value:function(e){this.transform.reset(e),this.masks&&this.masks.forEach(function(t){return t.reset(e)})}}]),e}();t.default=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(6),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){i(this,e),this.closed=t.closed,this.frames=t.frames,this.verticesCount=this.frames[0].v.length}return r(e,[{key:"draw",value:function(e,t,n){var i=this.getValue(t),r=i.v,o=void 0,a=void 0;if(n){if(0===n.start&&0===n.end||1===n.start&&1===n.end)return;n=this.getTrimValues(n,i)}for(var s=1;s<r.length;s++)if(o=r[s],a=r[s-1],n){var u=void 0;1===s&&0!==n.startIndex?e.moveTo(a[4],a[5]):s===n.startIndex+1&&s===n.endIndex+1?(u=this.trim(a,o,n.start,n.end,i.len[s-1]),e.moveTo(u.start[4],u.start[5]),e.bezierCurveTo(u.start[0],u.start[1],u.end[2],u.end[3],u.end[4],u.end[5])):s===n.startIndex+1?(u=this.trim(a,o,n.start,1,i.len[s-1]),e.moveTo(u.start[4],u.start[5]),e.bezierCurveTo(u.start[0],u.start[1],u.end[2],u.end[3],u.end[4],u.end[5])):s===n.endIndex+1?(u=this.trim(a,o,0,n.end,i.len[s-1]),e.bezierCurveTo(u.start[0],u.start[1],u.end[2],u.end[3],u.end[4],u.end[5])):s>n.startIndex+1&&s<n.endIndex+1&&e.bezierCurveTo(a[0],a[1],o[2],o[3],o[4],o[5])}else 1===s&&e.moveTo(a[4],a[5]),e.bezierCurveTo(a[0],a[1],o[2],o[3],o[4],o[5]);!n&&this.closed&&e.bezierCurveTo(o[0],o[1],r[0][2],r[0][3],r[0][4],r[0][5])}},{key:"getValue",value:function(){return this.frames[0]}},{key:"getTrimValues",value:function(e,t){var n=void 0,i={startIndex:0,endIndex:0,start:0,end:0};if(0===e.start){if(0===e.end)return i;if(1===e.end)return i.endIndex=t.len.length,i.end=1,i}var r=this.sumArray(t.len),o=void 0;for(o=r*e.start,n=0;n<t.len.length;n++)o>0&&o<t.len[n]&&(i.startIndex=n,i.start=o/t.len[n]),o-=t.len[n];if(1===e.end)return i.endIndex=t.len.length,i.end=1,i;for(o=r*e.end,n=0;n<t.len.length;n++)o>0&&o<t.len[n]&&(i.endIndex=n,i.end=o/t.len[n]),o-=t.len[n];return i}},{key:"trim",value:function(e,t,n,i,r){if(0===n&&1===i)return{start:e,end:t};if(this.isStraight(e[4],e[5],e[0],e[1],t[2],t[3],t[4],t[5]))o=[this.lerp(e[0],t[0],n),this.lerp(e[1],t[1],n),this.lerp(e[2],t[2],n),this.lerp(e[3],t[3],n),this.lerp(e[4],t[4],n),this.lerp(e[5],t[5],n)],s=[this.lerp(e[0],t[0],i),this.lerp(e[1],t[1],i),this.lerp(e[2],t[2],i),this.lerp(e[3],t[3],i),this.lerp(e[4],t[4],i),this.lerp(e[5],t[5],i)];else{this.bezier=new a.default([e[4],e[5],e[0],e[1],t[2],t[3],t[4],t[5]]),this.bezier.getLength(r),n=this.bezier.map(n),i=this.bezier.map(i),i=(i-n)/(1-n);var o,s,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,m=void 0,v=void 0,g=void 0,y=void 0,b=void 0;u=[this.lerp(e[4],e[0],n),this.lerp(e[5],e[1],n)],l=[this.lerp(e[0],t[2],n),this.lerp(e[1],t[3],n)],c=[this.lerp(t[2],t[4],n),this.lerp(t[3],t[5],n)],h=[this.lerp(u[0],l[0],n),this.lerp(u[1],l[1],n)],f=[this.lerp(l[0],c[0],n),this.lerp(l[1],c[1],n)],d=[this.lerp(h[0],f[0],n),this.lerp(h[1],f[1],n)],o=[f[0],f[1],h[0],h[1],d[0],d[1]],s=[t[0],t[1],c[0],c[1],t[4],t[5]],p=[this.lerp(o[4],o[0],i),this.lerp(o[5],o[1],i)],m=[this.lerp(o[0],s[2],i),this.lerp(o[1],s[3],i)],v=[this.lerp(s[2],s[4],i),this.lerp(s[3],s[5],i)],g=[this.lerp(p[0],m[0],i),this.lerp(p[1],m[1],i)],y=[this.lerp(m[0],v[0],i),this.lerp(m[1],v[1],i)],b=[this.lerp(g[0],y[0],i),this.lerp(g[1],y[1],i)],o=[p[0],p[1],o[2],o[3],o[4],o[5]],s=[y[0],y[1],g[0],g[1],b[0],b[1]]}return{start:o,end:s}}},{key:"lerp",value:function(e,t,n){return e*(1-n)+t*n}},{key:"sumArray",value:function(e){function t(e,t){return e+t}return e.reduce(t)}},{key:"isStraight",value:function(e,t,n,i,r,o,a,s){return e===n&&t===i&&a===r&&s===o}},{key:"setKeyframes",value:function(e){}},{key:"reset",value:function(e){}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){a.push(e),s=a.length}function r(e){var t=a.indexOf(e);t>-1&&(a.splice(t,1),s=a.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.add=t.autoPlay=t.update=void 0;var o=n(13),a=[],s=0,u=!1,l=void 0,c=function e(t){u&&(l=(0,o.requestAnimationFrame)(e)),t=void 0!==t?t:performance.now();for(var n=0;n<s;n++)a[n].update(t)},h=function(e){u=e,u?l=(0,o.requestAnimationFrame)(c):cancelAnimationFrame(l)};t.update=c,t.autoPlay=h,t.add=i,t.remove=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source=e.source,n.isLoaded=!1,n}return o(t,e),a(t,[{key:"preload",value:function(e){var t=this;return new Promise(function(e,n){t.img=new Image,t.img.onload=function(){t.isLoaded=!0,e()},t.img.src=t.source})}},{key:"draw",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e,n),e.drawImage(this.img,0,0),e.restore()}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.path=t}return r(e,[{key:"getLength",value:function(e){this.steps=Math.max(Math.floor(e/10),1),this.arcLengths=new Array(this.steps+1),this.arcLengths[0]=0;for(var t=this.cubicN(0,this.path[0],this.path[2],this.path[4],this.path[6]),n=this.cubicN(0,this.path[1],this.path[3],this.path[5],this.path[7]),i=0,r=1/this.steps,o=1;o<=this.steps;o+=1){var a=this.cubicN(o*r,this.path[0],this.path[2],this.path[4],this.path[6]),s=this.cubicN(o*r,this.path[1],this.path[3],this.path[5],this.path[7]),u=t-a,l=n-s;i+=Math.sqrt(u*u+l*l),this.arcLengths[o]=i,t=a,n=s}this.length=i}},{key:"map",value:function(e){for(var t=e*this.arcLengths[this.steps],n=0,i=this.steps,r=0;n<i;)r=n+((i-n)/2|0),this.arcLengths[r]<t?n=r+1:i=r;this.arcLengths[r]>t&&r--;var o=this.arcLengths[r];return o===t?r/this.steps:(r+(t-o)/(this.arcLengths[r+1]-o))/this.steps}},{key:"getValues",value:function(e){var t=this.map(e);return[this.cubicN(t,this.path[0],this.path[2],this.path[4],this.path[6]),this.cubicN(t,this.path[1],this.path[3],this.path[5],this.path[7])]}},{key:"cubicN",value:function(e,t,n,i,r){var o=e*e;return t+(3*-t+e*(3*t-t*e))*e+(3*n+e*(-6*n+3*n*e))*e+(3*i-3*i*e)*o+r*(o*e)}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(8),h=i(c),f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.frameCount=n.frames.length,n}return a(t,e),s(t,[{key:"getValue",value:function(e){return this.finished&&e>=this.nextFrame.t?this.nextFrame:!this.started&&e<=this.lastFrame.t?this.lastFrame:(this.started=!0,this.finished=!1,e>this.nextFrame.t?this.pointer+1===this.frameCount?this.finished=!0:(this.pointer++,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange()):e<this.lastFrame.t&&(this.pointer<2?this.started=!1:(this.pointer--,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange())),this.getValueAtTime(e))}},{key:"setKeyframes",value:function(e){if(e<this.frames[0].t)return this.pointer=1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();if(e>this.frames[this.frameCount-1].t)return this.pointer=this.frameCount-1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();for(var t=1;t<this.frameCount;t++)if(e>=this.frames[t-1].t&&e<=this.frames[t])return this.pointer=t,this.lastFrame=this.frames[t-1],this.nextFrame=this.frames[t],void this.onKeyframeChange()}},{key:"onKeyframeChange",value:function(){this.setEasing()}},{key:"lerp",value:function(e,t,n){return e+n*(t-e)}},{key:"setEasing",value:function(){this.lastFrame.easeOut&&this.nextFrame.easeIn?this.easing=new h.default(this.lastFrame.easeOut[0],this.lastFrame.easeOut[1],this.nextFrame.easeIn[0],this.nextFrame.easeIn[1]):this.easing=null}},{key:"getValueAtTime",value:function(e){var t=e-this.lastFrame.t,n=this.nextFrame.t-this.lastFrame.t,i=t/n;i>1?i=1:i<0?i=0:this.easing&&(i=this.easing(i));for(var r=[],o=[],a=0;a<this.verticesCount;a++){var s=this.lerp(this.lastFrame.v[a][0],this.nextFrame.v[a][0],i),u=this.lerp(this.lastFrame.v[a][1],this.nextFrame.v[a][1],i),l=this.lerp(this.lastFrame.v[a][2],this.nextFrame.v[a][2],i),c=this.lerp(this.lastFrame.v[a][3],this.nextFrame.v[a][3],i),h=this.lerp(this.lastFrame.v[a][4],this.nextFrame.v[a][4],i),f=this.lerp(this.lastFrame.v[a][5],this.nextFrame.v[a][5],i);r.push([s,u,l,c,h,f])}for(var d=0;d<this.verticesCount-1;d++)o.push(this.lerp(this.lastFrame.len[d],this.nextFrame.len[d],i));return{v:r,len:o}}},{key:"reset",value:function(e){this.finished=!1,this.started=!1,this.pointer=e?this.frameCount-1:1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],this.onKeyframeChange()}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){"object"===i(t)?e.exports=n():"function"===typeof window.define&&window.define.amd?window.define([],n):window.BezierEasing=n()}(function(){function e(e,u,l,c){function h(e,t){return 1-3*t+3*e}function f(e,t){return 3*t-6*e}function d(e){return 3*e}function p(e,t,n){return((h(t,n)*e+f(t,n))*e+d(t))*e}function m(e,t,n){return 3*h(t,n)*e*e+2*f(t,n)*e+d(t)}function v(n,i){for(var r=0;r<t;++r){var o=m(i,e,l);if(0===o)return i;i-=(p(i,e,l)-n)/o}return i}function g(t,n,o){var a,s,u=0;do{s=n+(o-n)/2,a=p(s,e,l)-t,a>0?o=s:n=s}while(Math.abs(a)>i&&++u<r);return s}function y(t){for(var i=0,r=1,s=o-1;r!=s&&_[r]<=t;++r)i+=a;--r;var u=(t-_[r])/(_[r+1]-_[r]),c=i+u*a,h=m(c,e,l);return h>=n?v(t,c):0==h?c:g(t,i,i+a)}if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var b=0;b<4;++b)if("number"!==typeof arguments[b]||isNaN(arguments[b])||!isFinite(arguments[b]))throw new Error("BezierEasing arguments should be integers.");if(e<0||e>1||l<0||l>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var _=s?new Float32Array(o):new Array(o);e==u&&l==c||function(){for(var t=0;t<o;++t)_[t]=p(t*a,e,l)}();var w=function(t){return e===u&&l===c?t:0===t?0:1===t?1:p(y(t),u,c)},x="BezierEasing("+[e,u,l,c]+")";return w.toString=function(){return x},w}var t=4,n=.001,i=1e-7,r=10,o=11,a=1/(o-1),s="function"===typeof Float32Array;return e.css={ease:e(.25,.1,.25,1),linear:e(0,0,1,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,1),"ease-in-out":e(.42,0,.58,1)},e})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"draw",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e,n),e.restore()}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.text=e.text,o.leading=e.leading,o.fontSize=e.fontSize,o.font=e.font,o.color=e.color,o.justification=e.justification,o.baseFont=n,o}return o(t,e),a(t,[{key:"draw",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e,n),e.textAlign=this.justification,e.font=this.fontSize+"px "+this.baseFont||this.font,e.fillStyle="rgb("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")";for(var i=0;i<this.text.length;i++)e.fillText(this.text[i],0,i*this.leading);e.restore()}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=n(7),c=i(l),h=n(21),f=i(h),d=n(3),p=i(d),m=n(22),v=i(m),g=n(23),y=i(g),b=n(24),_=i(b),w=n(25),x=i(w),M=n(26),S=i(M),E=n(27),T=i(E),A=n(2),C=i(A),P=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.fill&&(i.fill=new _.default(e.fill)),e.gradientFill&&(i.fill=new x.default(e.gradientFill,n)),e.stroke&&(i.stroke=new S.default(e.stroke)),e.trim&&(i.trim=new T.default(e.trim)),e.groups&&(i.groups=e.groups.map(function(e){return new t(e,n)})),e.shapes&&(i.shapes=e.shapes.map(function(e){return"path"===e.type?e.isAnimated?new c.default(e):new p.default(e):"rect"===e.type?new y.default(e):"ellipse"===e.type?new f.default(e):"polystar"===e.type?new v.default(e):void 0})),i}return a(t,e),s(t,[{key:"draw",value:function(e,n,i,r,o){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e,n);var a=this.fill||i,s=this.stroke||r,l=this.trim?this.trim.getTrim(n):o;a&&a.update(e,n),s&&s.update(e,n),e.beginPath(),this.shapes&&(this.shapes.forEach(function(t){return t.draw(e,n,l)}),this.shapes[this.shapes.length-1].closed),a&&e.fill(),s&&e.stroke(),this.groups&&this.groups.forEach(function(t){return t.draw(e,n,a,s,l)}),e.restore()}},{key:"setKeyframes",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeyframes",this).call(this,e),this.shapes&&this.shapes.forEach(function(t){return t.setKeyframes(e)}),this.groups&&this.groups.forEach(function(t){return t.setKeyframes(e)}),this.fill&&this.fill.setKeyframes(e),this.stroke&&this.stroke.setKeyframes(e),this.trim&&this.trim.setKeyframes(e)}},{key:"reset",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e),this.shapes&&this.shapes.forEach(function(t){return t.reset(e)}),this.groups&&this.groups.forEach(function(t){return t.reset(e)}),this.fill&&this.fill.reset(e),this.stroke&&this.stroke.reset(e),this.trim&&this.trim.reset(e)}}]),t}(C.default);t.default=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.add=t.autoPlay=t.update=t.Animation=void 0;var i=n(4),r=n(15),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.Animation=o.default,t.update=i.update,t.autoPlay=i.autoPlay,t.add=i.add,t.remove=i.remove},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!==typeof window?window:"undefined"!==typeof e?e:void 0;t.requestAnimationFrame=n.requestAnimationFrame||function(e){return n.setTimeout(e,16)},t.cancelAnimationFrame=n.cancelAnimationFrame||function(e){return n.clearTimeout(e)},t.performance=n.performance||{offset:Date.now(),now:function(){return Date.now()-this.offset}}}).call(t,n(14))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(4),l=n(16),c=i(l),h=n(5),f=i(h),d=n(9),p=i(d),m=n(10),v=i(m),g=n(20),y=i(g),b=n(11),_=i(b),w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.gradients={},n.pausedTime=0,n.duration=e.data.duration,n.baseWidth=e.data.width,n.baseHeight=e.data.height,n.ratio=e.data.width/e.data.height,n.markers=e.data.markers,n.baseFont=e.baseFont,n.loop=e.loop||!1,n.devicePixelRatio=e.devicePixelRatio||(window&&window.devicePixelRatio?window.devicePixelRatio:1),n.fluid=e.fluid||!0,n.imageBasePath=e.imageBasePath||"";var i=e.data.comps;return n.isPaused=!1,n.isPlaying=!1,n.drawFrame=!0,n.canvas=e.canvas||document.createElement("canvas"),n.canvas.width=n.baseWidth,n.canvas.height=n.baseHeight,n.ctx=n.canvas.getContext("2d"),n.layers=e.data.layers.map(function(e){switch(e.type){case"vector":return new _.default(e,n.gradients);case"image":return new f.default(e,n.imageBasePath);case"text":return new v.default(e,n.baseFont);case"comp":return new y.default(e,i,n.baseFont,n.gradients,n.imageBasePath);case"null":return new p.default(e)}}),n.layers.forEach(function(e){if(e.parent){var t=e.parent;e.parent=n.layers.find(function(e){return e.index===t})}}),n.reversed=e.reversed||!1,n.reset(n.reversed),n.resize(),(0,u.add)(n),n}return a(t,e),s(t,[{key:"play",value:function(){this.isPlaying||(this.isPaused||this.reset(this.reversed),this.isPaused=!1,this.pausedTime=0,this.isPlaying=!0)}},{key:"stop",value:function(){this.reset(this.reversed),this.isPlaying=!1,this.drawFrame=!0}},{key:"pause",value:function(){this.isPlaying&&(this.isPaused=!0,this.pausedTime=this.time,this.isPlaying=!1)}},{key:"gotoAndPlay",value:function(e){var t=this.getMarker(e);t&&(this.time=t.time,this.pausedTime=0,this.setKeyframes(this.time),this.isPlaying=!0)}},{key:"gotoAndStop",value:function(e){var t=this.getMarker(e);t&&(this.time=t.time,this.setKeyframes(this.time),this.drawFrame=!0,this.isPlaying=!1)}},{key:"getMarker",value:function(e){var t=void 0;if("number"===typeof e?t=this.markers[e]:"string"===typeof e&&(t=this.markers.find(function(t){return t.comment===e})),t)return t}},{key:"checkStopMarkers",value:function(e,t){return this.markers.find(function(n){return n.stop&&n.time>e&&n.time<t})}},{key:"preload",value:function(){var e=this.layers.filter(function(e){return e instanceof f.default}).map(function(e){return new e.preload});return Promise.all(e).catch(function(e){})}},{key:"reset",value:function(){var e=this;this.pausedTime=0,this.time=this.reversed?this.duration:0,this.layers.forEach(function(t){return t.reset(e.reversed)})}},{key:"setKeyframes",value:function(e){this.layers.forEach(function(t){return t.setKeyframes(e)})}},{key:"destroy",value:function(){this.isPlaying=!1,this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),(0,u.remove)(this)}},{key:"resize",value:function(e){if(this.fluid){var t=e||this.canvas.clientWidth||this.baseWidth;this.canvas.width=t*this.devicePixelRatio,this.canvas.height=t/this.ratio*this.devicePixelRatio,this.scale=t/this.baseWidth*this.devicePixelRatio,this.ctx.transform(this.scale,0,0,this.scale,0,0),this.setKeyframes(this.time),this.drawFrame=!0}}},{key:"setGradients",value:function(e,t){this.gradients[e]&&this.gradients[e].forEach(function(e){e.stops=t})}},{key:"getSpriteSheet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4096,i=t/this.baseWidth,r=this.baseHeight*i,o=Math.floor(this.duration/1e3*e),a=document.createElement("canvas"),s=a.getContext("2d"),u=Math.floor(n/t),l=Math.ceil(o/u),c=0,h=0;a.width=u*t,a.height=l*r,this.resize(t);for(var f=0;f<o;f++){var d=f/o,p=d*this.duration;this.setKeyframes(p),this.draw(p);var m=c*t,v=h*r;c+1>=u?(c=0,h++):c++,s.drawImage(this.canvas,m,v,t,r)}return{frames:o,canvas:a,offsetX:t,offsetY:r,rowsX:u,rowsY:l}}},{key:"draw",value:function(e){var t=this;this.ctx.clearRect(0,0,this.baseWidth,this.baseHeight),this.layers.forEach(function(n){e>=n.in&&e<=n.out&&n.draw(t.ctx,e)})}},{key:"update",value:function(e){this.then||(this.then=e);var t=e-this.then;if(this.then=e,this.isPlaying){this.time=this.reversed?this.time-t:this.time+t;var n=this.checkStopMarkers(this.time-t,this.time);this.time>this.duration||this.reversed&&this.time<0?(this.time=this.reversed?0:this.duration-1,this.isPlaying=!1,this.emit("complete"),this.loop&&this.play()):n?(this.time=n.time,this.pause(),this.emit("stop",n)):this.draw(this.time),this.emit("update")}else this.drawFrame&&(this.drawFrame=!1,this.draw(this.time),this.emit("update"))}},{key:"step",set:function(e){this.isPlaying=!1,this.time=e*this.duration,this.pausedTime=this.time,this.setKeyframes(this.time),this.drawFrame=!0},get:function(){return this.time/this.duration}},{key:"reversed",get:function(){return this._reversed},set:function(e){this._reversed=e,this.pausedTime?this.time=this.pausedTime:this.isPlaying||(this.time=this.reversed?this.duration:0),this.setKeyframes(this.time)}}]),t}(c.default);t.default=w},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=n(18),h=i(c),f=function(){function e(t){r(this,e),t.position&&(t.position.length>1?this.position=new h.default(t.position):this.position=new s.default(t.position)),t.positionX&&(this.positionX=t.positionX.length>1?new l.default(t.positionX):new s.default(t.positionX)),t.positionY&&(this.positionY=t.positionY.length>1?new l.default(t.positionY):new s.default(t.positionY)),t.anchor&&(this.anchor=t.anchor.length>1?new l.default(t.anchor):new s.default(t.anchor)),t.scaleX&&(this.scaleX=t.scaleX.length>1?new l.default(t.scaleX):new s.default(t.scaleX)),t.scaleY&&(this.scaleY=t.scaleY.length>1?new l.default(t.scaleY):new s.default(t.scaleY)),t.skew&&(this.skew=t.skew.length>1?new l.default(t.skew):new s.default(t.skew)),t.skewAxis&&(this.skewAxis=t.skewAxis.length>1?new l.default(t.skewAxis):new s.default(t.skewAxis)),t.rotation&&(this.rotation=t.rotation.length>1?new l.default(t.rotation):new s.default(t.rotation)),t.opacity&&(this.opacity=t.opacity.length>1?new l.default(t.opacity):new s.default(t.opacity))}return o(e,[{key:"update",value:function(e,t){var n=void 0,i=void 0,r=this.anchor?this.anchor.getValue(t):[0,0],o=this.rotation?this.deg2rad(this.rotation.getValue(t)):0,a=this.skew?this.deg2rad(this.skew.getValue(t)):0,s=this.skewAxis?this.deg2rad(this.skewAxis.getValue(t)):0,u=this.scaleX?this.scaleX.getValue(t):1,l=this.scaleY?this.scaleY.getValue(t):1,c=this.opacity?this.opacity.getValue(t)*e.globalAlpha:e.globalAlpha;if(this.position){var h=this.position.getValue(t,e);n=h[0],i=h[1]}else n=this.positionX?this.positionX.getValue(t):0,i=this.positionY?this.positionY.getValue(t):0;e.transform(1,0,0,1,n-r[0],i-r[1]),this.setRotation(e,o,r[0],r[1]),this.setSkew(e,a,s,r[0],r[1]),this.setScale(e,u,l,r[0],r[1]),e.globalAlpha=c}},{key:"setRotation",value:function(e,t,n,i){var r=Math.cos(t),o=Math.sin(t),a=n-r*n+o*i,s=i-o*n-r*i;e.transform(r,o,-o,r,a,s)}},{key:"setScale",value:function(e,t,n,i,r){e.transform(t,0,0,n,-i*t+i,-r*n+r)}},{key:"setSkew",value:function(e,t,n,i,r){var o=Math.tan(-t);this.setRotation(e,-n,i,r),e.transform(1,0,o,1,-r*o,0),this.setRotation(e,n,i,r)}},{key:"deg2rad",value:function(e){return e*(Math.PI/180)}},{key:"setKeyframes",value:function(e){this.anchor&&this.anchor.setKeyframes(e),this.rotation&&this.rotation.setKeyframes(e),this.skew&&this.skew.setKeyframes(e),this.skewAxis&&this.skewAxis.setKeyframes(e),this.position&&this.position.setKeyframes(e),this.positionX&&this.positionX.setKeyframes(e),this.positionY&&this.positionY.setKeyframes(e),this.scaleX&&this.scaleX.setKeyframes(e),this.scaleY&&this.scaleY.setKeyframes(e),this.opacity&&this.opacity.setKeyframes(e)}},{key:"reset",value:function(e){this.anchor&&this.anchor.reset(e),this.rotation&&this.rotation.reset(e),this.skew&&this.skew.reset(e),this.skewAxis&&this.skewAxis.reset(e),this.position&&this.position.reset(e),this.positionX&&this.positionX.reset(e),this.positionY&&this.positionY.reset(e),this.scaleX&&this.scaleX.reset(e),this.scaleY&&this.scaleY.reset(e),this.opacity&&this.opacity.reset(e)}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(6),l=i(u),c=n(1),h=i(c),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"onKeyframeChange",value:function(){this.setEasing(),this.setMotionPath()}},{key:"getValueAtTime",value:function(e){return this.motionpath?this.motionpath.getValues(this.getElapsed(e)):this.lerp(this.lastFrame.v,this.nextFrame.v,this.getElapsed(e))}},{key:"setMotionPath",value:function(){this.lastFrame.motionpath?(this.motionpath=new l.default(this.lastFrame.motionpath),this.motionpath.getLength(this.lastFrame.len)):this.motionpath=null}}]),t}(h.default);t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=function(){function e(t){r(this,e),this.color=t.color.length>1?new l.default(t.color):new s.default(t.color),this.opacity=t.opacity.length>1?new l.default(t.opacity):new s.default(t.opacity),this.direction=t.direction.length>1?new l.default(t.direction):new s.default(t.direction),this.distance=t.distance.length>1?new l.default(t.distance):new s.default(t.distance),this.softness=t.softness.length>1?new l.default(t.softness):new s.default(t.softness)}return o(e,[{key:"getColor",value:function(e){var t=this.color.getValue(e),n=this.opacity.getValue(e);return"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+n+")"}},{key:"setShadow",value:function(e,t){var n=this.getColor(t),i=this.distance.getValue(t),r=this.softness.getValue(t);e.shadowColor=n,e.shadowOffsetX=i,e.shadowOffsetY=i,e.shadowBlur=r}},{key:"setKeyframes",value:function(e){this.color.setKeyframes(e),this.opacity.setKeyframes(e),this.direction.setKeyframes(e),this.distance.setKeyframes(e),this.softness.setKeyframes(e)}},{key:"reset",value:function(e){this.color.reset(e),this.opacity.reset(e),this.direction.reset(e),this.distance.reset(e),this.softness.reset(e)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=n(5),c=i(l),h=n(9),f=i(h),d=n(10),p=i(d),m=n(2),v=i(m),g=n(11),y=i(g),b=n(0),_=i(b),w=n(1),x=i(w),M=function(e){function t(e,n,i,a,s){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),l=e.sourceID,h=n&&n[l]?n[l].layers:null;return h&&(u.layers=h.map(function(e){switch(e.type){case"vector":return new y.default(e,a);case"image":return new c.default(e,s);case"text":return new p.default(e,i);case"comp":return new t(e,i,a,s);case"null":return new f.default(e)}}),u.layers.forEach(function(e){if(e.parent){var t=e.parent;e.parent=u.layers.find(function(e){return e.index===t})}})),e.timeRemapping&&(u.timeRemapping=e.timeRemapping.length>1?new x.default(e.timeRemapping):new _.default(e.timeRemapping)),u}return a(t,e),s(t,[{key:"draw",value:function(e,n){if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e,n),this.layers){var i=n-this.in;this.timeRemapping&&(i=this.timeRemapping.getValue(i)),this.layers.forEach(function(t){i>=t.in&&i<=t.out&&t.draw(e,i)})}e.restore()}},{key:"setParentTransform",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParentTransform",this).call(this,e,n);var i=n-this.in;this.layers&&this.layers.forEach(function(t){return t.setParentTransform(e,i)})}},{key:"setKeyframes",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeyframes",this).call(this,e);var n=e-this.in;this.timeRemapping&&this.timeRemapping.setKeyframes(n),this.layers&&this.layers.forEach(function(e){return e.setKeyframes(n)})}},{key:"reset",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e),this.timeRemapping&&this.timeRemapping.reset(e),this.layers&&this.layers.forEach(function(t){return t.reset(e)})}}]),t}(v.default);t.default=M},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=n(3),h=(i(c),function(){function e(t){r(this,e),this.closed=!0,this.size=t.size.length>1?new l.default(t.size):new s.default(t.size),t.position&&(this.position=t.position.length>1?new l.default(t.position):new s.default(t.position))}return o(e,[{key:"draw",value:function(e,t,n){var i=this.size.getValue(t),r=this.position?this.position.getValue(t):[0,0],o=void 0,a=void 0,s=i[0]/2,u=i[1]/2,l=r[0]-s,c=r[1]-u,h=.5522848*s,f=.5522848*u,d=[[l+s+h,c,l+s-h,c,l+s,c],[l+s+s,c+u+f,l+s+s,c+u-f,l+s+s,c+u],[l+s-h,c+u+u,l+s+h,c+u+u,l+s,c+u+u],[l,c+u-f,l,c+u+f,l,c+u]];if(n){var p=void 0,m=s+u;for(n=this.getTrimValues(n),o=0;o<4;o++)a=o+1,a>3&&(a=0),o>n.startIndex&&o<n.endIndex?e.bezierCurveTo(d[o][0],d[o][1],d[a][2],d[a][3],d[a][4],d[a][5]):o===n.startIndex&&o===n.endIndex?(p=this.trim(d[o],d[a],n.start,n.end,m),e.moveTo(p.start[4],p.start[5]),e.bezierCurveTo(p.start[0],p.start[1],p.end[2],p.end[3],p.end[4],p.end[5])):o===n.startIndex?(p=this.trim(d[o],d[a],n.start,1,m),e.moveTo(p.start[4],p.start[5]),e.bezierCurveTo(p.start[0],p.start[1],p.end[2],p.end[3],p.end[4],p.end[5])):o===n.endIndex&&(p=this.trim(d[o],d[a],0,n.end,m),e.bezierCurveTo(p.start[0],p.start[1],p.end[2],p.end[3],p.end[4],p.end[5]))}else for(e.moveTo(d[0][4],d[0][5]),o=0;o<4;o++)a=o+1,a>3&&(a=0),e.bezierCurveTo(d[o][0],d[o][1],d[a][2],d[a][3],d[a][4],d[a][5])}},{key:"getTrimValues",value:function(e){var t=Math.floor(4*e.start),n=Math.floor(4*e.end);return{startIndex:t,endIndex:n,start:4*(e.start-.25*t),end:4*(e.end-.25*n)}}},{key:"setKeyframes",value:function(e){this.size.setKeyframes(e),this.position&&this.position.setKeyframes(e)}},{key:"reset",value:function(e){this.size.reset(e),this.position&&this.position.reset(e)}}]),e}());t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=function(){function e(t){r(this,e),this.closed=!0,this.starType=t.starType,this.points=t.points.length>1?new l.default(t.points):new s.default(t.points),this.innerRadius=t.innerRadius.length>1?new l.default(t.innerRadius):new s.default(t.innerRadius),this.outerRadius=t.outerRadius.length>1?new l.default(t.outerRadius):new s.default(t.outerRadius),t.position&&(this.position=t.position.length>1?new l.default(t.position):new s.default(t.position)),t.rotation&&(this.rotation=t.rotation.length>1?new l.default(t.rotation):new s.default(t.rotation)),t.innerRoundness&&(this.innerRoundness=t.innerRoundness.length>1?new l.default(t.innerRoundness):new s.default(t.innerRoundness)),t.outerRoundness&&(this.outerRoundness=t.outerRoundness.length>1?new l.default(t.outerRoundness):new s.default(t.outerRoundness))}return o(e,[{key:"draw",value:function(e,t){var n=this.points.getValue(t),i=this.innerRadius.getValue(t),r=this.outerRadius.getValue(t),o=this.position?this.position.getValue(t):[0,0],a=this.rotation?this.rotation.getValue(t):0,s=this.innerRoundness?this.innerRoundness.getValue(t):0,u=this.outerRoundness?this.outerRoundness.getValue(t):0;a=this.deg2rad(a);var l=this.rotatePoint(0,0,0,0-r,a);e.save(),e.beginPath(),e.translate(o[0],o[1]),e.moveTo(l[0],l[1]);for(var c=0;c<n;c++){var h=void 0,f=void 0,d=void 0,p=void 0,m=void 0,v=void 0,g=void 0,y=void 0,b=void 0;b=Math.PI/n*2,h=this.rotatePoint(0,0,0,0-i,b*(c+1)-b/2+a),f=this.rotatePoint(0,0,0,0-r,b*(c+1)+a),g||(g=(l[0]+h[0])*u/100*.5522848),y||(y=(l[0]+h[0])*s/100*.5522848),d=this.rotatePoint(0,0,g,0-r,b*c+a),m=this.rotatePoint(0,0,-1*y,0-i,b*(c+1)-b/2+a),v=this.rotatePoint(0,0,y,0-i,b*(c+1)-b/2+a),p=this.rotatePoint(0,0,-1*g,0-r,b*(c+1)+a),1===this.starType?(e.bezierCurveTo(d[0],d[1],m[0],m[1],h[0],h[1]),e.bezierCurveTo(v[0],v[1],p[0],p[1],f[0],f[1])):e.bezierCurveTo(d[0],d[1],p[0],p[1],f[0],f[1])}e.restore()}},{key:"rotatePoint",value:function(e,t,n,i,r){var o=Math.cos(r),a=Math.sin(r);return[o*(n-e)-a*(i-t)+e,a*(n-e)+o*(i-t)+t]}},{key:"deg2rad",value:function(e){return e*(Math.PI/180)}},{key:"setKeyframes",value:function(e){this.points.setKeyframes(e),this.innerRadius.setKeyframes(e),this.outerRadius.setKeyframes(e),this.position&&this.position.setKeyframes(e),this.rotation&&this.rotation.setKeyframes(e),this.innerRoundness&&this.innerRoundness.setKeyframes(e),this.outerRoundness&&this.outerRoundness.setKeyframes(e)}},{key:"reset",value:function(e){this.points.reset(e),this.innerRadius.reset(e),this.outerRadius.reset(e),this.position&&this.position.reset(e),this.rotation&&this.rotation.reset(e),this.innerRoundness&&this.innerRoundness.reset(e),this.outerRoundness&&this.outerRoundness.reset(e)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=function(){function e(t){r(this,e),this.closed=!0,this.size=t.size.length>1?new l.default(t.size):new s.default(t.size),t.position&&(this.position=t.position.length>1?new l.default(t.position):new s.default(t.position)),t.roundness&&(this.roundness=t.roundness.length>1?new l.default(t.roundness):new s.default(t.roundness))}return o(e,[{key:"draw",value:function(e,t,n){var i=this.size.getValue(t),r=this.position?this.position.getValue(t):[0,0],o=this.roundness?this.roundness.getValue(t):0;i[0]<2*o&&(o=i[0]/2),i[1]<2*o&&(o=i[1]/2);var a=r[0]-i[0]/2,s=r[1]-i[1]/2;n||(e.moveTo(a+o,s),e.arcTo(a+i[0],s,a+i[0],s+i[1],o),e.arcTo(a+i[0],s+i[1],a,s+i[1],o),e.arcTo(a,s+i[1],a,s,o),e.arcTo(a,s,a+i[0],s,o))}},{key:"setKeyframes",value:function(e){this.size.setKeyframes(e),this.position&&this.position.setKeyframes(e),this.roundness&&this.roundness.setKeyframes(e)}},{key:"reset",value:function(e){this.size.reset(e),this.position&&this.position.reset(e),this.roundness&&this.roundness.reset(e)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=function(){function e(t){r(this,e),this.color=t.color.length>1?new l.default(t.color):new s.default(t.color),t.opacity&&(this.opacity=t.opacity.length>1?new l.default(t.opacity):new s.default(t.opacity))}return o(e,[{key:"getValue",value:function(e){var t=this.color.getValue(e),n=this.opacity?this.opacity.getValue(e):1;return"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+n+")"}},{key:"update",value:function(e,t){var n=this.getValue(t);e.fillStyle=n}},{key:"setKeyframes",value:function(e){this.color.setKeyframes(e),this.opacity&&this.opacity.setKeyframes(e)}},{key:"reset",value:function(e){this.color.reset(e),this.opacity&&this.opacity.reset(e)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=function(){function e(t,n){r(this,e),n[t.name]||(n[t.name]=[]),n[t.name].push(this),this.stops=t.stops,this.type=t.type,this.startPoint=t.startPoint.length>1?new l.default(t.startPoint):new s.default(t.startPoint),this.endPoint=t.endPoint.length>1?new l.default(t.endPoint):new s.default(t.endPoint),t.opacity&&(this.opacity=t.opacity.length>1?new l.default(t.opacity):new s.default(t.opacity))}return o(e,[{key:"update",value:function(e,t){var n=this.startPoint.getValue(t),i=this.endPoint.getValue(t),r=0;if("radial"===this.type){var o=n[0]-i[0],a=n[1]-i[1];r=Math.sqrt(o*o+a*a)}var s="radial"===this.type?e.createRadialGradient(n[0],n[1],0,n[0],n[1],r):e.createLinearGradient(n[0],n[1],i[0],i[1]),u=this.opacity?this.opacity.getValue(t):1,l=!0,c=!1,h=void 0;try{for(var f,d=this.stops[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=f.value,m=p.color;s.addColorStop(p.location,"rgba("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]*u+")")}}catch(e){c=!0,h=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw h}}e.fillStyle=s}},{key:"setKeyframes",value:function(e){this.opacity&&this.opacity.setKeyframes(e),this.startPoint.setKeyframes(e),this.endPoint.setKeyframes(e)}},{key:"reset",value:function(e){this.opacity&&this.opacity.setKeyframes(e),this.startPoint.setKeyframes(e),this.endPoint.setKeyframes(e)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=function(){function e(t){r(this,e),t&&(this.join=t.join,this.cap=t.cap,t.miterLimit&&(t.miterLimit.length>1?this.miterLimit=new l.default(t.miterLimit):this.miterLimit=new s.default(t.miterLimit)),t.color.length>1?this.color=new l.default(t.color):this.color=new s.default(t.color),t.opacity.length>1?this.opacity=new l.default(t.opacity):this.opacity=new s.default(t.opacity),t.width.length>1?this.width=new l.default(t.width):this.width=new s.default(t.width),t.dashes&&(this.dashes={},t.dashes.dash.length>1?this.dashes.dash=new l.default(t.dashes.dash):this.dashes.dash=new s.default(t.dashes.dash),t.dashes.gap.length>1?this.dashes.gap=new l.default(t.dashes.gap):this.dashes.gap=new s.default(t.dashes.gap),t.dashes.offset.length>1?this.dashes.offset=new l.default(t.dashes.offset):this.dashes.offset=new s.default(t.dashes.offset)))}return o(e,[{key:"getValue",value:function(e){var t=this.color.getValue(e),n=this.opacity.getValue(e);return t[0]=Math.round(t[0]),t[1]=Math.round(t[1]),t[2]=Math.round(t[2]),"rgba("+t.join(", ")+", "+n+")"}},{key:"update",value:function(e,t){var n=this.getValue(t),i=this.width.getValue(t),r=this.join,o=void 0;"miter"===r&&(o=this.miterLimit.getValue(t)),e.lineWidth=i,e.lineJoin=r,o&&(e.miterLimit=o),e.lineCap=this.cap,e.strokeStyle=n,this.dashes&&(e.setLineDash([this.dashes.dash.getValue(t),this.dashes.gap.getValue(t)]),e.lineDashOffset=this.dashes.offset.getValue(t))}},{key:"setKeyframes",value:function(e){this.color.setKeyframes(e),this.opacity.setKeyframes(e),this.width.setKeyframes(e),this.miterLimit&&this.miterLimit.setKeyframes(e),this.dashes&&(this.dashes.dash.setKeyframes(e),this.dashes.gap.setKeyframes(e),this.dashes.offset.setKeyframes(e))}},{key:"reset",value:function(e){this.color.reset(e),this.opacity.reset(e),this.width.reset(e),this.miterLimit&&this.miterLimit.reset(e),this.dashes&&(this.dashes.dash.reset(e),this.dashes.gap.reset(e),this.dashes.offset.reset(e))}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),s=i(a),u=n(1),l=i(u),c=function(){function e(t){r(this,e),this.type=t.type,t.start&&(this.start=t.start.length>1?new l.default(t.start):new s.default(t.start)),t.end&&(this.end=t.end.length>1?new l.default(t.end):new s.default(t.end))}return o(e,[{key:"getTrim",value:function(e){var t=this.start?this.start.getValue(e):0,n=this.end?this.end.getValue(e):1,i={start:Math.min(t,n),end:Math.max(t,n)};return 0===i.start&&1===i.end?null:i}},{key:"setKeyframes",value:function(e){this.start&&this.start.setKeyframes(e),this.end&&this.end.setKeyframes(e)}},{key:"reset",value:function(e){this.start&&this.start.reset(e),this.end&&this.end.reset(e)}}]),e}();t.default=c}])})},function(e,t,n){(function(e,n){!function(e,n){n(t)}(0,function(t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i,r,o;i=e,o=n[r=t],r in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o})}return e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){if(e&&e.nodeType||void 0===e||"object"!==i(e))return e;if(Array.isArray(e))return[].concat(e);if("object"===i(e)){var t={};for(var n in e)t[n]=u(e[n]);return t}return e}function l(e){return"string"!=typeof e?e:e.replace(N,D).match(I).map(function(e){return R(e)?e:+e})}function c(e,t,n,r,o){var a=n[e],s=r[e];if("string"==typeof a||"string"==typeof s){for(var u=Array.isArray(a)&&a[0]===k?a:l(a),h=Array.isArray(s)&&s[0]===k?s:l(s),f=1;f<u.length;)u[f]===h[f]&&"string"==typeof u[f-1]?(u.splice(f-1,2,u[f-1]+u[f]),h.splice(f-1,2,h[f-1]+h[f])):f++;u[f=0]===k&&u.shift(),h[0]===k&&h.shift();for(var d={isString:!0,length:u.length},p={isString:!0,length:h.length};f<d.length;)d[f]=u[f],p[f]=h[f],f++;return n[e]=d,r[e]=p,!0}if("object"===i(a)&&"object"===i(s)){if(Array.isArray(a))return a.map(function(n,i){return c(i,t[e],a,s)});for(var m in s)c(m,t[e],a,s);return!0}return!1}function h(e,t,n,r,o,a,s){var u=s?n:n[e],l=s?r:r[e];if(void 0===l)return u;if(void 0===u||"string"==typeof u||u===l)return l;if("object"===i(u)&&"object"===i(l)){if(!u||!l)return t[e];if("object"===i(u)&&u&&u.isString){for(var c="",f=0,d=u.length;f<d;f++){var p="number"==typeof u[f]&&"string"==typeof l[f]&&"="===l[f][1],m="number"!=typeof u[f]?u[f]:((p?u[f]+parseFloat(l[f][0]+l[f].substr(2))*o:u[f]+(l[f]-u[f])*o)*F|0)/F;(j(u,f)||j(u,f,U))&&(m|=0),c+=m,p&&1===a&&(u[f]=u[f]+parseFloat(l[f][0]+l[f].substr(2)))}return s||(t[e]=c),c}if(Array.isArray(u)&&u[0]!==k)for(var v=0,g=u.length;v<g;v++)u[v]!==l[v]&&h(v,t[e],u,l,o,a);else if("object"===i(u)&&u&&!u.isString)for(var y in u)u[y]!==l[y]&&h(y,t[e],u,l,o,a)}else if("number"==typeof u){var b="string"==typeof l;t[e]=((b?u+parseFloat(l[0]+l.substr(2))*o:u+(l-u)*o)*F|0)/F,b&&1===a&&(n[e]=t[e])}else"function"==typeof l&&(t[e]=l(o));return t[e]}"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var f,d="undefined"!=typeof window?window:"undefined"!=typeof e?e:this,p=d.requestAnimationFrame||function(e){return d.setTimeout(e,16)},m=function(){if("undefined"==typeof n||void 0===n.hrtime||n.versions&&void 0!==n.versions.electron){if(void 0!==d.performance&&void 0!==d.performance.now)return d.performance.now.bind(d.performance);var e=d.performance&&d.performance.timing&&d.performance.timing.navigationStart?d.performance.timing.navigationStart:Date.now();return function(){return Date.now()-e}}return function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}}(),v=[],g=!1,y=!1,b=[],_=p,w=0,x=120,M=function(){for(var e=0;e<b.length;e++)b[e]()},S=function(e){var t=v.indexOf(e);-1<t&&v.splice(t,1),v.push(e),w=0,y&&!g?(_(A),g=!0):M()},E=function(e){for(var t=0;t<v.length;t++)if(e===v[t])return v[t];return null},T=function(e){var t=v.indexOf(e);-1!==t&&v.splice(t,1)},A=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m(),n=1<arguments.length?arguments[1]:void 0;if(x<=w)return w=0,g=!1;y&&g?_(e):M(),v.length||w++;for(var i=0,r=v.length;i<r;)v[i++].update(t,n),r>v.length&&i--,r=v.length;return!0},C={},P={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-P.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*P.Bounce.In(2*e):.5*P.Bounce.Out(2*e-1)+.5}},Stepped:{steps:function(e){return function(t){return(t*e|0)/e}}}},O="_chainedTweens",L="Callback",k="STRING_PROP",I=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g,R=function(e){return isNaN(+e)||("+"===e[0]||"-"===e[0])&&"="===e[1]||""===e||" "===e},N=/^#([0-9a-f]{6}|[0-9a-f]{3})$/i,D=function(e,t){var n,i,r;3===t.length&&(t=(n=t[0])+n+(i=t[1])+i+(r=t[2])+r);var o=parseInt(t,16);return"rgb("+(n=o>>16&255)+","+(i=o>>8&255)+","+(r=255&o)+")"},F=Math.pow(10,4),U="rgba(",j=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"rgb(";return"number"==typeof e[t]&&(e[t-1]===n||e[t-3]===n||e[t-5]===n)},B=/([.[])/g,z=/\]/g,G=function(e,t){var n=e[t],r=t.replace(z,"").split(B),o=r.length-1,a=Array.isArray(e),s="object"===i(e)&&!a;return s?(e[t]=null,delete e[t]):a&&e.splice(t,1),r.reduce(function(e,t,i){a&&"."!==t&&"["!==t&&(t*=1);var u="["===r[i+1];if("."===t||"["===t)return"."===t?a=!(s=!0):"["===t&&(a=!(s=!1)),e;if(void 0===e[t]){if(a||s)return e[t]=i===o?n:a||u?[]:s?{}:null,s=a=!1,e[t]}else if(void 0!==e[t])return i===o&&(e[t]=n),e[t];return e},e)},V=function(e){if("object"===i(e)&&e)for(var t in e)if(-1!==t.indexOf(".")||-1!==t.indexOf("["))G(e,t);else if("object"===i(e[t])&&e[t]){var n=e[t];for(var r in n)if(-1!==r.indexOf(".")||-1!==r.indexOf("["))G(n,r);else if("object"===i(n[r])&&n[r]){var o=n[r];for(var a in o)-1===a.indexOf(".")&&-1===a.indexOf("[")||G(o,a)}}return e},W={Linear:function(e,t,n){var i=e.length-1,r=i*t,o=Math.floor(r),a=W.Utils.Linear;return t<0?a(e[0],e[1],r,n):1<t?a(e[i],e[i-1],i-r,n):a(e[o],e[i<o+1?i:o+1],r-o,n)},Bezier:function(e,t,n){for(var r=W.Utils.Reset(n),o=e.length-1,a=Math.pow,s=W.Utils.Bernstein,u=Array.isArray(r),l=0;l<=o;l++)if("number"==typeof r)r+=a(1-t,o-l)*a(t,l)*e[l]*s(o,l);else if(u)for(var c=0,h=r.length;c<h;c++)"number"==typeof r[c]?r[c]+=a(1-t,o-l)*a(t,l)*e[l][c]*s(o,l):r[c]=e[l][c];else if("object"===i(r))for(var f in r)"number"==typeof r[f]?r[f]+=a(1-t,o-l)*a(t,l)*e[l][f]*s(o,l):r[f]=e[l][f];else if("string"==typeof r){for(var d="",p=e[Math.round(o*t)],m=1,v=p.length;m<v;m++)d+=p[m];return d}return r},CatmullRom:function(e,t,n){var i=e.length-1,r=i*t,o=Math.floor(r),a=W.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(o=Math.floor(r=i*(1+t))),a(e[(o-1+i)%i],e[o],e[(o+1)%i],e[(o+2)%i],r-o,n)):t<0?a(e[1],e[1],e[0],e[0],-t,n):1<t?a(e[i-1],e[i-1],e[i],e[i],(0|t)-t,n):a(e[o?o-1:0],e[o],e[i<o+1?i:o+1],e[i<o+2?i:o+2],r-o,n)},Utils:{Linear:function(e,t,n,r){if("string"==typeof e)return t;if("number"==typeof e)return"function"==typeof e?e(n):e+(t-e)*n;if("object"===i(e)){if(void 0!==e.length){if(e[0]===k){for(var o="",a=1,s=e.length;a<s;a++){var u="number"==typeof e[a]?e[a]+(t[a]-e[a])*n:t[a];(j(e,a)||j(e,a,U))&&(u|=0),o+=u}return o}for(var l=0,c=r.length;l<c;l++)r[l]=W.Utils.Linear(e[l],t[l],n,r[l])}else for(var h in r)r[h]=W.Utils.Linear(e[h],t[h],n,r[h]);return r}},Reset:function(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)e[t]=W.Utils.Reset(e[t]);return e}if("object"===i(e)){for(var r in e)e[r]=W.Utils.Reset(e[r]);return e}return"number"==typeof e?0:e},Bernstein:function(e,t){var n=W.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(f=[1],function(e){var t=1;if(f[e])return f[e];for(var n=e;1<n;n--)t*=n;return f[e]=t}),CatmullRom:function(e,t,n,r,o,a){if("string"==typeof e)return t;if("number"==typeof e){var s=.5*(n-e),u=.5*(r-t),l=o*o;return(2*t-2*n+s+u)*(o*l)+(-3*t+3*n-2*s-u)*l+s*o+t}if("object"===i(e)){if(void 0!==e.length){if(e[0]===k){for(var c="",h=1,f=e.length;h<f;h++){var d="number"==typeof e[h]?W.Utils.CatmullRom(e[h],t[h],n[h],r[h],o):r[h];(j(e,h)||j(e,h,U))&&(d|=0),c+=d}return c}for(var p=0,m=a.length;p<m;p++)a[p]=W.Utils.CatmullRom(e[p],t[p],n[p],r[p],o,a[p])}else for(var v in a)a[v]=W.Utils.CatmullRom(e[v],t[v],n[v],r[v],o,a[v]);return a}}}},H={},q=function(e,t,n){if(!e||!e.nodeType)return t;var r=e.queueID||"q_"+Date.now();e.queueID||(e.queueID=r);var o=H[r];if(o){if(o.object===t&&e===o.tween.node&&n._startTime===o.tween._startTime)T(o.tween);else if("object"===i(t)&&t&&o.object){for(var s in t)s in o.object&&(n._startTime===o.tween._startTime?delete o.object[s]:o.propNormaliseRequired=!0);o.object=a({},o.object,t)}return o.object}return"object"===i(t)&&t?(H[r]={tween:n,object:t,propNormaliseRequired:!1},H[r].object):t},X=function(e,t){return t?e?e===window||e===document?[e]:"string"==typeof e?!!document.querySelectorAll&&document.querySelectorAll(e):Array.isArray(e)?e:e.nodeType?[e]:[]:null:e?e===window||e===document?e:"string"==typeof e?!!document.querySelector&&document.querySelector(e):Array.isArray(e)?e[0]:e.nodeType?e:null:null},Y=0,K=P.Linear.None,Z=function(){function e(t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Y++,!t||"object"!==i(t)||n||t.nodeType?t&&(t.nodeType||t.length||"string"==typeof t)&&(t=this.node=X(t),n=this.object=q(t,n,this)):(n=this.object=t,t=null),this._valuesEnd=null,this._valuesStart={},this._duration=1e3,this._easingFunction=K,this._easingReverse=K,this._interpolationFunction=W.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return o(e,null,[{key:"fromTo",value:function(t,n,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};r.quickRender=r.quickRender?r.quickRender:!i;var o=new e(t,n).to(i,r);return r.quickRender&&(o.render().update(o._startTime),o._rendered=!1,o._onStartCallbackFired=!1),o}},{key:"to",value:function(t,n,i){return e.fromTo(t,null,n,i)}},{key:"from",value:function(t,n,i){return e.fromTo(t,n,null,i)}}]),o(e,[{key:"setMaxListener",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:15;return this._maxListener=e,this}},{key:"on",value:function(e,t){for(var n=this._maxListener,i=e+L,r=0;r<n;r++){var o=i+r;if(!this[o]){this[o]=t;break}}return this}},{key:"once",value:function(e,t){return this}},{key:"off",value:function(e,t){for(var n=this._maxListener,i=e+L,r=0;r<n;r++){var o=i+r;this[o]===t&&(this[o]=null)}return this}},{key:"emit",value:function(e,t,n,i,r){var o=this._maxListener,a=e+L;if(!this[a+0])return this;for(var s=0;s<o;s++){var u=a+s;this[u]&&this[u](t,n,i,r)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(e){var t=this._reversed;return this._reversed=void 0!==e?e:!t,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,T(this),this._pausedTime=m(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=m()-this._pausedTime,this._initTime=this._startTime,S(this),this._pausedTime=m(),this.emit("play",this.object))}},{key:"restart",value:function(e){return this._repeat=this._r,this.reassignValues(),S(this),this.emit("restart",this.object)}},{key:"seek",value:function(e,t){var n=this._duration,i=this._initTime,r=this._startTime,o=this._reversed,a=i+e;return this._isPlaying=!0,a<r&&i<=r&&(this._startTime-=n,this._reversed=!o),this.update(e,!1),this.emit("seek",e,this.object),t?this:this.pause()}},{key:"duration",value:function(e){return this._duration="function"==typeof e?e(this._duration):e,this}},{key:"to",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;if(this._valuesEnd=e,"number"==typeof t||"function"==typeof t)this._duration="function"==typeof t?t(this._duration):t;else if("object"===i(t))for(var n in t)if("function"==typeof this[n]){var r=s(Array.isArray(t[n])?t[n]:[t[n]],4),o=r[0],a=void 0===o?null:o,u=r[1],l=void 0===u?null:u,c=r[2],h=void 0===c?null:c,f=r[3],d=void 0===f?null:f;this[n](a,l,h,d)}return this}},{key:"render",value:function(){if(this._rendered)return this;var t=this._valuesStart,n=this._valuesEnd,i=this.object,r=this.node,o=this.InitialValues;if(V(i),V(n),r&&r.queueID&&H[r.queueID]){var a=H[r.queueID];a.propNormaliseRequired&&a.tween!==this&&(a.normalisedProp=!0,a.propNormaliseRequired=!1)}for(var s in r&&o&&(i&&0!==Object.keys(i).length?n&&0!==Object.keys(n).length||(n=this._valuesEnd=o(r,i)):i=this.object=q(r,o(r,n),this)),n){var h=i&&i[s]&&u(i[s]),f=n[s];if(!(C[s]&&C[s].init&&(C[s].init.call(this,h,f,s,i),void 0===h&&t[s]&&(h=t[s]),C[s].skipProcess))&&!("number"==typeof h&&isNaN(h)||null===h||null===f||!1===h||!1===f||void 0===h||void 0===f||h===f)){if(Array.isArray(f)&&!Array.isArray(h)){f.unshift(h);for(var d=0,p=f.length;d<p;d++)if("string"==typeof f[d]){for(var m=l(f[d]),v={length:m.length,isString:!0},g=0,y=m.length;g<y;g++)v[g]=m[g];f[d]=v}}"number"==typeof(t[s]=h)&&"string"==typeof f&&"="===f[1]||c(s,i,t,n)}}return e.Renderer&&this.node&&e.Renderer.init&&(e.Renderer.init.call(this,i,t,n),this.__render=!0),this}},{key:"start",value:function(e){return this._startTime=void 0!==e?"string"==typeof e?m()+parseFloat(e):e:m(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,S(this),this}},{key:"stop",value:function(){var e=this._isPlaying,t=this._isFinite,n=this.object,i=this._startTime,r=this._duration,o=this._r,a=this._yoyo,s=this._reversed;if(!e)return this;var u=t?(o+1)%2==1:!s;return this._reversed=!1,a&&u?this.update(i):this.update(i+r),T(this),this.emit("stop",n)}},{key:"delay",value:function(e){return this._delayTime="function"==typeof e?e(this._delayTime):e,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var e=0,t=this._chainedTweensCount;e<t;e++)this[O+e]=arguments[e];return this}},{key:"repeat",value:function(e){return this._repeat=this._duration?"function"==typeof e?e(this._repeat):e:0,this._r=this._repeat,this._isFinite=isFinite(e),this}},{key:"reverseDelay",value:function(e){return this._reverseDelayTime="function"==typeof e?e(this._reverseDelayTime):e,this}},{key:"yoyo",value:function(e,t){return this._yoyo="function"==typeof e?e(this._yoyo):null===e?this._yoyo:e,e||(this._reversed=!1),this._easingReverse=t||null,this}},{key:"easing",value:function(e){return this._easingFunction=e,this}},{key:"interpolation",value:function(e){return"function"==typeof e&&(this._interpolationFunction=e),this}},{key:"reassignValues",value:function(e){var t=this._valuesStart,n=this.object,i=this._delayTime;for(var r in this._isPlaying=!0,this._startTime=void 0!==e?e:m(),this._startTime+=i,this._reversed=!1,S(this),t){var o=t[r];n[r]=o}return this}},{key:"update",value:function(t,n,i){var r,o,a,s=this._onStartCallbackFired,u=this._easingFunction,l=this._interpolationFunction,c=this._easingReverse,f=this._repeat,d=this._delayTime,p=this._reverseDelayTime,v=this._yoyo,g=this._reversed,y=this._startTime,b=this._prevTime,_=this._duration,w=this._valuesStart,x=this._valuesEnd,M=this.object,S=this._isFinite,E=this._isPlaying,A=this.__render,P=this._chainedTweensCount,L=0;if(_){var k=(t=void 0!==t?t:m())-b;if(this._prevTime=t,250<k&&(t-=k-50/3),!E||t<y&&!i)return!0;r=1<(r=(t-y)/_)?1:r,r=g?1-r:r}else r=1,f=0;if(s||(this._rendered||(this.render(),this._rendered=!0),this.emit("start",M),this._onStartCallbackFired=!0),o=g&&c||u,!M)return!0;for(a in x){var I=w[a];if(null!=I||C[a]&&C[a].update){var R=x[a],N=o[a]?o[a](r):"function"==typeof o?o(r):K(r),D=l[a]?l[a]:"function"==typeof l?l:W.Linear;"number"==typeof R?M[a]=((I+(R-I)*N)*F|0)/F:Array.isArray(R)&&!Array.isArray(I)?M[a]=D(R,N,M[a]):R&&R.update?R.update(N):"function"==typeof R?M[a]=R(N):"string"==typeof R&&"number"==typeof I?M[a]=I+parseFloat(R[0]+R.substr(2))*N:h(a,M,w,x,N,r),C[a]&&C[a].update&&C[a].update.call(this,M[a],I,R,N,r,a),L++}}if(!L)return T(this),!1;if(A&&e.Renderer&&e.Renderer.update&&e.Renderer.update.call(this,M,r),this.emit("update",M,r,t),1===r||g&&0===r){if(0<f&&0<_){if(S&&this._repeat--,v)this._reversed=!g;else for(a in x){var U=x[a];"string"==typeof U&&"number"==typeof w[a]&&(w[a]+=parseFloat(U[0]+U.substr(2)))}return this.emit(v&&!g?"reverse":"repeat",M),this._startTime=g&&p?t-p:t+d,!0}if(n||(this._isPlaying=!1,T(this),Y--),this.emit("complete",M),this._repeat=this._r,P)for(var j=0;j<P;j++)this[O+j].start(t+_);return!1}return!0}}]),e}();t.Plugins=C,t.Selector=X,t.Interpolator=function(e,t){var n=Array.isArray(e),r="string"==typeof e?e:n?e.slice():a({},e);if(n)for(var o=0,s=e.length;o<s;o++)c(o,r,e,t);else if("object"===i(e))for(var u in e)c(u,r,e,t);else if("string"==typeof e){e=l(e),t=l(t);for(var f=1;f<e.length;)e[f]===t[f]&&"string"==typeof e[f-1]?(e.splice(f-1,2,e[f-1]+e[f]),t.splice(f-1,2,t[f-1]+t[f])):f++;for(var d={isString:!0,length:e.length};f<d.length;)d[f]=e[f],f++}return function(o){if(n)for(var a=0,s=e.length;a<s;a++)h(a,r,e,t,o);else if("object"===i(r))for(var u in e)h(u,r,e,t,o);else"string"==typeof r&&(r=h(0,0,e,t,o,o,!0));return r}},t.onTick=function(e){return v.push({update:e})},t.has=function(e){return null!==E(e)},t.get=E,t.getAll=function(){return v},t.removeAll=function(){v.length=0},t.remove=T,t.add=S,t.now=m,t.update=A,t.autoPlay=function(e){y=e},t.isRunning=function(){return g},t.onRequestTick=function(e){b.push(e)},t.FrameThrottle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:120;x=e},t.Tween=Z,t.Easing=P,t.Interpolation=W,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(42),n(55))},function(e,t){(function(){var e;e="undefined"!==typeof t&&null!==t?t:this,e.Lethargy=function(){function e(e,t,n,i){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=function(){var e,t,n;for(n=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}.call(this),this.lastDownDeltas=function(){var e,t,n;for(n=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}.call(this),this.deltasTimestamp=function(){var e,t,n;for(n=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}.call(this)}return e.prototype.check=function(e){var t;return e=e.originalEvent||e,null!=e.wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:null==e.detail&&0!==e.detail||(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,n,i,r,o,a,s;return t=-1===e?this.lastDownDeltas:this.lastUpDeltas,null===t[0]?e:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&t[0]===t[2*this.stability-1])&&(i=t.slice(0,this.stability),n=t.slice(this.stability,2*this.stability),s=i.reduce(function(e,t){return e+t}),o=n.reduce(function(e,t){return e+t}),a=s/i.length,r=o/n.length,Math.abs(a)<Math.abs(r*this.tolerance)&&this.sensitivity<Math.abs(r)&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(181),h=i(c),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"onChange",value:function(e,t){this.props.onChange(e,t)}},{key:"render",value:function(){var e=this.props,t=e.preName,n=e.name,i=e.tel,r=e.email;return l.default.createElement("div",{className:"form"},l.default.createElement(h.default,{name:"preName",value:t.value,placeholder:"Martina",label:window.locales.first_name_required,errorText:t.error,hasError:!!t.error,onChange:this.onChange.bind(this,"preName")}),l.default.createElement(h.default,{name:"name",value:n.value,placeholder:"Muster",label:window.locales.last_name_required,errorText:n.error,hasError:!!n.error,onChange:this.onChange.bind(this,"name")}),l.default.createElement(h.default,{name:"tel",value:i.value,placeholder:"077 000 00 00",label:window.locales.tel_required,errorText:i.error,hasError:!!i.error,onChange:this.onChange.bind(this,"tel")}),l.default.createElement(h.default,{name:"email",value:r.value,type:"email",placeholder:"martina.muster@muster.com",label:window.locales.email_required,errorText:r.error,hasError:!!r.error,onChange:this.onChange.bind(this,"email")}))}}]),t}(u.PureComponent);t.default=f},function(e,t,n){"use strict";function i(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateEmail=i},function(e,t,n){var i,r;!function(o){var a=!1;if(i=o,void 0!==(r="function"===typeof i?i.call(t,n,t,e):i)&&(e.exports=r),a=!0,e.exports=o(),a=!0,!a){var s=window.Cookies,u=window.Cookies=o();u.noConflict=function(){return window.Cookies=s,u}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var a;if("undefined"!==typeof document){if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"===typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var u="";for(var l in o)o[l]&&(u+="; "+l,!0!==o[l]&&(u+="="+o[l]));return document.cookie=t+"="+r+u}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,f=0;f<c.length;f++){var d=c[f].split("="),p=d.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var m=d[0].replace(h,decodeURIComponent);if(p=n.read?n.read(p,m):n(p,m)||p.replace(h,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===m){a=p;break}t||(a[m]=p)}catch(e){}}return a}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t(function(){})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(74),l=n(186),c=i(l),h=n(34),f=i(h),d=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=e.querySelector(".js-headline-canvas");return i.animation=new u.Animation({data:c.default,canvas:a}),i}return a(t,e),s(t,[{key:"show",value:function(){this.animation.stop(),this.animation.play(),this.node.classList.add("is-visible")}},{key:"hide",value:function(){this.animation.stop(),this.node.classList.remove("is-visible")}},{key:"destroy",value:function(){this.animation.destroy()}}]),t}(f.default);t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var l=n(35),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),h=n(0),f=i(h),d=n(21),p=i(d),m=n(83),v=(n(84),t.UNMOUNTED="unmounted"),g=t.EXITED="exited",y=t.ENTERING="entering",b=t.ENTERED="entered",_=t.EXITING="exiting",w=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i)),s=i.transitionGroup,u=s&&!s.isMounting?n.enter:n.appear,l=void 0;return r.appearStatus=null,n.in?u?(l=g,r.appearStatus=y):l=b:l=n.unmountOnExit||n.mountOnEnter?v:g,r.state={status:l},r.nextCallback=null,r}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===v?{status:g}:null},t.prototype.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.prototype.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==y&&n!==b&&(t=y):n!==y&&n!==b||(t=_)}this.updateStatus(!1,t)},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,i=void 0;return t=n=i=e,null!=e&&"number"!==typeof e&&(t=e.exit,n=e.enter,i=e.appear),{exit:t,enter:n,appear:i}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(null!==t){this.cancelNextCallback();var n=p.default.findDOMNode(this);t===y?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:v})},t.prototype.performEnter=function(e,t){var n=this,i=this.props.enter,r=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts();if(!t&&!i)return void this.safeSetState({status:b},function(){n.props.onEntered(e)});this.props.onEnter(e,r),this.safeSetState({status:y},function(){n.props.onEntering(e,r),n.onTransitionEnd(e,o.enter,function(){n.safeSetState({status:b},function(){n.props.onEntered(e,r)})})})},t.prototype.performExit=function(e){var t=this,n=this.props.exit,i=this.getTimeouts();if(!n)return void this.safeSetState({status:g},function(){t.props.onExited(e)});this.props.onExit(e),this.safeSetState({status:_},function(){t.props.onExiting(e),t.onTransitionEnd(e,i.exit,function(){t.safeSetState({status:g},function(){t.props.onExited(e)})})})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===v)return null;var t=this.props,n=t.children,i=r(t,["children"]);if(delete i.in,delete i.mountOnEnter,delete i.unmountOnExit,delete i.appear,delete i.enter,delete i.exit,delete i.timeout,delete i.addEndListener,delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,"function"===typeof n)return n(e,i);var o=f.default.Children.only(n);return f.default.cloneElement(o,i)},t}(f.default.Component);w.contextTypes={transitionGroup:c.object},w.childContextTypes={transitionGroup:function(){}},w.propTypes={},w.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:u,onEntering:u,onEntered:u,onExit:u,onExiting:u,onExited:u},w.UNMOUNTED=0,w.EXITED=1,w.ENTERING=2,w.ENTERED=3,w.EXITING=4,t.default=(0,m.polyfill)(w)},function(e,t,n){"use strict";function i(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function r(e){function t(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}this.setState(t.bind(this))}function o(e,t){try{var n=this.props,i=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var u=e.displayName||e.name,l="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=i,t.componentWillReceiveProps=r),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var i=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,i)}}return e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"polyfill",function(){return a}),i.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";function i(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=i;var r=n(35),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.timeoutsShape=o.default.oneOfType([o.default.number,o.default.shape({enter:o.default.number,exit:o.default.number}).isRequired]),t.classNamesShape=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,exit:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterDone:o.default.string,enterActive:o.default.string,exit:o.default.string,exitDone:o.default.string,exitActive:o.default.string})])},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n(35),c=i(l),h=n(0),f=i(h),d=n(83),p=n(207),m=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},v=(c.default.any,c.default.node,c.default.bool,c.default.bool,c.default.bool,c.default.func,{component:"div",childFactory:function(e){return e}}),g=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i)),s=r.handleExited.bind(r);return r.state={handleExited:s,firstRender:!0},r}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},t.prototype.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){var n=t.children,i=t.handleExited;return{children:t.firstRender?(0,p.getInitialChildMapping)(e,i):(0,p.getNextChildMapping)(e,n,i),firstRender:!1}},t.prototype.handleExited=function(e,t){var n=(0,p.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.setState(function(t){var n=u({},t.children);return delete n[e.key],{children:n}}))},t.prototype.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=r(e,["component","childFactory"]),o=m(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?o:f.default.createElement(t,i,o)},t}(f.default.Component);g.childContextTypes={transitionGroup:c.default.object.isRequired},g.propTypes={},g.defaultProps=v,t.default=(0,d.polyfill)(g),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(0),h=i(c),f=n(15),d=i(f),p=n(9),m=i(p),v=n(59),g=n(211),y=i(g),b=n(213),_=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=e.persistData,r=e.studios,s=e.countries,u=e.cities,l=null,c=null,h=null,f=null,d=null;return i&&y.default&&(l=n.getStoredCountry(s),l&&(c=n.getStoredCity(n.getAllCities(u))),c&&(h=n.getStudiosForCity(c)),c&&(f=n.getStoredStudio(r)),f&&(d=n.getSelectedUrl(f))),n.state={selectedCountry:l,selectedCity:c,selectedStudios:h,selectedStudio:f,selectedUrl:d,selectedHealcode:null},(0,n.props.onChange)(n.state),n}return s(t,e),l(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.onChange,n=e.persistData;if(t(this.state),n&&y.default){var i=this.state,r=i.selectedCountry,o=i.selectedCity,a=i.selectedStudio,s=window.localStorage;r?s.setItem("bionicSelectedCountry",r):s.removeItem("bionicSelectedCountry"),o?s.setItem("bionicSelectedCity",o):s.removeItem("bionicSelectedCity"),a?s.setItem("bionicSelectedStudio",a.name):s.removeItem("bionicSelectedStudio")}}},{key:"getStoredCountry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=window.localStorage,n=t.getItem("bionicSelectedCountry");return n&&e.includes(n)?n:null}},{key:"getStoredCity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=window.localStorage,n=t.getItem("bionicSelectedCity");return n&&e.includes(n)?n:null}},{key:"getStoredStudio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=window.localStorage,n=t.getItem("bionicSelectedStudio");return n?e.find(function(e){return e.name===n}):null}},{key:"getStudiosForCity",value:function(e){var t=this.props.studios;return e?t.filter(function(t){return t.city===e}):null}},{key:"getSelectedStudio",value:function(e){return e&&1===e.length?e[0]:null}},{key:"getSelectedUrl",value:function(e){return e?e.healcodes&&e.healcodes.length>0?null:1!==e.bookingUrls.length?null:e.bookingUrls[0]:null}},{key:"getAllCities",value:function(e){return Object.keys(e).reduce(function(t,n){return t.concat(e[n])},[])}},{key:"onCountryClick",value:function(e){var t=this.props.cities,n=e&&1===t[e].length?t[e][0]:null,i=this.getStudiosForCity(n),r=this.getSelectedStudio(i),o=this.getSelectedUrl(r);this.setState({selectedCountry:e,selectedCity:n,selectedStudios:i,selectedStudio:r,selectedUrl:o,selectedHealcode:null})}},{key:"onCityClick",value:function(e){var t=this.getStudiosForCity(e),n=this.getSelectedStudio(t),i=this.getSelectedUrl(n);this.setState({selectedCity:e,selectedStudios:t,selectedStudio:n,selectedUrl:i,selectedHealcode:null})}},{key:"onStudioClick",value:function(e){var t=this.getSelectedUrl(e);this.setState({selectedStudio:e,selectedUrl:t,selectedHealcode:null})}},{key:"onUrlClick",value:function(e){this.setState({selectedUrl:e,selectedHealcode:null})}},{key:"onHealcodeClick",value:function(e){this.setState({selectedUrl:null,selectedHealcode:e}),e.dataLayer&&window.dataLayer&&window.dataLayer.push(u({event:"initiateBooking"},e.dataLayer))}},{key:"createHealcodeMarkup",value:function(e){return{__html:'<healcode-widget data-type="appointments" data-widget-partner="object" data-widget-id="'+e+'" data-widget-version="0" ></healcode-widget>'}}},{key:"renderRow",value:function(e){var t=e.onResetClick,n=e.items,i=e.label,r=e.active,o=e.error;return h.default.createElement(b.Row,null,h.default.createElement(b.Label,{active:r,error:o,label:i}),h.default.createElement(b.List,null,n),h.default.createElement(b.ResetButton,{active:r,onClick:t}))}},{key:"renderHealcode",value:function(e){if(e)return h.default.createElement(b.Row,null,h.default.createElement("div",{dangerouslySetInnerHTML:this.createHealcodeMarkup(e.widgetId)}))}},{key:"renderUrls",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3];if(e){var a=this.state.selectedHealcode,s=!t&&!a,u=[],l=[];if(!a){u=(t?[t]:e).map(function(e){return h.default.createElement(b.ListItem,{key:e.buttonDescription,active:s,item:e.buttonDescription,onClick:n.onUrlClick.bind(n,e)})})}if(!t){l=(a?[a]:i).map(function(e){return h.default.createElement(b.ListItem,{key:e.buttonDescription,active:s,item:e.buttonDescription,onClick:n.onHealcodeClick.bind(n,e)})})}return this.renderRow({onResetClick:this.onUrlClick.bind(this,null),items:[].concat(r(l),r(u)),active:s,error:o,label:s?window.locales.selectorLabelState:window.locales.state})}}},{key:"renderStudios",value:function(e,t,n){var i=this;if(e){var r=!t,o=t?[t]:e,a=o.map(function(e){return h.default.createElement(b.ListItem,{key:e.name,active:r,item:e.name,onClick:i.onStudioClick.bind(i,e)})});return this.renderRow({onResetClick:this.onStudioClick.bind(this,null),items:a,active:r,error:n,label:t?window.locales.studio:window.locales.selectorLabelStudio})}}},{key:"renderCities",value:function(e,t,n){var i=this;if(e){var r=!t,o=t?[t]:e,a=o.map(function(e){return h.default.createElement(b.ListItem,{key:e,active:r,item:e,onClick:i.onCityClick.bind(i,e)})});return this.renderRow({onResetClick:this.onCityClick.bind(this,null),items:a,active:r,error:n,label:t?window.locales.city:window.locales.selectorLabelCity})}}},{key:"renderCountries",value:function(e,t,n){var i=this,r=!t,o=t?[t]:e,a=o.map(function(e){return h.default.createElement(b.ListItem,{key:e,active:r,item:e,onClick:i.onCountryClick.bind(i,e)})});return this.renderRow({onResetClick:this.onCountryClick.bind(this,null),items:a,active:r,error:n,label:t?window.locales.country:window.locales.selectorLabelCountry})}},{key:"render",value:function(){var e=this.props,t=e.countries,n=e.cities,i=e.color,r=e.showCountry,o=e.showCity,a=e.showStudio,s=e.showUrl,u=e.showError,l=this.state,c=l.selectedCountry,f=l.selectedCity,p=l.selectedStudio,m=l.selectedStudios,g=l.selectedUrl,y=l.selectedHealcode,b=c?n[c]:null,_=p?p.bookingUrls:null,w=p?p.healcodes:null;return h.default.createElement(v.TransitionGroup,{className:(0,d.default)("selector",{"selector--white":"white"===i})},r&&this.renderCountries(t,c,u),o&&this.renderCities(b,f,u),a&&this.renderStudios(m,p,u),s&&this.renderUrls(_,g,w,u),s&&this.renderHealcode(y))}}]),t}(c.PureComponent);_.propTypes={countries:m.default.array.isRequired,cities:m.default.object.isRequired,studios:m.default.array.isRequired,onChange:m.default.func,color:m.default.string,showCountry:m.default.bool,showCity:m.default.bool,showStudio:m.default.bool,showUrl:m.default.bool,showError:m.default.bool,persistData:m.default.bool},_.defaultProps={onChange:function(){},color:"black",showCountry:!0,showCity:!0,showStudio:!0,showUrl:!0,showError:!1,persistData:!1},t.default=_},function(e,t,n){"use strict";e.exports=n(242).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.unindexBufferGeometry=function(e){var t=e.getIndex();if(t){for(var n=t.array,i=n.length/3,r=e.attributes,o=Object.keys(r).map(function(t){return{array:[],attribute:e.getAttribute(t)}}),a=0;a<i;a++)!function(e){var t=n[3*e+0],i=n[3*e+1],r=n[3*e+2],a=[t,i,r];o.forEach(function(e){for(var t=e.attribute,n=t.itemSize,i=0;i<a.length;i++)for(var r=a[i],o=0;o<n;o++){var s=t.array[r*n+o];e.array.push(s)}})}(a);t.array=null,e.setIndex(null),o.forEach(function(e){var t=new e.attribute.array.constructor(e.array);e.attribute.setArray(t)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addBarycentricCoordinates=void 0;var i=n(3);t.addBarycentricCoordinates=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getIndex()||e.getAttribute("position"),r=n.count/3,o=[],a=0;a<r;a++){var s=a%2===0,u=t?1:0;s?o.push(0,0,1,0,1,0,1,0,u):o.push(0,1,0,0,0,1,1,0,u)}var l=new Float32Array(o),c=new i.BufferAttribute(l,3);e.addAttribute("barycentric",c)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(91),u=i(s),l=n(92),c=i(l),h=n(16),f=i(h),d=function(){function e(){r(this,e),this.mat=new a.ShaderMaterial({extensions:{derivatives:!0},uniforms:{colorA:{value:new a.Color(1,1,1)},colorB:{value:new a.Color(1,0,0)},fresnelBias:{value:.05},fresnelScale:{value:.2},fresnelPower:{value:2},baseOpacity:{value:1},wireframes:{value:!1},wireframeOpacity:{value:.15},fade:{value:0}},vertexShader:u.default,fragmentShader:c.default,blending:a.AdditiveBlending,transparent:!0}),this.values={fresnelBias:.05,fresnelScale:.2,fresnelPower:2},this.activeValues={fresnelBias:.1,fresnelScale:1.45,fresnelPower:2}}return o(e,[{key:"show",value:function(){var e=this;this.mat.uniforms.fade.value=1,this.mat.uniforms.fresnelBias.value=this.activeValues.fresnelBias,this.mat.uniforms.fresnelScale.value=this.activeValues.fresnelScale,this.mat.uniforms.fresnelPower.value=this.activeValues.fresnelPower,this.tween&&this.tween.stop(),this.tween=new f.default.Tween({elapsed:0}).to({elapsed:1},250).easing(f.default.Easing.Sinusoidal.InOut).onUpdate(function(t){var n=t.elapsed;return e.mat.uniforms.baseOpacity.value=n}).start()}},{key:"setActive",value:function(){var e=this;this.mat.uniforms.baseOpacity.value=1,this.tween&&this.tween.stop(),this.tween=new f.default.Tween({elapsed:0}).to({elapsed:1},250).easing(f.default.Easing.Sinusoidal.InOut).onUpdate(function(t){var n=t.elapsed;e.mat.uniforms.fade.value=n,e.mat.uniforms.fresnelBias.value=a.Math.lerp(e.values.fresnelBias,e.activeValues.fresnelBias,n),e.mat.uniforms.fresnelScale.value=a.Math.lerp(e.values.fresnelScale,e.activeValues.fresnelScale,n),e.mat.uniforms.fresnelPower.value=a.Math.lerp(e.values.fresnelPower,e.activeValues.fresnelPower,n)}).start()}}]),e}();t.default=new d},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec3 barycentric;\n\nvarying vec3 vBarycentric;\nvarying float vReflectionFactor;\nvarying vec3 vColor;\n\nuniform bool wireframe;\n\nuniform vec3 colorA;\nuniform vec3 colorB;\nuniform float fresnelBias;\nuniform float fresnelScale;\nuniform float fresnelPower;\nuniform float fade;\n\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\n    vec3 I = worldPosition.xyz - cameraPosition;\n\n    if(fade == 0.0){\n        vColor = colorA;\n    } else if(fade == 1.0){\n        vColor = colorB;\n    } else{\n        vColor = mix(colorA,colorB,fade);\n    }\n\n    vBarycentric = barycentric;\n    vReflectionFactor = fresnelBias + fresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), fresnelPower );\n\n    gl_Position = projectionMatrix * mvPosition;\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying float vReflectionFactor;\nvarying vec3 vBarycentric;\nvarying vec3 vColor;\n\nuniform vec3 colorB;\nuniform float wireframeOpacity;\nuniform float baseOpacity;\nuniform float fade;\nuniform bool wireframe;\n\nfloat edgeFactor(){\n    vec3 d = fwidth(vBarycentric);\n    vec3 a3 = smoothstep(vec3(0.0), d*1.25, vBarycentric);\n    return min(min(a3.x, a3.y), a3.z);\n}\n\nvoid main() {\n    vec3 fresnelColor = vColor.rgb * vReflectionFactor;\n\n    if(fade > 0.0) {\n        float edge = 1.0 - edgeFactor();\n        vec3 wireframeColor = colorB * edge;\n\n        gl_FragColor = vec4(mix(fresnelColor,wireframeColor,fade* wireframeOpacity), baseOpacity);\n    } else {\n        gl_FragColor = vec4(fresnelColor, baseOpacity);\n    }\n}\n"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(16),u=i(s),l=n(91),c=i(l),h=n(92),f=i(h),d=function(){function e(){r(this,e),this.mat=new a.ShaderMaterial({extensions:{derivatives:!0},uniforms:{colorA:{value:new a.Color(1,1,1)},colorB:{value:new a.Color(1,0,0)},fresnelBias:{value:.05},fresnelScale:{value:.2},fresnelPower:{value:2},baseOpacity:{value:0},wireframes:{value:!1},wireframeOpacity:{value:.25},fade:{value:0}},vertexShader:c.default,fragmentShader:f.default,blending:a.AdditiveBlending,transparent:!0})}return o(e,[{key:"show",value:function(e){var t=this;this.tween&&this.tween.stop(),this.tween=new u.default.Tween({baseOpacity:0}).to({baseOpacity:1},1500).easing(u.default.Easing.Sinusoidal.InOut).onUpdate(function(e){var n=e.baseOpacity;return t.mat.uniforms.baseOpacity.value=n}).onComplete(function(){e&&e()}).start()}},{key:"hide",value:function(e){var t=this;this.tween&&this.tween.stop(),this.tween=new u.default.Tween({baseOpacity:1}).to({baseOpacity:0},250).easing(u.default.Easing.Sinusoidal.InOut).onUpdate(function(e){var n=e.baseOpacity;return t.mat.uniforms.baseOpacity.value=n}).onComplete(function(){e&&e()}).start()}}]),e}();t.default=new d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(246),u=i(s),l=n(247),c=i(l),h=n(16),f=i(h),d=function(){function e(){r(this,e),this.tween=null,this.isWireframeVisible=!1,this.mat=new a.ShaderMaterial({extensions:{derivatives:!0},uniforms:{color:{value:new a.Color(1,1,1)},fresnelBias:{value:.05},fresnelScale:{value:1},fresnelPower:{value:2.35},baseOpacity:{value:1},wireframeOpacity:{value:0},height:{value:0},step:{value:0}},vertexShader:u.default,fragmentShader:c.default,transparent:!0})}return o(e,[{key:"show",value:function(){var e=this;this.tween&&this.tween.stop(),this.tween=new f.default.Tween({step:0}).to({step:1},3e3).easing(f.default.Easing.Cubic.Out).onUpdate(function(t){var n=t.step;return e.mat.uniforms.step.value=n}).start()}},{key:"hide",value:function(){this.mat.uniforms.step.value=0}},{key:"showWireframe",value:function(){var e=this;this.isWireframeVisible||(this.isWireframeVisible=!0,this.wireframeTween&&this.wireframeTween.stop(),this.wireframeTween=new f.default.Tween({elapsed:0}).to({elapsed:.1},750).onUpdate(function(t){var n=t.elapsed;return e.mat.uniforms.wireframeOpacity.value=n}).start())}},{key:"hideWireframe",value:function(){var e=this;this.isWireframeVisible&&(this.isWireframeVisible=!1,this.wireframeTween&&this.wireframeTween.stop(),this.wireframeTween=new f.default.Tween({elapsed:.1}).to({elapsed:0},750).onUpdate(function(t){var n=t.elapsed;return e.mat.uniforms.wireframeOpacity.value=n}).start())}},{key:"reset",value:function(){this.tween&&this.tween.stop(),this.mat.uniforms.step.value=0}},{key:"height",set:function(e){this.mat.uniforms.height.value=e}}]),e}();t.default=new d},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAAsSAAALEgHS3X78AAACAklEQVRoBe1Xi23CMBC9IhbICmGEdIR0hHQEOkIYAUagI4QRwggwQjJCGeGqtO/o5WSHFiRsFT/pBIod+93zfZwnZqZHxtz4nuP3BNPIYC70gTQsiajC/3ciOppxH+cf/4YIYOacmQ/8jY6ZP5h5izGxjv3Izdx7WcPMLbjXjj19nM++SQocoN4Gp1kQUUNEeyJ6m1BziJiWiBYBomDg0hHRK/gOkfBs5gzjK0dkjCKgxIlnRr3K81zbFicQ4vQ178LDtbsUnTOo1zty/giVi4kTqBA1IVAiQk/gelL1gC7UrDNmCGMbIgRRelUYLZYY3wcUQPPe45lAnF8iFcTWepHZlZsPi9eovCGQIzJ3RgAdrZLnGerAC34r1Lcv2Db4W0io7SbmV1btK7Dy7FGp05cI7eGsTo2FeU9SvcHc09wsoiE5ZGsDIaw2njHBzpNaf4GvsxTg1nrGptKyH/nGzEtPBfV1B9/ze1mG/UvHfjXuBFNcRt1NL1grpzK0t8axQOu4JIVqf3bMtsPCzCvQGs9+6UUPeFlugo2jh8oGoW5+g609B6N7f62cFZ/kVjh6134MFSqHpvLv1ty+BdLefPXHjkt9E94jvx7+a/Dae8C/QRIgAg5BkQSIgENQJAEi4BAUSYAIOARFEiACDkGRBIiAQ1AkASLgEBRJgAg4hAMRfQJokEt9rzNFaAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAAsSAAALEgHS3X78AAACEElEQVRoBe1XgW3CMBD8oi7gFdwRskIYIYyQjAAjJCPACGGEZAQyAh2BjGBkca6+5pOqhWBL9Ukvkrcdn+/fb/NmjKH/jBXWviWiTNDB+gvBryPRTIHLHB/eR9212gwwxpyNMSWendn3izFGe/4t+lNga8HPcrHoPK4avotne857JWp2Q0lEDRF9en6bEYe/B+0p2COaayL6gI1E1LKPt/DxPhsiyjF+NgNslE9ChPOJrHilKXAovDm5XyMrMoHXtwyWMkBj7zdCm43+IGTFK+FqVe/NOcI0e77f8zff6F5WXoMdXOPjR2FgwYRRSCWpeC4JvkAfPWtvwK+EL8Pa7PvOjXtnHyhhaiL6JSLvlFfwDbDYcETAaiaWRv36yh4uQIPGLRZ28FQuhKyYg5v8Eex+OSdHi8Cs2ToyZIW1yheAC+HIV/DlUK9nZ65iv0pIyeMTMmOq1kzNmYFjgeeN12dAYGuIO0oCEBbesVqghGPGocSvtG2WKJY9+GReIXQ1bJgofjJmLkL1xFHILxpGGPcK63ARUuwIrLEOxY7EmvUhHIsd7MeLkKuUj+7jJVAhymdmOUv5kV16eJ8TuLitTe7PkLSfiKWS1EZIuZB3Ao1Fzp1Ers8o3WHSv8EIOARFEiACDkGRBIiAQ1AkASLgEBRJgAg4BEUSIAIOQZEEiIBDUCQBIuAQFEmACDiEAxFdAcP7xSNS3PCDAAAAAElFTkSuQmCC"},function(e,t,n){n(98),n(154),e.exports=n(259)},function(e,t,n){"use strict";n(99),n(108),n(143),n(144),n(147),n(149),"undefined"===typeof Promise&&(n(150).enable(),window.Promise=n(152)),n(153),Object.assign=n(54),function(){if("function"===typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}()},function(e,t,n){n(100),n(107),e.exports=n(4).Symbol},function(e,t,n){"use strict";var i=n(7),r=n(17),o=n(18),a=n(1),s=n(25),u=n(101).KEY,l=n(10),c=n(45),h=n(46),f=n(26),d=n(2),p=n(47),m=n(102),v=n(103),g=n(41),y=n(23),b=n(13),_=n(11),w=n(44),x=n(24),M=n(63),S=n(105),E=n(106),T=n(12),A=n(22),C=E.f,P=T.f,O=S.f,L=i.Symbol,k=i.JSON,I=k&&k.stringify,R=d("_hidden"),N=d("toPrimitive"),D={}.propertyIsEnumerable,F=c("symbol-registry"),U=c("symbols"),j=c("op-symbols"),B=Object.prototype,z="function"==typeof L,G=i.QObject,V=!G||!G.prototype||!G.prototype.findChild,W=o&&l(function(){return 7!=M(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=C(B,t);i&&delete B[t],P(e,t,n),i&&e!==B&&P(B,t,i)}:P,H=function(e){var t=U[e]=M(L.prototype);return t._k=e,t},q=z&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},X=function(e,t,n){return e===B&&X(j,t,n),y(e),t=w(t,!0),y(n),r(U,t)?(n.enumerable?(r(e,R)&&e[R][t]&&(e[R][t]=!1),n=M(n,{enumerable:x(0,!1)})):(r(e,R)||P(e,R,x(1,{})),e[R][t]=!0),W(e,t,n)):P(e,t,n)},Y=function(e,t){y(e);for(var n,i=v(t=_(t)),r=0,o=i.length;o>r;)X(e,n=i[r++],t[n]);return e},K=function(e,t){return void 0===t?M(e):Y(M(e),t)},Z=function(e){var t=D.call(this,e=w(e,!0));return!(this===B&&r(U,e)&&!r(j,e))&&(!(t||!r(this,e)||!r(U,e)||r(this,R)&&this[R][e])||t)},J=function(e,t){if(e=_(e),t=w(t,!0),e!==B||!r(U,t)||r(j,t)){var n=C(e,t);return!n||!r(U,t)||r(e,R)&&e[R][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=O(_(e)),i=[],o=0;n.length>o;)r(U,t=n[o++])||t==R||t==u||i.push(t);return i},$=function(e){for(var t,n=e===B,i=O(n?j:_(e)),o=[],a=0;i.length>a;)!r(U,t=i[a++])||n&&!r(B,t)||o.push(U[t]);return o};z||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(j,n),r(this,R)&&r(this[R],e)&&(this[R][e]=!1),W(this,e,x(1,n))};return o&&V&&W(B,e,{configurable:!0,set:t}),H(e)},s(L.prototype,"toString",function(){return this._k}),E.f=J,T.f=X,n(65).f=S.f=Q,n(30).f=Z,n(51).f=$,o&&!n(38)&&s(B,"propertyIsEnumerable",Z,!0),p.f=function(e){return H(d(e))}),a(a.G+a.W+a.F*!z,{Symbol:L});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(var ne=A(d.store),ie=0;ne.length>ie;)m(ne[ie++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return r(F,e+="")?F[e]:F[e]=L(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!z,"Object",{create:K,defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),k&&a(a.S+a.F*(!z||l(function(){var e=L();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(b(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),i[1]=t,I.apply(k,i)}}),L.prototype[N]||n(19)(L.prototype,N,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(e,t,n){var i=n(26)("meta"),r=n(13),o=n(17),a=n(12).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(10)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},h=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[i].i},f=function(e,t){if(!o(e,i)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[i].w},d=function(e){return l&&p.NEED&&u(e)&&!o(e,i)&&c(e),e},p=e.exports={KEY:i,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(e,t,n){var i=n(7),r=n(4),o=n(38),a=n(47),s=n(12).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var i=n(22),r=n(51),o=n(30);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var i=n(12),r=n(23),o=n(22);e.exports=n(18)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,u=0;s>u;)i.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var i=n(11),r=n(65).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):r(i(e))}},function(e,t,n){var i=n(30),r=n(24),o=n(11),a=n(44),s=n(17),u=n(60),l=Object.getOwnPropertyDescriptor;t.f=n(18)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var i=n(66),r={};r[n(2)("toStringTag")]="z",r+""!="[object z]"&&n(25)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(e,t,n){n(52),n(112),n(68),n(117),n(118),n(119),n(120),n(121),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(133),n(135),n(136),n(137),n(71),n(140),n(141),n(142),e.exports=n(4).Array},function(e,t,n){var i=n(29),r=n(39);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),u=i(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var i=n(63),r=n(24),o=n(46),a={};n(19)(a,n(2)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(17),r=n(8),o=n(49)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(1);i(i.S,"Array",{isArray:n(41)})},function(e,t,n){var i=n(23);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(31),r=n(2)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(66),r=n(2)("iterator"),o=n(31);e.exports=n(4).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){var i=n(2)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var i=n(1),r=n(69);i(i.S+i.F*n(10)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var i=n(1),r=n(11),o=[].join;i(i.P+i.F*(n(27)!=Object||!n(6)(o)),"Array",{join:function(e){return o.call(r(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var i=n(1),r=n(64),o=n(28),a=n(40),s=n(5),u=[].slice;i(i.P+i.F*n(10)(function(){r&&u.call(r)}),"Array",{slice:function(e,t){var n=s(this.length),i=o(this);if(t=void 0===t?n:t,"Array"==i)return u.call(this,e,t);for(var r=a(e,n),l=a(t,n),c=s(l-r),h=new Array(c),f=0;f<c;f++)h[f]="String"==i?this.charAt(r+f):this[r+f];return h}})},function(e,t,n){"use strict";var i=n(1),r=n(37),o=n(8),a=n(10),s=[].sort,u=[1,2,3];i(i.P+i.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(6)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),r(e))}})},function(e,t,n){"use strict";var i=n(1),r=n(20)(0),o=n(6)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(13),r=n(41),o=n(2)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var i=n(1),r=n(20)(1);i(i.P+i.F*!n(6)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(20)(2);i(i.P+i.F*!n(6)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(20)(3);i(i.P+i.F*!n(6)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(20)(4);i(i.P+i.F*!n(6)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(70);i(i.P+i.F*!n(6)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var i=n(1),r=n(70);i(i.P+i.F*!n(6)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var i=n(1),r=n(48)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!n(6)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(11),o=n(29),a=n(5),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(u||!n(6)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=r(this),n=a(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,n){var i=n(1);i(i.P,"Array",{copyWithin:n(132)}),n(14)("copyWithin")},function(e,t,n){"use strict";var i=n(8),r=n(40),o=n(5);e.exports=[].copyWithin||function(e,t){var n=i(this),a=o(n.length),s=r(e,a),u=r(t,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:r(l,a))-u,a-s),h=1;for(u<s&&s<u+c&&(h=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},function(e,t,n){var i=n(1);i(i.P,"Array",{fill:n(134)}),n(14)("fill")},function(e,t,n){"use strict";var i=n(8),r=n(40),o=n(5);e.exports=function(e){for(var t=i(this),n=o(t.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:r(u,n);l>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var i=n(1),r=n(20)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(14)("find")},function(e,t,n){"use strict";var i=n(1),r=n(20)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(14)(o)},function(e,t,n){n(138)("Array")},function(e,t,n){"use strict";var i=n(7),r=n(12),o=n(18),a=n(2)("species");e.exports=function(e){var t=i[e];o&&t&&!t[a]&&r.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var i=n(1),r=n(48)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(14)("includes")},function(e,t,n){"use strict";var i=n(1),r=n(72),o=n(8),a=n(5),s=n(37),u=n(53);i(i.P,"Array",{flatMap:function(e){var t,n,i=o(this);return s(e),t=a(i.length),n=u(i,0),r(n,i,i,t,0,1,e,arguments[1]),n}}),n(14)("flatMap")},function(e,t,n){"use strict";var i=n(1),r=n(72),o=n(8),a=n(5),s=n(29),u=n(53);i(i.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),i=u(t,0);return r(i,t,t,n,0,void 0===e?1:s(e)),i}}),n(14)("flatten")},function(e,t,n){n(52),n(68),e.exports=n(4).Array.from},function(e,t,n){n(145),e.exports=n(4).Object.assign},function(e,t,n){var i=n(1);i(i.S+i.F,"Object",{assign:n(146)})},function(e,t,n){"use strict";var i=n(22),r=n(51),o=n(30),a=n(8),s=n(27),u=Object.assign;e.exports=!u||n(10)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=i})?function(e,t){for(var n=a(e),u=arguments.length,l=1,c=r.f,h=o.f;u>l;)for(var f,d=s(arguments[l++]),p=c?i(d).concat(c(d)):i(d),m=p.length,v=0;m>v;)h.call(d,f=p[v++])&&(n[f]=d[f]);return n}:u},function(e,t,n){n(52),n(148),e.exports=n(47).f("iterator")},function(e,t,n){for(var i=n(71),r=n(22),o=n(25),a=n(7),s=n(19),u=n(31),l=n(2),c=l("iterator"),h=l("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),m=0;m<p.length;m++){var v,g=p[m],y=d[g],b=a[g],_=b&&b.prototype;if(_&&(_[c]||s(_,c,f),_[h]||s(_,h,g),u[g]=f,y))for(v in i)_[v]||o(_,v,i[v],!0)}},function(e,t,n){var i;!function(r){!function(){if(!r.requestAnimationFrame){if(r.webkitRequestAnimationFrame)return r.requestAnimationFrame=r.webkitRequestAnimationFrame,void(r.cancelAnimationFrame=r.webkitCancelAnimationFrame||r.webkitCancelRequestAnimationFrame);var e=0;r.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),o=r.setTimeout(function(){t(n+i)},i);return e=n+i,o},r.cancelAnimationFrame=function(e){clearTimeout(e)}}}(),void 0!==(i=function(){return r.requestAnimationFrame}.call(t,n,t,e))&&(e.exports=i)}(window)},function(e,t,n){"use strict";function i(){l=!1,s._47=null,s._71=null}function r(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||u))&&(h[t].displayId=c++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled)}e=e||{},l&&i(),l=!0;var r=0,c=0,h={};s._47=function(e){2===e._83&&h[e._56]&&(h[e._56].logged?n(e._56):clearTimeout(h[e._56].timeout),delete h[e._56])},s._71=function(e,n){0===e._75&&(e._56=r++,h[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function o(e,t){((t&&(t.stack||t))+"").split("\n").forEach(function(e){})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(73),u=[ReferenceError,TypeError,RangeError],l=!1;t.disable=i,t.enable=r},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function i(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>l){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function r(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof t?t:self,h=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof h?function(e){var t=1,n=new h(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}(i):r(i),n.requestFlush=o,n.makeRequestCallFromTimer=r}).call(t,n(42))},function(e,t,n){"use strict";function i(e){var t=new r(r._44);return t._83=1,t._18=e,t}var r=n(73);e.exports=r;var o=i(!0),a=i(!1),s=i(null),u=i(void 0),l=i(0),c=i("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return a;if(0===e)return l;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(e){return new r(function(t,n){n(e)})}return i(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function i(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?i(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){i(a,e)},n))}var u=s.then;if("function"===typeof u){return void new r(u.bind(s)).then(function(e){i(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)i(a,t[a])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&b(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function m(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},g.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];v.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=d,e.Response=v,e.fetch=function(e,t){return new Promise(function(n,i){var r=new d(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new v(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function initModules(){listPanelManager=new _ListPanelManager2.default,scrollAreaManager=new _ScrollAreaManager2.default,header=new _Header2.default,new _LocatorManager2.default,new _BookingManager2.default,new _ApplicationManager2.default,new _FranchiseManager2.default,new _AccordionManager2.default,new _TestimonialsManager2.default,new _ImpressionsManager2.default,new _AvatarManager2.default}function loadFonts(){_webfontloader2.default.load({monotype:{projectId:"1043f1a5-060b-4c3a-931d-98ddca8f90a7"},active:onLoadFonts,inactive:onLoadFonts})}function onLoadFonts(){fontsLoaded=!0,start()}function onDomReady(){domReady=!0,start()}function start(){fontsLoaded&&domReady&&(mainNode.classList.remove("is-hidden"),listPanelManager.start(),scrollAreaManager.start(),header.start())}__webpack_require__(155),__webpack_require__(158),__webpack_require__(163);var _detectie=__webpack_require__(164),_detectie2=_interopRequireDefault(_detectie),_webfontloader=__webpack_require__(165),_webfontloader2=_interopRequireDefault(_webfontloader),_ae2canvas=__webpack_require__(74),_es6Tween=__webpack_require__(75),_banner=__webpack_require__(166),_banner2=_interopRequireDefault(_banner),_Header=__webpack_require__(167),_Header2=_interopRequireDefault(_Header),_FranchiseManager=__webpack_require__(169),_FranchiseManager2=_interopRequireDefault(_FranchiseManager),_ScrollAreaManager=__webpack_require__(182),_ScrollAreaManager2=_interopRequireDefault(_ScrollAreaManager),_LocatorManager=__webpack_require__(190),_LocatorManager2=_interopRequireDefault(_LocatorManager),_BookingManager=__webpack_require__(209),_BookingManager2=_interopRequireDefault(_BookingManager),_ApplicationManager=__webpack_require__(214),_ApplicationManager2=_interopRequireDefault(_ApplicationManager),_AccordionManager=__webpack_require__(216),_AccordionManager2=_interopRequireDefault(_AccordionManager),_TestimonialsManager=__webpack_require__(219),_TestimonialsManager2=_interopRequireDefault(_TestimonialsManager),_ImpressionsManager=__webpack_require__(221),_ImpressionsManager2=_interopRequireDefault(_ImpressionsManager),_ListPanelManager=__webpack_require__(225),_ListPanelManager2=_interopRequireDefault(_ListPanelManager),_AvatarManager=__webpack_require__(227),_AvatarManager2=_interopRequireDefault(_AvatarManager);IntersectionObserver.prototype.USE_MUTATION_OBSERVER=!1,"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),eval((0,_banner2.default)()),(0,_detectie2.default)()&&document.body.classList.add("is-ie");var gridDebug=document.querySelector(".grid-debug");gridDebug&&(gridDebug.style.display="#grid"===window.location.hash?"flex":"none"),"undefined"!==typeof CMS&&CMS.$(window).on("cms-content-refresh",function(){initModules(),start()});var fontsLoaded=!1,domReady=!1,mainNode=document.querySelector(".js-main"),listPanelManager=null,scrollAreaManager=null,header=null;(0,_ae2canvas.autoPlay)(!0),(0,_es6Tween.autoPlay)(!0),initModules(),loadFonts(),document.addEventListener("DOMContentLoaded",onDomReady)},function(e,t,n){n(156),e.exports=n(4).Object.values},function(e,t,n){var i=n(1),r=n(157)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var i=n(22),r=n(11),o=n(30).f;e.exports=function(e){return function(t){for(var n,a=r(t),s=i(a),u=s.length,l=0,c=[];u>l;)o.call(a,n=s[l++])&&c.push(e?[n,a[n]]:a[n]);return c}}},function(e,t,n){n(159),e.exports=n(4).String.includes},function(e,t,n){"use strict";var i=n(1),r=n(160);i(i.P+i.F*n(162)("includes"),"String",{includes:function(e){return!!~r(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(161),r=n(39);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var i=n(13),r=n(28),o=n(2)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(2)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||c(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function i(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-r,s=i-n;return a>=0&&s>=0&&{top:n,bottom:i,left:r,right:o,width:a,height:s}}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):c()}function c(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function h(e,t){for(var n=t;n;){if(n==e)return!0;n=f(n)}return!1}function f(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)return void("isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var d=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},i.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():c();this._observationTargets.forEach(function(i){var o=i.element,a=l(o),s=this._rootContainsTarget(o),u=i.entry,c=e&&s&&this._computeTargetAndRootIntersection(o,t),h=i.entry=new n({time:r(),target:o,boundingClientRect:a,rootBounds:t,intersectionRect:c});u?e&&s?this._hasCrossedThreshold(u,h)&&this._queuedEntries.push(h):u&&u.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(n,i){if("none"!=e.getComputedStyle(n).display){for(var r=l(n),o=r,a=f(n),s=!1;!s;){var c=null,h=1==a.nodeType?e.getComputedStyle(a):{};if("none"==h.display)return;if(a==this.root||a==t?(s=!0,c=i):a!=t.body&&a!=t.documentElement&&"visible"!=h.overflow&&(c=l(a)),c&&!(o=u(c,o)))break;a=f(a)}return o}},i.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!==o<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||h(t,this.root)},i.prototype._rootContainsTarget=function(e){return h(this.root||t,e)},i.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},i.prototype._unregisterInstance=function(){var e=d.indexOf(this);-1!=e&&d.splice(e,1)},e.IntersectionObserver=i,e.IntersectionObserverEntry=n}(window,document)},function(e,t){var n=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)};e.exports=n},function(e,t,n){var i;!function(){function r(e,t,n){return e.call.apply(e.bind,arguments)}function o(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function a(e,t,n){return a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:o,a.apply(null,arguments)}function s(e,t){this.a=e,this.o=t||e,this.c=this.o.document}function u(e,t,n,i){if(t=e.c.createElement(t),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i&&t.appendChild(e.c.createTextNode(i)),t}function l(e,t,n){e=e.c.getElementsByTagName(t)[0],e||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t,n){t=t||[],n=n||[];for(var i=e.className.split(/\s+/),r=0;r<t.length;r+=1){for(var o=!1,a=0;a<i.length;a+=1)if(t[r]===i[a]){o=!0;break}o||i.push(t[r])}for(t=[],r=0;r<i.length;r+=1){for(o=!1,a=0;a<n.length;a+=1)if(i[r]===n[a]){o=!0;break}o||t.push(i[r])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(e,t){for(var n=e.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==t)return!0;return!1}function d(e){return e.o.location.hostname||e.a.location.hostname}function p(e,t,n){function i(){s&&r&&o&&(s(a),s=null)}t=u(e,"link",{rel:"stylesheet",href:t,media:"all"});var r=!1,o=!0,a=null,s=n||null;oe?(t.onload=function(){r=!0,i()},t.onerror=function(){r=!0,a=Error("Stylesheet failed to load"),i()}):setTimeout(function(){r=!0,i()},0),l(e,"head",t)}function m(e,t,n,i){var r=e.c.getElementsByTagName("head")[0];if(r){var o=u(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},i||5e3),o}return null}function v(){this.a=0,this.c=null}function g(e){return e.a++,function(){e.a--,b(e)}}function y(e,t){e.c=t,b(e)}function b(e){0==e.a&&e.c&&(e.c(),e.c=null)}function _(e){this.a=e||"-"}function w(e,t){this.c=e,this.f=4,this.a="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function x(e){return E(e)+" "+e.f+"00 300px "+M(e.c)}function M(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var i=e[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?t.push("'"+i+"'"):t.push(i)}return t.join(",")}function S(e){return e.a+e.f}function E(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function T(e){var t=4,n="n",i=null;return e&&((i=e.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=e.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?t=7:/[1-9]00/.test(i[1])&&(t=parseInt(i[1].substr(0,1),10)))),n+t}function A(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new _("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function C(e){e.g&&h(e.f,[e.a.c("wf","loading")]),O(e,"loading")}function P(e){if(e.g){var t=f(e.f,e.a.c("wf","active")),n=[],i=[e.a.c("wf","loading")];t||n.push(e.a.c("wf","inactive")),h(e.f,n,i)}O(e,"inactive")}function O(e,t,n){e.j&&e.h[t]&&(n?e.h[t](n.c,S(n)):e.h[t]())}function L(){this.c={}}function k(e,t,n){var i,r=[];for(i in t)if(t.hasOwnProperty(i)){var o=e.c[i];o&&r.push(o(t[i],n))}return r}function I(e,t){this.c=e,this.f=t,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function R(e){l(e.c,"body",e.a)}function N(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+M(e.c)+";font-style:"+E(e)+";font-weight:"+e.f+"00;"}function D(e,t,n,i,r,o){this.g=e,this.j=t,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function F(e,t,n,i,r,o,a){this.v=e,this.B=t,this.c=n,this.a=i,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new I(this.c,this.s),this.h=new I(this.c,this.s),this.j=new I(this.c,this.s),this.m=new I(this.c,this.s),e=new w(this.a.c+",serif",S(this.a)),e=N(e),this.g.a.style.cssText=e,e=new w(this.a.c+",sans-serif",S(this.a)),e=N(e),this.h.a.style.cssText=e,e=new w("serif",S(this.a)),e=N(e),this.j.a.style.cssText=e,e=new w("sans-serif",S(this.a)),e=N(e),this.m.a.style.cssText=e,R(this.g),R(this.h),R(this.j),R(this.m)}function U(){if(null===se){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);se=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return se}function j(e,t,n){for(var i in ae)if(ae.hasOwnProperty(i)&&t===e.f[ae[i]]&&n===e.f[ae[i]])return!0;return!1}function B(e){var t,n=e.g.a.offsetWidth,i=e.h.a.offsetWidth;(t=n===e.f.serif&&i===e.f["sans-serif"])||(t=U()&&j(e,n,i)),t?re()-e.A>=e.w?U()&&j(e,n,i)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?G(e,e.v):G(e,e.B):z(e):G(e,e.v)}function z(e){setTimeout(a(function(){B(this)},e),50)}function G(e,t){setTimeout(a(function(){c(this.g.a),c(this.h.a),c(this.j.a),c(this.m.a),t(this.a)},e),0)}function V(e,t,n){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=n}function W(e){0==--e.f&&e.j&&(e.m?(e=e.a,e.g&&h(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),O(e,"active")):P(e.a))}function H(e){this.j=e,this.a=new L,this.h=0,this.f=this.g=!0}function q(e,t,n,i,r){var o=0==--e.h;(e.f||e.g)&&setTimeout(function(){var e=r||null,s=i||null||{};if(0===n.length&&o)P(t.a);else{t.f+=n.length,o&&(t.j=o);var u,l=[];for(u=0;u<n.length;u++){var c=n[u],f=s[c.c],d=t.a,p=c;if(d.g&&h(d.f,[d.a.c("wf",p.c,S(p).toString(),"loading")]),O(d,"fontloading",p),d=null,null===ue)if(window.FontFace){var p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),m=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);ue=p?42<parseInt(p[1],10):!m}else ue=!1;d=ue?new D(a(t.g,t),a(t.h,t),t.c,c,t.s,f):new F(a(t.g,t),a(t.h,t),t.c,c,t.s,e,f),l.push(d)}for(u=0;u<l.length;u++)l[u].start()}},0)}function X(e,t,n){var i=[],r=n.timeout;C(t);var i=k(e.a,n,e.c),o=new V(e.c,t,r);for(e.h=i.length,t=0,n=i.length;t<n;t++)i[t].load(function(t,n,i){q(e,o,t,n,i)})}function Y(e,t){this.c=e,this.a=t}function K(e,t){this.c=e,this.a=t}function Z(e,t){this.c=e||le,this.a=[],this.f=[],this.g=t||""}function J(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i].split(":");3==r.length&&e.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),e.a.push(r.join(o))}}function Q(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,n=[],i=0;i<t;i++)n.push(e.a[i].replace(/ /g,"+"));return t=e.c+"?family="+n.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}function $(e){this.f=e,this.a=[],this.c={}}function ee(e){for(var t=e.f.length,n=0;n<t;n++){var i=e.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var a,s=i[1];if(a=[],s)for(var s=s.split(","),u=s.length,l=0;l<u;l++){var c;if(c=s[l],c.match(/^[\w-]+$/)){var h=de.exec(c.toLowerCase());if(null==h)c="";else{if(c=h[2],c=null==c||""==c?"n":fe[c],null==(h=h[1])||""==h)h="4";else var f=he[h],h=f||(isNaN(h)?"4":h.substr(0,1));c=[c,h].join("")}}else c="";c&&a.push(c)}0<a.length&&(o=a),3==i.length&&(i=i[2],a=[],i=i?i.split(","):a,0<i.length&&(i=ce[i[0]])&&(e.c[r]=i))}for(e.c[r]||(i=ce[r])&&(e.c[r]=i),i=0;i<o.length;i+=1)e.a.push(new w(r,o[i]))}}function te(e,t){this.c=e,this.a=t}function ne(e,t){this.c=e,this.a=t}function ie(e,t){this.c=e,this.f=t,this.a=[]}var re=Date.now||function(){return+new Date},oe=!!window.FontFace;_.prototype.c=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},D.prototype.start=function(){var e=this.c.o.document,t=this,n=re(),i=new Promise(function(i,r){function o(){re()-n>=t.f?r():e.fonts.load(x(t.a),t.h).then(function(e){1<=e.length?i():setTimeout(o,25)},function(){r()})}o()}),r=null,o=new Promise(function(e,n){r=setTimeout(n,t.f)});Promise.race([o,i]).then(function(){r&&(clearTimeout(r),r=null),t.g(t.a)},function(){t.j(t.a)})};var ae={D:"serif",C:"sans-serif"},se=null;F.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=re(),B(this)};var ue=null;V.prototype.g=function(e){var t=this.a;t.g&&h(t.f,[t.a.c("wf",e.c,S(e).toString(),"active")],[t.a.c("wf",e.c,S(e).toString(),"loading"),t.a.c("wf",e.c,S(e).toString(),"inactive")]),O(t,"fontactive",e),this.m=!0,W(this)},V.prototype.h=function(e){var t=this.a;if(t.g){var n=f(t.f,t.a.c("wf",e.c,S(e).toString(),"active")),i=[],r=[t.a.c("wf",e.c,S(e).toString(),"loading")];n||i.push(t.a.c("wf",e.c,S(e).toString(),"inactive")),h(t.f,i,r)}O(t,"fontinactive",e),W(this)},H.prototype.load=function(e){this.c=new s(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,X(this,new A(this.c,e),e)},Y.prototype.load=function(e){function t(){if(o["__mti_fntLst"+i]){var n,r=o["__mti_fntLst"+i](),a=[];if(r)for(var s=0;s<r.length;s++){var u=r[s].fontfamily;void 0!=r[s].fontStyle&&void 0!=r[s].fontWeight?(n=r[s].fontStyle+r[s].fontWeight,a.push(new w(u,n))):a.push(new w(u))}e(a)}else setTimeout(function(){t()},50)}var n=this,i=n.a.projectId,r=n.a.version;if(i){var o=n.c.o;m(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(r?"?v="+r:""),function(r){r?e([]):(o["__MonotypeConfiguration__"+i]=function(){return n.a},t())}).id="__MonotypeAPIScript__"+i}else e([])},K.prototype.load=function(e){var t,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new v;for(t=0,n=i.length;t<n;t++)p(this.c,i[t],g(a));var s=[];for(t=0,n=r.length;t<n;t++)if(i=r[t].split(":"),i[1])for(var u=i[1].split(","),l=0;l<u.length;l+=1)s.push(new w(i[0],u[l]));else s.push(new w(i[0]));y(a,function(){e(s,o)})};var le="https://fonts.googleapis.com/css",ce={latin:"BESbswy","latin-ext":"\xe7\xf6\xfc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},he={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},fe={i:"i",italic:"i",n:"n",normal:"n"},de=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,pe={Arimo:!0,Cousine:!0,Tinos:!0};te.prototype.load=function(e){var t=new v,n=this.c,i=new Z(this.a.api,this.a.text),r=this.a.families;J(i,r);var o=new $(r);ee(o),p(n,Q(i),g(t)),y(t,function(){e(o.a,o.c,pe)})},ne.prototype.load=function(e){var t=this.a.id,n=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var i=[],r=0;r<t.length;r+=2)for(var o=t[r],a=t[r+1],s=0;s<a.length;s++)i.push(new w(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(i)}},2e3):e([])},ie.prototype.load=function(e){var t=this.f.id,n=this.c.o,i=this;t?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[t]=function(t,n){for(var r=0,o=n.fonts.length;r<o;++r){var a=n.fonts[r];i.a.push(new w(a.name,T("font-weight:"+a.weight+";font-style:"+a.style)))}e(i.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+d(this.c)+"/"+t+".js",function(t){t&&e([])})):e([])};var me=new H(window);me.a.c.custom=function(e,t){return new K(t,e)},me.a.c.fontdeck=function(e,t){return new ie(t,e)},me.a.c.monotype=function(e,t){return new Y(t,e)},me.a.c.typekit=function(e,t){return new ne(t,e)},me.a.c.google=function(e,t){return new te(t,e)};var ve={load:a(me.load,me)};void 0!==(i=function(){return ve}.call(t,n,t,e))&&(e.exports=i)}()},function(e,t){function n(e,t){var n=e?'console.log("We are hiring:" , "https://www.kilokilo.ch/jobs"); console.log("----------------------------------------------");':"";return'(function () {if (console && console.log && !(typeof document !== "undefined" && document.documentMode)) {var css = "font-family: Helvetica, Arial, Sans-Serif;font-size:20px;line-height:3em;padding:0 1em;margin-right:0.5em;background:#000;color:#ffffff;";console.log("%c KiloKilo ", css, '+(t?'"https://www.\u30ad\u30ed\u30ad\u30ed.com"':'"https://www.kilokilo.ch"')+");"+n+"}}());"}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(76),u=n(43),l=i(u),c=n(33),h=i(c),f=new s.Lethargy,d=function(){function e(){o(this,e),this.onWheel=this.onWheel.bind(this),this.onOver=this.onOver.bind(this),this.onOut=this.onOut.bind(this),this.openMenu=this.openMenu.bind(this),this.closeMenu=this.closeMenu.bind(this),this.onNavItemOver=this.onNavItemOver.bind(this),this.onNavItemOut=this.onNavItemOut.bind(this),l.default.on("open-booking",this.closeMenu),this.activeItem=null,this.isMenuOpen=!1,this.isMini=!1,this.wasMini=!1,this.node=document.querySelector(".js-header"),this.node&&this.init()}return a(e,[{key:"init",value:function(){var e=this;this.burger=this.node.querySelector(".js-burger"),this.nav=this.node.querySelector(".js-nav"),this.line=this.node.querySelector(".js-header-line"),this.navItems=[].concat(r(this.nav.querySelectorAll(".js-nav-item")));var t=this.node.querySelector(".js-lang-btn"),n=this.node.querySelector(".js-lang-nav");this.node.addEventListener("mouseenter",this.onOver),this.node.addEventListener("mouseleave",this.onOut),window.addEventListener("wheel",this.onWheel,{passive:!1}),this.burger.addEventListener("click",function(t){t.preventDefault(),e.isMenuOpen?e.closeMenu():e.openMenu()}),t.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("is-active"),n.classList.toggle("is-visible")}),this.navItems.forEach(function(t){t.addEventListener("mouseenter",e.onNavItemOver),t.addEventListener("mouseleave",e.onNavItemOut)})}},{key:"openMenu",value:function(){l.default.emit("open-menu"),this.isMenuOpen=!0,this.burger.classList.add("is-open"),this.nav.classList.add("is-visible")}},{key:"closeMenu",value:function(){this.isMenuOpen=!1,this.burger.classList.remove("is-open"),this.nav.classList.remove("is-visible")}},{key:"onWheel",value:function(e){var t=f.check(e);t<0&&!this.isMini?(this.wasMini=!1,this.isMini=!0,this.node.classList.add("is-mini")):t>0&&this.isMini&&(this.isMini=!1,this.node.classList.remove("is-mini"))}},{key:"onOver",value:function(e){this.isMini&&(this.wasMini=!0,this.isMini=!1,this.node.classList.remove("is-mini"))}},{key:"onOut",value:function(e){this.wasMini&&(this.wasMini=!1,this.isMini=!0,this.node.classList.add("is-mini"))}},{key:"initLine",value:function(){if(this.activeItem=this.navItems.find(function(e){return e.classList.contains("is-active")}),this.activeItem){var e=this.activeItem.getBoundingClientRect(),t=e.left,n=e.width;this.setLine(t,n)}else this.line.style.opacity=0}},{key:"onNavItemOver",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.left,i=t.width;this.setLine(n,i)}},{key:"onNavItemOut",value:function(e){if(this.activeItem){var t=this.activeItem.getBoundingClientRect(),n=t.left,i=t.width;this.setLine(n,i)}else this.line.style.opacity=0}},{key:"setLine",value:function(e,t){var n=this.nav.getBoundingClientRect().left;this.line.style.transform="translateX("+(e-n)+"px) scaleX("+t/100+")",this.line.style.opacity=1}},{key:"start",value:function(){h.default.mobile||this.initLine(),this.node.classList.add("is-visible")}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mqTablet="768px",t.mqDesktop="1280px"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(21),s=i(a),u=n(0),l=i(u),c=n(178),h=i(c),f=function(){function e(){r(this,e),this.node=document.querySelector(".js-franchise"),this.node&&this.init()}return o(e,[{key:"init",value:function(){s.default.render(l.default.createElement(h.default,null),this.node)}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);Ri(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function r(e,t,n,i,r,o,a,s,u){this._hasCaughtError=!1,this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}function o(){if(Vi._hasRethrowError){var e=Vi._rethrowError;throw Vi._rethrowError=null,Vi._hasRethrowError=!1,e}}function a(){if(Wi)for(var e in Hi){var t=Hi[e],n=Wi.indexOf(e);if(-1<n||i("96",e),!qi[n]){t.extractEvents||i("97",e),qi[n]=t,n=t.eventTypes;for(var r in n){var o=void 0,a=n[r],u=t,l=r;Xi.hasOwnProperty(l)&&i("99",l),Xi[l]=a;var c=a.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&s(c[o],u,l);o=!0}else a.registrationName?(s(a.registrationName,u,l),o=!0):o=!1;o||i("98",r,e)}}}}function s(e,t,n){Yi[e]&&i("100",e),Yi[e]=t,Ki[e]=t.eventTypes[n].dependencies}function u(e){Wi&&i("101"),Wi=Array.prototype.slice.call(e),a()}function l(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];Hi.hasOwnProperty(t)&&Hi[t]===r||(Hi[t]&&i("102",t),Hi[t]=r,n=!0)}n&&a()}function c(e,t,n,i){t=e.type||"unknown-event",e.currentTarget=$i(i),Vi.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function h(e,t){return null==t&&i("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function f(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function d(e,t){if(e){var n=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)c(e,t,n[r],i[r]);else n&&c(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function p(e){return d(e,!0)}function m(e){return d(e,!1)}function v(e,t){var n=e.stateNode;if(!n)return null;var r=Ji(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(e=e.type,r=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&i("231",t,typeof n),n)}function g(e,t){null!==e&&(er=h(er,e)),e=er,er=null,e&&(t?f(e,p):f(e,m),er&&i("95"),Vi.rethrowCaughtError())}function y(e,t,n,i){for(var r=null,o=0;o<qi.length;o++){var a=qi[o];a&&(a=a.extractEvents(e,t,n,i))&&(r=h(r,a))}g(r,!1)}function b(e){if(e[rr])return e[rr];for(;!e[rr];){if(!e.parentNode)return null;e=e.parentNode}return e=e[rr],5===e.tag||6===e.tag?e:null}function _(e){if(5===e.tag||6===e.tag)return e.stateNode;i("33")}function w(e){return e[or]||null}function x(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function M(e,t,n){for(var i=[];e;)i.push(e),e=x(e);for(e=i.length;0<e--;)t(i[e],"captured",n);for(e=0;e<i.length;e++)t(i[e],"bubbled",n)}function S(e,t,n){(t=v(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function E(e){e&&e.dispatchConfig.phasedRegistrationNames&&M(e._targetInst,S,e)}function T(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?x(t):null,M(t,S,e)}}function A(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=v(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function C(e){e&&e.dispatchConfig.registrationName&&A(e._targetInst,null,e)}function P(e){f(e,E)}function O(e,t,n,i){if(n&&i)e:{for(var r=n,o=i,a=0,s=r;s;s=x(s))a++;s=0;for(var u=o;u;u=x(u))s++;for(;0<a-s;)r=x(r),a--;for(;0<s-a;)o=x(o),s--;for(;a--;){if(r===o||r===o.alternate)break e;r=x(r),o=x(o)}r=null}else r=null;for(o=r,r=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)r.push(n),n=x(n);for(n=[];i&&i!==o&&(null===(a=i.alternate)||a!==o);)n.push(i),i=x(i);for(i=0;i<r.length;i++)A(r[i],"bubbled",e);for(e=n.length;0<e--;)A(n[e],"captured",t)}function L(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function k(e){if(lr[e])return lr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in cr)return lr[e]=n[t];return e}function I(){return!vr&&Di.canUseDOM&&(vr="textContent"in document.documentElement?"textContent":"innerText"),vr}function R(){if(gr._fallbackText)return gr._fallbackText;var e,t,n=gr._startText,i=n.length,r=N(),o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return gr._fallbackText=r.slice(e,1<t?1-t:void 0),gr._fallbackText}function N(){return"value"in gr._root?gr._root.value:gr._root[I()]}function D(e,t,n,i){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var r in e)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Ui.thatReturnsTrue:Ui.thatReturnsFalse,this.isPropagationStopped=Ui.thatReturnsFalse,this}function F(e,t,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,n,i),r}return new this(e,t,n,i)}function U(e){e instanceof this||i("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function j(e){e.eventPool=[],e.getPooled=F,e.release=U}function B(e,t){switch(e){case"keyup":return-1!==xr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function z(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function G(e,t){switch(e){case"compositionend":return z(t);case"keypress":return 32!==t.which?null:(Pr=!0,Ar);case"textInput":return e=t.data,e===Ar&&Pr?null:e;default:return null}}function V(e,t){if(Or)return"compositionend"===e||!Mr&&B(e,t)?(e=R(),gr._root=null,gr._startText=null,gr._fallbackText=null,Or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tr?null:t.data;default:return null}}function W(e){if(e=Qi(e)){kr&&"function"===typeof kr.restoreControlledState||i("194");var t=Ji(e.stateNode);kr.restoreControlledState(e.stateNode,e.type,t)}}function H(e){Rr?Nr?Nr.push(e):Nr=[e]:Rr=e}function q(){return null!==Rr||null!==Nr}function X(){if(Rr){var e=Rr,t=Nr;if(Nr=Rr=null,W(e),t)for(e=0;e<t.length;e++)W(t[e])}}function Y(e,t){return e(t)}function K(e,t,n){return e(t,n)}function Z(){}function J(e,t){if(Fr)return e(t);Fr=!0;try{return Y(e,t)}finally{Fr=!1,q()&&(Z(),X())}}function Q(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ur[e.type]:"textarea"===t}function $(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ee(e,t){return!(!Di.canUseDOM||t&&!("addEventListener"in document))&&(e="on"+e,t=e in document,t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t)}function te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ne(e){var t=te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ie(e){e._valueTracker||(e._valueTracker=ne(e))}function re(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=te(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function oe(e){return null===e||"undefined"===typeof e?null:(e=Jr&&e[Jr]||e["@@iterator"],"function"===typeof e?e:null)}function ae(e){var t=e.type;if("function"===typeof t)return t.displayName||t.name;if("string"===typeof t)return t;switch(t){case Yr:return"AsyncMode";case Xr:return"Context.Consumer";case Vr:return"ReactFragment";case Gr:return"ReactPortal";case Hr:return"Profiler("+e.pendingProps.id+")";case qr:return"Context.Provider";case Wr:return"StrictMode";case Zr:return"Timeout"}if("object"===typeof t&&null!==t)switch(t.$$typeof){case Kr:return e=t.render.displayName||t.render.name||"",""!==e?"ForwardRef("+e+")":"ForwardRef"}return null}function se(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,i=e._debugSource,r=ae(e),o=null;n&&(o=ae(n)),n=i,r="\n    in "+(r||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break e;default:r=""}t+=r,e=e.return}while(e);return t}function ue(e){return!!eo.hasOwnProperty(e)||!$r.hasOwnProperty(e)&&(Qr.test(e)?eo[e]=!0:($r[e]=!0,!1))}function le(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function ce(e,t,n,i){if(null===t||"undefined"===typeof t||le(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function he(e,t,n,i,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t}function fe(e){return e[1].toUpperCase()}function de(e,t,n,i){var r=to.hasOwnProperty(t)?to[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(ce(t,n,r,i)&&(n=null),i||null===r?ue(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(r=r.type,n=3===r||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}function pe(e,t){var n=t.checked;return Fi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function me(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=_e(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ve(e,t){null!=(t=t.checked)&&de(e,"checked",t,!1)}function ge(e,t){ve(e,t);var n=_e(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?be(e,t.type,n):t.hasOwnProperty("defaultValue")&&be(e,t.type,_e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ye(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){t=""+e._wrapperState.initialValue;var i=e.value;n||t===i||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==n&&(e.name=n)}function be(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function _e(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e,t,n){return e=D.getPooled(io.change,e,t,n),e.type="change",H(n),P(e),e}function xe(e){g(e,!1)}function Me(e){if(re(_(e)))return e}function Se(e,t){if("change"===e)return t}function Ee(){ro&&(ro.detachEvent("onpropertychange",Te),oo=ro=null)}function Te(e){"value"===e.propertyName&&Me(oo)&&(e=we(oo,e,$(e)),J(xe,e))}function Ae(e,t,n){"focus"===e?(Ee(),ro=t,oo=n,ro.attachEvent("onpropertychange",Te)):"blur"===e&&Ee()}function Ce(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Me(oo)}function Pe(e,t){if("click"===e)return Me(t)}function Oe(e,t){if("input"===e||"change"===e)return Me(t)}function Le(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=lo[e])&&!!t[e]}function ke(){return Le}function Ie(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Re(e){2!==Ie(e)&&i("188")}function Ne(e){var t=e.alternate;if(!t)return t=Ie(e),3===t&&i("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Re(o),e;if(s===r)return Re(o),t;s=s.sibling}i("188")}if(n.return!==r.return)n=o,r=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}s||i("189")}}n.alternate!==r&&i("190")}return 3!==n.tag&&i("188"),n.stateNode.current===n?e:t}function De(e){if(!(e=Ne(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Fe(e){if(!(e=Ne(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ue(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function je(e,t){var n=e[0];e=e[1];var i="on"+(e[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],isInteractive:t},To[e]=t,Ao[n]=t}function Be(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=b(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],y(e.topLevelType,t,e.nativeEvent,$(e.nativeEvent))}function ze(e){Lo=!!e}function Ge(e,t){if(!t)return null;var n=(Po(e)?We:He).bind(null,e);t.addEventListener(e,n,!1)}function Ve(e,t){if(!t)return null;var n=(Po(e)?We:He).bind(null,e);t.addEventListener(e,n,!0)}function We(e,t){K(He,e,t)}function He(e,t){if(Lo){var n=$(t);if(n=b(n),null===n||"number"!==typeof n.tag||2===Ie(n)||(n=null),Oo.length){var i=Oo.pop();i.topLevelType=e,i.nativeEvent=t,i.targetInst=n,e=i}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{J(Be,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Oo.length&&Oo.push(e)}}}function qe(e){return Object.prototype.hasOwnProperty.call(e,No)||(e[No]=Ro++,Io[e[No]]={}),Io[e[No]]}function Xe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ye(e,t){var n=Xe(e);e=0;for(var i;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xe(n)}}function Ke(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ze(e,t){if(zo||null==Uo||Uo!==ji())return null;var n=Uo;return"selectionStart"in n&&Ke(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,Bo&&Bi(Bo,n)?null:(Bo=n,e=D.getPooled(Fo.select,jo,e,t),e.type="select",e.target=Uo,P(e),e)}function Je(e){var t="";return Ni.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function Qe(e,t){return e=Fi({children:void 0},t),(t=Je(t.children))&&(e.children=t),e}function $e(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function et(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function tt(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),Fi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&i("92"),Array.isArray(t)&&(1>=t.length||i("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function it(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function rt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function ot(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ot(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function st(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ut(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=n,o=t[n];r=null==o||"boolean"===typeof o||""===o?"":i||"number"!==typeof o||0===o||pa.hasOwnProperty(r)&&pa[r]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}function lt(e,t,n){t&&(va[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&i("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&i("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||i("61")),null!=t.style&&"object"!==typeof t.style&&i("62",n()))}function ct(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ht(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=qe(e);t=Ki[t];for(var i=0;i<t.length;i++){var r=t[i];if(!n.hasOwnProperty(r)||!n[r]){switch(r){case"scroll":Ve("scroll",e);break;case"focus":case"blur":Ve("focus",e),Ve("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":ee(r,!0)&&Ve(r,e);break;case"invalid":case"submit":case"reset":break;default:-1===mr.indexOf(r)&&Ge(r,e)}n[r]=!0}}}function ft(e,t,n,i){return n=9===n.nodeType?n:n.ownerDocument,i===ha.html&&(i=ot(e)),i===ha.html?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(i,e),e}function dt(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function pt(e,t,n,i){var r=ct(t,n);switch(t){case"iframe":case"object":Ge("load",e);var o=n;break;case"video":case"audio":for(o=0;o<mr.length;o++)Ge(mr[o],e);o=n;break;case"source":Ge("error",e),o=n;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),o=n;break;case"form":Ge("reset",e),Ge("submit",e),o=n;break;case"details":Ge("toggle",e),o=n;break;case"input":me(e,n),o=pe(e,n),Ge("invalid",e),ht(i,"onChange");break;case"option":o=Qe(e,n);break;case"select":et(e,n),o=Fi({},n,{value:void 0}),Ge("invalid",e),ht(i,"onChange");break;case"textarea":nt(e,n),o=tt(e,n),Ge("invalid",e),ht(i,"onChange");break;default:o=n}lt(t,o,ga);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?ut(e,u,ga):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&da(e,u):"children"===a?"string"===typeof u?("textarea"!==t||""!==u)&&st(e,u):"number"===typeof u&&st(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Yi.hasOwnProperty(a)?null!=u&&ht(i,a):null!=u&&de(e,a,u,r))}switch(t){case"input":ie(e),ye(e,n,!1);break;case"textarea":ie(e),rt(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?$e(e,!!n.multiple,t,!1):null!=n.defaultValue&&$e(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Ui)}}function mt(e,t,n,i,r){var o=null;switch(t){case"input":n=pe(e,n),i=pe(e,i),o=[];break;case"option":n=Qe(e,n),i=Qe(e,i),o=[];break;case"select":n=Fi({},n,{value:void 0}),i=Fi({},i,{value:void 0}),o=[];break;case"textarea":n=tt(e,n),i=tt(e,i),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof i.onClick&&(e.onclick=Ui)}lt(t,i,ga),t=e=void 0;var a=null;for(e in n)if(!i.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var s=n[e];for(t in s)s.hasOwnProperty(t)&&(a||(a={}),a[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(Yi.hasOwnProperty(e)?o||(o=[]):(o=o||[]).push(e,null));for(e in i){var u=i[e];if(s=null!=n?n[e]:void 0,i.hasOwnProperty(e)&&u!==s&&(null!=u||null!=s))if("style"===e)if(s){for(t in s)!s.hasOwnProperty(t)||u&&u.hasOwnProperty(t)||(a||(a={}),a[t]="");for(t in u)u.hasOwnProperty(t)&&s[t]!==u[t]&&(a||(a={}),a[t]=u[t])}else a||(o||(o=[]),o.push(e,a)),a=u;else"dangerouslySetInnerHTML"===e?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(o=o||[]).push(e,""+u)):"children"===e?s===u||"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(e,""+u):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(Yi.hasOwnProperty(e)?(null!=u&&ht(r,e),o||s===u||(o=[])):(o=o||[]).push(e,u))}return a&&(o=o||[]).push("style",a),o}function vt(e,t,n,i,r){"input"===n&&"radio"===r.type&&null!=r.name&&ve(e,r),ct(n,i),i=ct(n,r);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?ut(e,s,ga):"dangerouslySetInnerHTML"===a?da(e,s):"children"===a?st(e,s):de(e,a,s,i)}switch(n){case"input":ge(e,r);break;case"textarea":it(e,r);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!r.multiple,n=r.value,null!=n?$e(e,!!r.multiple,n,!1):t!==!!r.multiple&&(null!=r.defaultValue?$e(e,!!r.multiple,r.defaultValue,!0):$e(e,!!r.multiple,r.multiple?[]:"",!1))}}function gt(e,t,n,i,r){switch(t){case"iframe":case"object":Ge("load",e);break;case"video":case"audio":for(i=0;i<mr.length;i++)Ge(mr[i],e);break;case"source":Ge("error",e);break;case"img":case"image":case"link":Ge("error",e),Ge("load",e);break;case"form":Ge("reset",e),Ge("submit",e);break;case"details":Ge("toggle",e);break;case"input":me(e,n),Ge("invalid",e),ht(r,"onChange");break;case"select":et(e,n),Ge("invalid",e),ht(r,"onChange");break;case"textarea":nt(e,n),Ge("invalid",e),ht(r,"onChange")}lt(t,n,ga),i=null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];"children"===o?"string"===typeof a?e.textContent!==a&&(i=["children",a]):"number"===typeof a&&e.textContent!==""+a&&(i=["children",""+a]):Yi.hasOwnProperty(o)&&null!=a&&ht(r,o)}switch(t){case"input":ie(e),ye(e,n,!0);break;case"textarea":ie(e),rt(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=Ui)}return i}function yt(e,t){return e.nodeValue!==t}function bt(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function _t(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html}function wt(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function xt(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Mt(e){return{current:e}}function St(e){0>Ea||(e.current=Sa[Ea],Sa[Ea]=null,Ea--)}function Et(e,t){Ea++,Sa[Ea]=e.current,e.current=t}function Tt(e){return Ct(e)?Ca:Ta.current}function At(e,t){var n=e.type.contextTypes;if(!n)return Gi;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ct(e){return 2===e.tag&&null!=e.type.childContextTypes}function Pt(e){Ct(e)&&(St(Aa,e),St(Ta,e))}function Ot(e){St(Aa,e),St(Ta,e)}function Lt(e,t,n){Ta.current!==Gi&&i("168"),Et(Ta,t,e),Et(Aa,n,e)}function kt(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var o in n)o in r||i("108",ae(e)||"Unknown",o);return Fi({},t,n)}function It(e){if(!Ct(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Gi,Ca=Ta.current,Et(Ta,t,e),Et(Aa,Aa.current,e),!0}function Rt(e,t){var n=e.stateNode;if(n||i("169"),t){var r=kt(e,Ca);n.__reactInternalMemoizedMergedChildContext=r,St(Aa,e),St(Ta,e),Et(Ta,r,e)}else St(Aa,e);Et(Aa,t,e)}function Nt(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Dt(e,t,n){var i=e.alternate;return null===i?(i=new Nt(e.tag,t,e.key,e.mode),i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.expirationTime=n,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ft(e,t,n){var r=e.type,o=e.key;if(e=e.props,"function"===typeof r)var a=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"===typeof r)a=5;else switch(r){case Vr:return Ut(e.children,t,n,o);case Yr:a=11,t|=3;break;case Wr:a=11,t|=2;break;case Hr:return r=new Nt(15,e,o,4|t),r.type=Hr,r.expirationTime=n,r;case Zr:a=16,t|=2;break;default:e:{switch("object"===typeof r&&null!==r?r.$$typeof:null){case qr:a=13;break e;case Xr:a=12;break e;case Kr:a=14;break e;default:i("130",null==r?r:typeof r,"")}a=void 0}}return t=new Nt(a,e,o,t),t.type=r,t.expirationTime=n,t}function Ut(e,t,n,i){return e=new Nt(10,e,i,t),e.expirationTime=n,e}function jt(e,t,n){return e=new Nt(6,e,null,t),e.expirationTime=n,e}function Bt(e,t,n){return t=new Nt(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zt(e,t,n){return t=new Nt(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e}function Gt(e){return function(t){try{return e(t)}catch(e){}}}function Vt(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Pa=Gt(function(e){return t.onCommitFiberRoot(n,e)}),Oa=Gt(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function Wt(e){"function"===typeof Pa&&Pa(e)}function Ht(e){"function"===typeof Oa&&Oa(e)}function qt(e){return{expirationTime:0,baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xt(e){return{expirationTime:e.expirationTime,baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yt(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Kt(e,t,n){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t),(0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n)}function Zt(e,t,n){var i=e.alternate;if(null===i){var r=e.updateQueue,o=null;null===r&&(r=e.updateQueue=qt(e.memoizedState))}else r=e.updateQueue,o=i.updateQueue,null===r?null===o?(r=e.updateQueue=qt(e.memoizedState),o=i.updateQueue=qt(i.memoizedState)):r=e.updateQueue=Xt(o):null===o&&(o=i.updateQueue=Xt(r));null===o||r===o?Kt(r,t,n):null===r.lastUpdate||null===o.lastUpdate?(Kt(r,t,n),Kt(o,t,n)):(Kt(r,t,n),o.lastUpdate=t)}function Jt(e,t,n){var i=e.updateQueue;i=null===i?e.updateQueue=qt(e.memoizedState):Qt(e,i),null===i.lastCapturedUpdate?i.firstCapturedUpdate=i.lastCapturedUpdate=t:(i.lastCapturedUpdate.next=t,i.lastCapturedUpdate=t),(0===i.expirationTime||i.expirationTime>n)&&(i.expirationTime=n)}function Qt(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Xt(t)),t}function $t(e,t,n,i,r,o){switch(n.tag){case 1:return e=n.payload,"function"===typeof e?e.call(o,i,r):e;case 3:e.effectTag=-1025&e.effectTag|64;case 0:if(e=n.payload,null===(r="function"===typeof e?e.call(o,i,r):e)||void 0===r)break;return Fi({},i,r);case 2:La=!0}return i}function en(e,t,n,i,r){if(La=!1,!(0===t.expirationTime||t.expirationTime>r)){t=Qt(e,t);for(var o=t.baseState,a=null,s=0,u=t.firstUpdate,l=o;null!==u;){var c=u.expirationTime;c>r?(null===a&&(a=u,o=l),(0===s||s>c)&&(s=c)):(l=$t(e,t,u,l,n,i),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(c=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h>r?(null===c&&(c=u,null===a&&(o=l)),(0===s||s>h)&&(s=h)):(l=$t(e,t,u,l,n,i),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=l),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,t.expirationTime=s,e.memoizedState=l}}function tn(e,t){"function"!==typeof e&&i("191",e),e.call(t)}function nn(e,t,n){for(null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),e=t.firstEffect,t.firstEffect=t.lastEffect=null;null!==e;){var i=e.callback;null!==i&&(e.callback=null,tn(i,n)),e=e.nextEffect}for(e=t.firstCapturedEffect,t.firstCapturedEffect=t.lastCapturedEffect=null;null!==e;)t=e.callback,null!==t&&(e.callback=null,tn(t,n)),e=e.nextEffect}function rn(e,t){return{value:e,source:t,stack:se(t)}}function on(e){var t=e.type._context;Et(Ra,t._changedBits,e),Et(Ia,t._currentValue,e),Et(ka,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode}function an(e){var t=Ra.current,n=Ia.current;St(ka,e),St(Ia,e),St(Ra,e),e=e.type._context,e._currentValue=n,e._changedBits=t}function sn(e){return e===Na&&i("174"),e}function un(e,t){Et(Ua,t,e),Et(Fa,e,e),Et(Da,Na,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:at(null,"");break;default:n=8===n?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=at(t,n)}St(Da,e),Et(Da,t,e)}function ln(e){St(Da,e),St(Fa,e),St(Ua,e)}function cn(e){Fa.current===e&&(St(Da,e),St(Fa,e))}function hn(e,t,n){var i=e.memoizedState;t=t(n,i),i=null===t||void 0===t?i:Fi({},i,t),e.memoizedState=i,null!==(e=e.updateQueue)&&0===e.expirationTime&&(e.baseState=i)}function fn(e,t,n,i,r,o){var a=e.stateNode;return e=e.type,"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,r,o):!e.prototype||!e.prototype.isPureReactComponent||(!Bi(t,n)||!Bi(i,r))}function dn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function pn(e,t){var n=e.type,i=e.stateNode,r=e.pendingProps,o=Tt(e);i.props=r,i.state=e.memoizedState,i.refs=Gi,i.context=At(e,o),o=e.updateQueue,null!==o&&(en(e,o,r,i,t),i.state=e.memoizedState),o=e.type.getDerivedStateFromProps,"function"===typeof o&&(hn(e,o,r),i.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(n=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&ja.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(en(e,o,r,i,t),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}function mn(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(2!==n.tag&&i("110"),r=n.stateNode),r||i("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs===Gi?r.refs={}:r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}"string"!==typeof e&&i("148"),n._owner||i("254",e)}return e}function vn(e,t){"textarea"!==e.type&&i("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function gn(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=Dt(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index,i<n?(t.effectTag=2,n):i):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,i){return null===t||6!==t.tag?(t=jt(n,e.mode,i),t.return=e,t):(t=o(t,n,i),t.return=e,t)}function l(e,t,n,i){return null!==t&&t.type===n.type?(i=o(t,n.props,i),i.ref=mn(e,t,n),i.return=e,i):(i=Ft(n,e.mode,i),i.ref=mn(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Bt(n,e.mode,i),t.return=e,t):(t=o(t,n.children||[],i),t.return=e,t)}function h(e,t,n,i,r){return null===t||10!==t.tag?(t=Ut(n,e.mode,i,r),t.return=e,t):(t=o(t,n,i),t.return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return t=jt(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case zr:return n=Ft(t,e.mode,n),n.ref=mn(e,null,t),n.return=e,n;case Gr:return t=Bt(t,e.mode,n),t.return=e,t}if(Ba(t)||oe(t))return t=Ut(t,e.mode,n,null),t.return=e,t;vn(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:u(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case zr:return n.key===r?n.type===Vr?h(e,t,n.props.children,i,r):l(e,t,n,i):null;case Gr:return n.key===r?c(e,t,n,i):null}if(Ba(n)||oe(n))return null!==r?null:h(e,t,n,i,null);vn(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return e=e.get(n)||null,u(t,e,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case zr:return e=e.get(null===i.key?n:i.key)||null,i.type===Vr?h(t,e,i.props.children,r,i.key):l(t,e,i,r);case Gr:return e=e.get(null===i.key?n:i.key)||null,c(t,e,i,r)}if(Ba(i)||oe(i))return e=e.get(n)||null,h(t,e,i,r,null);vn(t,i)}return null}function m(i,o,s,u){for(var l=null,c=null,h=o,m=o=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=d(i,h,s[m],u);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(i,h),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(i,h),l;if(null===h){for(;m<s.length;m++)(h=f(i,s[m],u))&&(o=a(h,o,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);m<s.length;m++)(v=p(h,i,m,s[m],u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v);return e&&h.forEach(function(e){return t(i,e)}),l}function v(o,s,u,l){var c=oe(u);"function"!==typeof c&&i("150"),null==(u=c.call(u))&&i("151");for(var h=c=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=d(o,m,y.value,l);if(null===b){m||(m=g);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,v),null===h?c=b:h.sibling=b,h=b,m=g}if(y.done)return n(o,m),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=f(o,y.value,l))&&(s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return c}for(m=r(o,m);!y.done;v++,y=u.next())null!==(y=p(m,o,v,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(o,e)}),c}return function(e,r,a,u){var l="object"===typeof a&&null!==a&&a.type===Vr&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case zr:e:{for(c=a.key,l=r;null!==l;){if(l.key===c){if(10===l.tag?a.type===Vr:l.type===a.type){n(e,l.sibling),r=o(l,a.type===Vr?a.props.children:a.props,u),r.ref=mn(e,l,a),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===Vr?(r=Ut(a.props.children,e.mode,u,a.key),r.return=e,e=r):(u=Ft(a,e.mode,u),u.ref=mn(e,r,a),u.return=e,e=u)}return s(e);case Gr:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),r=o(r,a.children||[],u),r.return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}r=Bt(a,e.mode,u),r.return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),r=o(r,a,u),r.return=e,e=r):(n(e,r),r=jt(a,e.mode,u),r.return=e,e=r),s(e);if(Ba(a))return m(e,r,a,u);if(oe(a))return v(e,r,a,u);if(c&&vn(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 2:case 1:u=e.type,i("152",u.displayName||u.name||"Component")}return n(e,r)}}function yn(e,t){var n=new Nt(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function bn(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function _n(e){if(Ha){var t=Wa;if(t){var n=t;if(!bn(e,t)){if(!(t=wt(n))||!bn(e,t))return e.effectTag|=2,Ha=!1,void(Va=e);yn(Va,n)}Va=e,Wa=xt(t)}else e.effectTag|=2,Ha=!1,Va=e}}function wn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Va=e}function xn(e){if(e!==Va)return!1;if(!Ha)return wn(e),Ha=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!_t(t,e.memoizedProps))for(t=Wa;t;)yn(e,t),t=wt(t);return wn(e),Wa=Va?wt(e.stateNode):null,!0}function Mn(){Wa=Va=null,Ha=!1}function Sn(e,t,n){En(e,t,n,t.expirationTime)}function En(e,t,n,i){t.child=null===e?Ga(t,null,n,i):za(t,e.child,n,i)}function Tn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function An(e,t,n,i,r){Tn(e,t);var o=0!==(64&t.effectTag);if(!n&&!o)return i&&Rt(t,!1),Ln(e,t);n=t.stateNode,jr.current=t;var a=o?null:n.render();return t.effectTag|=1,o&&(En(e,t,null,r),t.child=null),En(e,t,a,r),t.memoizedState=n.state,t.memoizedProps=n.props,i&&Rt(t,!0),t.child}function Cn(e){var t=e.stateNode;t.pendingContext?Lt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lt(e,t.context,!1),un(e,t.containerInfo)}function Pn(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){switch(r.tag){case 12:var o=0|r.stateNode;if(r.type===t&&0!==(o&n)){for(o=r;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>i)o.expirationTime=i,null!==a&&(0===a.expirationTime||a.expirationTime>i)&&(a.expirationTime=i);else{if(null===a||!(0===a.expirationTime||a.expirationTime>i))break;a.expirationTime=i}o=o.return}o=null}else o=r.child;break;case 13:o=r.type===e.type?null:r.child;break;default:o=r.child}if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function On(e,t,n){var i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=!0;if(Aa.current)a=!1;else if(o===r)return t.stateNode=0,on(t),Ln(e,t);var s=r.value;if(t.memoizedProps=r,null===o)s=1073741823;else if(o.value===r.value){if(o.children===r.children&&a)return t.stateNode=0,on(t),Ln(e,t);s=0}else{var u=o.value;if(u===s&&(0!==u||1/u===1/s)||u!==u&&s!==s){if(o.children===r.children&&a)return t.stateNode=0,on(t),Ln(e,t);s=0}else if(s="function"===typeof i._calculateChangedBits?i._calculateChangedBits(u,s):1073741823,0===(s|=0)){if(o.children===r.children&&a)return t.stateNode=0,on(t),Ln(e,t)}else Pn(t,i,s,n)}return t.stateNode=s,on(t),Sn(e,t,r.children),t.child}function Ln(e,t){if(null!==e&&t.child!==e.child&&i("153"),null!==t.child){e=t.child;var n=Dt(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Dt(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function kn(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:Cn(t);break;case 2:It(t);break;case 4:un(t,t.stateNode.containerInfo);break;case 13:on(t)}return null}switch(t.tag){case 0:null!==e&&i("155");var r=t.type,o=t.pendingProps,a=Tt(t);return a=At(t,a),r=r(o,a),t.effectTag|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(a=t.type,t.tag=2,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,a=a.getDerivedStateFromProps,"function"===typeof a&&hn(t,a,o),o=It(t),r.updater=ja,t.stateNode=r,r._reactInternalFiber=t,pn(t,n),e=An(e,t,!0,o,n)):(t.tag=1,Sn(e,t,r),t.memoizedProps=o,e=t.child),e;case 1:return o=t.type,n=t.pendingProps,Aa.current||t.memoizedProps!==n?(r=Tt(t),r=At(t,r),o=o(n,r),t.effectTag|=1,Sn(e,t,o),t.memoizedProps=n,e=t.child):e=Ln(e,t),e;case 2:if(o=It(t),null===e)if(null===t.stateNode){var s=t.pendingProps,u=t.type;r=Tt(t);var l=2===t.tag&&null!=t.type.contextTypes;a=l?At(t,r):Gi,s=new u(s,a),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ja,t.stateNode=s,s._reactInternalFiber=t,l&&(l=t.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=r,l.__reactInternalMemoizedMaskedChildContext=a),pn(t,n),r=!0}else{u=t.type,r=t.stateNode,l=t.memoizedProps,a=t.pendingProps,r.props=l;var c=r.context;s=Tt(t),s=At(t,s);var h=u.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(l!==a||c!==s)&&dn(t,r,a,s),La=!1;var f=t.memoizedState;c=r.state=f;var d=t.updateQueue;null!==d&&(en(t,d,a,r,n),c=t.memoizedState),l!==a||f!==c||Aa.current||La?("function"===typeof h&&(hn(t,h,a),c=t.memoizedState),(l=La||fn(t,l,a,f,c,s))?(u||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.effectTag|=4)):("function"===typeof r.componentDidMount&&(t.effectTag|=4),t.memoizedProps=a,t.memoizedState=c),r.props=a,r.state=c,r.context=s,r=l):("function"===typeof r.componentDidMount&&(t.effectTag|=4),r=!1)}else u=t.type,r=t.stateNode,a=t.memoizedProps,l=t.pendingProps,r.props=a,c=r.context,s=Tt(t),s=At(t,s),h=u.getDerivedStateFromProps,(u="function"===typeof h||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==l||c!==s)&&dn(t,r,l,s),La=!1,c=t.memoizedState,f=r.state=c,d=t.updateQueue,null!==d&&(en(t,d,l,r,n),f=t.memoizedState),a!==l||c!==f||Aa.current||La?("function"===typeof h&&(hn(t,h,l),f=t.memoizedState),(h=La||fn(t,a,l,c,f,s))?(u||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(l,f,s),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(l,f,s)),"function"===typeof r.componentDidUpdate&&(t.effectTag|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=l,t.memoizedState=f),r.props=l,r.state=f,r.context=s,r=h):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),r=!1);return An(e,t,r,o,n);case 3:return Cn(t),o=t.updateQueue,null!==o?(r=t.memoizedState,r=null!==r?r.element:null,en(t,o,t.pendingProps,null,n),(o=t.memoizedState.element)===r?(Mn(),e=Ln(e,t)):(r=t.stateNode,(r=(null===e||null===e.child)&&r.hydrate)&&(Wa=xt(t.stateNode.containerInfo),Va=t,r=Ha=!0),r?(t.effectTag|=2,t.child=Ga(t,null,o,n)):(Mn(),Sn(e,t,o)),e=t.child)):(Mn(),e=Ln(e,t)),e;case 5:return sn(Ua.current),o=sn(Da.current),r=at(o,t.type),o!==r&&(Et(Fa,t,t),Et(Da,r,t)),null===e&&_n(t),o=t.type,l=t.memoizedProps,r=t.pendingProps,a=null!==e?e.memoizedProps:null,Aa.current||l!==r||((l=1&t.mode&&!!r.hidden)&&(t.expirationTime=1073741823),l&&1073741823===n)?(l=r.children,_t(o,r)?l=null:a&&_t(o,a)&&(t.effectTag|=16),Tn(e,t),1073741823!==n&&1&t.mode&&r.hidden?(t.expirationTime=1073741823,t.memoizedProps=r,e=null):(Sn(e,t,l),t.memoizedProps=r,e=t.child)):e=Ln(e,t),e;case 6:return null===e&&_n(t),t.memoizedProps=t.pendingProps,null;case 16:return null;case 4:return un(t,t.stateNode.containerInfo),o=t.pendingProps,Aa.current||t.memoizedProps!==o?(null===e?t.child=za(t,null,o,n):Sn(e,t,o),t.memoizedProps=o,e=t.child):e=Ln(e,t),e;case 14:return o=t.type.render,n=t.pendingProps,r=t.ref,Aa.current||t.memoizedProps!==n||r!==(null!==e?e.ref:null)?(o=o(n,r),Sn(e,t,o),t.memoizedProps=n,e=t.child):e=Ln(e,t),e;case 10:return n=t.pendingProps,Aa.current||t.memoizedProps!==n?(Sn(e,t,n),t.memoizedProps=n,e=t.child):e=Ln(e,t),e;case 11:return n=t.pendingProps.children,Aa.current||null!==n&&t.memoizedProps!==n?(Sn(e,t,n),t.memoizedProps=n,e=t.child):e=Ln(e,t),e;case 15:return n=t.pendingProps,t.memoizedProps===n?e=Ln(e,t):(Sn(e,t,n.children),t.memoizedProps=n,e=t.child),e;case 13:return On(e,t,n);case 12:e:if(r=t.type,a=t.pendingProps,l=t.memoizedProps,o=r._currentValue,s=r._changedBits,Aa.current||0!==s||l!==a){if(t.memoizedProps=a,u=a.unstable_observedBits,void 0!==u&&null!==u||(u=1073741823),t.stateNode=u,0!==(s&u))Pn(t,r,s,n);else if(l===a){e=Ln(e,t);break e}n=a.children,n=n(o),t.effectTag|=1,Sn(e,t,n),e=t.child}else e=Ln(e,t);return e;default:i("156")}}function In(e){e.effectTag|=4}function Rn(e,t){var n=t.pendingProps;switch(t.tag){case 1:return null;case 2:return Pt(t),null;case 3:ln(t),Ot(t);var r=t.stateNode;return r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(xn(t),t.effectTag&=-3),qa(t),null;case 5:cn(t),r=sn(Ua.current);var o=t.type;if(null!==e&&null!=t.stateNode){var a=e.memoizedProps,s=t.stateNode,u=sn(Da.current);s=mt(s,o,a,n,r),Xa(e,t,s,o,a,n,r,u),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!n)return null===t.stateNode&&i("166"),null;if(e=sn(Da.current),xn(t))n=t.stateNode,o=t.type,a=t.memoizedProps,n[rr]=t,n[or]=a,r=gt(n,o,a,e,r),t.updateQueue=r,null!==r&&In(t);else{e=ft(o,n,r,e),e[rr]=t,e[or]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}pt(e,o,n,r),bt(o,n)&&In(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ya(e,t,e.memoizedProps,n);else{if("string"!==typeof n)return null===t.stateNode&&i("166"),null;r=sn(Ua.current),sn(Da.current),xn(t)?(r=t.stateNode,n=t.memoizedProps,r[rr]=t,yt(r,n)&&In(t)):(r=dt(n,r),r[rr]=t,t.stateNode=r)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return ln(t),qa(t),null;case 13:return an(t),null;case 12:return null;case 0:i("167");default:i("156")}}function Nn(e,t){var n=t.source;null===t.stack&&null!==n&&se(n),null!==n&&ae(n),t=t.value,null!==e&&2===e.tag&&ae(e);try{t&&t.suppressReactErrorLogging}catch(e){e&&e.suppressReactErrorLogging}}function Dn(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(t){Zn(e,t)}else t.current=null}function Fn(e){switch("function"===typeof Ht&&Ht(e),e.tag){case 2:Dn(e);var t=e.stateNode;if("function"===typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Zn(e,t)}break;case 5:Dn(e);break;case 4:Bn(e)}}function Un(e){return 5===e.tag||3===e.tag||4===e.tag}function jn(e){e:{for(var t=e.return;null!==t;){if(Un(t)){var n=t;break e}t=t.return}i("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:i("161")}16&n.effectTag&&(st(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Un(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(n)if(r){var a=t,s=o.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(s,u):a.insertBefore(s,u)}else t.insertBefore(o.stateNode,n);else r?(a=t,s=o.stateNode,8===a.nodeType?a.parentNode.insertBefore(s,a):a.appendChild(s)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function Bn(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&i("160"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(Fn(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=r,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag?r=t.stateNode.containerInfo:Fn(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function zn(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&(n[or]=r,vt(n,a,o,e,r))}break;case 6:null===t.stateNode&&i("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 15:case 16:break;default:i("163")}}function Gn(e,t,n){n=Yt(n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){pi(i),Nn(e,t)},n}function Vn(e,t,n){n=Yt(n),n.tag=3;var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){null===ls?ls=new Set([this]):ls.add(this);var n=t.value,i=t.stack;Nn(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function Wn(e,t,n,i,r,o){n.effectTag|=512,n.firstEffect=n.lastEffect=null,i=rn(i,n),e=t;do{switch(e.tag){case 3:return e.effectTag|=1024,i=Gn(e,i,o),void Jt(e,i,o);case 2:if(t=i,n=e.stateNode,0===(64&e.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&(null===ls||!ls.has(n)))return e.effectTag|=1024,i=Vn(e,t,o),void Jt(e,i,o)}e=e.return}while(null!==e)}function Hn(e){switch(e.tag){case 2:Pt(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return ln(e),Ot(e),t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 5:return cn(e),null;case 16:return t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 4:return ln(e),null;case 13:return an(e),null;default:return null}}function qn(){if(null!==ts)for(var e=ts.return;null!==e;){var t=e;switch(t.tag){case 2:Pt(t);break;case 3:ln(t),Ot(t);break;case 5:cn(t);break;case 4:ln(t);break;case 13:an(t)}e=e.return}ns=null,is=0,rs=-1,os=!1,ts=null,us=!1}function Xn(e){for(;;){var t=e.alternate,n=e.return,i=e.sibling;if(0===(512&e.effectTag)){t=Rn(t,e,is);var r=e;if(1073741823===is||1073741823!==r.expirationTime){var o=0;switch(r.tag){case 3:case 2:var a=r.updateQueue;null!==a&&(o=a.expirationTime)}for(a=r.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;r.expirationTime=o}if(null!==t)return t;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==i)return i;if(null===n){us=!0;break}e=n}else{if(null!==(e=Hn(e,os,is)))return e.effectTag&=511,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==i)return i;if(null===n)break;e=n}}return null}function Yn(e){var t=kn(e.alternate,e,is);return null===t&&(t=Xn(e)),jr.current=null,t}function Kn(e,t,n){es&&i("243"),es=!0,t===is&&e===ns&&null!==ts||(qn(),ns=e,is=t,rs=-1,ts=Dt(ns.current,null,is),e.pendingCommitExpirationTime=0);var r=!1;for(os=!n||is<=Za;;){try{if(n)for(;null!==ts&&!di();)ts=Yn(ts);else for(;null!==ts;)ts=Yn(ts)}catch(t){if(null===ts)r=!0,pi(t);else{null===ts&&i("271"),n=ts;var o=n.return;if(null===o){r=!0,pi(t);break}Wn(e,o,n,t,os,is,Ja),ts=Xn(n)}}break}if(es=!1,r)return null;if(null===ts){if(us)return e.pendingCommitExpirationTime=t,e.current.alternate;os&&i("262"),0<=rs&&setTimeout(function(){var t=e.current.expirationTime;0!==t&&(0===e.remainingExpirationTime||e.remainingExpirationTime<t)&&ri(e,t)},rs),mi(e.current.expirationTime)}return null}function Zn(e,t){var n;e:{for(es&&!ss&&i("263"),n=e.return;null!==n;){switch(n.tag){case 2:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof r.componentDidCatch&&(null===ls||!ls.has(r))){e=rn(t,e),e=Vn(n,e,1),Zt(n,e,1),$n(n,1),n=void 0;break e}break;case 3:e=rn(t,e),e=Gn(n,e,1),Zt(n,e,1),$n(n,1),n=void 0;break e}n=n.return}3===e.tag&&(n=rn(t,e),n=Gn(e,n,1),Zt(e,n,1),$n(e,1)),n=void 0}return n}function Jn(){var e=2+25*(1+((ei()-2+500)/25|0));return e<=Qa&&(e=Qa+1),Qa=e}function Qn(e,t){return e=0!==$a?$a:es?ss?1:is:1&t.mode?Ss?2+10*(1+((e-2+15)/10|0)):2+25*(1+((e-2+500)/25|0)):1,Ss&&(0===gs||e>gs)&&(gs=e),e}function $n(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!es&&0!==is&&t<is&&qn();var r=n.current.expirationTime;es&&!ss&&ns===n||ri(n,r),As>Ts&&i("185")}e=e.return}}function ei(){return Ja=wa()-Ka,Za=2+(Ja/10|0)}function ti(e){var t=$a;$a=2+25*(1+((ei()-2+500)/25|0));try{return e()}finally{$a=t}}function ni(e,t,n,i,r){var o=$a;$a=1;try{return e(t,n,i,r)}finally{$a=o}}function ii(e){if(0!==fs){if(e>fs)return;null!==ds&&Ma(ds)}var t=wa()-Ka;fs=e,ds=xa(ai,{timeout:10*(e-2)-t})}function ri(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===hs?(cs=hs=e,e.nextScheduledRoot=e):(hs=hs.nextScheduledRoot=e,hs.nextScheduledRoot=cs);else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}ps||(xs?Ms&&(ms=e,vs=1,hi(e,1,!1)):1===t?si():ii(t))}function oi(){var e=0,t=null;if(null!==hs)for(var n=hs,r=cs;null!==r;){var o=r.remainingExpirationTime;if(0===o){if((null===n||null===hs)&&i("244"),r===r.nextScheduledRoot){cs=hs=r.nextScheduledRoot=null;break}if(r===cs)cs=o=r.nextScheduledRoot,hs.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===hs){hs=n,hs.nextScheduledRoot=cs,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||o<e)&&(e=o,t=r),r===hs)break;n=r,r=r.nextScheduledRoot}}n=ms,null!==n&&n===t&&1===e?As++:As=0,ms=t,vs=e}function ai(e){ui(0,!0,e)}function si(){ui(1,!1,null)}function ui(e,t,n){if(ws=n,oi(),t)for(;null!==ms&&0!==vs&&(0===e||e>=vs)&&(!ys||ei()>=vs);)ei(),hi(ms,vs,!ys),oi();else for(;null!==ms&&0!==vs&&(0===e||e>=vs);)hi(ms,vs,!1),oi();null!==ws&&(fs=0,ds=null),0!==vs&&ii(vs),ws=null,ys=!1,ci()}function li(e,t){ps&&i("253"),ms=e,vs=t,hi(e,t,!1),si(),ci()}function ci(){if(As=0,null!==Es){var e=Es;Es=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){bs||(bs=!0,_s=e)}}}if(bs)throw e=_s,_s=null,bs=!1,e}function hi(e,t,n){ps&&i("245"),ps=!0,n?(n=e.finishedWork,null!==n?fi(e,n,t):null!==(n=Kn(e,t,!0))&&(di()?e.finishedWork=n:fi(e,n,t))):(n=e.finishedWork,null!==n?fi(e,n,t):null!==(n=Kn(e,t,!1))&&fi(e,n,t)),ps=!1}function fi(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Es?Es=[r]:Es.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);if(e.finishedWork=null,ss=es=!0,n=t.stateNode,n.current===t&&i("177"),r=n.pendingCommitExpirationTime,0===r&&i("261"),n.pendingCommitExpirationTime=0,ei(),jr.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var o=t.firstEffect}else o=t;else o=t.firstEffect;ba=Lo;var a=ji();if(Ke(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else e:{var u=window.getSelection&&window.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var l=u.anchorOffset,c=u.focusNode;u=u.focusOffset;try{s.nodeType,c.nodeType}catch(e){s=null;break e}var h=0,f=-1,d=-1,p=0,m=0,v=a,g=null;t:for(;;){for(var y;v!==s||0!==l&&3!==v.nodeType||(f=h+l),v!==c||0!==u&&3!==v.nodeType||(d=h+u),3===v.nodeType&&(h+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===a)break t;if(g===s&&++p===l&&(f=h),g===c&&++m===u&&(d=h),null!==(y=v.nextSibling))break;v=g,g=v.parentNode}v=y}s=-1===f||-1===d?null:{start:f,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(_a={focusedElem:a,selectionRange:s},ze(!1),as=o;null!==as;){a=!1,s=void 0;try{for(;null!==as;){if(256&as.effectTag){var b=as.alternate;switch(l=as,l.tag){case 2:if(256&l.effectTag&&null!==b){var _=b.memoizedProps,w=b.memoizedState,x=l.stateNode;x.props=l.memoizedProps,x.state=l.memoizedState;var M=x.getSnapshotBeforeUpdate(_,w);x.__reactInternalSnapshotBeforeUpdate=M}break;case 3:case 5:case 6:case 4:break;default:i("163")}}as=as.nextEffect}}catch(e){a=!0,s=e}a&&(null===as&&i("178"),Zn(as,s),null!==as&&(as=as.nextEffect))}for(as=o;null!==as;){b=!1,_=void 0;try{for(;null!==as;){var S=as.effectTag;if(16&S&&st(as.stateNode,""),128&S){var E=as.alternate;if(null!==E){var T=E.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(14&S){case 2:jn(as),as.effectTag&=-3;break;case 6:jn(as),as.effectTag&=-3,zn(as.alternate,as);break;case 4:zn(as.alternate,as);break;case 8:w=as,Bn(w),w.return=null,w.child=null,w.alternate&&(w.alternate.child=null,w.alternate.return=null)}as=as.nextEffect}}catch(e){b=!0,_=e}b&&(null===as&&i("178"),Zn(as,_),null!==as&&(as=as.nextEffect))}if(T=_a,E=ji(),S=T.focusedElem,b=T.selectionRange,E!==S&&zi(document.documentElement,S)){null!==b&&Ke(S)&&(E=b.start,T=b.end,void 0===T&&(T=E),"selectionStart"in S?(S.selectionStart=E,S.selectionEnd=Math.min(T,S.value.length)):window.getSelection&&(E=window.getSelection(),_=S[I()].length,T=Math.min(b.start,_),b=void 0===b.end?T:Math.min(b.end,_),!E.extend&&T>b&&(_=b,b=T,T=_),_=Ye(S,T),w=Ye(S,b),_&&w&&(1!==E.rangeCount||E.anchorNode!==_.node||E.anchorOffset!==_.offset||E.focusNode!==w.node||E.focusOffset!==w.offset)&&(x=document.createRange(),x.setStart(_.node,_.offset),E.removeAllRanges(),T>b?(E.addRange(x),E.extend(w.node,w.offset)):(x.setEnd(w.node,w.offset),E.addRange(x))))),E=[];for(T=S;T=T.parentNode;)1===T.nodeType&&E.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof S.focus&&S.focus(),S=0;S<E.length;S++)T=E[S],T.element.scrollLeft=T.left,T.element.scrollTop=T.top}for(_a=null,ze(ba),ba=null,n.current=t,as=o;null!==as;){o=!1,S=void 0;try{for(E=r;null!==as;){var A=as.effectTag;if(36&A){var C=as.alternate;switch(T=as,b=E,T.tag){case 2:var P=T.stateNode;if(4&T.effectTag)if(null===C)P.props=T.memoizedProps,P.state=T.memoizedState,P.componentDidMount();else{var O=C.memoizedProps,L=C.memoizedState;P.props=T.memoizedProps,P.state=T.memoizedState,P.componentDidUpdate(O,L,P.__reactInternalSnapshotBeforeUpdate)}var k=T.updateQueue;null!==k&&(P.props=T.memoizedProps,P.state=T.memoizedState,nn(T,k,P,b));break;case 3:var R=T.updateQueue;if(null!==R){if(_=null,null!==T.child)switch(T.child.tag){case 5:_=T.child.stateNode;break;case 2:_=T.child.stateNode}nn(T,R,_,b)}break;case 5:var N=T.stateNode;null===C&&4&T.effectTag&&bt(T.type,T.memoizedProps)&&N.focus();break;case 6:case 4:case 15:case 16:break;default:i("163")}}if(128&A){T=void 0;var D=as.ref;if(null!==D){var F=as.stateNode;switch(as.tag){case 5:T=F;break;default:T=F}"function"===typeof D?D(T):D.current=T}}var U=as.nextEffect;as.nextEffect=null,as=U}}catch(e){o=!0,S=e}o&&(null===as&&i("178"),Zn(as,S),null!==as&&(as=as.nextEffect))}es=ss=!1,"function"===typeof Wt&&Wt(t.stateNode),t=n.current.expirationTime,0===t&&(ls=null),e.remainingExpirationTime=t}function di(){return!(null===ws||ws.timeRemaining()>Cs)&&(ys=!0)}function pi(e){null===ms&&i("246"),ms.remainingExpirationTime=0,bs||(bs=!0,_s=e)}function mi(e){null===ms&&i("246"),ms.remainingExpirationTime=e}function vi(e,t){var n=xs;xs=!0;try{return e(t)}finally{(xs=n)||ps||si()}}function gi(e,t){if(xs&&!Ms){Ms=!0;try{return e(t)}finally{Ms=!1}}return e(t)}function yi(e,t){ps&&i("187");var n=xs;xs=!0;try{return ni(e,t)}finally{xs=n,si()}}function bi(e,t,n){if(Ss)return e(t,n);xs||ps||0===gs||(ui(gs,!1,null),gs=0);var i=Ss,r=xs;xs=Ss=!0;try{return e(t,n)}finally{Ss=i,(xs=r)||ps||si()}}function _i(e){var t=xs;xs=!0;try{ni(e)}finally{(xs=t)||ps||ui(1,!1,null)}}function wi(e,t,n,r,o){var a=t.current;if(n){n=n._reactInternalFiber;var s;e:{for(2===Ie(n)&&2===n.tag||i("170"),s=n;3!==s.tag;){if(Ct(s)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}(s=s.return)||i("171")}s=s.stateNode.context}n=Ct(n)?kt(n,s):s}else n=Gi;return null===t.context?t.context=n:t.pendingContext=n,t=o,o=Yt(r),o.payload={element:e},t=void 0===t?null:t,null!==t&&(o.callback=t),Zt(a,o,r),$n(a,r),r}function xi(e){var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?i("188"):i("268",Object.keys(e))),e=De(t),null===e?null:e.stateNode}function Mi(e,t,n,i){var r=t.current;return r=Qn(ei(),r),wi(e,t,n,r,i)}function Si(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ei(e){var t=e.findFiberByHostInstance;return Vt(Fi({},e,{findHostInstanceByFiber:function(e){return e=De(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}function Ti(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Gr,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Ai(e){this._expirationTime=Jn(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ci(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Pi(e,t,n){this._internalRoot=zt(e,t,n)}function Oi(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Li(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Pi(e,!1,t)}function ki(e,t,n,r,o){Oi(n)||i("200");var a=n._reactRootContainer;if(a){if("function"===typeof o){var s=o;o=function(){var e=Si(a._internalRoot);s.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,o):a.render(t,o)}else{if(a=n._reactRootContainer=Li(n,r),"function"===typeof o){var u=o;o=function(){var e=Si(a._internalRoot);u.call(e)}}gi(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,o):a.render(t,o)})}return Si(a._internalRoot)}function Ii(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Oi(t)||i("200"),Ti(e,t,null,n)}var Ri=n(56),Ni=n(0),Di=n(172),Fi=n(54),Ui=n(57),ji=n(173),Bi=n(174),zi=n(175),Gi=n(77);Ni||i("227");var Vi={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,i,o,a,s,u,l){r.apply(Vi,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,i,r,o,a,s,u){if(Vi.invokeGuardedCallback.apply(this,arguments),Vi.hasCaughtError()){var l=Vi.clearCaughtError();Vi._hasRethrowError||(Vi._hasRethrowError=!0,Vi._rethrowError=l)}},rethrowCaughtError:function(){return o.apply(Vi,arguments)},hasCaughtError:function(){return Vi._hasCaughtError},clearCaughtError:function(){if(Vi._hasCaughtError){var e=Vi._caughtError;return Vi._caughtError=null,Vi._hasCaughtError=!1,e}i("198")}},Wi=null,Hi={},qi=[],Xi={},Yi={},Ki={},Zi={plugins:qi,eventNameDispatchConfigs:Xi,registrationNameModules:Yi,registrationNameDependencies:Ki,possibleRegistrationNames:null,injectEventPluginOrder:u,injectEventPluginsByName:l},Ji=null,Qi=null,$i=null,er=null,tr={injectEventPluginOrder:u,injectEventPluginsByName:l},nr={injection:tr,getListener:v,runEventsInBatch:g,runExtractedEventsInBatch:y},ir=Math.random().toString(36).slice(2),rr="__reactInternalInstance$"+ir,or="__reactEventHandlers$"+ir,ar={precacheFiberNode:function(e,t){t[rr]=e},getClosestInstanceFromNode:b,getInstanceFromNode:function(e){return e=e[rr],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:_,getFiberCurrentPropsFromNode:w,updateFiberProps:function(e,t){e[or]=t}},sr={accumulateTwoPhaseDispatches:P,accumulateTwoPhaseDispatchesSkipTarget:function(e){f(e,T)},accumulateEnterLeaveDispatches:O,accumulateDirectDispatches:function(e){f(e,C)}},ur={animationend:L("Animation","AnimationEnd"),animationiteration:L("Animation","AnimationIteration"),animationstart:L("Animation","AnimationStart"),transitionend:L("Transition","TransitionEnd")},lr={},cr={};Di.canUseDOM&&(cr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var hr=k("animationend"),fr=k("animationiteration"),dr=k("animationstart"),pr=k("transitionend"),mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vr=null,gr={_root:null,_startText:null,_fallbackText:null},yr="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),br={type:null,target:null,currentTarget:Ui.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Fi(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ui.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ui.thatReturnsTrue)},persist:function(){this.isPersistent=Ui.thatReturnsTrue},isPersistent:Ui.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<yr.length;t++)this[yr[t]]=null}}),D.Interface=br,D.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var r=new t;return Fi(r,n.prototype),n.prototype=r,n.prototype.constructor=n,n.Interface=Fi({},i.Interface,e),n.extend=i.extend,j(n),n},j(D);var _r=D.extend({data:null}),wr=D.extend({data:null}),xr=[9,13,27,32],Mr=Di.canUseDOM&&"CompositionEvent"in window,Sr=null;Di.canUseDOM&&"documentMode"in document&&(Sr=document.documentMode);var Er=Di.canUseDOM&&"TextEvent"in window&&!Sr,Tr=Di.canUseDOM&&(!Mr||Sr&&8<Sr&&11>=Sr),Ar=String.fromCharCode(32),Cr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Pr=!1,Or=!1,Lr={eventTypes:Cr,extractEvents:function(e,t,n,i){var r=void 0,o=void 0;if(Mr)e:{switch(e){case"compositionstart":r=Cr.compositionStart;break e;case"compositionend":r=Cr.compositionEnd;break e;case"compositionupdate":r=Cr.compositionUpdate;break e}r=void 0}else Or?B(e,n)&&(r=Cr.compositionEnd):"keydown"===e&&229===n.keyCode&&(r=Cr.compositionStart);return r?(Tr&&(Or||r!==Cr.compositionStart?r===Cr.compositionEnd&&Or&&(o=R()):(gr._root=i,gr._startText=N(),Or=!0)),r=_r.getPooled(r,t,n,i),o?r.data=o:null!==(o=z(n))&&(r.data=o),P(r),o=r):o=null,(e=Er?G(e,n):V(e,n))?(t=wr.getPooled(Cr.beforeInput,t,n,i),t.data=e,P(t)):t=null,null===o?t:null===t?o:[o,t]}},kr=null,Ir={injectFiberControlledHostComponent:function(e){kr=e}},Rr=null,Nr=null,Dr={injection:Ir,enqueueStateRestore:H,needsStateRestore:q,restoreStateIfNeeded:X},Fr=!1,Ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},jr=Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Br="function"===typeof Symbol&&Symbol.for,zr=Br?Symbol.for("react.element"):60103,Gr=Br?Symbol.for("react.portal"):60106,Vr=Br?Symbol.for("react.fragment"):60107,Wr=Br?Symbol.for("react.strict_mode"):60108,Hr=Br?Symbol.for("react.profiler"):60114,qr=Br?Symbol.for("react.provider"):60109,Xr=Br?Symbol.for("react.context"):60110,Yr=Br?Symbol.for("react.async_mode"):60111,Kr=Br?Symbol.for("react.forward_ref"):60112,Zr=Br?Symbol.for("react.timeout"):60113,Jr="function"===typeof Symbol&&Symbol.iterator,Qr=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$r={},eo={},to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new he(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new he(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new he(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){to[e]=new he(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new he(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){to[e]=new he(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){to[e]=new he(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){to[e]=new he(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){to[e]=new he(e,5,!1,e.toLowerCase(),null)});var no=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(no,fe);to[t]=new he(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(no,fe);to[t]=new he(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(no,fe);to[t]=new he(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),to.tabIndex=new he("tabIndex",1,!1,"tabindex",null);var io={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},ro=null,oo=null,ao=!1;Di.canUseDOM&&(ao=ee("input")&&(!document.documentMode||9<document.documentMode));var so={eventTypes:io,_isInputEventSupported:ao,extractEvents:function(e,t,n,i){var r=t?_(t):window,o=void 0,a=void 0,s=r.nodeName&&r.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===r.type?o=Se:Q(r)?ao?o=Oe:(o=Ce,a=Ae):(s=r.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=Pe),o&&(o=o(e,t)))return we(o,n,i);a&&a(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&be(r,"number",r.value)}},uo=D.extend({view:null,detail:null}),lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},co=uo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ke,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),ho=co.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),fo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},po={eventTypes:fo,extractEvents:function(e,t,n,i){var r="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(r&&(n.relatedTarget||n.fromElement)||!o&&!r)return null;if(r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?b(t):null):o=null,o===t)return null;var a=void 0,s=void 0,u=void 0,l=void 0;return"mouseout"===e||"mouseover"===e?(a=co,s=fo.mouseLeave,u=fo.mouseEnter,l="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=ho,s=fo.pointerLeave,u=fo.pointerEnter,l="pointer"),e=null==o?r:_(o),r=null==t?r:_(t),s=a.getPooled(s,o,n,i),s.type=l+"leave",s.target=e,s.relatedTarget=r,n=a.getPooled(u,t,n,i),n.type=l+"enter",n.target=r,n.relatedTarget=e,O(s,n,o,t),[s,n]}},mo=D.extend({animationName:null,elapsedTime:null,pseudoElement:null}),vo=D.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),go=uo.extend({relatedTarget:null}),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_o=uo.extend({key:function(e){if(e.key){var t=yo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ue(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?bo[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ke,charCode:function(e){return"keypress"===e.type?Ue(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ue(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),wo=co.extend({dataTransfer:null}),xo=uo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ke}),Mo=D.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),So=co.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Eo=[["abort","abort"],[hr,"animationEnd"],[fr,"animationIteration"],[dr,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[pr,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],To={},Ao={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){je(e,!0)}),Eo.forEach(function(e){je(e,!1)});var Co={eventTypes:To,isInteractiveTopLevelEventType:function(e){return void 0!==(e=Ao[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,i){var r=Ao[e];if(!r)return null;switch(e){case"keypress":if(0===Ue(n))return null;case"keydown":case"keyup":e=_o;break;case"blur":case"focus":e=go;break;case"click":if(2===n.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=xo;break;case hr:case fr:case dr:e=mo;break;case pr:e=Mo;break;case"scroll":e=uo;break;case"wheel":e=So;break;case"copy":case"cut":case"paste":e=vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=ho;break;default:e=D}return t=e.getPooled(r,t,n,i),P(t),t}},Po=Co.isInteractiveTopLevelEventType,Oo=[],Lo=!0,ko={get _enabled(){return Lo},setEnabled:ze,isEnabled:function(){return Lo},trapBubbledEvent:Ge,trapCapturedEvent:Ve,dispatchEvent:He},Io={},Ro=0,No="_reactListenersID"+(""+Math.random()).slice(2),Do=Di.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Fo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Uo=null,jo=null,Bo=null,zo=!1,Go={eventTypes:Fo,extractEvents:function(e,t,n,i){var r,o=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!o)){e:{o=qe(o),r=Ki.onSelect;for(var a=0;a<r.length;a++){var s=r[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}r=!o}if(r)return null;switch(o=t?_(t):window,e){case"focus":(Q(o)||"true"===o.contentEditable)&&(Uo=o,jo=t,Bo=null);break;case"blur":Bo=jo=Uo=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":return zo=!1,Ze(n,i);case"selectionchange":if(Do)break;case"keydown":case"keyup":return Ze(n,i)}return null}};tr.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Ji=ar.getFiberCurrentPropsFromNode,Qi=ar.getInstanceFromNode,$i=ar.getNodeFromInstance,tr.injectEventPluginsByName({SimpleEventPlugin:Co,EnterLeaveEventPlugin:po,ChangeEventPlugin:so,SelectEventPlugin:Go,BeforeInputEventPlugin:Lr});var Vo="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,Wo=Date,Ho=setTimeout,qo=clearTimeout,Xo=void 0;if("object"===typeof performance&&"function"===typeof performance.now){var Yo=performance;Xo=function(){return Yo.now()}}else Xo=function(){return Wo.now()};var Ko=void 0,Zo=void 0;if(Di.canUseDOM){var Jo="function"===typeof Vo?Vo:function(){i("276")},Qo=null,$o=null,ea=-1,ta=!1,na=!1,ia=0,ra=33,oa=33,aa={didTimeout:!1,timeRemaining:function(){var e=ia-Xo();return 0<e?e:0}},sa=function(e,t){var n=e.scheduledCallback,i=!1;try{n(t),i=!0}finally{Zo(e),i||(ta=!0,window.postMessage(ua,"*"))}},ua="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===ua&&(ta=!1,null!==Qo)){if(null!==Qo){var t=Xo();if(!(-1===ea||ea>t)){e=-1;for(var n=[],i=Qo;null!==i;){var r=i.timeoutTime;-1!==r&&r<=t?n.push(i):-1!==r&&(-1===e||r<e)&&(e=r),i=i.next}if(0<n.length)for(aa.didTimeout=!0,t=0,i=n.length;t<i;t++)sa(n[t],aa);ea=e}}for(e=Xo();0<ia-e&&null!==Qo;)e=Qo,aa.didTimeout=!1,sa(e,aa),e=Xo();null===Qo||na||(na=!0,Jo(la))}},!1);var la=function(e){na=!1;var t=e-ia+oa;t<oa&&ra<oa?(8>t&&(t=8),oa=t<ra?ra:t):ra=t,ia=e+oa,ta||(ta=!0,window.postMessage(ua,"*"))};Ko=function(e,t){var n=-1;return null!=t&&"number"===typeof t.timeout&&(n=Xo()+t.timeout),(-1===ea||-1!==n&&n<ea)&&(ea=n),e={scheduledCallback:e,timeoutTime:n,prev:null,next:null},null===Qo?Qo=e:null!==(t=e.prev=$o)&&(t.next=e),$o=e,na||(na=!0,Jo(la)),e},Zo=function(e){if(null!==e.prev||Qo===e){var t=e.next,n=e.prev;e.next=null,e.prev=null,null!==t?null!==n?(n.next=t,t.prev=n):(t.prev=null,Qo=t):null!==n?(n.next=null,$o=n):$o=Qo=null}}}else{var ca=new Map;Ko=function(e){var t={scheduledCallback:e,timeoutTime:0,next:null,prev:null},n=Ho(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})});return ca.set(e,n),t},Zo=function(e){var t=ca.get(e.scheduledCallback);ca.delete(e),qo(t)}}var ha={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},fa=void 0,da=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==ha.svg||"innerHTML"in e)e.innerHTML=t;else{for(fa=fa||document.createElement("div"),fa.innerHTML="<svg>"+t+"</svg>",t=fa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ma=["Webkit","ms","Moz","O"];Object.keys(pa).forEach(function(e){ma.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pa[t]=pa[e]})});var va=Fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ga=Ui.thatReturns(""),ya={createElement:ft,createTextNode:dt,setInitialProperties:pt,diffProperties:mt,updateProperties:vt,diffHydratedProperties:gt,diffHydratedText:yt,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(ge(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=w(r);o||i("90"),re(r),ge(r,o)}}}break;case"textarea":it(e,n);break;case"select":null!=(t=n.value)&&$e(e,!!n.multiple,t,!1)}}},ba=null,_a=null,wa=Xo,xa=Ko,Ma=Zo;new Set;var Sa=[],Ea=-1,Ta=Mt(Gi),Aa=Mt(!1),Ca=Gi,Pa=null,Oa=null,La=!1,ka=Mt(null),Ia=Mt(null),Ra=Mt(0),Na={},Da=Mt(Na),Fa=Mt(Na),Ua=Mt(Na),ja={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Ie(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=ei();i=Qn(i,e);var r=Yt(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),Zt(e,r,i),$n(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=ei();i=Qn(i,e);var r=Yt(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),Zt(e,r,i),$n(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ei();n=Qn(n,e);var i=Yt(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),Zt(e,i,n),$n(e,n)}},Ba=Array.isArray,za=gn(!0),Ga=gn(!1),Va=null,Wa=null,Ha=!1,qa=void 0,Xa=void 0,Ya=void 0;qa=function(){},Xa=function(e,t,n){(t.updateQueue=n)&&In(t)},Ya=function(e,t,n,i){n!==i&&In(t)};var Ka=wa(),Za=2,Ja=Ka,Qa=0,$a=0,es=!1,ts=null,ns=null,is=0,rs=-1,os=!1,as=null,ss=!1,us=!1,ls=null,cs=null,hs=null,fs=0,ds=void 0,ps=!1,ms=null,vs=0,gs=0,ys=!1,bs=!1,_s=null,ws=null,xs=!1,Ms=!1,Ss=!1,Es=null,Ts=1e3,As=0,Cs=1,Ps={updateContainerAtExpirationTime:wi,createContainer:function(e,t,n){return zt(e,t,n)},updateContainer:Mi,flushRoot:li,requestWork:ri,computeUniqueAsyncExpiration:Jn,batchedUpdates:vi,unbatchedUpdates:gi,deferredUpdates:ti,syncUpdates:ni,interactiveUpdates:bi,flushInteractiveUpdates:function(){ps||0===gs||(ui(gs,!1,null),gs=0)},flushControlled:_i,flushSync:yi,getPublicRootInstance:Si,findHostInstance:xi,findHostInstanceWithNoPortals:function(e){return e=Fe(e),null===e?null:e.stateNode},injectIntoDevTools:Ei};Ir.injectFiberControlledHostComponent(ya),Ai.prototype.render=function(e){this._defer||i("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Ci;return wi(e,t,null,n,r._onCommit),r},Ai.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ai.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||i("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)r=o,o=o._next;null===r&&i("251"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,li(e,n),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ai.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Ci.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ci.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&i("191",n),n()}}},Pi.prototype.render=function(e,t){var n=this._internalRoot,i=new Ci;return t=void 0===t?null:t,null!==t&&i.then(t),Mi(e,n,null,i._onCommit),i},Pi.prototype.unmount=function(e){var t=this._internalRoot,n=new Ci;return e=void 0===e?null:e,null!==e&&n.then(e),Mi(null,t,null,n._onCommit),n},Pi.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var i=this._internalRoot,r=new Ci;return n=void 0===n?null:n,null!==n&&r.then(n),Mi(t,i,e,r._onCommit),r},Pi.prototype.createBatch=function(){var e=new Ai(this),t=e._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=e,e._next=null;else{for(n=null;null!==i&&i._expirationTime<=t;)n=i,i=i._next;e._next=i,null!==n&&(n._next=e)}return e},Y=Ps.batchedUpdates,K=Ps.interactiveUpdates,Z=Ps.flushInteractiveUpdates;var Os={createPortal:Ii,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:xi(e)},hydrate:function(e,t,n){return ki(null,e,t,!0,n)},render:function(e,t,n){return ki(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&i("38"),ki(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Oi(e)||i("40"),!!e._reactRootContainer&&(gi(function(){ki(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ii.apply(void 0,arguments)},unstable_batchedUpdates:vi,unstable_deferredUpdates:ti,unstable_interactiveUpdates:bi,flushSync:yi,unstable_flushControlled:_i,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:nr,EventPluginRegistry:Zi,EventPropagators:sr,ReactControlledComponent:Dr,ReactDOMComponentTree:ar,ReactDOMEventListener:ko},unstable_createRoot:function(e,t){return new Pi(e,!0,null!=t&&!0===t.hydrate)}};Ei({findFiberByHostInstance:b,bundleType:0,version:"16.4.1",rendererPackageName:"react-dom"});var Ls={default:Os},ks=Ls&&Os||Ls;e.exports=ks.default?ks.default:ks},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);y(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function r(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||k}function o(){}function a(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||k}function s(e,t,n){var i=void 0,r={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)N.call(t,i)&&!D.hasOwnProperty(i)&&(r[i]=t[i]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];r.children=u}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===r[i]&&(r[i]=s[i]);return{$$typeof:x,type:e,key:o,ref:a,props:r,_owner:R.current}}function u(e){return"object"===typeof e&&null!==e&&e.$$typeof===x}function l(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function c(e,t,n,i){if(U.length){var r=U.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function h(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>U.length&&U.push(e)}function f(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case x:case M:a=!0}}if(a)return n(r,e,""===t?"."+d(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var u=t+d(o,s);a+=f(o,u,n,r)}else if(null===e||"undefined"===typeof e?u=null:(u=L&&e[L]||e["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=t+d(o,s++),a+=f(o,u,n,r);else"object"===o&&(n=""+e,i("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function d(e,t){return"object"===typeof e&&null!==e&&null!=e.key?l(e.key):t.toString(36)}function p(e,t){e.func.call(e.context,t,e.count++)}function m(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?v(e,i,n,_.thatReturnsArgument):null!=e&&(u(e)&&(t=r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(F,"$&/")+"/")+n,e={$$typeof:x,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),i.push(e))}function v(e,t,n,i,r){var o="";null!=n&&(o=(""+n).replace(F,"$&/")+"/"),t=c(t,o,i,r),null==e||f(e,"",m,t),h(t)}var g=n(54),y=n(56),b=n(77),_=n(57),w="function"===typeof Symbol&&Symbol.for,x=w?Symbol.for("react.element"):60103,M=w?Symbol.for("react.portal"):60106,S=w?Symbol.for("react.fragment"):60107,E=w?Symbol.for("react.strict_mode"):60108,T=w?Symbol.for("react.profiler"):60114,A=w?Symbol.for("react.provider"):60109,C=w?Symbol.for("react.context"):60110,P=w?Symbol.for("react.async_mode"):60111,O=w?Symbol.for("react.forward_ref"):60112;w&&Symbol.for("react.timeout");var L="function"===typeof Symbol&&Symbol.iterator,k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&i("85"),this.updater.enqueueSetState(this,e,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=r.prototype;var I=a.prototype=new o;I.constructor=a,g(I,r.prototype),I.isPureReactComponent=!0;var R={current:null},N=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0},F=/\/+/g,U=[],j={Children:{map:function(e,t,n){if(null==e)return e;var i=[];return v(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;t=c(null,null,t,n),null==e||f(e,"",p,t),h(t)},count:function(e){return null==e?0:f(e,"",_.thatReturnsNull,null)},toArray:function(e){var t=[];return v(e,t,null,_.thatReturnsArgument),t},only:function(e){return u(e)||i("143"),e}},createRef:function(){return{current:null}},Component:r,PureComponent:a,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:C,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_currentValue2:e,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},e.Provider={$$typeof:A,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:O,render:e}},Fragment:S,StrictMode:E,unstable_AsyncMode:P,unstable_Profiler:T,createElement:s,cloneElement:function(e,t,n){(null===e||void 0===e)&&i("267",e);var r=void 0,o=g({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=R.current),void 0!==t.key&&(a=""+t.key);var l=void 0;e.type&&e.type.defaultProps&&(l=e.type.defaultProps);for(r in t)N.call(t,r)&&!D.hasOwnProperty(r)&&(o[r]=void 0===t[r]&&void 0!==l?l[r]:t[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){l=Array(r);for(var c=0;c<r;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:x,type:e.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(e){var t=s.bind(null,e);return t.type=e,t},isValidElement:u,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:g}},B={default:j},z=B&&j||B;e.exports=z.default?z.default:z},function(e,t,n){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=r},function(e,t,n){"use strict";function i(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=i},function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(i(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function i(e,t){return!(!e||!t)&&(e===t||!r(e)&&(r(t)?i(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var r=n(176);e.exports=i},function(e,t,n){"use strict";function i(e){return r(e)&&3==e.nodeType}var r=n(177);e.exports=i},function(e,t,n){"use strict";function i(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),h=n(58),f=i(h),d=n(78),p=i(d),m=n(79),v=n(80),g=i(v),y=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onLoad=e.onLoad.bind(e),e.state={sendState:"",preName:{value:"",error:""},name:{value:"",error:""},tel:{value:"",error:""},email:{value:"",error:""},touched:!1,isValid:!1},e}return s(t,e),u(t,[{key:"componentDidUpdate",value:function(){var e=this.state,t=e.preName,n=e.name,i=e.tel,r=e.email,o=!!t.value&&!t.error&&!!n.value&&!n.error&&!!i.value&&!i.error&&!!r.value&&!r.error;this.setState(function(){return{isValid:o}})}},{key:"onClick",value:function(e){if(e.preventDefault(),this.state.isValid){var t=this.state,n=t.preName,i=t.name,r=t.tel,o=t.email,a=new FormData;a.append("preName",n.value),a.append("name",i.value),a.append("tel",r.value),a.append("email",o.value);var s=g.default.get("csrftoken");this.setState(function(){return{sendState:"loading"}}),fetch(window.location,{method:"POST",headers:{"X-CSRFToken":s,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:a}).then(this.onLoad).catch(function(e){})}}},{key:"onLoad",value:function(e){var t=this;200===e.status?this.setState(function(){return{sendState:"success"}}):400===e.status&&e.json().then(function(e){Object.keys(e).forEach(function(n){t.state[n]&&t.setState(function(){return r({},n,{value:t.state[n].value,error:e[n][0]})})})})}},{key:"onError",value:function(e){}},{key:"onFormChange",value:function(e,t){var n=this;this.setState(function(i){var o;return o={},r(o,e,{value:t,error:n.validate(e,t)}),r(o,"touched",!0),o})}},{key:"validate",value:function(e,t){var n="";return"email"!==e||(0,m.validateEmail)(t)?""===t&&(n=window.locales.requiredField):n=window.locales.wrongEmailFormat,n}},{key:"render",value:function(){var e=this.state,t=e.sendState,n=e.isValid,i=e.preName,r=e.name,o=e.tel,a=e.email;return c.default.createElement("section",{className:"contact"},c.default.createElement("div",{className:"contact__heading"},c.default.createElement("div",{className:"heading"},c.default.createElement("h6",{className:"heading__eyebrow",dangerouslySetInnerHTML:{__html:window.locales.franchiseEyebrow}}),c.default.createElement("h3",{className:"heading__title",dangerouslySetInnerHTML:{__html:"success"===t?window.locales.franchiseSendSuccessTitle:window.locales.franchiseTitle}}))),""===t&&c.default.createElement("div",{className:"contact__content"},c.default.createElement("div",{className:"contact__info"},c.default.createElement("h3",{className:"contact__subtitle"},window.locales.franchiseListTitle),c.default.createElement("ul",{className:"list"},window.locales.franchiseList.map(function(e,t){return c.default.createElement("li",{key:"list-item-"+t,className:"list__item"},e)}))),c.default.createElement("div",{className:"contact__form"},c.default.createElement("h3",{className:"contact__subtitle"},window.locales.yourData),c.default.createElement(p.default,{preName:i,name:r,tel:o,email:a,onChange:this.onFormChange.bind(this)}),c.default.createElement("div",{className:"form__button"},c.default.createElement(f.default,{text:window.locales.sendText,onClick:this.onClick.bind(this),color:"white",disabled:!n})))),"success"===t&&c.default.createElement("div",{className:"contact__message",dangerouslySetInnerHTML:{__html:window.locales.franchiseSendSuccess}}),"error"===t&&c.default.createElement("div",{className:"contact__message",dangerouslySetInnerHTML:{__html:window.locales.sendError}}),"loading"===t&&c.default.createElement("div",{className:"contact__loader"},c.default.createElement("div",{className:"loader"})))}}]),t}(l.PureComponent);t.default=y},function(e,t,n){"use strict";var i=n(57),r=n(56),o=n(180);e.exports=function(){function e(e,t,n,i,a,s){s!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(9),h=i(c),f=n(15),d=i(f),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"onChange",value:function(e){this.props.onChange(e.currentTarget.value)}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,i=e.label,r=e.placeholder,o=e.errorText,a=e.hasError,s=e.type;return l.default.createElement("div",{className:(0,d.default)("form__input",{"has-error":a},{"is-empty":""===t})},l.default.createElement("label",{className:"form__label-wrapper"},l.default.createElement("span",{className:"form__label"},i),l.default.createElement("input",{name:n,value:t,className:"form__field",type:s,placeholder:r,onChange:this.onChange.bind(this)})),a&&l.default.createElement("span",{className:"form__error"},o))}}]),t}(u.PureComponent);p.propTypes={name:h.default.string.isRequired,label:h.default.string.isRequired,placeholder:h.default.string.isRequired,errorText:h.default.string.isRequired,hasError:h.default.bool.isRequired,type:h.default.string},p.defaultProps={type:"text"},t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(183),u=i(s),l=n(188),c=i(l),h=n(33),f=i(h),d=function(){function e(){o(this,e),this.resize=this.resize.bind(this),this.nodes=[].concat(r(document.querySelectorAll(".js-scroll-area"))),this.items=[],this.init(),f.default.on("change",this.resize)}return a(e,[{key:"init",value:function(){this.items.forEach(function(e){return e.destroy()}),this.items=this.nodes.map(function(e){return f.default.mobile?new c.default(e):new u.default(e)})}},{key:"resize",value:function(){this.init(),this.start()}},{key:"start",value:function(){this.items.forEach(function(e){return e.start()})}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(76),u=n(184),l=i(u),c=n(81),h=i(c),f=n(34),d=i(f),p=n(43),m=i(p),v=n(187),g=i(v),y=n(75),b=new s.Lethargy,_=function(){function e(t){var n=this;o(this,e),this.onWheel=this.onWheel.bind(this),this.btnUpClick=this.btnUpClick.bind(this),this.btnDownClick=this.btnDownClick.bind(this),this.onTouchstart=this.onTouchstart.bind(this),this.onTouchmove=this.onTouchmove.bind(this),this.onTouchend=this.onTouchend.bind(this),this.onVideoEnd=this.onVideoEnd.bind(this),this.isAnimating=!1,this.isVisible=!1,this.isLocked=!1,this.timer=null,this.index=0,this.delay=250,this.isTouchstarted=!1,this.touchStartY=0,this.touchStartX=0,this.touchStartTime=0,this.deltaY=0,this.deltaX=0,this.node=t;var i=[].concat(r(t.querySelectorAll(".js-scroll-area-item")));this.items=i.map(function(e,t){return n.getItem(e,t)}),this.maxIndex=i.length-1,this.btnUp=new l.default(this.node.querySelector(".js-scroll-button-up"),this.items.length,"top"),this.btnDown=new l.default(this.node.querySelector(".js-scroll-button-down"),this.items.length,"bottom"),this.btnUp.on("click",this.btnUpClick),this.btnDown.on("click",this.btnDownClick),this.intersectionObserver=new IntersectionObserver(this.onIntersect.bind(this),{threshold:[0,.95]}),m.default.on("intro-video-ended",this.onVideoEnd)}return a(e,[{key:"getItem",value:function(e,t){return e.classList.contains("js-scroll-area-headline")?new h.default(e,t):e.classList.contains("js-scroll-area-video")?new g.default(e,t):new d.default(e,t)}},{key:"onVideoEnd",value:function(){this.isVisible&&this.index<this.maxIndex&&this.showItem(this.index+1)}},{key:"onIntersect",value:function(e,t){var n=this;e.forEach(function(e){!n.isVisible&&e.intersectionRatio>.95&&n.show()})}},{key:"onWheel",value:function(e){var t=b.check(e);return this.isAnimating?void e.preventDefault():this.isLocked?(t&&(this.isLocked=!1),void e.preventDefault()):t<0&&this.isVisible&&!this.isLocked&&this.index===this.maxIndex?(e.preventDefault(),void this.hide()):this.isVisible&&!t?void e.preventDefault():this.isVisible&&(t<0||t>0&&this.index>0)?(e.preventDefault(),void this.showItem(this.index-t)):void 0}},{key:"btnUpClick",value:function(){this.showItem(this.index-1)}},{key:"btnDownClick",value:function(){this.index<this.maxIndex?this.showItem(this.index+1):this.hide(!0)}},{key:"showItem",value:function(e){var t=this;this.isVisible||this.show(),this.checkTop(),clearTimeout(this.timer),this.index!==e&&(e<0||e>this.maxIndex||(this.isAnimating=!0,this.timer=setTimeout(function(){return t.isAnimating=!1},this.delay),this.index=e,this.toggleItems(),this.updateButtons()))}},{key:"toggleItems",value:function(){var e=this;this.items.forEach(function(t,n){return n===e.index?t.show():t.hide()})}},{key:"updateButtons",value:function(){this.btnUp.update(this.index),this.btnDown.update(this.index)}},{key:"checkTop",value:function(){0!==this.node.getBoundingClientRect().top&&window.scrollTo(0,0)}},{key:"show",value:function(){var e=this;this.isVisible=!0,this.isAnimating=!1,clearTimeout(this.timer),window.addEventListener("wheel",this.onWheel,{passive:!1}),document.addEventListener("touchstart",this.onTouchstart),document.addEventListener("touchmove",this.onTouchmove,{passive:!1}),requestAnimationFrame(function(){document.body.classList.add("is-fixed"),window.scrollTo(0,0),e.toggleItems(),e.updateButtons()})}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isVisible=!1,this.isLocked=!0,clearTimeout(this.timer),window.removeEventListener("wheel",this.onWheel,{passive:!1}),document.removeEventListener("touchstart",this.onTouchstart),document.removeEventListener("touchmove",this.onTouchmove),requestAnimationFrame(function(){document.body.classList.remove("is-fixed"),e&&new y.Tween({y:window.pageYOffset}).easing(y.Easing.Cubic.InOut).to({y:window.pageYOffset+window.innerHeight},1e3).on("update",function(e){var t=e.y;return window.scrollTo(0,t)}).start()})}},{key:"start",value:function(){this.intersectionObserver.observe(this.node),this.show()}},{key:"onTouchstart",value:function(e){this.isTouchstarted=!0;var t=e.touches?e.touches[0]:e;this.touchStartY=t.pageY,this.touchStartX=t.pageX,this.touchStartTime=performance.now(),this.deltaY=0,this.deltaX=0,document.addEventListener("touchend",this.onTouchend),document.addEventListener("touchcancel",this.onTouchend)}},{key:"onTouchmove",value:function(e){if(!this.isTouchstarted)return!0;this.isVisible&&e.preventDefault();var t=e.touches?e.touches[0]:e;this.deltaY=t.pageY-this.touchStartY,this.deltaX=t.pageX-this.touchStartX}},{key:"onTouchend",value:function(e){if(document.removeEventListener("touchend",this.onTouchend),document.removeEventListener("touchcancel",this.onTouchend),this.isTouchstarted=!1,performance.now()-this.touchStartTime<300&&Math.abs(this.deltaY)>25&&Math.abs(this.deltaY)>Math.abs(this.deltaX)){var t=this.deltaY<0?-1:1;return this.isAnimating?void e.preventDefault():t<0&&this.isVisible&&this.index===this.maxIndex?(e.preventDefault(),void this.hide()):void(this.isVisible&&(t<0||t>0&&this.index>0)&&this.showItem(this.index-t,e))}}},{key:"destroy",value:function(){clearTimeout(this.timer),document.body.classList.remove("is-fixed"),this.items.forEach(function(e){return e.destroy()}),this.btnUp.destroy(),this.btnDown.destroy(),window.removeEventListener("wheel",this.onWheel),document.removeEventListener("touchstart",this.onTouchstart),document.removeEventListener("touchmove",this.onTouchmove),this.intersectionObserver.unobserve(this.node)}}]),e}();t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(32),c=i(l),h=n(185),f=i(h),d=function(e){function t(e,n,i){o(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.onClick=s.onClick.bind(s),s.node=e,s.numItems=n,s.position=i,s.inner=s.node.querySelector(".js-scroll-button-inner"),s.titles=[].concat(r(s.inner.children)),s.numTitles=s.titles.length,s.labels=s.node.querySelectorAll(".js-scroll-button-label"),s.hasScroll=s.titles.map(function(e){return e.classList.contains("js-scroll-has-label")}),s.node.addEventListener("click",s.onClick),s}return s(t,e),u(t,[{key:"update",value:function(e){var t=this,n=(0,f.default)(e,0,this.numTitles),i=-100*n/this.numTitles;this.inner.style.transform="translateY("+i+"%)","top"===this.position?0===e?this.node.classList.remove("is-visible"):this.node.classList.add("is-visible"):(e===this.numItems?this.node.classList.remove("is-visible"):this.node.classList.add("is-visible"),this.labels.forEach(function(n){return t.hasScroll[e]?n.classList.add("is-visible"):n.classList.remove("is-visible")}))}},{key:"onClick",value:function(){this.emit("click")}},{key:"destroy",value:function(){this.node.removeEventListener("click",this.onClick)}}]),t}(c.default);t.default=d},function(e,t){function n(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}e.exports=n},function(e,t){e.exports={name:"Comp 1",layers:[{name:"square",index:16,type:"vector",out:1040,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[10,10]}]}],fill:{color:[{t:0,v:[255,255,255]}]},transform:{}}],transform:{position:[{t:0,v:[250,250],easeOut:[0,0]},{t:600,v:[50,50],easeIn:[0,1]}],scaleX:[{t:0,v:.25,easeOut:[0,0]},{t:600,v:1,easeIn:[0,1]}],scaleY:[{t:0,v:.25,easeOut:[0,0]},{t:600,v:1,easeIn:[0,1]}],opacity:[{t:160,v:0},{t:203.984375,v:.76898803843767},{t:270,v:.25},{t:336.015625,v:.92004352756372},{t:380,v:.5},{t:423.984375,v:.94206746264303},{t:490,v:.75},{t:533.984375,v:.98379760875017},{t:556.015625,v:.9},{t:600,v:1},{t:840,v:1},{t:1e3,v:0}]}},{name:"square 2",index:15,type:"vector",in:40,out:1360,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[10,10]}]}],fill:{color:[{t:0,v:[255,255,255]}]},transform:{}}],transform:{position:[{t:40,v:[1550,350],easeOut:[0,0]},{t:640,v:[1950,50],easeIn:[0,1]}],scaleX:[{t:40,v:.25,easeOut:[0,0]},{t:640,v:1,easeIn:[0,1]}],scaleY:[{t:40,v:.25,easeOut:[0,0]},{t:640,v:1,easeIn:[0,1]}],opacity:[{t:200,v:0},{t:243.984375,v:.76898803843767},{t:310,v:.25},{t:376.015625,v:.92004352756372},{t:420,v:.5},{t:463.984375,v:.94206746264303},{t:530,v:.75},{t:573.984375,v:.98379760875017},{t:596.015625,v:.9},{t:640,v:1},{t:1172.3046875,v:1},{t:1320,v:0}]}},{name:"square 3",index:14,type:"vector",in:80,out:1240,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[10,10]}]}],fill:{color:[{t:0,v:[255,255,255]}]},transform:{}}],transform:{position:[{t:80,v:[250,550],easeOut:[0,0]},{t:680,v:[50,950],easeIn:[0,1]}],scaleX:[{t:80,v:.25,easeOut:[0,0]},{t:680,v:1,easeIn:[0,1]}],scaleY:[{t:80,v:.25,easeOut:[0,0]},{t:680,v:1,easeIn:[0,1]}],opacity:[{t:240,v:0},{t:283.984375,v:.76898803843767},{t:350,v:.25},{t:416.015625,v:.92004352756372},{t:460,v:.5},{t:503.984375,v:.94206746264303},{t:570,v:.75},{t:613.984375,v:.98379760875017},{t:636.015625,v:.9},{t:680,v:1},{t:1080,v:1},{t:1200,v:0}]}},{name:"square 4",index:13,type:"vector",in:40,out:1e3,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[10,10]}]}],fill:{color:[{t:0,v:[255,255,255]}]},transform:{}}],transform:{position:[{t:40,v:[1550,650],easeOut:[0,0]},{t:640,v:[1950,950],easeIn:[0,1]}],scaleX:[{t:40,v:.25,easeOut:[0,0]},{t:640,v:1,easeIn:[0,1]}],scaleY:[{t:40,v:.25,easeOut:[0,0]},{t:640,v:1,easeIn:[0,1]}],opacity:[{t:200,v:0},{t:243.984375,v:.76898803843767},{t:310,v:.25},{t:376.015625,v:.92004352756372},{t:420,v:.5},{t:463.984375,v:.94206746264303},{t:530,v:.75},{t:573.984375,v:.98379760875017},{t:596.015625,v:.9},{t:640,v:1},{t:840,v:1},{t:969.21875,v:0}]}},{name:"box",index:12,type:"vector",in:80,out:1080,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[100,100]}]}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:4}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:.5}],width:[{t:0,v:2}]},transform:{scaleX:[{t:80,v:0,easeOut:[.013,0]},{t:880,v:1,easeIn:[.08,1]}],scaleY:[{t:80,v:0,easeOut:[.013,0]},{t:880,v:1,easeIn:[.08,1]}]}}],transform:{position:[{t:0,v:[250,750]}],opacity:[{t:440,v:0},{t:483.984375,v:.77121461063156},{t:550,v:.25072386437844},{t:616.015625,v:.92270747450859},{t:660,v:.50144772875688},{t:703.984375,v:.94479517895622},{t:770,v:.75217159313533},{t:813.984375,v:.98664615292845},{t:836.015625,v:.90260591176239},{t:880,v:1},{t:960,v:1},{t:1040,v:0}]}},{name:"square small",index:11,type:"vector",out:1160,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[10,10]}]}],fill:{color:[{t:0,v:[255,255,255]}]},transform:{}}],transform:{position:[{t:0,v:[850,750],easeOut:[0,0]},{t:600,v:[250,750],easeIn:[0,1]}],scaleX:[{t:0,v:.25,easeOut:[0,0]},{t:600,v:1,easeIn:[0,1]}],scaleY:[{t:0,v:.25,easeOut:[0,0]},{t:600,v:1,easeIn:[0,1]}],opacity:[{t:160,v:0},{t:203.984375,v:.76898803843767},{t:270,v:.25},{t:336.015625,v:.92004352756372},{t:380,v:.5},{t:423.984375,v:.94206746264303},{t:490,v:.75},{t:533.984375,v:.98379760875017},{t:556.015625,v:.9},{t:600,v:1}]}},{name:"box 4",index:10,type:"vector",in:360,out:1320,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[200,200]}]}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:4}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:.5}],width:[{t:0,v:2}]},transform:{scaleX:[{t:360,v:0,easeOut:[.013,0]},{t:1160,v:1,easeIn:[.08,1]}],scaleY:[{t:360,v:0,easeOut:[.013,0]},{t:1160,v:1,easeIn:[.08,1]}]}}],transform:{position:[{t:0,v:[1650,150]}],scaleX:[{t:1160,v:1,easeOut:[.764,0]},{t:1320,v:1.5,easeIn:[.964,1]}],scaleY:[{t:1160,v:1,easeOut:[.764,0]},{t:1320,v:1.5,easeIn:[.964,1]}],opacity:[{t:720,v:0},{t:763.984375,v:.77121461063156},{t:830,v:.25072386437844},{t:896.015625,v:.92270747450859},{t:940,v:.50144772875688},{t:983.984375,v:.94479517895622},{t:1050,v:.75217159313533},{t:1093.984375,v:.98664615292845},{t:1116.015625,v:.90260591176239},{t:1160,v:1},{t:1320,v:0}]}},{name:"square small 3",index:9,type:"vector",in:280,out:1440,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[10,10]}]}],fill:{color:[{t:0,v:[255,255,255]}]},transform:{}}],transform:{position:[{t:280,v:[1650,600],easeOut:[0,0]},{t:880,v:[1650,150],easeIn:[0,1]}],scaleX:[{t:280,v:.25,easeOut:[0,0]},{t:880,v:1,easeIn:[0,1]}],scaleY:[{t:280,v:.25,easeOut:[0,0]},{t:880,v:1,easeIn:[0,1]}],opacity:[{t:440,v:0},{t:483.984375,v:.76898803843767},{t:550,v:.25},{t:616.015625,v:.92004352756372},{t:660,v:.5},{t:703.984375,v:.94206746264303},{t:770,v:.75},{t:813.984375,v:.98379760875017},{t:836.015625,v:.9},{t:880,v:1}]}},{name:"box 5",index:8,type:"vector",in:120,out:1160,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[150,150]}]}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:4}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:.5}],width:[{t:0,v:2}]},transform:{scaleX:[{t:120,v:0,easeOut:[.013,0]},{t:920,v:1,easeIn:[.08,1]}],scaleY:[{t:120,v:0,easeOut:[.013,0]},{t:920,v:1,easeIn:[.08,1]}]}}],transform:{position:[{t:0,v:[1850,750]}],opacity:[{t:480,v:0},{t:523.984375,v:.77121461063156},{t:590,v:.25072386437844},{t:656.015625,v:.92270747450859},{t:700,v:.50144772875688},{t:743.984375,v:.94479517895622},{t:810,v:.75217159313533},{t:853.984375,v:.98664615292845},{t:876.015625,v:.90260591176239},{t:920,v:1},{t:1160,v:0}]}},{name:"square small 2",index:7,type:"vector",in:40,out:1200,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[10,10]}]}],fill:{color:[{t:0,v:[255,255,255]}]},transform:{}}],transform:{position:[{t:40,v:[1350,750],easeOut:[0,0]},{t:640,v:[1850,750],easeIn:[0,1]}],scaleX:[{t:40,v:.25,easeOut:[0,0]},{t:640,v:1,easeIn:[0,1]}],scaleY:[{t:40,v:.25,easeOut:[0,0]},{t:640,v:1,easeIn:[0,1]}],opacity:[{t:200,v:0},{t:243.984375,v:.76898803843767},{t:310,v:.25},{t:376.015625,v:.92004352756372},{t:420,v:.5},{t:463.984375,v:.94206746264303},{t:530,v:.75},{t:573.984375,v:.98379760875017},{t:596.015625,v:.9},{t:640,v:1}]}},{name:"line",index:6,type:"vector",out:1240,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[1e3,1]}]}],fill:{color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:.5}]},transform:{anchor:[{t:0,v:[500,0]}],scaleX:[{t:775,v:1},{t:1240,v:0}],scaleY:[{t:775,v:1},{t:1240,v:1}]}}],transform:{positionX:[{t:0,v:40},{t:620,v:1153,easeOut:[.167,.166]},{t:775,v:1201,easeIn:[.833,.834],easeOut:[.167,.166]},{t:1240,v:1277,easeIn:[.833,.834]}],positionY:[{t:0,v:351}],scaleX:[{t:0,v:0},{t:620,v:1}],scaleY:[{t:0,v:1},{t:620,v:1}],opacity:[{t:960,v:1},{t:1240,v:0}]}},{name:"line",index:5,type:"vector",in:320,out:1400,effects:{},groups:[{name:"Rectangle 1",type:"vector",effects:{},shapes:[{type:"rect",size:[{t:0,v:[1e3,1]}]}],fill:{color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:.5}]},transform:{anchor:[{t:0,v:[500,0]}],scaleX:[{t:895,v:1},{t:1360,v:0}],scaleY:[{t:895,v:1},{t:1360,v:1}]}}],transform:{positionX:[{t:320,v:1948},{t:740,v:1650},{t:895,v:1495},{t:1360,v:97}],positionY:[{t:0,v:750}],scaleX:[{t:320,v:0},{t:740,v:1}],scaleY:[{t:320,v:1},{t:740,v:1}],opacity:[{t:1080,v:1},{t:1360,v:0}]}},{name:"box cross",index:4,type:"vector",in:560,out:1480,effects:{},groups:[{name:"Group 3",type:"vector",effects:{},shapes:[{type:"path",closed:!0,frames:[{t:0,v:[[30,30,30,30,30,30],[-30,30,-30,30,-30,30],[-30,-30,-30,-30,-30,-30],[30,-30,30,-30,30,-30]],len:[59.982,59.982,59.982]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:.5}],width:[{t:0,v:1}]},transform:{position:[{t:0,v:[31,31]}]}},{name:"Group 2",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[24.4264,30.2682,24.4264,30.2682,24.4264,30.2682],[36.5734,30.2682,36.5734,30.2682,36.5734,30.2682]],len:[12.143]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{}},{name:"Group 1",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[30.5,24.1946,30.5,24.1946,30.5,24.1946],[30.5,36.3416,30.5,36.3416,30.5,36.3416]],len:[12.143]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{}}],transform:{anchor:[{t:0,v:[31,31]}],position:[{t:0,v:[450,850]}],scaleX:[{t:1160,v:1,easeOut:[.764,0]},{t:1440,v:2,easeIn:[.964,1]}],scaleY:[{t:1160,v:1,easeOut:[.764,0]},{t:1440,v:2,easeIn:[.964,1]}],rotation:[{t:760,v:0},{t:840,v:45},{t:920,v:90}],opacity:[{t:1160,v:1},{t:1440,v:0}]}},{name:"box cross 2",index:3,type:"vector",in:280,out:1160,effects:{},groups:[{name:"Group 3",type:"vector",effects:{},shapes:[{type:"path",closed:!0,frames:[{t:0,v:[[30,30,30,30,30,30],[-30,30,-30,30,-30,30],[-30,-30,-30,-30,-30,-30],[30,-30,30,-30,30,-30]],len:[59.982,59.982,59.982]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:.5}],width:[{t:0,v:1}]},transform:{position:[{t:0,v:[31,31]}]}},{name:"Group 2",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[24.4264,30.2682,24.4264,30.2682,24.4264,30.2682],[36.5734,30.2682,36.5734,30.2682,36.5734,30.2682]],len:[12.143]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{}},{name:"Group 1",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[30.5,24.1946,30.5,24.1946,30.5,24.1946],[30.5,36.3416,30.5,36.3416,30.5,36.3416]],len:[12.143]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{}}],transform:{anchor:[{t:0,v:[31,31]}],position:[{t:0,v:[1350,150]}],rotation:[{t:480,v:0},{t:560,v:45},{t:640,v:90}]}},{name:"x 4",index:2,type:"vector",in:800,out:1480,effects:{},groups:[{name:"Group 2",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[-27.5,-27.5,-27.5,-27.5,-27.5,-27.5],[27.5,27.5,27.5,27.5,27.5,27.5]],len:[77.759]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{position:[{t:0,v:[28,28]}]}},{name:"Group 1",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[27.5,-27.5,27.5,-27.5,27.5,-27.5],[-27.5,27.5,-27.5,27.5,-27.5,27.5]],len:[77.759]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{position:[{t:0,v:[28,28]}]}}],transform:{anchor:[{t:0,v:[28,28]}],position:[{t:0,v:[750,850]}],scaleX:[{t:800,v:0,easeOut:[.025,0]},{t:1200,v:1,easeIn:[.101,1]}],scaleY:[{t:800,v:0,easeOut:[.025,0]},{t:1200,v:1,easeIn:[.101,1]}],opacity:[{t:1200,v:.5},{t:1440,v:0}]}},{name:"x 5",index:1,type:"vector",out:920,effects:{},groups:[{name:"Group 2",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[-27.5,-27.5,-27.5,-27.5,-27.5,-27.5],[27.5,27.5,27.5,27.5,27.5,27.5]],len:[77.759]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{position:[{t:0,v:[28,28]}]}},{name:"Group 1",type:"vector",effects:{},shapes:[{type:"path",closed:!1,frames:[{t:0,v:[[27.5,-27.5,27.5,-27.5,27.5,-27.5],[-27.5,27.5,-27.5,27.5,-27.5,27.5]],len:[77.759]}],isAnimated:!1}],stroke:{index:2,join:"miter",miterLimit:[{t:0,v:10}],cap:"butt",color:[{t:0,v:[255,255,255]}],opacity:[{t:0,v:1}],width:[{t:0,v:1}]},transform:{position:[{t:0,v:[28,28]}]}}],transform:{anchor:[{t:0,v:[28,28]}],position:[{t:0,v:[150,250]}],scaleX:[{t:0,v:0,easeOut:[.025,0]},{t:400,v:1,easeIn:[.101,1]}],scaleY:[{t:0,v:0,easeOut:[.025,0]},{t:400,v:1,easeIn:[.101,1]}],opacity:[{t:640,v:.5},{t:880,v:0}]}}],comps:{},duration:1480,width:2e3,height:1e3,markers:[]}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(43),l=i(u),c=n(34),h=i(c),f=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.onClick=i.onClick.bind(i),i.onEnded=i.onEnded.bind(i),i.videoNode=e.querySelector(".js-video"),i.mute=i.node.querySelector(".js-video-sound"),i.mute.addEventListener("click",i.onClick),i.video=i.videoNode.children[0],i.video.addEventListener("ended",i.onEnded),i.video.controls=!1,i.video.muted?i.mute.classList.remove("is-active"):i.mute.classList.add("is-active"),e.style.height="",i}return a(t,e),s(t,[{key:"onClick",value:function(){this.video.muted=!this.video.muted,this.video.muted?this.mute.classList.remove("is-active"):this.mute.classList.add("is-active")}},{key:"onEnded",value:function(){l.default.emit("intro-video-ended")}},{key:"show",value:function(){this.node.classList.add("is-visible"),this.video.currentTime=0,this.video.play()}},{key:"hide",value:function(){this.node.classList.remove("is-visible"),this.video.pause()}},{key:"destroy",value:function(){this.video.removeEventListener("ended",this.onEnded),this.video.pause()}}]),t}(h.default);t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(81),u=i(s),l=n(34),c=i(l),h=n(189),f=i(h),d=function(){function e(t){var n=this;o(this,e),this.node=t;var i=[].concat(r(this.node.querySelectorAll(".js-scroll-area-item")));this.items=i.map(function(e,t){return n.getItem(e,t)}),this.observer=new IntersectionObserver(this.onIntersect.bind(this),{threshold:[0,.5]})}return a(e,[{key:"getItem",value:function(e,t){return e.classList.contains("js-scroll-area-headline")?new u.default(e,t):e.classList.contains("js-scroll-area-video")?new f.default(e,t):new c.default(e,t)}},{key:"onIntersect",value:function(e,t){var n=this;e.forEach(function(e){var t=+e.target.dataset.id;e.intersectionRatio>0?requestAnimationFrame(function(){return n.items[t].show()}):requestAnimationFrame(function(){return n.items[t].hide()})})}},{key:"start",value:function(){var e=this;this.items.forEach(function(t){return e.observer.observe(t.node)})}},{key:"destroy",value:function(){this.items.forEach(function(e){return e.destroy()}),this.observer.disconnect()}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(34),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onPlayClick=o.onPlayClick.bind(o),o.onOrientationChange=o.onOrientationChange.bind(o),o.touchStartY=0,o.touchEndY=0,o.touchStartTime=0,o.videoNode=e.querySelector(".js-video"),o.btn=e.querySelector(".js-video-button"),o.videoNode&&o.btn&&o.init(),o}return o(t,e),a(t,[{key:"init",value:function(){this.video=this.videoNode.children[0],this.video.controls=!0,this.btn.addEventListener("click",this.onPlayClick),window.addEventListener("orientationchange",this.onOrientationChange),this.onOrientationChange()}},{key:"onTouchStart",value:function(e){this.touchStartY=e.touches[0].pageY,this.touchEndY=this.touchStartY,this.touchStartTime=performance.now()}},{key:"onTouchMove",value:function(e){this.touchEndY=e.touches[0].pageY}},{key:"onTouchEnd",value:function(){var e=this.touchStartY-this.touchEndY;performance.now()-this.touchStartTime<300&&Math.abs(e)&&(document.removeEventListener("touchstart",this.onTouchStart,!1),document.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("touchend",this.onTouchEnd,!1),document.removeEventListener("touchcancel",this.onTouchEnd,!1),this.videoNode.classList.remove("is-visible"),this.video.pause())}},{key:"onPlayClick",value:function(e){e.preventDefault(),this.videoNode.classList.add("is-visible"),document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1),document.addEventListener("touchcancel",this.onTouchEnd,!1),this.video.currentTime=0,this.video.play()}},{key:"onOrientationChange",value:function(e){var t=this;requestAnimationFrame(function(){t.node.style.height=window.innerHeight+"px"})}},{key:"show",value:function(){this.node.classList.add("is-visible")}},{key:"hide",value:function(){this.node.classList.remove("is-visible"),this.videoNode.classList.remove("is-visible"),this.video.pause(),this.video.currentTime=0}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=i(o),s=n(21),u=i(s),l=n(191),c=i(l),h=function e(){r(this,e);var t=document.querySelector(".js-locator");t&&u.default.render(a.default.createElement(c.default,null),t)};t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(192),h=i(c),f=n(198),d=i(f),p=n(199),m=i(p),v=n(59),g=n(208),y=i(g),b=n(33),_=i(b),w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.resize=n.resize.bind(n),_.default.on("change",n.resize);var i=_.default.mobile;return n.state={isMobile:i,selectedCountry:null,selectedCity:null},n}return a(t,e),s(t,[{key:"onMapClick",value:function(e,t,n){this.setState(function(e){return{selectedCountry:n,selectedCity:t}})}},{key:"onChange",value:function(e,t){if("country"===e)if(this.state.selectedCountry===t)this.setState(function(){return{selectedCountry:null,selectedCity:null}});else{var n=t?window.cities[t][0]:null;this.setState(function(){return{selectedCountry:t,selectedCity:n}})}else if("city"===e){var i=Object.keys(window.cities).find(function(e){return window.cities[e].includes(t)});this.setState(function(){return{selectedCity:t,selectedCountry:i}})}}},{key:"resize",value:function(){var e=_.default.mobile;e!==this.state.isMobile&&this.setState(function(){return{isMobile:e}})}},{key:"render",value:function(){var e=this.state,t=e.selectedCountry,n=e.selectedCity,i=e.isMobile,r=window.countries,o=window.cities,a=t?window.cities[t]:[],s=n?window.studios.filter(function(e){return e.country===t&&e.city===n}):[];return l.default.createElement("div",null,l.default.createElement("div",{className:"locator__map-wrapper"},l.default.createElement(h.default,{selectedCity:n,selectedCountry:t,countries:r,cities:window.cities,studios:window.studios,onClick:this.onMapClick.bind(this)})),l.default.createElement("div",{className:"locator__heading"},l.default.createElement("div",{className:"heading"},l.default.createElement("h6",{className:"heading__eyebrow"},window.locales.studioEyebrow),l.default.createElement("h3",{className:"heading__title"},"STUDIOS \u2014"))),l.default.createElement("div",{className:"locator__nav-wrapper"},i?l.default.createElement(y.default,{items:o,onChange:this.onChange.bind(this),selectedCity:n}):l.default.createElement("div",null,l.default.createElement(d.default,{items:r,activeItem:t,onChange:this.onChange.bind(this,"country")}),l.default.createElement(d.default,{items:a,activeItem:n,onChange:this.onChange.bind(this,"city"),level:"sub"}))),l.default.createElement(v.TransitionGroup,{className:"locator__studios"},s.map(function(e){return l.default.createElement(v.CSSTransition,{key:e.name,timeout:{enter:250},exit:!1,classNames:{enter:"studio--enter",enterActive:"studio--enter-active",exit:"studio--exit",exitActive:"studio--exit-active"}},l.default.createElement(m.default,{data:e}))})))}}]),t}(u.PureComponent);t.default=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(193),h=i(c),f=n(194),d=i(f),p=n(197),m=i(p),v=n(9),g=i(v),y=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.hidePopup=e.hidePopup.bind(e),e}return a(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){e.isScriptLoaded&&!this.props.isScriptLoaded&&e.isScriptLoadSucceed&&this.init()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.selectedCity,n=e.selectedCountry;if(t){var i=this.cities.find(function(e){return e.name===t});this.map.fitBounds(i.bounds,50)}else if(n){var r=this.countries.find(function(e){return e.name===n});this.map.fitBounds(r.bounds,50)}else this.map.fitBounds(this.bounds,50)}},{key:"init",value:function(){var e=this,t=this.props,n=t.studios,i=t.countries,u=t.cities;this.countries=this.addCenter(i,n,"country"),this.cities=this.addCenter([].concat.apply([],Object.values(u)),n,"city"),this.bounds=new window.google.maps.LatLngBounds,n.forEach(function(t){var n=t.lat,i=t.long;return e.bounds.extend(new window.google.maps.LatLng(n,i))});var l={styles:h.default,draggable:!0,disableDoubleClickZoom:!0,mapTypeControl:!1,disableDefaultUI:!0,backgroundColor:"#000000"};this.map=new window.google.maps.Map(this.node,l),window.google.maps.event.addListener(this.map,"zoom_changed",function(){return e.map.getZoom()>15&&e.map.setZoom(15)}),window.google.maps.event.addListener(this.map,"bounds_changed",this.hidePopup),window.google.maps.event.addListener(this.map,"zoom_changed",this.hidePopup),this.map.fitBounds(this.bounds,50);var c={url:m.default,scaledSize:{width:30,height:30}},f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=document.createElement("div"),a=document.createElement("div");return i.classList.add("locator__popup"),a.classList.add("locator__popup-inner"),i.appendChild(a),document.body.appendChild(i),n.inner=a,n.anchor=i,n.stopEventPropagation(),n}return a(t,e),s(t,[{key:"setText",value:function(e){this.inner.textContent=e}},{key:"setPosition",value:function(e){this.position=e}},{key:"show",value:function(){this.anchor.style.display="block",this.draw()}},{key:"hide",value:function(){this.anchor.style.display="none"}},{key:"onAdd",value:function(){this.getPanes().floatPane.appendChild(this.anchor)}},{key:"onRemove",value:function(){this.anchor.parentElement&&this.anchor.parentElement.removeChild(this.anchor)}},{key:"draw",value:function(){if(this.position){var e=this.getProjection().fromLatLngToDivPixel(this.position);this.anchor.style.left=e.x+"px",this.anchor.style.top=e.y+"px"}}},{key:"stopEventPropagation",value:function(){var e=this.anchor;e.style.cursor="auto",["click","dblclick","contextmenu","wheel","mousedown","touchstart","pointerdown"].forEach(function(t){e.addEventListener(t,function(e){return e.stopPropagation()})})}}]),t}(window.google.maps.OverlayView);this.popup=new f,this.popup.setMap(this.map),n.forEach(function(t){var n=t.name,i=t.city,r=t.country,o=t.lat,a=t.long,s=new window.google.maps.Marker({map:e.map,position:{lat:o,lng:a},icon:c,optimized:!1});s.addListener("click",e.onClick.bind(e,s,n,i,r))}),this.markerOverlay=new window.google.maps.OverlayView,this.markerOverlay.draw=function(){return e.markerOverlay.getPanes().markerLayer.classList.add("locator__markers")},this.markerOverlay.setMap(this.map)}},{key:"addCenter",value:function(e,t,n){return e.map(function(e){var i=new window.google.maps.LatLngBounds;t.filter(function(t){return t[n]===e}).forEach(function(e){var t=e.lat,n=e.long;return i.extend(new window.google.maps.LatLng(t,n))});var r=i.getCenter();return{name:e,bounds:i,center:r}})}},{key:"onClick",value:function(e,t,n,i){var r=this.props.selectedCountry;this.popup.hide(),r&&(this.popup.setText(t),this.popup.setPosition(e.getPosition()),this.popup.show()),this.props.onClick(t,n,i)}},{key:"hidePopup",value:function(){this.popup.hide()}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{ref:function(t){return e.node=t},className:"locator__map"})}}]),t}(u.PureComponent);y.propTypes={selectedCity:g.default.string,selectedCountry:g.default.string,countries:g.default.array.isRequired,cities:g.default.object.isRequired,studios:g.default.array.isRequired},t.default=(0,d.default)("https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyAW-A63SHZjZk6-JmLlAZ48gfNYsgQuFXg")(y)},function(e,t){e.exports=[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"geometry.fill",stylers:[{color:"#161616"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"},{visibility:"off"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.state",elementType:"labels",stylers:[{visibility:"off"}]}]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.noop,n=function(e){if(y.indexOf(e)<0)return function(t){var n=b[e]||[];if(n.push(t),b[e]=n,1===n.length)return(0,g.newScript)(e)(function(t){b[e].forEach(function(n){return n(t,e)}),delete b[e]})}},i=e.map(function(e){return Array.isArray(e)?e.map(n):n(e)});g.series.apply(void 0,s(i))(function(e,t){e?_.push(t):Array.isArray(t)?t.forEach(w):w(t)})(function(e){x(),t(e)})}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.startLoadingScripts=u;var h=n(0),f=i(h),d=n(9),p=i(d),m=n(195),v=i(m),g=n(196),y=[],b={},_=[],w=function(e){y.indexOf(e)<0&&y.push(e)},x=function(){_.length>0&&(_.forEach(function(e){var t=document.querySelector("script[src='"+e+"']");null!=t&&t.parentNode.removeChild(t)}),_=[])},M=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=function(n){function i(e,t){r(this,i);var n=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.state={isScriptLoaded:!1,isScriptLoadSucceed:!1},n._isMounted=!1,n}return a(i,n),c(i,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,u(t,function(t){e._isMounted&&e.setState({isScriptLoaded:!0,isScriptLoadSucceed:!t},function(){t||e.props.onScriptLoaded()})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=l({},this.props,this.state);return f.default.createElement(e,t)}}]),i}(h.Component);return n.propTypes={onScriptLoaded:p.default.func},n.defaultProps={onScriptLoaded:g.noop},(0,v.default)(n,e)}};t.default=M},function(e,t,n){"use strict";var i={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"===typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!==typeof t){var a=Object.getOwnPropertyNames(t);o&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!i[a[s]]&&!r[a[s]]&&(!n||!n[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){}}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(t.isDefined=function(e){return null!=e},t.isFunction=function(e){return"function"===typeof e}),r=(t.noop=function(e){},t.newScript=function(e){return function(t){var n=document.createElement("script");return n.src=e,n.addEventListener("load",function(){return t(null,e)}),n.addEventListener("error",function(){return t(!0,e)}),document.body.appendChild(n),n}},function(e){var t=Object.keys(e),n=-1;return{next:function(){return n++,n>=t.length?null:t[n]}}}),o=t.parallel=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n){var r=!1,o=0,a=[];t=t.filter(i),t.length<=0?n(null):t.forEach(function(s,u){s(function(s){for(var l=arguments.length,c=Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];s?r=!0:(c.length<=1&&(c=c[0]),a[u]=c,o++),i(e)&&e.call(null,s,c,u),r?n(!0):t.length===o&&n(null,a)})})}}};t.series=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n){t=t.filter(function(e){return null!=e});var a=r(t),s=function(){var n=a.next(),i=t[n];return Array.isArray(i)&&(i=o.apply(null,i).call(null,e)),[+n,i]},u=void 0,l=void 0,c=s();if(u=c[0],null==(l=c[1]))return n(null);var h=[];!function t(){l(function(r){for(var o=arguments.length,a=Array(o>1?o-1:0),f=1;f<o;f++)a[f-1]=arguments[f];if(a.length<=1&&(a=a[0]),i(e)&&e.call(null,r,a,u),r)n(r);else{if(h.push(a),c=s(),u=c[0],null==(l=c[1]))return n(null,h);t()}})}()}}}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAADhu0ooAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEg0lEQVRoBe2bPYwUZRjHfzOh08gVFBclOREqLVgLbNRwVppIAgYDFTmuNLkInVeYAAkFdneExNK7GAsSiVdAApVHiA1XuFeclUZJwFxBcRjtTF7zfz/m3p3d8fZjdnZ34J9s9uNm3nl+97xf8zzPJMYYSleSTAGzQMO/pvz7/tylngFNYMe/67WOMTulm1QaaJK8DpwCzgNHB2xtE1gB1jDmj1LMGxg0SWY93Fz881/w22NoPoXtTfh1A7a/he34mHMwfQym34DpQ3DkIDRegcO5K6xaaGPWBzKzb9AkUVdcAo6HnwT3AL6/Cc08VLcS/FlovA+f5qDvAxcxplkNqBt/l4EL4aff4d4lWOkXrkiCvgLnD8GH0SHL9vo9juPeQJ0X14AZff0TflqEG2UD5iXga7DwKrzr//TIzgc9eLd70CTROPxGH/+Ff76GLz93s2Rlug6Nz+DqPnjJX3MeY1bKA02SpdBV5cVP4NpD+LtKyKB34OUfYDHy7jLGXNzrvL1Bk2QlzKi/wK234EZpVg+gLVh4E077FlYxRj2uUOkekEsB8g58NS6QkmyRTf7rnLe1UMUejcakGjwBd6tB6E234aOP4Qt/UuGY7QzqZtefGbPuWqRcN36702zc3nXdOqklxE484w6J78ay1X9d8wwt6jRGtRmY0RKi2bU6cweTbJXNfo2/nG+sFdR1WbuMaJ0c1RLSj2SrbPanXvAsmfIetTOXukHVm4EyJJujLtwyC++CursQu0FfnIBxWaTI9uOeySr2qN1daIM+7L3rMCXbxeAvkW0iHKi7aT6pj5fcDe/QZOBHvYZ5jYhhzrNlHlVkwN5PTrI3g8QgFv/dsgVQ62LdNI/SwDIVsVi21C+uNsZzcwJn2iJFLEfFmPpoXW26bVCu+86mPgzJ4xp5MyhiamSgT2vkzaCIyYLaDbBCkiO3rGRFTFOZRzdq6NGNnEdtmqBOE1FQxLR/X1mN9rrb6fb4BD7o26hI/x8zqpFK82i3//ngybI81a1Sn7qz0fAqL1yFIqZnqc9JcqyGoBFTM/VJWG12j4zWrPIVMe1kHj1QQ48eyHnUgh70G4c6KWJaT23NAKCka50mJLFEieRm6hOqqhngbI28GrFsijFsGGyMRen00ZlWriIWyxZAbQqiLt03120tmwN1JS6q/uBKFCIchrQjGvauKGJYDeU78V7XuliFEZPs1XOulCcUd2Sh211QV8ejEhdllhZGYGMpimy/H9cm5e9ebLRe9QHXJ3AG/g7ei2obWuoaWkFdAlV1PKj6Q4URFdo5kGTrGZt6sVrOJ4PbM94uzquDZpSZem03FTfWegJXvTcf2fBQruCq/cbbHWDD+DpxawLG61ZrsdWpTlVlnSMMzu3z+qjaABVEDNnWviXbovqF+aJqsuJQiqvusONVVR/jCJurSNG4LMwEviioyuQasJ5Vw09GPBvr2rIhglzeC5IXRY+FRz8PZazZGc9DYXLLmXUvNW9rYfCHBxStUyBrPB8eaGup7o+DdGzVjmN17fCQz2gf8AH+A1xHzT72s78YAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(15),h=i(c),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"onClick",value:function(e,t){t.preventDefault(),this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,i=t.level,r=t.activeItem,o=(0,h.default)("locator__nav",{"locator__nav--sub":"sub"===i});return l.default.createElement("nav",{className:o},l.default.createElement("div",{className:"locator__track"},n.map(function(t){return l.default.createElement("button",{key:t,className:(0,h.default)("locator__item",{"is-active":r===t}),onClick:e.onClick.bind(e,t)},t)})))}}]),t}(u.PureComponent);t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),a=n(9),s=i(a),u=function(e){var t=e.data,n=t.name,i=t.address1,r=t.address2,a=t.postalCode,s=t.city,u=t.lat,l=t.long,c=t.tel,h=t.email,f=t.comingSoon;return o.default.createElement("article",{className:"studio"},o.default.createElement("a",{className:"studio__address",href:"http://www.google.com/maps/place/"+u+","+l,target:"_blank"},o.default.createElement("h6",{className:"studio__title"},n),o.default.createElement("span",{className:"studio__address"},i," ",o.default.createElement("br",null),r&&r,a," ",s)),o.default.createElement("a",{className:"studio__email",href:"mailto:"+h},h),o.default.createElement("a",{className:"studio__tel",href:"tel:"+c},c),f&&o.default.createElement("div",{className:"studio__coming-soon"},"coming soon"))};u.propTypes={data:s.default.shape({name:s.default.string.isRequired,city:s.default.string.isRequired,country:s.default.string.isRequired,address1:s.default.string,address2:s.default.string,postalCode:s.default.string,lat:s.default.number,long:s.default.number,tel:s.default.string,email:s.default.string,comingSoon:s.default.bool})},u.defaultProps={data:s.default.shape({address1:"",address2:"",postalCode:"",lat:0,long:0,tel:"",email:"",comingSoon:!1})},t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=n(35),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),c=n(203),h=i(c),f=n(205),d=i(f),p=n(0),m=i(p),v=n(82),g=i(v),y=n(84),b=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,h.default)(e,t)})},_=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,d.default)(e,t)})},w=(s({},g.default.propTypes,{classNames:y.classNamesShape,onEnter:l.func,onEntering:l.func,onEntered:l.func,onExit:l.func,onExiting:l.func,onExited:l.func}),function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(u))),i.onEnter=function(e,t){var n=i.getClassNames(t?"appear":"enter"),r=n.className;i.removeClasses(e,"exit"),b(e,r),i.props.onEnter&&i.props.onEnter(e)},i.onEntering=function(e,t){var n=i.getClassNames(t?"appear":"enter"),r=n.activeClassName;i.reflowAndAddClass(e,r),i.props.onEntering&&i.props.onEntering(e)},i.onEntered=function(e,t){var n=i.getClassNames("enter"),r=n.doneClassName;i.removeClasses(e,t?"appear":"enter"),b(e,r),i.props.onEntered&&i.props.onEntered(e)},i.onExit=function(e){var t=i.getClassNames("exit"),n=t.className;i.removeClasses(e,"appear"),i.removeClasses(e,"enter"),b(e,n),i.props.onExit&&i.props.onExit(e)},i.onExiting=function(e){var t=i.getClassNames("exit"),n=t.activeClassName;i.reflowAndAddClass(e,n),i.props.onExiting&&i.props.onExiting(e)},i.onExited=function(e){var t=i.getClassNames("exit"),n=t.doneClassName;i.removeClasses(e,"exit"),b(e,n),i.props.onExited&&i.props.onExited(e)},i.getClassNames=function(e){var t=i.props.classNames,n="string"!==typeof t?t[e]:t+"-"+e;return{className:n,activeClassName:"string"!==typeof t?t[e+"Active"]:n+"-active",doneClassName:"string"!==typeof t?t[e+"Done"]:n+"-done"}},a=n,o(i,a)}return a(t,e),t.prototype.removeClasses=function(e,t){var n=this.getClassNames(t),i=n.className,r=n.activeClassName,o=n.doneClassName;i&&_(e,i),r&&_(e,r),o&&_(e,o)},t.prototype.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,b(e,t))},t.prototype.render=function(){var e=s({},this.props);return delete e.classNames,m.default.createElement(g.default,s({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(m.default.Component));w.propTypes={},t.default=w,e.exports=t.default},function(e,t,n){"use strict";function i(){}var r=n(202);e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function i(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(204),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=i(e.className,t):e.setAttribute("class",i(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=n(35),l=i(u),c=n(0),h=i(c),f=n(21),d=n(85),p=i(d),m=(l.default.bool.isRequired,function(e){function t(){var n,i,r;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=a(this,e.call.apply(e,[this].concat(u))),v.call(i),r=n,a(i,r)}return s(t,e),t.prototype.handleLifecycle=function(e,t,n){var i,r=this.props.children,o=h.default.Children.toArray(r)[t];o.props[e]&&(i=o.props)[e].apply(i,n),this.props[e]&&this.props[e]((0,f.findDOMNode)(this))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.in,i=r(e,["children","in"]),o=h.default.Children.toArray(t),a=o[0],s=o[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,h.default.createElement(p.default,i,n?h.default.cloneElement(a,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):h.default.cloneElement(s,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},t}(h.default.Component)),v=function(){var e=this;this.handleEnter=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.handleLifecycle("onEnter",0,n)},this.handleEntering=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.handleLifecycle("onEntering",0,n)},this.handleEntered=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.handleLifecycle("onEntered",0,n)},this.handleExit=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.handleLifecycle("onExit",1,n)},this.handleExiting=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.handleLifecycle("onExiting",1,n)},this.handleExited=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.handleLifecycle("onExited",1,n)}};m.propTypes={},t.default=m,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){var n=function(e){return t&&(0,u.isValidElement)(e)?t(e):e},i=Object.create(null);return e&&u.Children.map(e,function(e){return e}).forEach(function(e){i[e.key]=n(e)}),i}function r(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var i=Object.create(null),r=[];for(var o in e)o in t?r.length&&(i[o]=r,r=[]):r.push(o);var a=void 0,s={};for(var u in t){if(i[u])for(a=0;a<i[u].length;a++){var l=i[u][a];s[i[u][a]]=n(l)}s[u]=n(u)}for(a=0;a<r.length;a++)s[r[a]]=n(r[a]);return s}function o(e,t,n){return null!=n[t]?n[t]:e.props[t]}function a(e,t){return i(e.children,function(n){return(0,u.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:o(n,"appear",e),enter:o(n,"enter",e),exit:o(n,"exit",e)})})}function s(e,t,n){var a=i(e.children),s=r(t,a);return Object.keys(s).forEach(function(i){var r=s[i];if((0,u.isValidElement)(r)){var l=i in t,c=i in a,h=t[i],f=(0,u.isValidElement)(h)&&!h.props.in;!c||l&&!f?c||!l||f?c&&l&&(0,u.isValidElement)(h)&&(s[i]=(0,u.cloneElement)(r,{onExited:n.bind(null,r),in:h.props.in,exit:o(r,"exit",e),enter:o(r,"enter",e)})):s[i]=(0,u.cloneElement)(r,{in:!1}):s[i]=(0,u.cloneElement)(r,{onExited:n.bind(null,r),in:!0,exit:o(r,"exit",e),enter:o(r,"enter",e)})}}),s}t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=r,t.getInitialChildMapping=a,t.getNextChildMapping=s;var u=n(0)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"onChange",value:function(e){e.preventDefault(),this.props.onChange("city",e.target.value)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.selectedCity,i=n||"";return u.default.createElement("div",{className:"locator__select"},u.default.createElement("h6",{className:"locator__select-title"},window.locales.selectorLabelCity),u.default.createElement("select",{onChange:this.onChange.bind(this),value:i},Object.keys(t).map(function(e){return u.default.createElement("optgroup",{key:e,label:e},t[e].map(function(e){return u.default.createElement("option",{key:e,value:e},e)}))})),u.default.createElement("div",{className:"locator__select-icon"}))}}]),t}(s.PureComponent);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(21),s=i(a),u=n(0),l=i(u),c=n(210),h=i(c),f=n(43),d=i(f),p=function(){function e(){r(this,e),this.openOverlay=this.openOverlay.bind(this),this.closeOverlay=this.closeOverlay.bind(this),d.default.on("open-menu",this.closeOverlay),this.isOverlayOpen=!1,this.btns=document.querySelectorAll(".js-booking-btn"),this.node=document.querySelector(".js-booking-overlay"),this.btns&&this.btns.length&&this.node&&this.init()}return o(e,[{key:"init",value:function(){var e=this;s.default.render(l.default.createElement(h.default,null),this.node),this.btns.forEach(function(t){return t.addEventListener("click",function(t){t.preventDefault(),e.isOverlayOpen?e.closeOverlay():e.openOverlay()})}),window.addEventListener("wheel",this.closeOverlay)}},{key:"openOverlay",value:function(){this.isOverlayOpen=!0,this.node.classList.add("is-visible"),this.btns.forEach(function(e){return e.classList.add("is-active")}),d.default.emit("open-booking")}},{key:"closeOverlay",value:function(){this.isOverlayOpen=!1,this.node.classList.remove("is-visible"),this.btns.forEach(function(e){return e.classList.remove("is-active")})}}]),e}();t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),h=n(58),f=i(h),d=n(86),p=i(d),m=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={selectedUrl:null},e.isLoadEventBinded=!1,e.onWheel=e.onWheel.bind(e),e.onClickBook=e.onClickBook.bind(e),e.scrollInner=e.scrollInner.bind(e),e}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.node.addEventListener("wheel",this.onWheel,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.node.removeEventListener("wheel",this.onWheel)}},{key:"componentDidUpdate",value:function(){this.scrollInner()}},{key:"onWheel",value:function(e){e.stopPropagation()}},{key:"onChange",value:function(e){var t=e.selectedUrl;this.scrollInner(),window.hcjq&&!this.isLoadEventBinded&&(this.isLoadEventBinded=!0,window.hcjq(document).on("widget:loaded",this.onHcWidgetLoad.bind(this))),this.setState(function(){return{selectedUrl:t}})}},{key:"onHcWidgetLoad",value:function(){var e=this,t=window.hcjq(document).find(".healcode.appointments form");t&&t.bind("ajax:success",function(){return requestAnimationFrame(function(){return e.scrollInner()})}),this.scrollInner()}},{key:"scrollInner",value:function(){this.inner&&(this.inner.scrollTop=5e3)}},{key:"onClickBook",value:function(){var e=this.state.selectedUrl;e.dataLayer&&window.dataLayer&&window.dataLayer.push(s({event:"initiateBooking"},e.dataLayer)),window.location.href=e.url}},{key:"render",value:function(){var e=this,t=this.state.selectedUrl,n=window.studios.filter(function(e){return!e.comingSoon}),i=s({},window.cities);return Object.keys(i).forEach(function(e){i[e]=i[e].filter(function(e){return n.find(function(t){return t.city===e})})}),c.default.createElement("div",{className:"booking__inner",ref:function(t){return e.node=t}},c.default.createElement("div",{className:"booking__selector",ref:function(t){return e.inner=t}},c.default.createElement(p.default,{onChange:this.onChange.bind(this),countries:window.countries,cities:i,studios:n,color:"white",persistData:!0}),t&&c.default.createElement("div",{className:"booking__button"},c.default.createElement(f.default,{text:window.locales.booking,color:"black",onClick:this.onClickBook}))))}}]),t}(l.PureComponent);t.default=m},function(e,t,n){"use strict";var i=n(212);e.exports=function(e){try{var t=i.localStorage;return!!t&&(t.setItem(e,e),t.removeItem(e),!0)}catch(e){return!1}}("HAS_LOCAL_STORAGE")},function(e,t,n){(function(t){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},e.exports=n}).call(t,n(42))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ResetButton=t.ListItem=t.List=t.Label=t.Row=t.Icon=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(0),a=i(o),s=n(15),u=i(s),l=n(9),c=i(l),h=n(59),f=t.Icon=function(e){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10"},a.default.createElement("path",{d:"M10,4.36V5.64H5.64V10H4.36V5.64H0V4.36H4.36V0H5.64V4.36Z"}))};t.Row=function(e){return a.default.createElement(h.CSSTransition,r({},e,{timeout:{enter:550},exit:!1,classNames:{enter:"selector__row--enter",enterActive:"selector__row--enter-active"}}),a.default.createElement("div",{className:"selector__row"},e.children))};(t.Label=function(e){return a.default.createElement("h5",{className:(0,u.default)("selector__label",{"selector__label--error":e.active&&e.error})},e.label)}).propTypes={active:c.default.bool,error:c.default.bool,label:c.default.string};t.List=function(e){return a.default.createElement("ul",{className:"selector__list"},e.children)};(t.ListItem=function(e){return a.default.createElement("li",{className:"selector__item"},e.active?a.default.createElement("button",{className:"selector__button selector__button--active",onClick:e.onClick},e.item):a.default.createElement("span",{className:"selector__button"},e.item))}).propTypes={active:c.default.bool,label:c.default.string,onClick:c.default.func};t.ResetButton=function(e){return a.default.createElement(h.CSSTransition,{in:!e.active,mountOnEnter:!0,unmountOnExit:!0,exit:!1,timeout:{enter:500},classNames:{enter:"selector__reset--enter",enterActive:"selector__reset--enter-active"}},a.default.createElement("button",{className:"selector__reset",onClick:e.onClick},a.default.createElement(f,null)))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(21),s=i(a),u=n(0),l=i(u),c=n(215),h=i(c),f=function(){function e(){r(this,e),this.node=document.querySelector(".js-application"),this.node&&this.init()}return o(e,[{key:"init",value:function(){s.default.render(l.default.createElement(h.default,null),this.node)}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),h=n(58),f=i(h),d=n(86),p=i(d),m=n(78),v=i(m),g=n(79),y=n(80),b=i(y),_=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onLoad=e.onLoad.bind(e),e.state={sendState:"",preName:{value:"",error:""},name:{value:"",error:""},tel:{value:"",error:""},email:{value:"",error:""},city:null,touched:!1,isValid:!1},e}return s(t,e),u(t,[{key:"componentDidUpdate",value:function(){var e=this.state,t=e.preName,n=e.name,i=e.tel,r=e.email,o=e.city,a=!!t.value&&!t.error&&!!n.value&&!n.error&&!!i.value&&!i.error&&!!r.value&&!r.error&&!!o;this.setState(function(){return{isValid:a}})}},{key:"onClick",value:function(e){if(e.preventDefault(),!this.state.city)return void this.setState(function(){return{touched:!0}});if(this.state.isValid){var t=this.state,n=t.preName,i=t.name,r=t.tel,o=t.email,a=t.city,s=new FormData;s.append("preName",n.value),s.append("name",i.value),s.append("tel",r.value),s.append("email",o.value),s.append("city",a);var u=b.default.get("csrftoken");this.setState(function(){return{sendState:"loading"}}),fetch(window.location,{method:"POST",headers:{"X-CSRFToken":u,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:s}).then(this.onLoad).catch(function(e){})}}},{key:"onLoad",value:function(e){var t=this;200===e.status?this.setState(function(){return{sendState:"success"}}):400===e.status&&e.json().then(function(e){Object.keys(e).forEach(function(n){t.state[n]&&t.setState(function(){return r({},n,{value:t.state[n].value,error:e[n][0]})})})})}},{key:"onError",value:function(e){}},{key:"onSelectorChange",value:function(e){var t=e.selectedCity;this.setState(function(){return{city:t}})}},{key:"onFormChange",value:function(e,t){var n=this;this.setState(function(i){var o;return o={},r(o,e,{value:t,error:n.validate(e,t)}),r(o,"touched",!0),o})}},{key:"validate",value:function(e,t){var n="";return"email"!==e||(0,g.validateEmail)(t)?""===t&&(n=window.locales.requiredField):n=window.locales.wrongEmailFormat,n}},{key:"render",value:function(){var e=this.state,t=e.sendState,n=e.isValid,i=e.preName,r=e.name,o=e.tel,a=e.email,s=e.touched;return c.default.createElement("section",{className:"contact"},c.default.createElement("div",{className:"contact__heading"},c.default.createElement("div",{className:"heading"},c.default.createElement("h6",{className:"heading__eyebrow",dangerouslySetInnerHTML:{__html:window.locales.applicationEyebrow}}),c.default.createElement("h3",{className:"heading__title",dangerouslySetInnerHTML:{__html:"success"===t?window.locales.applicationSendSuccessTitle:window.locales.applicationTitle}}))),""===t&&c.default.createElement("div",{className:"contact__content"},c.default.createElement("div",{className:"contact__info"},c.default.createElement("h3",{className:"contact__subtitle"},window.locales.chooseCity),c.default.createElement(p.default,{countries:window.countries,cities:window.cities,studios:window.studios,showStudio:!1,showUrl:!1,showError:s,onChange:this.onSelectorChange.bind(this)})),c.default.createElement("div",{className:"contact__form"},c.default.createElement("h3",{className:"contact__subtitle"},window.locales.yourData),c.default.createElement(v.default,{preName:i,name:r,tel:o,email:a,onChange:this.onFormChange.bind(this)}),c.default.createElement("div",{className:"form__button"},c.default.createElement(f.default,{text:window.locales.applyText,onClick:this.onClick.bind(this),color:"white",disabled:!n})))),"success"===t&&c.default.createElement("div",{className:"contact__message",dangerouslySetInnerHTML:{__html:window.locales.applicationSendSuccess}}),"error"===t&&c.default.createElement("div",{className:"contact__message",dangerouslySetInnerHTML:{__html:window.locales.sendError}}),"loading"===t&&c.default.createElement("div",{className:"contact__loader"},c.default.createElement("div",{className:"loader"})))}}]),t}(l.PureComponent);t.default=_},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(217),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function e(){i(this,e),document.querySelectorAll(".js-accordion").forEach(function(e){return new o.default(e)})};t.default=a},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(218),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){function e(t){var n=this;r(this,e),this.node=t;var o=[].concat(i(t.querySelectorAll(".js-accordion-item")));this.items=o.map(function(e,t){return new s.default(e,t)}),this.items.forEach(function(e){return e.on("open",n.onOpen.bind(n))})}return o(e,[{key:"onOpen",value:function(e){this.items.forEach(function(t){return t.id===e?t.open():t.close()})}}]),e}();t.default=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(32),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.id=n,o.btn=e.querySelector(".js-accordion-btn"),o.copy=e.querySelector(".js-accordion-copy"),o.isOpen=!1,e.addEventListener("click",o.onClick.bind(o)),o}return o(t,e),a(t,[{key:"onClick",value:function(e){e.preventDefault(),this.isOpen?this.close():this.emit("open",this.id)}},{key:"open",value:function(){var e=this;this.isOpen=!0,this.btn.classList.add("is-open"),this.copy.classList.add("is-open"),requestAnimationFrame(function(){return e.copy.classList.add("animate-in")})}},{key:"close",value:function(){this.isOpen=!1,this.btn.classList.remove("is-open"),this.copy.classList.remove("is-open"),this.copy.classList.remove("animate-in")}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function e(){i(this,e),document.querySelectorAll(".js-testimonials").forEach(function(e){return new o.default(e)})};t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(33),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){var n=this;i(this,e),this.node=t,this.items=this.node.querySelectorAll(".js-testimonial-item"),this.observer=new IntersectionObserver(this.onIntersect.bind(this),{threshold:[.25,.5]}),this.items.forEach(function(e){return n.observer.observe(e)})}return r(e,[{key:"onIntersect",value:function(e,t){e.forEach(function(e){e.intersectionRatio>(a.default.mobile?.25:.5)&&(e.target.classList.add("is-visible"),t.unobserve(e.target))})}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(222),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function e(){i(this,e),this.nodes=document.querySelectorAll(".js-impressions"),this.nodes.forEach(function(e){return new o.default(e)})};t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(223),u=i(s),l=n(224),c=i(l),h=function(){function e(t){var n=this;o(this,e),this.images=[].concat(r(t.querySelectorAll(".js-impressions-item"))),this.photoswipe=document.querySelector(".js-photoswipe"),this.images.forEach(function(e,t){return e.addEventListener("click",n.onClick.bind(n,t))}),this.items=this.images.map(function(e){return{src:e.dataset.large,w:e.dataset.width,h:e.dataset.height}})}return a(e,[{key:"onClick",value:function(e,t){t.preventDefault(),new u.default(this.photoswipe,c.default,this.items,{index:e}).init()}}]),e}();t.default=h},function(e,t,n){var i,r;!function(o,a){i=a,void 0!==(r="function"===typeof i?i.call(t,n,t,e):i)&&(e.exports=r)}(0,function(){"use strict";return function(e,t,n,i){var r={features:null,bind:function(e,t,n,i){var r=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[r](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){r.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){r.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(r.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(r.features)return r.features;var e=r.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);a&&a.length>0&&(a=parseInt(a[1],10))>=1&&a<8&&(i.isOldIOSPhone=!0)}var s=o.match(/Android\s([0-9\.]*)/),u=s?s[1]:0;u=parseFloat(u),u>=1&&(u<4.4&&(i.isOldAndroid=!0),i.androidVersion=u),i.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var l,c,h=["transform","perspective","animationName"],f=["","webkit","Moz","ms","O"],d=0;d<4;d++){n=f[d];for(var p=0;p<3;p++)l=h[p],c=n+(n?l.charAt(0).toUpperCase()+l.slice(1):l),!i[l]&&c in t&&(i[l]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var m=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-m)),i=window.setTimeout(function(){e(t+n)},n);return m=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,r.features=i,i}};r.detectFeatures(),r.features.oldIE&&(r.bind=function(e,t,n,i){t=t.split(" ");for(var r,o=(i?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(r=t[s])if("object"===typeof n&&n.handleEvent){if(i){if(!n["oldIE"+r])return!1}else n["oldIE"+r]=a;e[o]("on"+r,n["oldIE"+r])}else e[o]("on"+r,n)});var o=this,a={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};r.extend(a,i);var s,u,l,c,h,f,d,p,m,v,g,y,b,_,w,x,M,S,E,T,A,C,P,O,L,k,I,R,N,D,F,U,j,B,z,G,V,W,H,q,X,Y,K,Z,J,Q,$,ee,te,ne,ie,re,oe,ae,se,ue,le,ce=function(){return{x:0,y:0}},he=ce(),fe=ce(),de=ce(),pe={},me=0,ve={},ge=ce(),ye=0,be=!0,_e=[],we={},xe=!1,Me=function(e,t){r.extend(o,t.publicMethods),_e.push(e)},Se=function(e){var t=Zt();return e>t-1?e-t:e<0?t+e:e},Ee={},Te=function(e,t){return Ee[e]||(Ee[e]=[]),Ee[e].push(t)},Ae=function(e){var t=Ee[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(o,n)}},Ce=function(){return(new Date).getTime()},Pe=function(e){se=e,o.bg.style.opacity=e*a.bgOpacity},Oe=function(e,t,n,i,r){(!xe||r&&r!==o.currItem)&&(i/=r?r.fitRatio:o.currItem.fitRatio),e[C]=y+t+"px, "+n+"px"+b+" scale("+i+")"},Le=function(e){ne&&(e&&(v>o.currItem.fitRatio?xe||(ln(o.currItem,!1,!0),xe=!0):xe&&(ln(o.currItem),xe=!1)),Oe(ne,de.x,de.y,v))},ke=function(e){e.container&&Oe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ie=function(e,t){t[C]=y+e+"px, 0px"+b},Re=function(e,t){if(!a.loop&&t){var n=c+(ge.x*me-e)/ge.x,i=Math.round(e-mt.x);(n<0&&i>0||n>=Zt()-1&&i<0)&&(e=mt.x+i*a.mainScrollEndFriction)}mt.x=e,Ie(e,h)},Ne=function(e,t){var n=vt[e]-ve[e];return fe[e]+he[e]+n-n*(t/g)},De=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Fe=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ue=null,je=function(){Ue&&(r.unbind(document,"mousemove",je),r.addClass(e,"pswp--has_mouse"),a.mouseUsed=!0,Ae("mouseUsed")),Ue=setTimeout(function(){Ue=null},100)},Be=function(){r.bind(document,"keydown",o),F.transform&&r.bind(o.scrollWrap,"click",o),a.mouseUsed||r.bind(document,"mousemove",je),r.bind(window,"resize scroll orientationchange",o),Ae("bindEvents")},ze=function(){r.unbind(window,"resize scroll orientationchange",o),r.unbind(window,"scroll",m.scroll),r.unbind(document,"keydown",o),r.unbind(document,"mousemove",je),F.transform&&r.unbind(o.scrollWrap,"click",o),H&&r.unbind(window,d,o),clearTimeout(U),Ae("unbindEvents")},Ge=function(e,t){var n=on(o.currItem,pe,e);return t&&(te=n),n},Ve=function(e){return e||(e=o.currItem),e.initialZoomLevel},We=function(e){return e||(e=o.currItem),e.w>0?a.maxSpreadZoom:1},He=function(e,t,n,i){return i===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=Ne(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},qe=function(){if(C){var t=F.perspective&&!O;return y="translate"+(t?"3d(":"("),void(b=F.perspective?", 0px)":")")}C="left",r.addClass(e,"pswp--ie"),Ie=function(e,t){t.left=e+"px"},ke=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,r=t*e.h;n.width=i+"px",n.height=r+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Le=function(){if(ne){var e=ne,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,r=n*t.h;e.width=i+"px",e.height=r+"px",e.left=de.x+"px",e.top=de.y+"px"}}},Xe=function(e){var t="";a.escKey&&27===e.keyCode?t="close":a.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]()))},Ye=function(e){e&&(Y||X||ie||V)&&(e.preventDefault(),e.stopPropagation())},Ke=function(){o.setScrollOffset(0,r.getScrollY())},Ze={},Je=0,Qe=function(e){Ze[e]&&(Ze[e].raf&&k(Ze[e].raf),Je--,delete Ze[e])},$e=function(e){Ze[e]&&Qe(e),Ze[e]||(Je++,Ze[e]={})},et=function(){for(var e in Ze)Ze.hasOwnProperty(e)&&Qe(e)},tt=function(e,t,n,i,r,o,a){var s,u=Ce();$e(e);var l=function(){if(Ze[e]){if((s=Ce()-u)>=i)return Qe(e),o(n),void(a&&a());o((n-t)*r(s/i)+t),Ze[e].raf=L(l)}};l()},nt={shout:Ae,listen:Te,viewportSize:pe,options:a,isMainScrollAnimating:function(){return ie},getZoomLevel:function(){return v},getCurrentIndex:function(){return c},isDragging:function(){return H},isZooming:function(){return Q},setScrollOffset:function(e,t){ve.x=e,D=ve.y=t,Ae("updateScrollOffset",ve)},applyZoomPan:function(e,t,n,i){de.x=t,de.y=n,v=e,Le(i)},init:function(){if(!s&&!u){var n;o.framework=r,o.template=e,o.bg=r.getChildByClass(e,"pswp__bg"),I=e.className,s=!0,F=r.detectFeatures(),L=F.raf,k=F.caf,C=F.transform,N=F.oldIE,o.scrollWrap=r.getChildByClass(e,"pswp__scroll-wrap"),o.container=r.getChildByClass(o.scrollWrap,"pswp__container"),h=o.container.style,o.itemHolders=x=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],x[0].el.style.display=x[2].el.style.display="none",qe(),m={resize:o.updateSize,orientationchange:function(){clearTimeout(U),U=setTimeout(function(){pe.x!==o.scrollWrap.clientWidth&&o.updateSize()},500)},scroll:Ke,keydown:Xe,click:Ye};var i=F.isOldIOSPhone||F.isOldAndroid||F.isMobileOpera;for(F.animationName&&F.transform&&!i||(a.showAnimationDuration=a.hideAnimationDuration=0),n=0;n<_e.length;n++)o["init"+_e[n]]();if(t){(o.ui=new t(o,r)).init()}Ae("firstUpdate"),c=c||a.index||0,(isNaN(c)||c<0||c>=Zt())&&(c=0),o.currItem=Kt(c),(F.isOldIOSPhone||F.isOldAndroid)&&(be=!1),e.setAttribute("aria-hidden","false"),a.modal&&(be?e.style.position="fixed":(e.style.position="absolute",e.style.top=r.getScrollY()+"px")),void 0===D&&(Ae("initialLayout"),D=R=r.getScrollY());var l="pswp--open ";for(a.mainClass&&(l+=a.mainClass+" "),a.showHideOpacity&&(l+="pswp--animate_opacity "),l+=O?"pswp--touch":"pswp--notouch",l+=F.animationName?" pswp--css_animation":"",l+=F.svg?" pswp--svg":"",r.addClass(e,l),o.updateSize(),f=-1,ye=null,n=0;n<3;n++)Ie((n+f)*ge.x,x[n].el.style);N||r.bind(o.scrollWrap,p,o),Te("initialZoomInEnd",function(){o.setContent(x[0],c-1),o.setContent(x[2],c+1),x[0].el.style.display=x[2].el.style.display="block",a.focus&&e.focus(),Be()}),o.setContent(x[1],c),o.updateCurrItem(),Ae("afterInit"),be||(_=setInterval(function(){Je||H||Q||v!==o.currItem.initialZoomLevel||o.updateSize()},1e3)),r.addClass(e,"pswp--visible")}},close:function(){s&&(s=!1,u=!0,Ae("close"),ze(),Qt(o.currItem,null,!0,o.destroy))},destroy:function(){Ae("destroy"),Ht&&clearTimeout(Ht),e.setAttribute("aria-hidden","true"),e.className=I,_&&clearInterval(_),r.unbind(o.scrollWrap,p,o),r.unbind(window,"scroll",o),wt(),et(),Ee=null},panTo:function(e,t,n){n||(e>te.min.x?e=te.min.x:e<te.max.x&&(e=te.max.x),t>te.min.y?t=te.min.y:t<te.max.y&&(t=te.max.y)),de.x=e,de.y=t,Le()},handleEvent:function(e){e=e||window.event,m[e.type]&&m[e.type](e)},goTo:function(e){e=Se(e);var t=e-c;ye=t,c=e,o.currItem=Kt(c),me-=t,Re(ge.x*me),et(),ie=!1,o.updateCurrItem()},next:function(){o.goTo(c+1)},prev:function(){o.goTo(c-1)},updateCurrZoomItem:function(e){if(e&&Ae("beforeChange",0),x[1].el.children.length){var t=x[1].el.children[0];ne=r.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ne=null;te=o.currItem.bounds,g=v=o.currItem.initialZoomLevel,de.x=te.center.x,de.y=te.center.y,e&&Ae("afterChange")},invalidateCurrItems:function(){w=!0;for(var e=0;e<3;e++)x[e].item&&(x[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==ye){var t,n=Math.abs(ye);if(!(e&&n<2)){o.currItem=Kt(c),xe=!1,Ae("beforeChange",ye),n>=3&&(f+=ye+(ye>0?-3:3),n=3);for(var i=0;i<n;i++)ye>0?(t=x.shift(),x[2]=t,f++,Ie((f+2)*ge.x,t.el.style),o.setContent(t,c-n+i+1+1)):(t=x.pop(),x.unshift(t),f--,Ie(f*ge.x,t.el.style),o.setContent(t,c+n-i-1-1));if(ne&&1===Math.abs(ye)){var r=Kt(M);r.initialZoomLevel!==v&&(on(r,pe),ln(r),ke(r))}ye=0,o.updateCurrZoomItem(),M=c,Ae("afterChange")}}},updateSize:function(t){if(!be&&a.modal){var n=r.getScrollY();if(D!==n&&(e.style.top=n+"px",D=n),!t&&we.x===window.innerWidth&&we.y===window.innerHeight)return;we.x=window.innerWidth,we.y=window.innerHeight,e.style.height=we.y+"px"}if(pe.x=o.scrollWrap.clientWidth,pe.y=o.scrollWrap.clientHeight,Ke(),ge.x=pe.x+Math.round(pe.x*a.spacing),ge.y=pe.y,Re(ge.x*me),Ae("beforeResize"),void 0!==f){for(var i,s,u,l=0;l<3;l++)i=x[l],Ie((l+f)*ge.x,i.el.style),u=c+l-1,a.loop&&Zt()>2&&(u=Se(u)),s=Kt(u),s&&(w||s.needsUpdate||!s.bounds)?(o.cleanSlide(s),o.setContent(i,u),1===l&&(o.currItem=s,o.updateCurrZoomItem(!0)),s.needsUpdate=!1):-1===i.index&&u>=0&&o.setContent(i,u),s&&s.container&&(on(s,pe),ln(s),ke(s));w=!1}g=v=o.currItem.initialZoomLevel,te=o.currItem.bounds,te&&(de.x=te.center.x,de.y=te.center.y,Le(!0)),Ae("resize")},zoomTo:function(e,t,n,i,o){t&&(g=v,vt.x=Math.abs(t.x)-de.x,vt.y=Math.abs(t.y)-de.y,De(fe,de));var a=Ge(e,!1),s={};He("x",a,s,e),He("y",a,s,e);var u=v,l={x:de.x,y:de.y};Fe(s);var c=function(t){1===t?(v=e,de.x=s.x,de.y=s.y):(v=(e-u)*t+u,de.x=(s.x-l.x)*t+l.x,de.y=(s.y-l.y)*t+l.y),o&&o(t),Le(1===t)};n?tt("customZoomTo",0,1,n,i||r.easing.sine.inOut,c):c(1)}},it={},rt={},ot={},at={},st={},ut=[],lt={},ct=[],ht={},ft=0,dt=ce(),pt=0,mt=ce(),vt=ce(),gt=ce(),yt=function(e,t){return e.x===t.x&&e.y===t.y},bt=function(e,t){return Math.abs(e.x-t.x)<25&&Math.abs(e.y-t.y)<25},_t=function(e,t){return ht.x=Math.abs(e.x-t.x),ht.y=Math.abs(e.y-t.y),Math.sqrt(ht.x*ht.x+ht.y*ht.y)},wt=function(){K&&(k(K),K=null)},xt=function(){H&&(K=L(xt),Ut())},Mt=function(){return!("fit"===a.scaleMode&&v===o.currItem.initialZoomLevel)},St=function(e,t){return!(!e||e===document)&&(!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:St(e.parentNode,t)))},Et={},Tt=function(e,t){return Et.prevent=!St(e.target,a.isClickableElement),Ae("preventDragEvent",e,t,Et),Et.prevent},At=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Ct=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Pt=function(e,t,n){if(e-B>50){var i=ct.length>2?ct.shift():{};i.x=t,i.y=n,ct.push(i),B=e}},Ot=function(){var e=de.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(pe.y/2))},Lt={},kt={},It=[],Rt=function(e){for(;It.length>0;)It.pop();return P?(le=0,ut.forEach(function(e){0===le?It[0]=e:1===le&&(It[1]=e),le++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(It[0]=At(e.touches[0],Lt),e.touches.length>1&&(It[1]=At(e.touches[1],kt))):(Lt.x=e.pageX,Lt.y=e.pageY,Lt.id="",It[0]=Lt),It},Nt=function(e,t){var n,i,r,s,u=de[e]+t[e],l=t[e]>0,c=mt.x+t.x,h=mt.x-lt.x;if(n=u>te.min[e]||u<te.max[e]?a.panEndFriction:1,u=de[e]+t[e]*n,(a.allowPanToNext||v===o.currItem.initialZoomLevel)&&(ne?"h"!==re||"x"!==e||X||(l?(u>te.min[e]&&(n=a.panEndFriction,te.min[e]-u,i=te.min[e]-fe[e]),(i<=0||h<0)&&Zt()>1?(s=c,h<0&&c>lt.x&&(s=lt.x)):te.min.x!==te.max.x&&(r=u)):(u<te.max[e]&&(n=a.panEndFriction,u-te.max[e],i=fe[e]-te.max[e]),(i<=0||h>0)&&Zt()>1?(s=c,h>0&&c<lt.x&&(s=lt.x)):te.min.x!==te.max.x&&(r=u))):s=c,"x"===e))return void 0!==s&&(Re(s,!0),Z=s!==lt.x),te.min.x!==te.max.x&&(void 0!==r?de.x=r:Z||(de.x+=t.x*n)),void 0!==s;ie||Z||v>o.currItem.fitRatio&&(de[e]+=t[e]*n)},Dt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Yt)return void e.preventDefault();if(!W||"mousedown"!==e.type){if(Tt(e,!0)&&e.preventDefault(),Ae("pointerDown"),P){var t=r.arraySearch(ut,e.pointerId,"id");t<0&&(t=ut.length),ut[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Rt(e),i=n.length;J=null,et(),H&&1!==i||(H=oe=!0,r.bind(window,d,o),G=ue=ae=V=Z=Y=q=X=!1,re=null,Ae("firstTouchStart",n),De(fe,de),he.x=he.y=0,De(at,n[0]),De(st,at),lt.x=ge.x*me,ct=[{x:at.x,y:at.y}],B=j=Ce(),Ge(v,!0),wt(),xt()),!Q&&i>1&&!ie&&!Z&&(g=v,X=!1,Q=q=!0,he.y=he.x=0,De(fe,de),De(it,n[0]),De(rt,n[1]),Ct(it,rt,gt),vt.x=Math.abs(gt.x)-de.x,vt.y=Math.abs(gt.y)-de.y,$=ee=_t(it,rt))}}},Ft=function(e){if(e.preventDefault(),P){var t=r.arraySearch(ut,e.pointerId,"id");if(t>-1){var n=ut[t];n.x=e.pageX,n.y=e.pageY}}if(H){var i=Rt(e);if(re||Y||Q)J=i;else if(mt.x!==ge.x*me)re="h";else{var o=Math.abs(i[0].x-at.x)-Math.abs(i[0].y-at.y);Math.abs(o)>=10&&(re=o>0?"h":"v",J=i)}}},Ut=function(){if(J){var e=J.length;if(0!==e)if(De(it,J[0]),ot.x=it.x-at.x,ot.y=it.y-at.y,Q&&e>1){if(at.x=it.x,at.y=it.y,!ot.x&&!ot.y&&yt(J[1],rt))return;De(rt,J[1]),X||(X=!0,Ae("zoomGestureStarted"));var t=_t(it,rt),n=Vt(t);n>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(ue=!0);var i=1,r=Ve(),s=We();if(n<r)if(a.pinchToClose&&!ue&&g<=o.currItem.initialZoomLevel){var u=r-n,l=1-u/(r/1.2);Pe(l),Ae("onPinchClose",l),ae=!0}else i=(r-n)/r,i>1&&(i=1),n=r-i*(r/3);else n>s&&(i=(n-s)/(6*r),i>1&&(i=1),n=s+i*r);i<0&&(i=0),$=t,Ct(it,rt,dt),he.x+=dt.x-gt.x,he.y+=dt.y-gt.y,De(gt,dt),de.x=Ne("x",n),de.y=Ne("y",n),G=n>v,v=n,Le()}else{if(!re)return;if(oe&&(oe=!1,Math.abs(ot.x)>=10&&(ot.x-=J[0].x-st.x),Math.abs(ot.y)>=10&&(ot.y-=J[0].y-st.y)),at.x=it.x,at.y=it.y,0===ot.x&&0===ot.y)return;if("v"===re&&a.closeOnVerticalDrag&&!Mt()){he.y+=ot.y,de.y+=ot.y;var c=Ot();return V=!0,Ae("onVerticalDrag",c),Pe(c),void Le()}Pt(Ce(),it.x,it.y),Y=!0,te=o.currItem.bounds;var h=Nt("x",ot);h||(Nt("y",ot),Fe(de),Le())}}},jt=function(e){if(F.isOldAndroid){if(W&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(W),W=setTimeout(function(){W=0},600))}Ae("pointerUp"),Tt(e,!1)&&e.preventDefault();var t;if(P){var n=r.arraySearch(ut,e.pointerId,"id");if(n>-1)if(t=ut.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var s,u=Rt(e),l=u.length;if("mouseup"===e.type&&(l=0),2===l)return J=null,!0;1===l&&De(st,u[0]),0!==l||re||ie||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ae("touchRelease",e,t));var c=-1;if(0===l&&(H=!1,r.unbind(window,d,o),wt(),Q?c=0:-1!==pt&&(c=Ce()-pt)),pt=1===l?Ce():-1,s=-1!==c&&c<150?"zoom":"swipe",Q&&l<2&&(Q=!1,1===l&&(s="zoomPointerUp"),Ae("zoomGestureEnded")),J=null,Y||X||ie||V)if(et(),z||(z=Bt()),z.calculateSwipeSpeed("x"),V){var h=Ot();if(h<a.verticalDragRange)o.close();else{var f=de.y,p=se;tt("verticalDrag",0,1,300,r.easing.cubic.out,function(e){de.y=(o.currItem.initialPosition.y-f)*e+f,Pe((1-p)*e+p),Le()}),Ae("onVerticalDrag",1)}}else{if((Z||ie)&&0===l){var m=Gt(s,z);if(m)return;s="zoomPointerUp"}if(!ie)return"swipe"!==s?void Wt():void(!Z&&v>o.currItem.fitRatio&&zt(z))}},Bt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){ct.length>1?(e=Ce()-B+50,t=ct[ct.length-2][i]):(e=Ce()-j,t=st[i]),n.lastFlickOffset[i]=at[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(de[e]>te.min[e]?n.backAnimDestination[e]=te.min[e]:de[e]<te.max[e]&&(n.backAnimDestination[e]=te.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,tt("bounceZoomPan"+e,de[e],n.backAnimDestination[e],t||300,r.easing.sine.out,function(t){de[e]=t,Le()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,de[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Ze.zoomPan&&(Ze.zoomPan.raf=L(n.panAnimLoop),n.now=Ce(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Le(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return de.x=Math.round(de.x),de.y=Math.round(de.y),Le(),void Qe("zoomPan")}};return n},zt=function(e){if(e.calculateSwipeSpeed("y"),te=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;$e("zoomPan"),e.lastNow=Ce(),e.panAnimLoop()},Gt=function(e,t){var n;ie||(ft=c);var i;if("swipe"===e){var s=at.x-st.x,u=t.lastFlickDist.x<10;s>30&&(u||t.lastFlickOffset.x>20)?i=-1:s<-30&&(u||t.lastFlickOffset.x<-20)&&(i=1)}var l;i&&(c+=i,c<0?(c=a.loop?Zt()-1:0,l=!0):c>=Zt()&&(c=a.loop?0:Zt()-1,l=!0),l&&!a.loop||(ye+=i,me-=i,n=!0));var h,f=ge.x*me,d=Math.abs(f-mt.x);return n||f>mt.x===t.lastFlickSpeed.x>0?(h=Math.abs(t.lastFlickSpeed.x)>0?d/Math.abs(t.lastFlickSpeed.x):333,h=Math.min(h,400),h=Math.max(h,250)):h=333,ft===c&&(n=!1),ie=!0,Ae("mainScrollAnimStart"),tt("mainScroll",mt.x,f,h,r.easing.cubic.out,Re,function(){et(),ie=!1,ft=-1,(n||ft!==c)&&o.updateCurrItem(),Ae("mainScrollAnimComplete")}),n&&o.updateCurrItem(!0),n},Vt=function(e){return 1/ee*e*g},Wt=function(){var e=v,t=Ve(),n=We();v<t?e=t:v>n&&(e=n);var i,a=se;return ae&&!G&&!ue&&v<t?(o.close(),!0):(ae&&(i=function(e){Pe((1-a)*e+a)}),o.zoomTo(e,0,200,r.easing.cubic.out,i),!0)};Me("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,r){S=e+t,E=e+n,T=e+i,A=r?e+r:""};P=F.pointerEvent,P&&F.touch&&(F.touch=!1),P?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):F.touch?(e("touch","start","move","end","cancel"),O=!0):e("mouse","down","move","up"),d=E+" "+T+" "+A,p=S,P&&!O&&(O=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=O,m[S]=Dt,m[E]=Ft,m[T]=jt,A&&(m[A]=m[T]),F.touch&&(p+=" mousedown",d+=" mousemove mouseup",m.mousedown=m[S],m.mousemove=m[E],m.mouseup=m[T]),O||(a.allowPanToNext=!1)}}});var Ht,qt,Xt,Yt,Kt,Zt,Jt,Qt=function(t,n,i,s){Ht&&clearTimeout(Ht),Yt=!0,Xt=!0;var u;t.initialLayout?(u=t.initialLayout,t.initialLayout=null):u=a.getThumbBoundsFn&&a.getThumbBoundsFn(c);var h=i?a.hideAnimationDuration:a.showAnimationDuration,f=function(){Qe("initialZoom"),i?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(Pe(1),n&&(n.style.display="block"),r.addClass(e,"pswp--animated-in"),Ae("initialZoom"+(i?"OutEnd":"InEnd"))),s&&s(),Yt=!1};if(!h||!u||void 0===u.x)return Ae("initialZoom"+(i?"Out":"In")),v=t.initialZoomLevel,De(de,t.initialPosition),Le(),e.style.opacity=i?0:1,Pe(1),void(h?setTimeout(function(){f()},h):f());!function(){var n=l,s=!o.currItem.src||o.currItem.loadError||a.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(v=u.w/t.w,de.x=u.x,de.y=u.y-R,o[s?"template":"bg"].style.opacity=.001,Le()),$e("initialZoom"),i&&!n&&r.removeClass(e,"pswp--animated-in"),s&&(i?r[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){r.addClass(e,"pswp--animate_opacity")},30)),Ht=setTimeout(function(){if(Ae("initialZoom"+(i?"Out":"In")),i){var o=u.w/t.w,a={x:de.x,y:de.y},l=v,c=se,d=function(t){1===t?(v=o,de.x=u.x,de.y=u.y-D):(v=(o-l)*t+l,de.x=(u.x-a.x)*t+a.x,de.y=(u.y-D-a.y)*t+a.y),Le(),s?e.style.opacity=1-t:Pe(c-t*c)};n?tt("initialZoom",0,1,h,r.easing.cubic.out,d,f):(d(1),Ht=setTimeout(f,h+20))}else v=t.initialZoomLevel,De(de,t.initialPosition),Le(),Pe(1),s?e.style.opacity=1:Pe(1),Ht=setTimeout(f,h+20)},i?25:90)}()},$t={},en=[],tn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return qt.length}},nn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},rn=function(e,t,n){var i=e.bounds;i.center.x=Math.round(($t.x-t)/2),i.center.y=Math.round(($t.y-n)/2)+e.vGap.top,i.max.x=t>$t.x?Math.round($t.x-t):i.center.x,i.max.y=n>$t.y?Math.round($t.y-n)+e.vGap.top:i.center.y,i.min.x=t>$t.x?0:i.center.x,i.min.y=n>$t.y?e.vGap.top:i.center.y},on=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Ae("parseVerticalMargin",e)),$t.x=t.x,$t.y=t.y-e.vGap.top-e.vGap.bottom,i){var r=$t.x/e.w,o=$t.y/e.h;e.fitRatio=r<o?r:o;var s=a.scaleMode;"orig"===s?n=1:"fit"===s&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=nn())}if(!n)return;return rn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=nn(),e.initialPosition=e.bounds.center,e.bounds},an=function(e,t,n,i,r,a){t.loadError||i&&(t.imageAppended=!0,ln(t,i,t===o.currItem&&xe),n.appendChild(i),a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},sn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=r.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},un=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=a.errorMsg.replace("%url%",e.src),!0},ln=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),r=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=r+"px"),t.style.width=i+"px",t.style.height=r+"px"}},cn=function(){if(en.length){for(var e,t=0;t<en.length;t++)e=en[t],e.holder.index===e.index&&an(e.index,e.item,e.baseDiv,e.img,0,e.clearPlaceholder);en=[]}};Me("Controller",{publicMethods:{lazyLoadItem:function(e){e=Se(e);var t=Kt(e);t&&(!t.loaded&&!t.loading||w)&&(Ae("gettingData",e,t),t.src&&sn(t))},initController:function(){r.extend(a,tn,!0),o.items=qt=n,Kt=o.getItemAt,Zt=a.getNumItemsFn,Jt=a.loop,Zt()<3&&(a.loop=!1),Te("beforeChange",function(e){var t,n=a.preload,i=null===e||e>=0,r=Math.min(n[0],Zt()),s=Math.min(n[1],Zt());for(t=1;t<=(i?s:r);t++)o.lazyLoadItem(c+t);for(t=1;t<=(i?r:s);t++)o.lazyLoadItem(c-t)}),Te("initialLayout",function(){o.currItem.initialLayout=a.getThumbBoundsFn&&a.getThumbBoundsFn(c)}),Te("mainScrollAnimComplete",cn),Te("initialZoomInEnd",cn),Te("destroy",function(){for(var e,t=0;t<qt.length;t++)e=qt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);en=null})},getItemAt:function(e){return e>=0&&(void 0!==qt[e]&&qt[e])},allowProgressiveImg:function(){return a.forceProgressiveLoading||!O||a.mouseUsed||screen.width>1200},setContent:function(e,t){a.loop&&(t=Se(t));var n=o.getItemAt(e.index);n&&(n.container=null);var i,u=o.getItemAt(t);if(!u)return void(e.el.innerHTML="");Ae("gettingData",t,u),e.index=t,e.item=u;var l=u.container=r.createEl("pswp__zoom-wrap");if(!u.src&&u.html&&(u.html.tagName?l.appendChild(u.html):l.innerHTML=u.html),un(u),on(u,pe),!u.src||u.loadError||u.loaded)u.src&&!u.loadError&&(i=r.createEl("pswp__img","img"),i.style.opacity=1,i.src=u.src,ln(u,i),an(0,u,l,i));else{if(u.loadComplete=function(n){if(s){if(e&&e.index===t){if(un(n,!0))return n.loadComplete=n.img=null,on(n,pe),ke(n),void(e.index===c&&o.updateCurrZoomItem());n.imageAppended?!Yt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):F.transform&&(ie||Yt)?en.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):an(0,n,l,n.img,0,!0)}n.loadComplete=null,n.img=null,Ae("imageLoadComplete",t,n)}},r.features.transform){var h="pswp__img pswp__img--placeholder";h+=u.msrc?"":" pswp__img--placeholder--blank";var f=r.createEl(h,u.msrc?"img":"");u.msrc&&(f.src=u.msrc),ln(u,f),l.appendChild(f),u.placeholder=f}u.loading||sn(u),o.allowProgressiveImg()&&(!Xt&&F.transform?en.push({item:u,baseDiv:l,img:u.img,index:t,holder:e}):an(0,u,l,u.img,0,!0))}Xt||t!==c?ke(u):(ne=l.style,Qt(u,i||u.img)),e.el.innerHTML="",e.el.appendChild(l)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var hn,fn={},dn=function(e,t,n){var i=document.createEvent("CustomEvent"),r={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,r),e.target.dispatchEvent(i)};Me("Tap",{publicMethods:{initTap:function(){Te("firstTouchStart",o.onTapStart),Te("touchRelease",o.onTapRelease),Te("destroy",function(){fn={},hn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(hn),hn=null)},onTapRelease:function(e,t){if(t&&!Y&&!q&&!Je){var n=t;if(hn&&(clearTimeout(hn),hn=null,bt(n,fn)))return void Ae("doubleTap",n);if("mouse"===t.type)return void dn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||r.hasClass(e.target,"pswp__single-tap"))return void dn(e,t);De(fn,n),hn=setTimeout(function(){dn(e,t),hn=null},300)}}}});var pn;Me("DesktopZoom",{publicMethods:{initDesktopZoom:function(){N||(O?Te("mouseUsed",function(){o.setupDesktopZoom()}):o.setupDesktopZoom(!0))},setupDesktopZoom:function(t){pn={};var n="wheel mousewheel DOMMouseScroll";Te("bindEvents",function(){r.bind(e,n,o.handleMouseWheel)}),Te("unbindEvents",function(){pn&&r.unbind(e,n,o.handleMouseWheel)}),o.mouseZoomedIn=!1;var i,a=function(){o.mouseZoomedIn&&(r.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),v<1?r.addClass(e,"pswp--zoom-allowed"):r.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){i&&(r.removeClass(e,"pswp--dragging"),i=!1)};Te("resize",a),Te("afterChange",a),Te("pointerDown",function(){o.mouseZoomedIn&&(i=!0,r.addClass(e,"pswp--dragging"))}),Te("pointerUp",s),t||a()},handleMouseWheel:function(e){if(v<=o.currItem.fitRatio)return a.modal&&(!a.closeOnScroll||Je||H?e.preventDefault():C&&Math.abs(e.deltaY)>2&&(l=!0,o.close())),!0;if(e.stopPropagation(),pn.x=0,"deltaX"in e)1===e.deltaMode?(pn.x=18*e.deltaX,pn.y=18*e.deltaY):(pn.x=e.deltaX,pn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(pn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?pn.y=-.16*e.wheelDeltaY:pn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;pn.y=e.detail}Ge(v,!0);var t=de.x-pn.x,n=de.y-pn.y;(a.modal||t<=te.min.x&&t>=te.max.x&&n<=te.min.y&&n>=te.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:pe.x/2+ve.x,y:pe.y/2+ve.y};var n=a.getDoubleTapZoom(!0,o.currItem),i=v===n;o.mouseZoomedIn=!i,o.zoomTo(i?o.currItem.initialZoomLevel:n,t,333),r[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var mn,vn,gn,yn,bn,_n,wn,xn,Mn,Sn,En,Tn,An={history:!0,galleryUID:1},Cn=function(){return En.hash.substring(1)},Pn=function(){mn&&clearTimeout(mn),gn&&clearTimeout(gn)},On=function(){var e=Cn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var r=i[n].split("=");r.length<2||(t[r[0]]=r[1])}if(a.galleryPIDs){var o=t.pid;for(t.pid=0,n=0;n<qt.length;n++)if(qt[n].pid===o){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Ln=function(){if(gn&&clearTimeout(gn),Je||H)return void(gn=setTimeout(Ln,500));yn?clearTimeout(vn):yn=!0;var e=c+1,t=Kt(c);t.hasOwnProperty("pid")&&(e=t.pid);var n=wn+"&gid="+a.galleryUID+"&pid="+e;xn||-1===En.hash.indexOf(n)&&(Sn=!0);var i=En.href.split("#")[0]+"#"+n;Tn?"#"+n!==window.location.hash&&history[xn?"replaceState":"pushState"]("",document.title,i):xn?En.replace(i):En.hash=n,xn=!0,vn=setTimeout(function(){yn=!1},60)};Me("History",{publicMethods:{initHistory:function(){if(r.extend(a,An,!0),a.history){En=window.location,Sn=!1,Mn=!1,xn=!1,wn=Cn(),Tn="pushState"in history,wn.indexOf("gid=")>-1&&(wn=wn.split("&gid=")[0],wn=wn.split("?gid=")[0]),Te("afterChange",o.updateURL),Te("unbindEvents",function(){r.unbind(window,"hashchange",o.onHashChange)});var e=function(){_n=!0,Mn||(Sn?history.back():wn?En.hash=wn:Tn?history.pushState("",document.title,En.pathname+En.search):En.hash=""),Pn()};Te("unbindEvents",function(){l&&e()}),Te("destroy",function(){_n||e()}),Te("firstUpdate",function(){c=On().pid});var t=wn.indexOf("pid=");t>-1&&(wn=wn.substring(0,t),"&"===wn.slice(-1)&&(wn=wn.slice(0,-1))),setTimeout(function(){s&&r.bind(window,"hashchange",o.onHashChange)},40)}},onHashChange:function(){if(Cn()===wn)return Mn=!0,void o.close();yn||(bn=!0,o.goTo(On().pid),bn=!1)},updateURL:function(){Pn(),bn||(xn?mn=setTimeout(Ln,800):Ln())}}}),r.extend(o,nt)}})},function(e,t,n){var i,r;!function(o,a){i=a,void 0!==(r="function"===typeof i?i.call(t,n,t,e):i)&&(e.exports=r)}(0,function(){"use strict";return function(e,t){var n,i,r,o,a,s,u,l,c,h,f,d,p,m,v,g,y,b,_,w=this,x=!1,M=!0,S=!0,E={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},T=function(e){if(g)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!c&&D();for(var n,i,r=e.target||e.srcElement,o=r.getAttribute("class")||"",a=0;a<W.length;a++)n=W[a],n.onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),g=!0;var s=t.features.isOldAndroid?600:30;y=setTimeout(function(){g=!1},s)}},A=function(){return!e.likelyTouchDevice||v.mouseUsed||screen.width>v.fitControlsWidth},C=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},P=function(){var e=1===v.getNumItemsFn();e!==m&&(C(i,"ui--one-slide",e),m=e)},O=function(){C(u,"share-modal--hidden",S)},L=function(){return S=!S,S?(t.removeClass(u,"pswp__share-modal--fade-in"),setTimeout(function(){S&&O()},300)):(O(),setTimeout(function(){S||t.addClass(u,"pswp__share-modal--fade-in")},30)),S||I(),!1},k=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),S||L(),!1))},I=function(){for(var e,t,n,i,r,o="",a=0;a<v.shareButtons.length;a++)e=v.shareButtons[a],n=v.getImageURLForShare(e),i=v.getPageURLForShare(e),r=v.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(r)),o+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(o=v.parseShareButtonOut(e,o));u.children[0].innerHTML=o,u.children[0].onclick=k},R=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},N=0,D=function(){clearTimeout(_),N=0,c&&w.setIdle(!1)},F=function(e){e=e||window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(_),_=setTimeout(function(){w.setIdle(!0)},v.timeToIdleOutside))},U=function(){v.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},j=function(){v.preloaderEl&&(B(!0),h("beforeChange",function(){clearTimeout(p),p=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&B(!1):B(!0)},v.loadingIndicatorDelay)}),h("imageLoadComplete",function(t,n){e.currItem===n&&B(!0)}))},B=function(e){d!==e&&(C(f,"preloader--active",!e),d=e)},z=function(e){var n=e.vGap;if(A()){var a=v.barsSize;if(v.captionEl&&"auto"===a.bottom)if(o||(o=t.createEl("pswp__caption pswp__caption--fake"),o.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(o,r),t.addClass(i,"pswp__ui--fit")),v.addCaptionHTMLFn(e,o,!0)){var s=o.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},G=function(){v.timeToIdle&&h("mouseUsed",function(){t.bind(document,"mousemove",D),t.bind(document,"mouseout",F),b=setInterval(function(){2===++N&&w.setIdle(!0)},v.timeToIdle/2)})},V=function(){h("onVerticalDrag",function(e){M&&e<.95?w.hideControls():!M&&e>=.95&&w.showControls()});var e;h("onPinchClose",function(t){M&&t<.9?(w.hideControls(),e=!0):e&&!M&&t>.9&&w.showControls()}),h("zoomGestureEnded",function(){(e=!1)&&!M&&w.showControls()})},W=[{name:"caption",option:"captionEl",onInit:function(e){r=e}},{name:"share-modal",option:"shareEl",onInit:function(e){u=e},onTap:function(){L()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){L()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){f=e}}],H=function(){var e,n,r,o=function(i){if(i)for(var o=i.length,a=0;a<o;a++){e=i[a],n=e.className;for(var s=0;s<W.length;s++)r=W[s],n.indexOf("pswp__"+r.name)>-1&&(v[r.option]?(t.removeClass(e,"pswp__element--disabled"),r.onInit&&r.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};o(i.children);var a=t.getChildByClass(i,"pswp__top-bar");a&&o(a.children)};w.init=function(){t.extend(e.options,E,!0),v=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),h=e.listen,V(),h("beforeChange",w.update),h("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)}),h("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),h("bindEvents",function(){t.bind(i,"pswpTap click",T),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)}),h("unbindEvents",function(){S||L(),b&&clearInterval(b),t.unbind(document,"mouseout",F),t.unbind(document,"mousemove",D),t.unbind(i,"pswpTap click",T),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)}),h("destroy",function(){v.captionEl&&(o&&i.removeChild(o),t.removeClass(r,"pswp__caption--empty")),u&&(u.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),w.setIdle(!1)}),v.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),h("initialZoomIn",function(){v.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),h("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),h("parseVerticalMargin",z),H(),v.shareEl&&s&&u&&(S=!0),P(),G(),U(),j()},w.setIdle=function(e){c=e,C(i,"ui--idle",e)},w.update=function(){M&&e.currItem?(w.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,r),C(r,"caption--empty",!e.currItem.title)),x=!0):x=!1,S||L(),P()},w.updateFullscreen=function(i){i&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){v.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},w.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!g)if(n.detail&&"mouse"===n.detail.pointerType){if(R(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(M?w.hideControls():w.showControls()),v.tapToClose&&(t.hasClass(i,"pswp__img")||R(i)))return void e.close()},w.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;C(i,"ui--over-close",R(t))},w.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),M=!1},w.showControls=function(){M=!0,x||w.update(),t.removeClass(i,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(l=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=l,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}}})},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(226),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){function e(){r(this,e),this.nodes=[].concat(i(document.querySelectorAll(".js-list-panel"))),this.items=[],this.init()}return o(e,[{key:"init",value:function(){this.items.forEach(function(e){return e.destroy()}),this.items=this.nodes.map(function(e){return new s.default(e)})}},{key:"start",value:function(){this.items.forEach(function(e){return e.start()})}}]),e}();t.default=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(33),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){i(this,e),this.node=t,this.observer=new IntersectionObserver(this.onIntersect.bind(this),{threshold:[0,.1,.35]})}return r(e,[{key:"onIntersect",value:function(e,t){var n=this;e.forEach(function(e){e.intersectionRatio>=(a.default.mobile?.1:.35)?requestAnimationFrame(function(){return n.node.classList.add("is-visible")}):e.intersectionRatio<.1&&requestAnimationFrame(function(){return n.node.classList.remove("is-visible")})})}},{key:"start",value:function(){this.observer.observe(this.node)}},{key:"destroy",value:function(){this.observer.disconnect()}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=i(o),s=n(21),u=i(s),l=n(228),c=i(l),h=function e(){r(this,e);var t=document.querySelector(".js-avatar");t&&u.default.render(a.default.createElement(c.default,null),t)};t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(229),h=i(c),f=n(235),d=i(f),p=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onLoad=e.onLoad.bind(e),e.onMuscleChange=e.onMuscleChange.bind(e),e.onModelChange=e.onModelChange.bind(e),e.onIndexChange=e.onIndexChange.bind(e);var n=Object.keys(window.avatar.female).length;return e.state={activeModel:"female",activeMuscle:null,isLoading:!0,index:-1,length:n},e.observer=new IntersectionObserver(e.onIntersect.bind(e),{threshold:[.25,.5]}),e.stage=null,e}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;this.stage=new d.default(this.container,this.canvas),this.stage.on("onload-model",this.onLoad),this.stage.on("change-muscle",this.onMuscleChange),this.stage.on("change-model",this.onModelChange),setTimeout(function(){e.stage.load(),e.observer.observe(e.node)},250)}},{key:"componentDidUpdate",value:function(e,t){t.isLoading!==this.state.isLoading&&this.stage.setIsLoading(!1),this.stage.setActiveMuscle(this.state.activeMuscle),this.stage.setActiveModel(this.state.activeModel)}},{key:"onIntersect",value:function(e,t){var n=this;e.forEach(function(e){e.intersectionRatio>.25&&(t.unobserve(e.target),n.stage.setActiveModel(n.state.activeModel),n.stage.setShouldStart())})}},{key:"onLoad",value:function(){this.setState(function(){return{isLoading:!1}})}},{key:"onMuscleChange",value:function(e){var t=null===e?-1:window.avatar[this.state.activeModel].findIndex(function(t){return t.id===e});this.setState(function(){return{activeMuscle:e,index:t}})}},{key:"onModelChange",value:function(e){if(e!==this.state.activeModel){var t=window.avatar[e].length;this.setState(function(){return{activeModel:e,activeMuscle:null,index:-1,length:t}})}}},{key:"onIndexChange",value:function(e){e<0?e=this.state.length-1:e>=this.state.length&&(e=0);var t=window.avatar[this.state.activeModel][e].id;this.setState(function(){return{index:e,activeMuscle:t}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.index,i=t.activeModel,r=t.activeMuscle,o=t.length,a=t.isLoading,s=window.avatar.label,u=window.avatar[i];return l.default.createElement("section",{className:"avatar",ref:function(t){return e.node=t}},l.default.createElement("div",{className:"avatar__container",ref:function(t){return e.container=t}},l.default.createElement("canvas",{ref:function(t){return e.canvas=t}})),l.default.createElement(h.default,{index:n,length:o,activeModel:i,activeMuscle:r,data:u,onIndexChange:this.onIndexChange,onModelChange:this.onModelChange,onMuscleChange:this.onMuscleChange}),a&&l.default.createElement("div",{className:"avatar__loader"}),l.default.createElement("div",{className:"avatar__label-wrapper"},l.default.createElement("h6",{className:"avatar__label avatar__label--left"},s),l.default.createElement("h6",{className:"avatar__label avatar__label--right"},s)))}}]),t}(u.PureComponent);t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),h=n(230),f=i(h),d=n(233),p=i(d),m=n(234),v=i(m),g=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.index,i=e.activeModel,o=e.activeMuscle,a=e.onMuscleChange,s=e.onIndexChange,u=e.onModelChange,l=e.length,h=t.find(function(e){return e.id===o}),d=t.map(function(e){return{main:!1,label:e.label}});return d.unshift({main:!1,label:window.avatar.buttonUp}),[].concat(r(d))[0]={main:!0,label:window.avatar.buttonDown},c.default.createElement("section",{className:"avatar__gui"},h?c.default.createElement(f.default,{index:n,length:l,id:h.id,text:h.text,title:h.title,onIndexChange:s,onMuscleChange:a}):c.default.createElement(v.default,null),c.default.createElement(p.default,{onChange:u,activeModel:i}))}}]),t}(l.PureComponent);t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(9),h=i(c),f=n(231),d=i(f),p=n(232),m=i(p),v=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){return e.node.classList.add("is-visible")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,i=t.title,r=t.text,o=t.onMuscleChange,a=t.onIndexChange,s=t.index,u=t.length,c=i.split("<br/>"),h=window.avatar.panelEyebrow+" "+(s+1)+"/"+u;return l.default.createElement("div",{className:"avatar__panel",ref:function(t){return e.node=t}},l.default.createElement("div",{className:"avatar__panel-inner"},l.default.createElement("div",{className:"avatar__buttons"},l.default.createElement("span",{className:"avatar__arrow-button"},l.default.createElement(m.default,{onClick:function(){return a(s-1)},direction:"right"})),l.default.createElement("span",{className:"avatar__arrow-button"},l.default.createElement(m.default,{onClick:function(){return a(s+1)}})),l.default.createElement("span",{className:"avatar__close-button"},l.default.createElement(d.default,{onClick:function(){return o(null)}}))),l.default.createElement("span",{className:"avatar__panel-eyebrow"},h),l.default.createElement("h3",{className:"avatar__title"},c.map(function(e){return l.default.createElement("span",{key:e+n,className:"avatar__title-line"},l.default.createElement("span",{className:"avatar__title-word"},e))})),l.default.createElement("div",{key:n,className:"avatar__copy",dangerouslySetInnerHTML:{__html:r}})))}}]),t}(u.PureComponent);v.propTypes={index:h.default.number.isRequired,length:h.default.number.isRequired,id:h.default.string.isRequired,title:h.default.string.isRequired,text:h.default.string.isRequired,onMuscleChange:h.default.func.isRequired},t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),a=n(15),s=i(a),u=n(9),l=i(u),c=function(e){var t=e.href,n=e.color,i=(e.icon,e.disabled),r=e.onClick,a=r?"button":"a",u=(0,s.default)("button","button--quadratic",{"button--white":"white"===n},{"button--black":"black"===n},{"is-disabled":i});return o.default.createElement(a,{className:u,href:t,onClick:r},o.default.createElement("span",{className:"button__bg"}),o.default.createElement("span",{className:"button__close"},o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10"},o.default.createElement("path",{d:"M10,4.36V5.64H5.64V10H4.36V5.64H0V4.36H4.36V0H5.64V4.36Z"}))))};c.propTypes={onClick:l.default.func,href:l.default.string,disabled:l.default.bool},c.defaultProps={color:"white",disabled:!1},t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),a=n(15),s=i(a),u=n(9),l=i(u),c=function(e){var t=e.href,n=e.color,i=(e.icon,e.disabled),r=e.onClick,a=e.direction,u=r?"button":"a",l=(0,s.default)("button","button--quadratic",{"button--flipped":"right"===a},{"button--white":"white"===n},{"button--black":"black"===n},{"is-disabled":i});return o.default.createElement(u,{className:l,href:t,onClick:r},o.default.createElement("span",{className:"button__bg"}),o.default.createElement("span",{className:"button__arrow"},o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 10"},o.default.createElement("polygon",{points:"22.54 0 21.93 0.67 26.02 4.42 0 4.42 0 5.33 26.3 5.33 21.93 9.33 22.54 10 28 5 22.54 0"}))))};c.propTypes={onClick:l.default.func,href:l.default.string,color:l.default.string,disabled:l.default.bool,direction:l.default.string},c.defaultProps={color:"white",disabled:!1,direction:"left"},t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=i(u),c=n(15),h=i(c),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"onClick",value:function(e,t){t.preventDefault();var n=this.props,i=n.onChange;e!==n.activeModel&&i(e)}},{key:"render",value:function(){var e=this.props.activeModel;return l.default.createElement("div",{className:"avatar__switch-wrapper"},l.default.createElement("div",{className:"avatar__switch"},l.default.createElement("span",{className:"avatar__switch-bg",style:{transform:"translateX("+("female"===e?0:"100%")+")"}}),l.default.createElement("span",{className:(0,h.default)("avatar__switch-inner",{"is-active":"female"===e}),onClick:this.onClick.bind(this,"female")},window.locales.female),l.default.createElement("span",{className:(0,h.default)("avatar__switch-inner",{"is-active":"male"===e}),onClick:this.onClick.bind(this,"male")},window.locales.male)))}}]),t}(u.PureComponent);t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){return e.node.classList.add("is-visible")})}},{key:"render",value:function(){var e=this,t=window.avatar.title.split("<br/>"),n=window.avatar.eyebrow;return u.default.createElement("div",{className:"avatar__headline",ref:function(t){return e.node=t}},u.default.createElement("div",{className:"avatar__headline-eyebrow"},n),t.map(function(e){return u.default.createElement("div",{key:e,className:"avatar__headline-line"},u.default.createElement("span",{className:"avatar__headline-word"},e))}))}}]),t}(s.PureComponent);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=n(236),c=i(l),h=n(16),f=i(h),d=n(32),p=i(d),m=n(237),v=i(m),g=n(238),y=i(g),b=n(239),_=i(b),w=n(240),x=i(w),M=n(251),S=i(M),E=n(252),T=i(E),A=n(257),C=i(A),P=n(258),O=i(P),L=n(94),k=i(L),I="#debug"===window.location.hash,R=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.update=i.update.bind(i),i.resize=i.resize.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.onPointerStart=i.onPointerStart.bind(i),i.onPointerEnd=i.onPointerEnd.bind(i),i.onClick=i.onClick.bind(i),i.onScroll=i.onScroll.bind(i),i.isAnimating=!1,i.isPointerDown=!1,i.needsScrollUpdate=!0,i.overviewPosition=new u.Vector3(0,100,250),i.overviewLookAt=new u.Vector3(0,85,0),i.node=e,i.scene=new u.Scene,i.renderer=new u.WebGLRenderer({antialias:!0,canvas:n}),i.renderer.setPixelRatio(window.devicePixelRatio),i.ray=new u.Raycaster,i.camera=new u.PerspectiveCamera(50,1,1,5e3),i.pointer=new u.Vector2,i.lastPointer=new u.Vector2,i.dolly=new S.default(i.camera,i.scene,i.overviewPosition,i.overviewLookAt),i.scene.add(i.dolly.el),i.state={activeModel:null,activeMuscle:null,isLoading:!0,isStarted:!1,canStart:!1},i.activeModel=null,i.inActiveModel=null;var a=new T.default("cross",2,3,2,50,75,50);i.scene.add(a.el),i.box=new C.default,i.scene.add(i.box.el),I&&(i.scene.add(new u.GridHelper(500,20)),i.scene.add(new u.AxesHelper(500)),i.controls=new c.default(i.camera,i.node),i.controls.rotateSpeed=1,i.controls.zoomSpeed=1.2,i.controls.panSpeed=.8,i.controls.staticMoving=!0,i.controls.dynamicDampingFactor=.3),i.male=new x.default({type:"male",path:y.default,position:new u.Vector3(100,0,-100)}),i.female=new x.default({type:"female",path:_.default,position:new u.Vector3(-100,0,100)}),i.scene.add(i.male.el),i.scene.add(i.female.el);var s=new u.Mesh(new u.PlaneGeometry(200,200),new u.MeshBasicMaterial({map:(new u.TextureLoader).load(v.default)}));return s.rotation.set(-.5*Math.PI,0,0),i.scene.add(s),i.labels=new O.default,i.scene.add(i.labels.el),i}return a(t,e),s(t,[{key:"load",value:function(){var e=this;Promise.all([this.male.load(),this.female.load()]).then(function(){return e.emit("onload-model")})}},{key:"setActiveModel",value:function(e){e&&e!==this.state.activeModel&&(this.state.activeModel=e,this.inActiveModel="female"===e?this.male:this.female,this.activeModel="female"===e?this.female:this.male,this.state.isStarted&&(this.activeModel.setState({isVisible:!0}),this.inActiveModel.setState({isVisible:!1})),this.start())}},{key:"setActiveMuscle",value:function(e){var t=this;if(e!==this.state.activeMuscle){if(this.state.activeMuscle=e,this.activeModel.setState({activeMuscle:e}),this.state.isStarted)if(this.isAnimating=!0,e){var n=this.activeModel.getCameraPosition(),i=n.position,r=n.lookAt,o=this.activeModel.getMusclePositionAndSize();this.box.show(r,o),this.labels.hide(),k.default.showWireframe(),this.dolly.flyTo(i,r,function(){return t.isAnimating=!1})}else this.box.hide(),this.labels.show(),k.default.hideWireframe(),this.dolly.flyTo(this.overviewPosition,this.overviewLookAt,function(){return t.isAnimating=!1});this.start()}}},{key:"setIsLoading",value:function(e){this.state.isLoading=e,this.start()}},{key:"setShouldStart",value:function(){this.state.canStart=!0,this.start()}},{key:"start",value:function(){this.state.isStarted||this.state.canStart&&(this.state.isLoading||this.state.activeModel&&(this.state.isStarted=!0,window.addEventListener("scroll",this.onScroll),window.addEventListener("mousemove",this.onPointerMove),window.addEventListener("mousedown",this.onPointerStart),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("touchmove",this.onPointerMove),window.addEventListener("touchstart",this.onPointerStart),window.addEventListener("touchend",this.onPointerEnd),window.addEventListener("touchcancel",this.onPointerEnd),window.addEventListener("resize",this.resize),this.node.addEventListener("click",this.onClick),this.activeModel.setState({isVisible:!0}),this.resize(),requestAnimationFrame(this.update)))}},{key:"onClick",value:function(e){e.preventDefault(),this.emit("change-muscle",this.activeModel.hoveredMuscle?this.activeModel.hoveredMuscle.name:null)}},{key:"onPointerStart",value:function(e){if(!this.activeModel.activeMuscle){var t=e.touches?e.touches[0]:e;this.pointer.x=u.Math.clamp((t.clientX-this.left)/this.width*2-1,-1,1),this.pointer.y=u.Math.clamp(-(t.clientY-this.top)/this.height*2+1,-1,1),this.lastPointer.copy(this.pointer),this.dolly.pointerStart(this.pointer),this.isPointerDown=!0}}},{key:"onPointerEnd",value:function(){this.isPointerDown=!1,this.dolly.pointerEnd(),0===this.lastPointer.distanceTo(this.pointer)&&(this.ray.setFromCamera(this.pointer,this.camera),this.activeModel.setRay(this.ray),this.emit("change-muscle",this.activeModel.hoveredMuscle?this.activeModel.hoveredMuscle.name:null))}},{key:"onPointerMove",value:function(e){var t=e.touches?e.touches[0]:e;this.pointer.x=u.Math.clamp((t.clientX-this.left)/this.width*2-1,-1,1),this.pointer.y=u.Math.clamp(-(t.clientY-this.top)/this.height*2+1,-1,1),this.dolly.pointerMove(this.pointer)}},{key:"onScroll",value:function(){this.needsScrollUpdate=!0}},{key:"resize",value:function(){var e=this.node.getBoundingClientRect(),t=e.width,n=e.height,i=e.left,r=e.top;this.width=t,this.height=n,this.left=i,this.top=r,this.renderer.setSize(t,n),this.camera.aspect=t/n,this.camera.updateProjectionMatrix()}},{key:"update",value:function(e){if(requestAnimationFrame(this.update),f.default.update(),this.needsScrollUpdate){this.needsScrollUpdate=!1;var t=this.node.getBoundingClientRect(),n=t.left,i=t.top;this.left=n,this.top=i}this.isPointerDown?this.node.style.cursor="move":this.isAnimating?this.node.style.cursor="auto":(this.ray.setFromCamera(this.pointer,this.camera),this.activeModel.setRay(this.ray),this.node.style.cursor=this.activeModel.hoveredMuscle?"pointer":"auto"),this.dolly.update(),this.renderer.clear(),this.renderer.render(this.scene,this.camera),I&&this.controls.update()}}]),t}(p.default);t.default=R},function(e,t,n){function i(e,t){function n(e){!1!==d.enabled&&(window.removeEventListener("keydown",n),g=v,v===p.NONE&&(e.keyCode!==d.keys[p.ROTATE]||d.noRotate?e.keyCode!==d.keys[p.ZOOM]||d.noZoom?e.keyCode!==d.keys[p.PAN]||d.noPan||(v=p.PAN):v=p.ZOOM:v=p.ROTATE))}function i(e){!1!==d.enabled&&(v=g,window.addEventListener("keydown",n,!1))}function a(e){!1!==d.enabled&&(e.preventDefault(),e.stopPropagation(),v===p.NONE&&(v=e.button),v!==p.ROTATE||d.noRotate?v!==p.ZOOM||d.noZoom?v!==p.PAN||d.noPan||(d.getMouseOnScreen(e.pageX,e.pageY,E),T.copy(E)):(d.getMouseOnScreen(e.pageX,e.pageY,w),x.copy(w)):(d.getMouseProjectionOnBall(e.pageX,e.pageY,b),_.copy(b)),document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",u,!1),d.dispatchEvent(C))}function s(e){!1!==d.enabled&&(e.preventDefault(),e.stopPropagation(),v!==p.ROTATE||d.noRotate?v!==p.ZOOM||d.noZoom?v!==p.PAN||d.noPan||d.getMouseOnScreen(e.pageX,e.pageY,T):d.getMouseOnScreen(e.pageX,e.pageY,x):d.getMouseProjectionOnBall(e.pageX,e.pageY,_))}function u(e){!1!==d.enabled&&(e.preventDefault(),e.stopPropagation(),v=p.NONE,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",u),d.dispatchEvent(P))}function l(e){if(!1!==d.enabled){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),w.y+=.01*t,d.dispatchEvent(C),d.dispatchEvent(P)}}function c(e){if(!1!==d.enabled){switch(e.touches.length){case 1:v=p.TOUCH_ROTATE,_.copy(d.getMouseProjectionOnBall(e.touches[0].pageX,e.touches[0].pageY,b));break;case 2:v=p.TOUCH_ZOOM;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;S=M=Math.sqrt(t*t+n*n);break;case 3:v=p.TOUCH_PAN,T.copy(d.getMouseOnScreen(e.touches[0].pageX,e.touches[0].pageY,E));break;default:v=p.NONE}d.dispatchEvent(C)}}function h(e){if(!1!==d.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:d.getMouseProjectionOnBall(e.touches[0].pageX,e.touches[0].pageY,_);break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;S=Math.sqrt(t*t+n*n);break;case 3:d.getMouseOnScreen(e.touches[0].pageX,e.touches[0].pageY,T);break;default:v=p.NONE}}function f(e){if(!1!==d.enabled){switch(e.touches.length){case 1:b.copy(d.getMouseProjectionOnBall(e.touches[0].pageX,e.touches[0].pageY,_));break;case 2:M=S=0;break;case 3:E.copy(d.getMouseOnScreen(e.touches[0].pageX,e.touches[0].pageY,T))}v=p.NONE,d.dispatchEvent(P)}}var d=this,p={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.noRoll=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new o.Vector3;var m=new o.Vector3,v=p.NONE,g=p.NONE,y=new o.Vector3,b=new o.Vector3,_=new o.Vector3,w=new o.Vector2,x=new o.Vector2,M=0,S=0,E=new o.Vector2,T=new o.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var A={type:"change"},C={type:"start"},P={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)},this.getMouseOnScreen=function(e,t,n){return n.set((e-d.screen.left)/d.screen.width,(t-d.screen.top)/d.screen.height)},this.getMouseProjectionOnBall=function(){var e=new o.Vector3,t=new o.Vector3;return function(n,i,r){t.set((n-.5*d.screen.width-d.screen.left)/(.5*d.screen.width),(.5*d.screen.height+d.screen.top-i)/(.5*d.screen.height),0);var o=t.length();return d.noRoll?o<Math.SQRT1_2?t.z=Math.sqrt(1-o*o):t.z=.5/o:o>1?t.normalize():t.z=Math.sqrt(1-o*o),y.copy(d.object.position).sub(d.target),r.copy(d.object.up).setLength(t.y),r.add(e.copy(d.object.up).cross(y).setLength(t.x)),r.add(y.setLength(t.z)),r}}(),this.rotateCamera=function(){var e=new o.Vector3,t=new o.Quaternion;return function(){var n=Math.acos(b.dot(_)/b.length()/_.length());n&&(e.crossVectors(b,_).normalize(),n*=d.rotateSpeed,t.setFromAxisAngle(e,-n),y.applyQuaternion(t),d.object.up.applyQuaternion(t),_.applyQuaternion(t),d.staticMoving?b.copy(_):(t.setFromAxisAngle(e,n*(d.dynamicDampingFactor-1)),b.applyQuaternion(t)))}}(),this.zoomCamera=function(){var e;v===p.TOUCH_ZOOM?(e=M/S,M=S,y.multiplyScalar(e)):1!==(e=1+(x.y-w.y)*d.zoomSpeed)&&e>0&&(y.multiplyScalar(e),d.staticMoving?w.copy(x):w.y+=(x.y-w.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new o.Vector2,t=new o.Vector3,n=new o.Vector3;return function(){e.copy(T).sub(E),e.lengthSq()&&(e.multiplyScalar(y.length()*d.panSpeed),n.copy(y).cross(d.object.up).setLength(e.x),n.add(t.copy(d.object.up).setLength(e.y)),d.object.position.add(n),d.target.add(n),d.staticMoving?E.copy(T):E.add(e.subVectors(T,E).multiplyScalar(d.dynamicDampingFactor)))}}(),this.checkDistances=function(){d.noZoom&&d.noPan||(y.lengthSq()>d.maxDistance*d.maxDistance&&d.object.position.addVectors(d.target,y.setLength(d.maxDistance)),y.lengthSq()<d.minDistance*d.minDistance&&d.object.position.addVectors(d.target,y.setLength(d.minDistance)))},this.update=function(){y.subVectors(d.object.position,d.target),d.noRotate||d.rotateCamera(),d.noZoom||d.zoomCamera(),d.noPan||d.panCamera(),d.object.position.addVectors(d.target,y),d.checkDistances(),d.object.lookAt(d.target),m.distanceToSquared(d.object.position)>1e-6&&(d.dispatchEvent(A),m.copy(d.object.position))},this.reset=function(){v=p.NONE,g=p.NONE,d.target.copy(d.target0),d.object.position.copy(d.position0),d.object.up.copy(d.up0),y.subVectors(d.object.position,d.target),d.object.lookAt(d.target),d.dispatchEvent(A),m.copy(d.object.position)},this.domElement.addEventListener("contextmenu",r,!1),this.domElement.addEventListener("mousedown",a,!1),this.domElement.addEventListener("mousewheel",l,!1),this.domElement.addEventListener("DOMMouseScroll",l,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",f,!1),this.domElement.addEventListener("touchmove",h,!1),window.addEventListener("keydown",n,!1),window.addEventListener("keyup",i,!1),this.dispose=function(){var e=d.domElement;e.removeEventListener("contextmenu",r),e.removeEventListener("mousedown",a),e.removeEventListener("mousewheel",l),e.removeEventListener("DOMMouseScroll",l),e.removeEventListener("touchstart",c),e.removeEventListener("touchend",f),e.removeEventListener("touchmove",h),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",u),window.removeEventListener("keydown",n),window.removeEventListener("keyup",i)},this.handleResize(),this.update()}function r(e){e.preventDefault()}var o=n(3);e.exports=i,i.prototype=Object.create(o.EventDispatcher.prototype)},function(e,t){e.exports="grid.0f3ec583.jpg"},function(e,t){e.exports="male.72581c42.glb"},function(e,t){e.exports="female.e6fe1594.glb"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(241),u=i(s),l=n(87),c=n(88),h=n(89),f=n(245),d=i(f),p=n(93),m=i(p),v=n(90),g=i(v),y=n(94),b=i(y),_=n(248),w=i(_),x=function(){function e(t){var n=t.type,i=t.path;r(this,e),this.type=n,this.path=i,this.el=new a.Group,this.el.visible=!1,this.timer=null,this.activeMuscle=null,this.hoveredMuscle=null,this.wireframeMesh=null,this.muscles=[],this.pois=[],this.rayTargets=[],this.state={isVisible:!1,activeMuscle:null}}return o(e,[{key:"setState",value:function(e){var t=e.isVisible,n=void 0===t?this.state.isVisible:t,i=e.activeMuscle,r=void 0===i?this.state.activeMuscle:i;n!==this.state.isVisible&&(this.state.isVisible=n,n?this.show():this.hide()),r!==this.state.activeMuscle&&(this.state.activeMuscle=r,this.setActiveMuscle(r))}},{key:"load",value:function(){var e=this,t=new u.default;return new Promise(function(n,i){t.load(e.path,function(t){e.build(t),n()})})}},{key:"build",value:function(e){var t=this;e.scene.traverse(function(e){if("body"===e.name){(0,c.unindexBufferGeometry)(e.geometry),(0,h.addBarycentricCoordinates)(e.geometry),e.geometry.computeBoundingBox();var n=e.geometry.boundingBox.getSize(new a.Vector3);t.height=Math.ceil(n.y);var i=new a.Mesh(e.geometry,b.default.mat);i.userData.name="body",i.userData.type="body",t.el.add(i)}if("wires"===e.name){(0,c.unindexBufferGeometry)(e.geometry),(0,h.addBarycentricCoordinates)(e.geometry),e.geometry.computeBoundingBox();var r=e.geometry.boundingBox.getSize(new a.Vector3);t.wireframeHeight=Math.ceil(r.y),t.wireframeMesh=new a.Mesh(e.geometry,w.default.mat),t.wireframeMesh.userData.name="wires",t.wireframeMesh.userData.type="wires",t.wireframeMesh.renderOrder=200,t.wireframeMesh.onBeforeRender=function(e){return e.clearDepth()},t.el.add(t.wireframeMesh)}if(e.name&&e.name.includes("m_")){var o=e.name.replace("m_",""),s=new d.default(e.geometry,o);t.muscles.push(s),t.rayTargets.push(s.el),t.el.add(s.el)}if(e.name&&e.name.includes("p_")){var u=e.name.replace("p_",""),l=new a.Object3D;l.position.copy(e.position),l.userData.name=u,t.pois.push(l)}})}},{key:"show",value:function(){var e=this;b.default.reset(),w.default.reset(),b.default.height=this.height,w.default.height=this.wireframeHeight,this.el.visible=!0,this.setActiveMuscle(this.state.activeMuscle),(0,l.clearTimeout)(this.timer),this.timer=(0,l.setTimeout)(function(){e.wireframeMesh.visible=!0,b.default.show(),w.default.show(function(){e.wireframeMesh.visible=!1})},500)}},{key:"hide",value:function(){this.el.visible=!1,b.default.hide(),w.default.hide(),(0,l.clearTimeout)(this.timer),this.muscles.forEach(function(e){return e.setState({isVisible:!1,isActive:!1})})}},{key:"setHoveredMuscle",value:function(e){var t=this;this.hoveredMuscle=null,this.muscles.forEach(function(n){n.name===e?(t.hoveredMuscle=n,n.setState({isHovered:!0})):n.setState({isHovered:!1})}),this.hoveredMuscle&&g.default.setActive()}},{key:"setActiveMuscle",value:function(e){var t=this;if(null===e)this.activeMuscle=null,this.muscles.forEach(function(e){return e.setState({isVisible:!0,isActive:!1})});else{var n=!1;this.muscles.forEach(function(i){i.name===e?(t.activeMuscle=i,n=t.activeMuscle.state.isVisible,i.setState({isVisible:!0,isActive:!0})):i.setState({isVisible:!1,isActive:!1})}),n?this.activeMuscle.state.isHovered||g.default.setActive():g.default.show()}this.state.activeMuscle?m.default.hide():m.default.show()}},{key:"getCameraPosition",value:function(){var e=this.activeMuscle,t=e.name,n=e.center;return{position:this.pois.find(function(e){return e.userData.name===t}).position,lookAt:n}}},{key:"getMusclePositionAndSize",value:function(){return this.activeMuscle.size}},{key:"setRay",value:function(e){if(this.activeMuscle)return!1;var t=e.intersectObjects(this.rayTargets);if(t.length){var n=t[0].object.userData.name;this.hoveredMuscle&&this.hoveredMuscle.name===n||this.setHoveredMuscle(n)}else this.hoveredMuscle&&this.setHoveredMuscle(null)}}]),e}();t.default=x},function(e,t,n){var i=n(3),r=function(){function e(e){this.manager=void 0!==e?e:i.DefaultLoadingManager,this.dracoLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}function n(){if(!i.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=T.MSFT_TEXTURE_DDS,this.ddsLoader=new i.DDSLoader}function r(e){this.name=T.KHR_LIGHTS_PUNCTUAL,this.lights=[];for(var t=e.extensions&&e.extensions[T.KHR_LIGHTS_PUNCTUAL]||{},n=t.lights||[],r=0;r<n.length;r++){var o,a=n[r],s=new i.Color(16777215);void 0!==a.color&&s.fromArray(a.color);var u=void 0!==a.range?a.range:0;switch(a.type){case"directional":o=new i.DirectionalLight(s),o.target.position.set(0,0,1),o.add(o.target);break;case"point":o=new i.PointLight(s),o.distance=u;break;case"spot":o=new i.SpotLight(s),o.distance=u,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,1),o.add(o.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+a.type+'".')}o.decay=2,void 0!==a.intensity&&(o.intensity=a.intensity),o.name=a.name||"light_"+r,this.lights.push(o)}}function o(e){this.name=T.KHR_MATERIALS_UNLIT}function a(e){this.name=T.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,C);if(this.header={magic:i.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==A)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var n=new DataView(e,C),r=0;r<n.byteLength;){var o=n.getUint32(r,!0);r+=4;var a=n.getUint32(r,!0);if(r+=4,a===P.JSON){var s=new Uint8Array(e,C+r,o);this.content=i.LoaderUtils.decodeText(s)}else if(a===P.BIN){var u=C+r;this.body=e.slice(u,u+o)}r+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function s(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=T.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function u(){return{name:T.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return i.ShaderMaterial},extendParams:function(e,t,n){var r=t.extensions[this.name],o=i.ShaderLib.standard,a=i.UniformsUtils.clone(o.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),u=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),f=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",h);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new i.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},e.vertexShader=o.vertexShader,e.fragmentShader=f,e.uniforms=a,e.defines={STANDARD:""},e.color=new i.Color(1,1,1),e.opacity=1;var d=[];if(Array.isArray(r.diffuseFactor)){var p=r.diffuseFactor;e.color.fromArray(p),e.opacity=p[3]}if(void 0!==r.diffuseTexture&&d.push(n.assignTexture(e,"map",r.diffuseTexture.index)),e.emissive=new i.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new i.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var m=r.specularGlossinessTexture.index;d.push(n.assignTexture(e,"glossinessMap",m)),d.push(n.assignTexture(e,"specularMap",m))}return Promise.all(d)},createMaterial:function(e){var t=new i.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,i=0,r=n.length;i<r;i++)t[n[i]]=e[n[i]];return t},refreshUniforms:function(e,t,n,i,r,o){if(!0===r.isGLTFSpecularGlossinessMaterial){var a=r.uniforms,s=r.defines;a.opacity.value=r.opacity,a.diffuse.value.copy(r.color),a.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),a.map.value=r.map,a.specularMap.value=r.specularMap,a.alphaMap.value=r.alphaMap,a.lightMap.value=r.lightMap,a.lightMapIntensity.value=r.lightMapIntensity,a.aoMap.value=r.aoMap,a.aoMapIntensity.value=r.aoMapIntensity;var u;r.map?u=r.map:r.specularMap?u=r.specularMap:r.displacementMap?u=r.displacementMap:r.normalMap?u=r.normalMap:r.bumpMap?u=r.bumpMap:r.glossinessMap?u=r.glossinessMap:r.alphaMap?u=r.alphaMap:r.emissiveMap&&(u=r.emissiveMap),void 0!==u&&(u.isWebGLRenderTarget&&(u=u.texture),!0===u.matrixAutoUpdate&&u.updateMatrix(),a.uvTransform.value.copy(u.matrix)),a.envMap.value=r.envMap,a.envMapIntensity.value=r.envMapIntensity,a.flipEnvMap.value=r.envMap&&r.envMap.isCubeTexture?-1:1,a.refractionRatio.value=r.refractionRatio,a.specular.value.copy(r.specular),a.glossiness.value=r.glossiness,a.glossinessMap.value=r.glossinessMap,a.emissiveMap.value=r.emissiveMap,a.bumpMap.value=r.bumpMap,a.normalMap.value=r.normalMap,a.displacementMap.value=r.displacementMap,a.displacementScale.value=r.displacementScale,a.displacementBias.value=r.displacementBias,null!==a.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===a.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function l(e,t,n,r){i.Interpolant.call(this,e,t,n,r)}function c(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function h(){return new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})}function f(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function d(e,t){void 0!==t.extras&&"object"===typeof t.extras&&(e.userData=t.extras)}function p(e,t,n){for(var i=!1,r=!1,o=0,a=t.length;o<a;o++){var s=t[o];if(void 0!==s.POSITION&&(i=!0),void 0!==s.NORMAL&&(r=!0),i&&r)break}if(i||r){for(var u=[],l=[],o=0,a=t.length;o<a;o++){var s=t[o],c="morphTarget"+o;if(i){if(void 0!==s.POSITION){var h=x(n[s.POSITION]);h.name=c;for(var f=e.attributes.position,d=0,p=h.count;d<p;d++)h.setXYZ(d,h.getX(d)+f.getX(d),h.getY(d)+f.getY(d),h.getZ(d)+f.getZ(d))}else h=e.attributes.position;u.push(h)}if(r){var m;if(void 0!==s.NORMAL){var m=x(n[s.NORMAL]);m.name=c;for(var v=e.attributes.normal,d=0,p=m.count;d<p;d++)m.setXYZ(d,m.getX(d)+v.getX(d),m.getY(d)+v.getY(d),m.getZ(d)+v.getZ(d))}else m=e.attributes.normal;l.push(m)}}i&&(e.morphAttributes.position=u),r&&(e.morphAttributes.normal=l)}}function m(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(var n=0,i=r.length;n<i;n++)e.morphTargetDictionary[r[n]]=n}}}function v(e,t){return e.indices===t.indices&&g(e.attributes,t.attributes)}function g(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function y(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function b(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];if(v(r.primitive,t))return r.promise}return null}function _(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];if(y(t,r.baseGeometries))return r.geometry}return null}function w(e,t,n){for(var i=0,r=e.length;i<r;i++){var o=e[i];if(t===o.baseGeometry&&y(n,o.primitives))return o.geometry}return null}function x(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,r=e.array.slice(0,t*n),o=0;o<t;++o)r[o]=e.getX(o),n>=2&&(r[o+1]=e.getY(o)),n>=3&&(r[o+2]=e.getZ(o)),n>=4&&(r[o+3]=e.getW(o));return new i.BufferAttribute(r,n,e.normalized)}return e.clone()}function M(e){if(e.length<2)return!1;var t=e[0],n=t.targets||[];if(void 0===t.indices)return!1;for(var i=1,r=e.length;i<r;i++){var o=e[i];if(t.mode!==o.mode)return!1;if(void 0===o.indices)return!1;if(!g(t.attributes,o.attributes))return!1;var a=o.targets||[];if(n.length!==a.length)return!1;for(var s=0,u=n.length;s<u;s++)if(!g(n[s],a[s]))return!1}return!0}function S(e,n,r){this.json=e||{},this.extensions=n||{},this.options=r||{},this.cache=new t,this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new i.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function E(e,t,n){var i=t.attributes;for(var r in i){var o=N[r],a=n[i[r]];o&&(o in e.attributes||e.addAttribute(o,a))}void 0===t.indices||e.index||e.setIndex(n[t.indices]),void 0!==t.targets&&p(e,t.targets,n),d(e,t)}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,r){var o=this,a=void 0!==this.path?this.path:i.LoaderUtils.extractUrlBase(e);o.manager.itemStart(e);var s=function(t){r&&r(t),o.manager.itemEnd(e),o.manager.itemError(e)},u=new i.FileLoader(o.manager);u.setResponseType("arraybuffer"),u.load(e,function(n){try{o.parse(n,a,function(n){t(n),o.manager.itemEnd(e)},s)}catch(e){s(e)}},n,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,l,c){var h,d={};if("string"===typeof e)h=e;else{if(i.LoaderUtils.decodeText(new Uint8Array(e,0,4))===A){try{d[T.KHR_BINARY_GLTF]=new a(e)}catch(e){return void(c&&c(e))}h=d[T.KHR_BINARY_GLTF].content}else h=i.LoaderUtils.decodeText(new Uint8Array(e))}var p=JSON.parse(h);if(void 0===p.asset||p.asset.version[0]<2)return void(c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")));if(p.extensionsUsed)for(var m=0;m<p.extensionsUsed.length;++m){var v=p.extensionsUsed[m],g=p.extensionsRequired||[];switch(v){case T.KHR_LIGHTS_PUNCTUAL:d[v]=new r(p);break;case T.KHR_MATERIALS_UNLIT:d[v]=new o(p);break;case T.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:d[v]=new u;break;case T.KHR_DRACO_MESH_COMPRESSION:d[v]=new s(p,this.dracoLoader);break;case T.MSFT_TEXTURE_DDS:d[T.MSFT_TEXTURE_DDS]=new n;break;default:g.indexOf(v)}}var y=new S(p,d,{path:t||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});y.parse(function(e,t,n,i,r){var o={scene:e,scenes:t,cameras:n,animations:i,asset:r.asset,parser:y,userData:{}};f(d,o,r),l(o)},c)}};var T={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};o.prototype.getMaterialType=function(e){return i.MeshBasicMaterial},o.prototype.extendParams=function(e,t,n){var r=[];e.color=new i.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==o.baseColorTexture&&r.push(n.assignTexture(e,"map",o.baseColorTexture.index))}return Promise.all(r)};var A="glTF",C=12,P={JSON:1313821514,BIN:5130562};s.prototype.decodePrimitive=function(e,t){var n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(var l in o)l in N&&(a[N[l]]=o[l]);for(l in e.attributes)if(void 0!==N[l]&&void 0!==o[l]){var c=n.accessors[e.attributes[l]],h=L[c.componentType];u[N[l]]=h,s[N[l]]=!0===c.normalized}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t){i.decodeDracoFile(e,function(e){for(var n in e.attributes){var i=e.attributes[n],r=s[n];void 0!==r&&(i.normalized=r)}t(e)},a,u)})})},l.prototype=Object.create(i.Interpolant.prototype),l.prototype.constructor=l,l.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i,o=0;o!==i;o++)t[o]=n[r+o];return t},l.prototype.beforeStart_=l.prototype.copySampleValue_,l.prototype.afterEnd_=l.prototype.copySampleValue_,l.prototype.interpolate_=function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,l=i-t,c=(n-t)/l,h=c*c,f=h*c,d=e*u,p=d-u,m=2*f-3*h+1,v=f-2*h+c,g=-2*f+3*h,y=f-h,b=0;b!==a;b++){var _=o[p+b+a],w=o[p+b+s]*l,x=o[d+b+a],M=o[d+b]*l;r[b]=m*_+v*w+g*x+y*M}return r};var O={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},L=(Number,i.Matrix3,i.Matrix4,i.Vector2,i.Vector3,i.Vector4,i.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),k={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipMapNearestFilter,9985:i.LinearMipMapNearestFilter,9986:i.NearestMipMapLinearFilter,9987:i.LinearMipMapLinearFilter},I={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},R=(i.BackSide,i.FrontSide,i.NeverDepth,i.LessDepth,i.EqualDepth,i.LessEqualDepth,i.GreaterEqualDepth,i.NotEqualDepth,i.GreaterEqualDepth,i.AlwaysDepth,i.AddEquation,i.SubtractEquation,i.ReverseSubtractEquation,i.ZeroFactor,i.OneFactor,i.SrcColorFactor,i.OneMinusSrcColorFactor,i.SrcAlphaFactor,i.OneMinusSrcAlphaFactor,i.DstAlphaFactor,i.OneMinusDstAlphaFactor,i.DstColorFactor,i.OneMinusDstColorFactor,i.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),N={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},D={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},F={CUBICSPLINE:i.InterpolateSmooth,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},U={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},j={"image/png":i.RGBAFormat,"image/jpeg":i.RGBFormat};return S.prototype.parse=function(e,t){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var i=t.scenes||[],r=i[n.scene||0],o=t.animations||[],a=t.cameras||[];e(r,i,a,o,n)}).catch(t)},S.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i={},r={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,u=0,l=s.length;u<l;u++)e[s[u]].isBone=!0;for(var c=0,h=e.length;c<h;c++){var f=e[c];void 0!==f.mesh&&(void 0===i[f.mesh]&&(i[f.mesh]=r[f.mesh]=0),i[f.mesh]++,void 0!==f.skin&&(n[f.mesh].isSkinnedMesh=!0))}this.json.meshReferences=i,this.json.meshUses=r},S.prototype.getDependency=function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this.loadMesh(t);break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this.loadBufferView(t);break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this.loadMaterial(t);break;case"texture":i=this.loadTexture(t);break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i},S.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t},S.prototype.getMultiDependencies=function(e){for(var t={},n=[],i=0,r=e.length;i<r;i++){var o=e[i],a=this.getDependencies(o);a=a.then(function(e,n){t[e]=n}.bind(this,o+("mesh"===o?"es":"s"))),n.push(a)}return Promise.all(n).then(function(){return t})},S.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[T.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(e,r){n.load(c(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},S.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})},S.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return null;var o=[];return void 0!==r.bufferView?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(e){var o,a,s=e[0],u=R[r.type],l=L[r.componentType],c=l.BYTES_PER_ELEMENT,h=c*u,f=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(d&&d!==h){var m="InterleavedBuffer:"+r.bufferView+":"+r.componentType,v=t.cache.get(m);v||(o=new l(s),v=new i.InterleavedBuffer(o,d/c),t.cache.add(m,v)),a=new i.InterleavedBufferAttribute(v,u,f/c,p)}else o=null===s?new l(r.count*u):new l(s,f,r.count*u),a=new i.BufferAttribute(o,u,p);if(void 0!==r.sparse){var g=R.SCALAR,y=L[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,_=r.sparse.values.byteOffset||0,w=new y(e[1],b,r.sparse.count*g),x=new l(e[2],_,r.sparse.count*u);null!==s&&a.setArray(a.array.slice());for(var M=0,S=w.length;M<S;M++){var E=w[M];if(a.setX(E,x[M*u]),u>=2&&a.setY(E,x[M*u+1]),u>=3&&a.setZ(E,x[M*u+2]),u>=4&&a.setW(E,x[M*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})},S.prototype.loadTexture=function(e){var t,n=this,r=this.json,o=this.options,a=this.textureLoader,s=window.URL||window.webkitURL,u=r.textures[e],l=u.extensions||{};t=l[T.MSFT_TEXTURE_DDS]?r.images[l[T.MSFT_TEXTURE_DDS].source]:r.images[u.source];var h=t.uri,f=!1;return void 0!==t.bufferView&&(h=n.getDependency("bufferView",t.bufferView).then(function(e){f=!0;var n=new Blob([e],{type:t.mimeType});return h=s.createObjectURL(n)})),Promise.resolve(h).then(function(e){var t=i.Loader.Handlers.get(e);return t||(t=l[T.MSFT_TEXTURE_DDS]?n.extensions[T.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise(function(n,i){t.load(c(e,o.path),n,void 0,i)})}).then(function(e){!0===f&&s.revokeObjectURL(h),e.flipY=!1,void 0!==u.name&&(e.name=u.name),t.mimeType in j&&(e.format=j[t.mimeType]);var n=r.samplers||{},o=n[u.sampler]||{};return e.magFilter=k[o.magFilter]||i.LinearFilter,e.minFilter=k[o.minFilter]||i.LinearMipMapLinearFilter,e.wrapS=I[o.wrapS]||i.RepeatWrapping,e.wrapT=I[o.wrapT]||i.RepeatWrapping,e})},S.prototype.assignTexture=function(e,t,n){return this.getDependency("texture",n).then(function(n){e[t]=n})},S.prototype.loadMaterial=function(e){var t,n=this,r=this.json,o=this.extensions,a=r.materials[e],s={},u=a.extensions||{},l=[];if(u[T.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=o[T.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(a),l.push(c.extendParams(s,a,n))}else if(u[T.KHR_MATERIALS_UNLIT]){var h=o[T.KHR_MATERIALS_UNLIT];t=h.getMaterialType(a),l.push(h.extendParams(s,a,n))}else{t=i.MeshStandardMaterial;var p=a.pbrMetallicRoughness||{};if(s.color=new i.Color(1,1,1),s.opacity=1,Array.isArray(p.baseColorFactor)){var m=p.baseColorFactor;s.color.fromArray(m),s.opacity=m[3]}if(void 0!==p.baseColorTexture&&l.push(n.assignTexture(s,"map",p.baseColorTexture.index)),s.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,s.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture){var v=p.metallicRoughnessTexture.index;l.push(n.assignTexture(s,"metalnessMap",v)),l.push(n.assignTexture(s,"roughnessMap",v))}}!0===a.doubleSided&&(s.side=i.DoubleSide);var g=a.alphaMode||U.OPAQUE;return g===U.BLEND?s.transparent=!0:(s.transparent=!1,g===U.MASK&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==i.MeshBasicMaterial&&(l.push(n.assignTexture(s,"normalMap",a.normalTexture.index)),s.normalScale=new i.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==i.MeshBasicMaterial&&(l.push(n.assignTexture(s,"aoMap",a.occlusionTexture.index)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==i.MeshBasicMaterial&&(s.emissive=(new i.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==i.MeshBasicMaterial&&l.push(n.assignTexture(s,"emissiveMap",a.emissiveTexture.index)),Promise.all(l).then(function(){var e;return e=t===i.ShaderMaterial?o[T.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==a.name&&(e.name=a.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=i.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=i.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=i.sRGBEncoding),d(e,a),a.extensions&&f(o,e,a),e})},S.prototype.loadGeometries=function(e){var t,n=this,r=this.extensions,o=this.primitiveCache,a=M(e);return a&&(t=e,e=[e[0]]),this.getDependencies("accessor").then(function(s){for(var u=[],l=0,c=e.length;l<c;l++){var h=e[l],f=b(o,h);if(f)u.push(f);else if(h.extensions&&h.extensions[T.KHR_DRACO_MESH_COMPRESSION]){var d=r[T.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,n).then(function(e){return E(e,h,s),e});o.push({primitive:h,promise:d}),u.push(d)}else{var p=new i.BufferGeometry;E(p,h,s);var d=Promise.resolve(p);o.push({primitive:h,promise:d}),u.push(d)}}return Promise.all(u).then(function(r){if(a){var o=r[0],u=n.multiPassGeometryCache,l=w(u,o,t);if(null!==l)return[l.geometry];var c=new i.BufferGeometry;c.name=o.name,c.userData=o.userData;for(var h in o.attributes)c.addAttribute(h,o.attributes[h]);for(var h in o.morphAttributes)c.morphAttributes[h]=o.morphAttributes[h];for(var f=[],d=0,p=0,m=t.length;p<m;p++){for(var v=s[t[p].indices],g=0,y=v.count;g<y;g++)f.push(v.array[g]);c.addGroup(d,v.count,p),d+=v.count}return c.setIndex(f),u.push({geometry:c,baseGeometry:o,primitives:t}),[c]}if(r.length>1&&void 0!==i.BufferGeometryUtils){for(var p=1,m=e.length;p<m;p++)if(e[0].mode!==e[p].mode)return r;var u=n.multiplePrimitivesCache,l=_(u,r);if(l){if(null!==l.geometry)return[l.geometry]}else{var c=i.BufferGeometryUtils.mergeBufferGeometries(r,!0);if(u.push({geometry:c,baseGeometries:r}),null!==c)return[c]}}return r})})},S.prototype.loadMesh=function(e){var t=this,n=this.json,r=this.extensions,o=n.meshes[e];return this.getMultiDependencies(["accessor","material"]).then(function(n){for(var a=o.primitives,s=[],u=0,l=a.length;u<l;u++)s[u]=void 0===a[u].material?h():n.materials[a[u].material];return t.loadGeometries(a).then(function(n){for(var u=1===n.length&&n[0].groups.length>0,l=[],c=0,h=n.length;c<h;c++){var f,p=n[c],v=a[c],g=u?s:s[c];if(v.mode===O.TRIANGLES||v.mode===O.TRIANGLE_STRIP||v.mode===O.TRIANGLE_FAN||void 0===v.mode)f=!0===o.isSkinnedMesh?new i.SkinnedMesh(p,g):new i.Mesh(p,g),v.mode===O.TRIANGLE_STRIP?f.drawMode=i.TriangleStripDrawMode:v.mode===O.TRIANGLE_FAN&&(f.drawMode=i.TriangleFanDrawMode);else if(v.mode===O.LINES)f=new i.LineSegments(p,g);else if(v.mode===O.LINE_STRIP)f=new i.Line(p,g);else if(v.mode===O.LINE_LOOP)f=new i.LineLoop(p,g);else{if(v.mode!==O.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);f=new i.Points(p,g)}Object.keys(f.geometry.morphAttributes).length>0&&m(f,o),f.name=o.name||"mesh_"+e,n.length>1&&(f.name+="_"+c),d(f,o),l.push(f);for(var y=u?f.material:[f.material],b=void 0!==p.attributes.color,_=void 0===p.attributes.normal,w=!0===f.isSkinnedMesh,x=Object.keys(p.morphAttributes).length>0,M=x&&void 0!==p.morphAttributes.normal,S=0,E=y.length;S<E;S++){var g=y[S];if(f.isPoints){var A="PointsMaterial:"+g.uuid,C=t.cache.get(A);C||(C=new i.PointsMaterial,i.Material.prototype.copy.call(C,g),C.color.copy(g.color),C.map=g.map,C.lights=!1,t.cache.add(A,C)),g=C}else if(f.isLine){var A="LineBasicMaterial:"+g.uuid,P=t.cache.get(A);P||(P=new i.LineBasicMaterial,i.Material.prototype.copy.call(P,g),P.color.copy(g.color),P.lights=!1,t.cache.add(A,P)),g=P}if(b||_||w||x){var A="ClonedMaterial:"+g.uuid+":";g.isGLTFSpecularGlossinessMaterial&&(A+="specular-glossiness:"),w&&(A+="skinning:"),b&&(A+="vertex-colors:"),_&&(A+="flat-shading:"),x&&(A+="morph-targets:"),M&&(A+="morph-normals:");var L=t.cache.get(A);L||(L=g.isGLTFSpecularGlossinessMaterial?r[T.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(g):g.clone(),w&&(L.skinning=!0),b&&(L.vertexColors=i.VertexColors),_&&(L.flatShading=!0),x&&(L.morphTargets=!0),M&&(L.morphNormals=!0),t.cache.add(A,L)),g=L}y[S]=g,g.aoMap&&void 0===p.attributes.uv2&&void 0!==p.attributes.uv&&p.addAttribute("uv2",new i.BufferAttribute(p.attributes.uv.array,2)),g.isGLTFSpecularGlossinessMaterial&&(f.onBeforeRender=r[T.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}f.material=u?y:y[0]}if(1===l.length)return l[0];for(var k=new i.Group,c=0,h=l.length;c<h;c++)k.add(l[c]);return k})})},S.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new i.PerspectiveCamera(i.Math.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new i.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==n.name&&(t.name=n.name),d(t,n),Promise.resolve(t)},S.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},S.prototype.loadAnimation=function(e){var t=this.json,n=t.animations[e];return this.getMultiDependencies(["accessor","node"]).then(function(t){for(var r=[],o=0,a=n.channels.length;o<a;o++){var s=n.channels[o],u=n.samplers[s.sampler];if(u){var c=s.target,h=void 0!==c.node?c.node:c.id,f=void 0!==n.parameters?n.parameters[u.input]:u.input,d=void 0!==n.parameters?n.parameters[u.output]:u.output,p=t.accessors[f],m=t.accessors[d],v=t.nodes[h];if(v){v.updateMatrix(),v.matrixAutoUpdate=!0;var g;switch(D[c.path]){case D.weights:g=i.NumberKeyframeTrack;break;case D.rotation:g=i.QuaternionKeyframeTrack;break;case D.position:case D.scale:default:g=i.VectorKeyframeTrack}var y=v.name?v.name:v.uuid,b=void 0!==u.interpolation?F[u.interpolation]:i.InterpolateLinear,_=[];D[c.path]===D.weights?v.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&_.push(e.name?e.name:e.uuid)}):_.push(y);for(var w=0,x=_.length;w<x;w++){var M=new g(_[w]+"."+D[c.path],i.AnimationUtils.arraySlice(p.array,0),i.AnimationUtils.arraySlice(m.array,0),b);"CUBICSPLINE"===u.interpolation&&(M.createInterpolant=function(e){return new l(this.times,this.values,this.getValueSize()/3,e)},M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),r.push(M)}}}}var h=void 0!==n.name?n.name:"animation_"+e;return new i.AnimationClip(h,void 0,r)})},S.prototype.loadNode=function(e){var t=this.json,n=this.extensions,r=t.meshReferences,o=t.meshUses,a=t.nodes[e];return this.getMultiDependencies(["mesh","skin","camera","light"]).then(function(e){var t;if(!0===a.isBone)t=new i.Bone;else if(void 0!==a.mesh){var s=e.meshes[a.mesh];if(r[a.mesh]>1){var u=o[a.mesh]++;t=s.clone(),t.name+="_instance_"+u,t.onBeforeRender=s.onBeforeRender;for(var l=0,c=t.children.length;l<c;l++)t.children[l].name+="_instance_"+u,t.children[l].onBeforeRender=s.children[l].onBeforeRender}else t=s}else if(void 0!==a.camera)t=e.cameras[a.camera];else if(a.extensions&&a.extensions[T.KHR_LIGHTS_PUNCTUAL]&&void 0!==a.extensions[T.KHR_LIGHTS_PUNCTUAL].light){var h=n[T.KHR_LIGHTS_PUNCTUAL].lights;t=h[a.extensions[T.KHR_LIGHTS_PUNCTUAL].light]}else t=new i.Object3D;if(void 0!==a.name&&(t.name=i.PropertyBinding.sanitizeNodeName(a.name)),d(t,a),a.extensions&&f(n,t,a),void 0!==a.matrix){var p=new i.Matrix4;p.fromArray(a.matrix),t.applyMatrix(p)}else void 0!==a.translation&&t.position.fromArray(a.translation),void 0!==a.rotation&&t.quaternion.fromArray(a.rotation),void 0!==a.scale&&t.scale.fromArray(a.scale);return t})},S.prototype.loadScene=function(){function e(t,n,r,o,a){var s=o[t],u=r.nodes[t];if(void 0!==u.skin)for(var l=!0===s.isGroup?s.children:[s],c=0,h=l.length;c<h;c++){for(var f=l[c],d=a[u.skin],p=[],m=[],v=0,g=d.joints.length;v<g;v++){var y=d.joints[v],b=o[y];if(b){p.push(b);var _=new i.Matrix4;void 0!==d.inverseBindMatrices&&_.fromArray(d.inverseBindMatrices.array,16*v),m.push(_)}}f.bind(new i.Skeleton(p,m),f.matrixWorld)}if(n.add(s),u.children)for(var w=u.children,c=0,h=w.length;c<h;c++){var x=w[c];e(x,s,r,o,a)}}return function(t){var n=this.json,r=this.extensions,o=this.json.scenes[t];return this.getMultiDependencies(["node","skin"]).then(function(t){var a=new i.Scene;void 0!==o.name&&(a.name=o.name),d(a,o),o.extensions&&f(r,a,o);for(var s=o.nodes||[],u=0,l=s.length;u<l;u++)e(s[u],a,n,t.nodes,t.skins);return a})}}(),e}();e.exports=r},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(){return(new Date).getTime()}function o(e){var t=e.fn,n=e.args;t.apply(void 0,i(n))}function a(){0!==d.size&&(d.forEach(o),d.clear())}function s(){var e=r();if(f.forEach(v(e)),a(),0===f.size)return void(p=!1);(0,h.default)(s)}function u(e){var t=e.fn,n=e.ms,i=void 0===n?0:n,o=e.args,a=e.mode;if(!t)return null;var u=m;return f.set(u,{fn:t,ms:i,nextTick:r()+i,args:o,mode:a}),p||(p=!0,(0,h.default)(s)),m+=1,u}function l(e){f.has(e)&&f.delete(e),0===f.size&&(p=!1)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(243),h=function(e){return e&&e.__esModule?e:{default:e}}(c),f=new Map,d=new Set,p=!1,m=0,v=function(e){return function(t,n){var i=t.nextTick,r=t.ms,o=t.mode;e-i>=0&&(d.add(t),0===o?f.delete(n):f.set(n,Object.assign({},t,{nextTick:i+r})))}};t.default={setTimeout:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];return u({fn:e,ms:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,args:n,mode:0})},clearTimeout:l,setInterval:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];return u({fn:e,ms:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,args:n,mode:1})},clearInterval:l}},function(e,t,n){(function(t){for(var i=n(244),r="undefined"===typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=r["request"+a],u=r["cancel"+a]||r["cancelRequest"+a],l=0;!s&&l<o.length;l++)s=r[o[l]+"Request"+a],u=r[o[l]+"Cancel"+a]||r[o[l]+"CancelRequest"+a];if(!s||!u){var c=0,h=0,f=[];s=function(e){if(0===f.length){var t=i(),n=Math.max(0,1e3/60-(t-c));c=n+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return f.push({handle:++h,callback:e,cancelled:!1}),h},u=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}e.exports=function(e){return s.call(r,e)},e.exports.cancel=function(){u.apply(r,arguments)},e.exports.polyfill=function(e){e||(e=r),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}}).call(t,n(42))},function(e,t,n){(function(t){(function(){var n,i,r,o,a,s;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},i=t.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},o=n(),s=1e9*t.uptime(),a=o-s):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(t,n(55))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(87),u=n(88),l=n(89),c=n(90),h=i(c),f=n(93),d=i(f),p=function(){function e(t,n){r(this,e),this.geometry=t,this.name=n,(0,u.unindexBufferGeometry)(t),(0,l.addBarycentricCoordinates)(t),t.computeBoundingBox(),this.center=t.boundingBox.getCenter(new a.Vector3),this.size=t.boundingBox.getSize(new a.Vector3),this.timer=null,this.state={isVisible:!1,isActive:!1,isHovered:!1},this.el=new a.Mesh(t,d.default.mat),this.el.userData.name=n,this.el.userData.type="muscle",this.el.renderOrder=100,this.el.onBeforeRender=function(e){return e.clearDepth()},this.el.visible=this.state.isVisible}return o(e,[{key:"setState",value:function(e){var t=e.isVisible,n=void 0===t?this.state.isVisible:t,i=e.isActive,r=void 0===i?this.state.isActive:i,o=e.isHovered,a=void 0===o?this.state.isHovered:o;n!==this.state.isVisible&&(this.state.isVisible=n,n?this.show():this.hide()),r!==this.state.isActive&&(this.state.isActive=r,r?this.setActive():this.setInactive()),a!==this.state.isHovered&&(this.state.isHovered=a,a?this.setActive():this.setInactive())}},{key:"show",value:function(){this.el.visible=!0}},{key:"hide",value:function(){var e=this;(0,s.clearTimeout)(this.timer),this.timer=(0,s.setTimeout)(function(){return e.el.visible=!1},500)}},{key:"setActive",value:function(){this.el.material=h.default.mat}},{key:"setInactive",value:function(){this.el.material=d.default.mat}}]),e}();t.default=p},function(e,t){e.exports="#define GLSLIFY 1\nvarying float vReflectionFactor;\nvarying float vOffset;\nvarying vec3 vBarycentric;\n\nattribute vec3 barycentric;\n\nuniform float fresnelBias;\nuniform float fresnelScale;\nuniform float fresnelPower;\nuniform float step;\nuniform float height;\nuniform float fade;\n\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\n    vec3 I = worldPosition.xyz - cameraPosition;\n\n    vOffset = 1.0;\n\n    if(step < 1.0) {\n        float range = height * 0.1;\n        float offsetHeight = height + range * 2.0;\n        float stepPos = step * offsetHeight - range;\n        float offsetDistance = (position.y - stepPos) / range;\n        float offset = (1.0 - offsetDistance) - 0.5;\n        vOffset = offset;\n    }\n\n    vBarycentric = barycentric;\n\n    vReflectionFactor = fresnelBias + fresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), fresnelPower );\n\n    gl_Position = projectionMatrix * mvPosition;\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying float vReflectionFactor;\nvarying float vOffset;\nvarying vec3 vBarycentric;\n\nuniform vec3 color;\nuniform float baseOpacity;\nuniform float step;\nuniform float wireframeOpacity;\n\nfloat edgeFactor(){\n    vec3 d = fwidth(vBarycentric);\n    vec3 a3 = smoothstep(vec3(0.0), d*1.25, vBarycentric);\n    return min(min(a3.x, a3.y), a3.z);\n}\n\nvoid main() {\n    float edge = 1.0 - edgeFactor();\n    vec3 wireframeColor = color * edge;\n\n    vec3 fresnelColor = color.rgb * vReflectionFactor;\n    gl_FragColor = vec4(mix(fresnelColor,wireframeColor,wireframeOpacity), baseOpacity * vOffset);\n}\n"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(16),u=i(s),l=n(249),c=i(l),h=n(250),f=i(h),d=function(){function e(){r(this,e),this.tween=null,this.mat=new a.ShaderMaterial({extensions:{derivatives:!0},uniforms:{color:{value:new a.Color(1,0,0)},height:{value:0},baseOpacity:{value:.75},step:{value:0}},vertexShader:c.default,fragmentShader:f.default,blending:a.AdditiveBlending,transparent:!0})}return o(e,[{key:"show",value:function(e){var t=this;this.tween&&this.tween.stop(),this.tween=new u.default.Tween({step:0}).to({step:1},3e3).easing(u.default.Easing.Cubic.Out).onUpdate(function(e){var n=e.step;t.mat.uniforms.step.value=n}).onComplete(function(){e&&e()}).start()}},{key:"hide",value:function(){this.mat.uniforms.step.value=0}},{key:"reset",value:function(){this.tween&&this.tween.stop(),this.mat.uniforms.step.value=0}},{key:"height",set:function(e){this.mat.uniforms.height.value=e}}]),e}();t.default=new d},function(e,t){e.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_1_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1_1(vec4 x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_1_3(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_1_4 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_1_5 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_1_5;\n  vec3 i1 = min( g_1_5.xyz, l.zxy );\n  vec3 i2 = max( g_1_5.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_1_4.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_1_0(i);\n  vec4 p = permute_1_1( permute_1_1( permute_1_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_1_4.wyz - D_1_4.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_1_6 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_1_7 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_1_6.xy,h.z);\n  vec3 p3 = vec3(a1_1_6.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_1_2(vec4(dot(p0_1_7,p0_1_7), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_1_7 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_1_7,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n\nfloat blendScreen_2_8(float base, float blend) {\n\treturn 1.0-((1.0-base)*(1.0-blend));\n}\n\nvec3 blendScreen_2_8(vec3 base, vec3 blend) {\n\treturn vec3(blendScreen_2_8(base.r,blend.r),blendScreen_2_8(base.g,blend.g),blendScreen_2_8(base.b,blend.b));\n}\n\nvec3 blendScreen_2_8(vec3 base, vec3 blend, float opacity) {\n\treturn (blendScreen_2_8(base, blend) * opacity + base * (1.0 - opacity));\n}\n\n\n\nattribute vec3 barycentric;\n\nvarying float vOffset;\nvarying vec3 vBarycentric;\n\nuniform float height;\nuniform float step;\n\nvoid main() {\n    vBarycentric = barycentric;\n\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n    vOffset = 0.0;\n\n    if(step < 1.0) {\n        float noise = snoise_1_3(position * 0.2 + step * 3.0);\n        float range = height * 0.1;\n        float offsetHeight = height + range * 2.0;\n        float stepPos = step * offsetHeight - range;\n        float offsetDistance = (position.y - stepPos) / range;\n        float offset = 1.0 - abs(offsetDistance);\n        vOffset = offset < 0.0 ? 0.0 : blendScreen_2_8(offset , noise);\n    }\n\n\n    gl_Position = projectionMatrix * mvPosition;\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying float vOffset;\nvarying vec3 vBarycentric;\n\nuniform vec3 color;\nuniform float baseOpacity;\n\nfloat edgeFactor(){\n    vec3 d = fwidth(vBarycentric);\n    vec3 a3 = smoothstep(vec3(0.0), d * 1.0, vBarycentric);\n    return min(min(a3.x, a3.y), a3.z);\n}\n\nvoid main() {\n    float a = 1.0 - edgeFactor();\n    vec3 wireframeColor = color.rgb * a;\n    gl_FragColor = vec4(wireframeColor, vOffset * baseOpacity);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),a=n(16),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u="#debug"===window.location.hash,l=function(){function e(t,n,r,a){if(i(this,e),this.isAnimating=!1,this.scene=n,this.camera=t,this.offset=new o.Vector2,this.pointer=new o.Vector2,this.pointerLast=new o.Vector2,this.pointerDelta=new o.Vector2,this.rotation=new o.Vector2,this.rotationLast=new o.Vector2,this.position=a.clone(),this.startPosition=a.clone(),this.lookAt=a.clone(),this.startLookAt=a.clone(),this.sub=new o.Vector3,this.sub.subVectors(r,a),this.spherical=new o.Spherical,this.sphericalDelta=new o.Spherical,this.spherical.setFromVector3(this.sub),this.sphericalDelta.copy(this.spherical),this.el=new o.Object3D,this.rotationTarget=new o.Object3D,this.camDistance=this.sub.length(),this.camera.rotation.set(0,Math.PI,0),this.camera.position.z=-1*this.camDistance,this.el.position.copy(r),this.el.lookAt(a),this.el.position.copy(a),this.quaternion=new o.Quaternion,this.startQuaternion=new o.Quaternion,this.endQuaternion=new o.Quaternion,this.endQuaternion.copy(this.el.quaternion),this.scene.add(this.rotationTarget),u){this.camera.rotation.set(0,0,0),this.camera.position.set(0,150,150),this.rotationTarget.add(new o.Mesh(new o.BoxGeometry(20,20,20),new o.MeshBasicMaterial({color:8921702,wireframe:!0})));var s=new o.Mesh(new o.BoxGeometry(1,1,100),new o.MeshBasicMaterial({color:8978176,wireframe:!0})),l=new o.Mesh(new o.BoxGeometry(5,5,5),new o.MeshBasicMaterial({color:65280,wireframe:!0}));this.el.add(l),this.el.add(s),this.camera=l,this.camera.position.z=-100,this.sphere=new o.Mesh(new o.SphereGeometry(100,64,64),new o.MeshBasicMaterial({color:5592405,wireframe:!0})),this.scene.add(this.sphere),this.lookAtMesh=new o.Mesh(new o.BoxGeometry(5,5,5),new o.MeshBasicMaterial({color:48127,wireframe:!0})),this.scene.add(this.lookAtMesh),this.middlePoint=new o.Mesh(new o.BoxGeometry(50,50,5),new o.MeshBasicMaterial({color:12255487,wireframe:!0})),this.scene.add(this.middlePoint)}this.el.add(this.camera),this.scene.add(this.el)}return r(e,[{key:"flyTo",value:function(e,t,n){var i=this;this.isAnimating=!0,this.sub.subVectors(e,t),this.startPosition.copy(this.position),this.startQuaternion.copy(this.quaternion),this.startLookAt.copy(this.lookAt);var r=this.camDistance,a=this.sub.length();this.el.position.copy(e),this.el.lookAt(t),this.endQuaternion.copy(this.el.quaternion),this.el.position.copy(this.startPosition),this.el.quaternion.copy(this.quaternion),this.tween&&this.tween.stop(),this.tween=new s.default.Tween({elapsed:0}).to({elapsed:1},2e3).easing(s.default.Easing.Cubic.InOut).onUpdate(function(e){var n=e.elapsed;i.lookAt.lerpVectors(i.startLookAt,t,n),i.position.lerpVectors(i.startPosition,t,n),o.Quaternion.slerp(i.startQuaternion,i.endQuaternion,i.quaternion,n),i.camDistance=o.Math.lerp(r,a,n)}).onComplete(function(){i.offset.x=0,i.offset.y=0,i.rotation.x=0,i.rotation.y=0,i.spherical.setFromVector3(i.sub),i.sphericalDelta.copy(i.spherical),i.isAnimating=!1,n&&n()}).start()}},{key:"pointerStart",value:function(e){this.pointerDown=!0,this.pointerDelta.x=0,this.pointerDelta.y=0,this.rotationLast.copy(this.rotation),this.pointerLast.copy(e)}},{key:"pointerEnd",value:function(){this.pointerDown=!1}},{key:"pointerMove",value:function(e){this.pointer.copy(e),this.pointerDown&&(this.pointerDelta.x=this.pointerLast.x-this.pointer.x,this.pointerDelta.y=this.pointerLast.y-this.pointer.y,this.rotation.x=this.rotationLast.x-this.pointerDelta.x,this.rotation.y=Math.max(this.rotationLast.y-this.pointerDelta.y,0))}},{key:"update",value:function(){u&&(this.middlePoint.position.copy(this.position),this.middlePoint.quaternion.copy(this.quaternion)),this.isAnimating?(this.el.position.copy(this.position),this.el.quaternion.copy(this.quaternion),this.camera.position.z=-1*this.camDistance):(this.offset.x=.01*this.pointer.x+.99*this.offset.x,this.offset.y=.01*this.pointer.y+.99*this.offset.y,this.sphericalDelta.theta=this.spherical.theta-this.offset.x+-4*this.rotation.x,this.sphericalDelta.phi=this.spherical.phi+.25*this.offset.y+-.5*this.rotation.y,this.rotationTarget.position.setFromSpherical(this.sphericalDelta),this.rotationTarget.position.add(this.lookAt),this.rotationTarget.lookAt(this.lookAt),this.quaternion.copy(this.rotationTarget.quaternion),this.el.quaternion.copy(this.quaternion))}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=n(253),s=i(a),u=n(254),l=i(u),c=n(255),h=i(c),f=n(256),d=i(f),p=function e(t,n,i,a,u,c,f){r(this,e);for(var p="cross"===t?h.default:d.default,m=new o.ShaderMaterial({uniforms:{texture:{value:(new o.TextureLoader).load(p)}},vertexShader:s.default,fragmentShader:l.default,blending:o.AdditiveBlending,depthTest:!1,transparent:!0,vertexColors:!0}),v=n*u-u,g=a*f-f,y=new o.BufferGeometry,b=[],_=0;_<n;_++)for(var w=u*_,x=0;x<i;x++)for(var M=c*x,S=0;S<a;S++){var E=f*S;b.push(w),b.push(M),b.push(E)}y.addAttribute("position",new o.Float32BufferAttribute(b,3)),this.el=new o.Points(y,m),this.el.position.set(-.5*v,0,-.5*g)};t.default=p},function(e,t){e.exports="#define GLSLIFY 1\nattribute float size;\nvarying vec3 vColor;\n\nvoid main() {\n    vColor = vec3(1.0,1.0,1.0);\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_PointSize = 10.0;\n    gl_Position = projectionMatrix * mvPosition;\n}"},function(e,t){e.exports="#define GLSLIFY 1\nuniform sampler2D texture;\nvarying vec3 vColor;\n\nvoid main() {\n    gl_FragColor = vec4( vColor, 0.25 );\n    gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );\n}"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2UlEQVR4Ae2aQWoDMRDAJiX/Sp+2+VnyMpc99prWSLAS+GgsBD4M9qy1dq9jfc6x2+9rLk4BBA4oBRA4oBRA4IBSAIEDSgEEDigFEDigFEDggFIAgQNKAQQOKAUQOKAUQOCAcp+ZY7PA9x/3bvW7nU8WOw+wc/krUACBA0oBBA4oBRA4oBRA4IBSAIEDSgEEDijnOPzcLHCOtI8P975n5vXPPr/pn+DFKYDAAaUAAgeUAggcUAogcEApgMABpQACB5QCCBxQCiBwQCmAwAGlAAIHlAIIHDhm5gdbC6TwJa692gAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQ4EaWTzUoDUQxGz7S3WBxsF9WFouDC938pFy60i45OUTvtSOQEroIKNhCYZPJ9+b3NOI4ojTpR0w4Z1YOaNsWABE2BmVr0IWgAduo+yUqVNUBz4BRo/Z5JEKBXoAe2fodvTIKpgAVwDqyAM+BEgjfgGVgDT1VVnxVk9lbwLXADXOjDzI/AvfY+W/lOsBJ8B1xZBWZfVt8vkr5nC6VqITJfAtfaIZ1T3+ibi2nqIRZ7bs28qLKirzUmK28mHCmlOpDBaff22VXUnb7emCEPKgkGd9s57aWt1UN88F9n7JAEB1fSu+dc1eaHNa61d3kHNUEeSWT87ZC+EEQLcRhRVkiUFsF/nXJgxnyN/35Mxz1n4APvhHybYUda4gAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(16),u=i(s),l=n(95),c=i(l),h=n(96),f=i(h),d=function(){function e(){r(this,e);var t=new a.LineBasicMaterial({color:16711680,depthTest:!1,transparent:!0,blending:a.AdditiveBlending,opacity:.75});this.tween=null,this.label1=new a.Mesh(new a.PlaneGeometry(6,3),new a.MeshBasicMaterial({map:(new a.TextureLoader).load(c.default),color:16711680,transparent:!0,blending:a.AdditiveBlending,side:a.DoubleSide})),this.label1.scale.set(.4,.4,.4),this.label1.renderOrder=300,this.label1.onBeforeRender=function(e){return e.clearDepth()},this.label2=new a.Mesh(new a.PlaneGeometry(6,3),new a.MeshBasicMaterial({map:(new a.TextureLoader).load(f.default),color:16711680,transparent:!0,blending:a.AdditiveBlending,side:a.DoubleSide})),this.label2.scale.set(.4,.4,.4),this.label1.renderOrder=300,this.label1.onBeforeRender=function(e){return e.clearDepth()};for(var n=new a.BufferGeometry,i=[],o=0;o<144;o++)i.push(0);n.addAttribute("position",new a.Float32BufferAttribute(i,3)),this.lines=new a.LineSegments(n,t),this.label1.renderOrder=300,this.label1.onBeforeRender=function(e){return e.clearDepth()},this.el=new a.Group,this.el.add(this.lines),this.el.add(this.label1),this.el.add(this.label2),this.el.visible=!1}return o(e,[{key:"updatePosition",value:function(e,t,n,i,r,o,a,s,u){e[t+0]=i,e[t+1]=r,e[t+2]=o,e[t+3]=i+n*a,e[t+4]=r,e[t+5]=o,e[t+6]=i,e[t+7]=r,e[t+8]=o,e[t+9]=i,e[t+10]=r+n*s,e[t+11]=o,e[t+12]=i,e[t+13]=r,e[t+14]=o,e[t+15]=i,e[t+16]=r,e[t+17]=o+n*u}},{key:"show",value:function(e,t){var n=this,i=t.x,r=t.y,o=t.z;this.el.visible=!1,this.el.position.set(e.x-.5*i,e.y-.5*r,e.z-.5*o);var a=this.lines.geometry.attributes.position.array,s=0;this.updatePosition(a,s+=18,1,0,0,0,1,1,1),this.updatePosition(a,s+=18,1,i,0,0,-1,1,1),this.updatePosition(a,s+=18,1,i,0,o,-1,1,-1),this.updatePosition(a,s+=18,1,0,0,o,1,1,-1),this.updatePosition(a,s+=18,1,0,r,0,1,-1,1),this.updatePosition(a,s+=18,1,i,r,0,-1,-1,1),this.updatePosition(a,s+=18,1,i,r,o,-1,-1,-1),this.updatePosition(a,s+=18,1,0,r,o,1,-1,-1),this.lines.geometry.attributes.position.needsUpdate=!0,this.label1.position.set(0,r,o),this.label2.position.set(i+1.5,0,o),this.tween&&this.tween.stop(),this.tween=new u.default.Tween({scale:.85}).to({scale:1},750).delay(1250).easing(u.default.Easing.Exponential.Out).onStart(function(){return n.el.visible=!0}).onUpdate(function(e){var t=e.scale;return n.el.scale.set(t,t,t)}).start()}},{key:"hide",value:function(){this.el.visible=!1}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=n(95),u=i(s),l=n(96),c=i(l),h=n(16),f=i(h),d=function(){function e(){r(this,e),this.el=new a.Group,this.tween=null,this.isVisible=!0,this.label1=new a.Mesh(new a.PlaneGeometry(6,3),new a.MeshBasicMaterial({map:(new a.TextureLoader).load(u.default),color:16777215,transparent:!0,side:a.DoubleSide})),this.label1.position.set(27,50,3),this.label2=new a.Mesh(new a.PlaneGeometry(6,3),new a.MeshBasicMaterial({map:(new a.TextureLoader).load(c.default),color:16777215,transparent:!0,side:a.DoubleSide})),this.label2.position.set(-30,145,-3),this.el.add(this.label1),this.el.add(this.label2)}return o(e,[{key:"show",value:function(){var e=this;this.isVisible||(this.isVisible=!0,this.tween&&this.tween.stop(),this.tween=new f.default.Tween({step:0}).to({step:1},250).onUpdate(function(t){var n=t.step;e.label1.material.opacity=n,e.label2.material.opacity=n}).start())}},{key:"hide",value:function(){var e=this;this.isVisible&&(this.isVisible=!1,this.tween&&this.tween.stop(),this.tween=new f.default.Tween({step:1}).to({step:0},250).onUpdate(function(t){var n=t.step;e.label1.material.opacity=n,e.label2.material.opacity=n}).start())}}]),e}();t.default=d},function(e,t){}]);
